1
00:00:00,480 --> 00:00:06,720
Hey, this is Andrew Brown, your Cloud Instructor from ExamPro, and today I'm bringing you another complete study course.

2
00:00:06,720 --> 00:00:10,080
This time it's for the Azure Administrator AZ-104.

3
00:00:10,320 --> 00:00:15,200
So this course was designed to help you pass the exam and achieve a Microsoft-issued certification.

4
00:00:15,360 --> 00:00:18,480
The way we're going to do that is by going through a lecture content.

5
00:00:18,640 --> 00:00:21,920
You're going to be doing follow-alongs within your own Azure account.

6
00:00:22,160 --> 00:00:29,960
And of course, I'm going to provide you with these cheat sheets at summary points within the course, and this is going to really help you pass your exam.

7
00:00:30,040 --> 00:00:39,120
The whole reason we're doing this is so you can prove on your resume in LinkedIn that you have that Azure knowledge so you can get that cloud job or get that promotion you've been looking for.

8
00:00:39,360 --> 00:00:48,960
Just to tell you a little bit about me, I was previously the CTO of multiple education technology companies with 15 years industry experience, five years specializing in the cloud.

9
00:00:49,200 --> 00:00:57,760
I'm recognized by AWS as a community hero, and I've published multiple free cloud certifications just like this one in other cloud topics.

10
00:00:58,000 --> 00:00:59,960
And if you want to know something personal, I love starting

11
00:01:00,040 --> 00:01:01,840
Star Trek and Coconut Water.

12
00:01:02,160 --> 00:01:10,960
So I just want you to know that these free video cloud certification courses is made possible by viewers like you, and I strongly thank you for your support.

13
00:01:11,120 --> 00:01:20,240
If you're looking for a way to support more of these free cloud certification courses, the best ways to buy your extra study materials over at exampro.co.

14
00:01:20,240 --> 00:01:25,440
And specifically for this course, it's exampro.co/az104.

15
00:01:25,840 --> 00:01:29,960
And on the platform, you'll get access to study notes, flashcards, Quizlet,

16
00:01:30,400 --> 00:01:35,200
downloadable cheat sheets, practice exams, and you'll be able to ask questions and get learning support.

17
00:01:35,520 --> 00:01:46,400
And if you're looking to keep up to date on the upcoming courses, because I'm always making new free courses, what I want you to do is follow me on Twitter, and I would love to hear from you.

18
00:01:46,400 --> 00:01:56,720
So whether you've passed your exam, you want to tell me what course you want to see next, or you just really like my cloud memes, because I'm known for making fun cloud memes as well, I'd love to see you there.

19
00:01:56,720 --> 00:01:59,360
So there you go, and let's just jump into the course now.

20
00:02:04,960 --> 00:02:12,080
Hey, this is Angie Brown from Exam Pro, and we are at the start of our journey for the Azure Administrator, asking the most important question: What is the AZ-104?

21
00:02:12,080 --> 00:02:19,120
So, this certification is for system administrators, or those looking to become system administrators for Azure workloads.

22
00:02:19,760 --> 00:02:26,640
And this certification will demonstrate a person can manage, configure devices, users, permissions, general computing, cloud storage, and cloud networking.

23
00:02:26,960 --> 00:02:29,920
And those are basically all the core services.

24
00:02:29,920 --> 00:02:32,960
So this is a very general certification at the associate level.

25
00:02:33,200 --> 00:02:38,880
The certification is referred to by its course code, the AZ-104, and that is what I'll be calling it throughout this course.

26
00:02:39,120 --> 00:02:43,840
And if you've taken the AZ-900, this is what people generally will take right after that certification.

27
00:02:44,080 --> 00:02:48,880
And usually after this AZ-104, they usually go for the AZ-303.

28
00:02:49,040 --> 00:02:49,640
The solutions are

29
00:02:49,720 --> 00:02:50,240
architect.

30
00:02:50,560 --> 00:02:56,200
The certification is ideal for those seeking a role that is more configuration-based than having to write computer code.

31
00:02:56,200 --> 00:03:03,120
So if you do not fancy yourself a developer or you think that's just not the skill for you, then maybe this is the certification you want to go after.

32
00:03:03,960 --> 00:03:07,440
Now looking at the Azure roadmap, we have four different categories.

33
00:03:07,440 --> 00:03:09,680
We've got fundamentals, associate, expert, and specialty.

34
00:03:10,000 --> 00:03:13,200
And at the start of your journey, you're always going to want to start with the AZ 900.

35
00:03:13,600 --> 00:03:17,200
No matter what associate you're going for, make sure you get the certification first.

36
00:03:17,440 --> 00:03:20,080
But Azure has a lot of associate level certifications.

37
00:03:20,080 --> 00:03:24,320
It has two expert levels and then three specialties.

38
00:03:24,680 --> 00:03:32,400
Currently, so again, you're going to start with the AZ-900, and then once you have that certification, you get to pick whichever associate you want.

39
00:03:32,400 --> 00:03:36,800
So, if you're looking for a generalized role, the administrator is the most...

40
00:03:38,320 --> 00:03:40,160
ideal certification to take.

41
00:03:40,480 --> 00:03:44,640
And I always say that it's very similar to the AWS Solutions Architect because it's so broad.

42
00:03:45,120 --> 00:03:51,040
And it's no surprise that a lot of people who take the AZ-104 are trying to become a Solutions Architect expert.

43
00:03:51,120 --> 00:03:51,440
Okay?

44
00:03:51,920 --> 00:03:56,080
Now, some people aren't always ready to go to the expert level right off the bat.

45
00:03:56,080 --> 00:04:03,520
And so sometimes I'll recommend either taking the developer or more commonly something that's better paired with this is actually the security certification.

46
00:04:03,840 --> 00:04:05,280
Then people move on to the expert.

47
00:04:05,280 --> 00:04:08,200
And if you're looking to do something afterwards, probably look for

48
00:04:08,720 --> 00:04:15,480
SAP workloads here, which is a high-performance database, so that is the general roadmap for most people with Azure.

49
00:04:15,480 --> 00:04:28,000
If you're not looking for some kind of specialty or you don't know what you're going to do, comparing this to other certifications, so you have AWS and GCP, I just want to compare the difficulty so you can figure out if you've already taken these other ones.

50
00:04:28,880 --> 00:04:32,240
how much time or difficulty we'll compare, right?

51
00:04:32,560 --> 00:04:37,840
So for AWS, I'd say it's two times harder, or compared to the GCP, it's three times harder.

52
00:04:38,080 --> 00:04:47,120
And the reason why Azure associate certifications are so much more difficult than these other cloud providers is just because it focuses a lot more on practical knowledge.

53
00:04:47,600 --> 00:04:49,200
So I'll give you an example.

54
00:04:49,320 --> 00:04:54,960
A question you could see on the exam would be, how do you set up an Azure file share sync?

55
00:04:55,800 --> 00:05:04,000
And you would actually be given a list, and you'd have to choose the, the steps that would need to be formed, and also the correct order.

56
00:05:04,400 --> 00:05:04,760
Right.

57
00:05:04,760 --> 00:05:08,800
And so that's not something you would really see on an AWS or GCP exam.

58
00:05:09,520 --> 00:05:19,440
And so Azure exams are very much focused on whether you are a practitioner, can you actually do it, as opposed to do you know how to effectively use these services?

59
00:05:20,080 --> 00:05:22,880
So that could be good or bad depending on the way you look at it.

60
00:05:23,120 --> 00:05:30,880
I kind of like the latter where I'd rather be more focused on the utility as opposed to the practical knowledge because I feel that you could always...

61
00:05:31,520 --> 00:05:32,560
figure that stuff out.

62
00:05:32,920 --> 00:05:37,760
And this is the purpose of certifications is to give you that broad knowledge so you know how to utilize your services.

63
00:05:37,760 --> 00:05:39,040
But that's just how they do it.

64
00:05:39,040 --> 00:05:41,640
So how long should you study for the AZ-104?

65
00:05:41,640 --> 00:05:45,760
Well, if you have two to three years experience with Azure, it could be as little as 12 hours.

66
00:05:46,000 --> 00:05:49,280
If you only have one year experience, I'm going to recommend to you 30 hours.

67
00:05:49,520 --> 00:05:54,880
And if you've already passed the AZ-900, you're looking at a whopping 60 hours of study.

68
00:05:55,120 --> 00:05:57,680
So that's over 21 days, one to three hours.

69
00:05:57,680 --> 00:05:59,200
So that's three weeks of study.

70
00:05:59,720 --> 00:06:06,960
And generally, this is like a week extra for what I would normally recommend at an associate level certification compared to other clouds.

71
00:06:06,960 --> 00:06:08,480
But this is just how Azure is.

72
00:06:09,200 --> 00:06:11,200
So where do you take the AZ-104?

73
00:06:11,200 --> 00:06:12,440
Well, you have two options.

74
00:06:12,440 --> 00:06:14,000
You can do it in person or online.

75
00:06:14,760 --> 00:06:17,520
And from there, there's two types of test centers that are available to you.

76
00:06:17,760 --> 00:06:20,320
The first one is PSI and the other one is Pearson View.

77
00:06:21,120 --> 00:06:22,240
I've used both of them.

78
00:06:23,200 --> 00:06:28,800
And so I would always recommend if you have the opportunity, always do it in person because if you do it online,

79
00:06:29,640 --> 00:06:42,560
And you might run into a lot of trouble where your computer overheats or you forgot to plug in your laptop, or let's say your proctored person, they lose their connection or you have a connection problem.

80
00:06:42,800 --> 00:06:48,880
So many things can go wrong online, but if you have to do it because of circumstance, that's totally understandable.

81
00:06:49,520 --> 00:06:51,920
But if you can have that controlled environment, it's a lot...

82
00:06:52,320 --> 00:06:55,360
I think you'll do a lot better if you do it in person.

83
00:06:56,240 --> 00:07:02,640
And just so you know, if you see the word proctored, that just means a supervisor, a person who monitors your students during an examination.

84
00:07:02,880 --> 00:07:07,120
So generally people say online proctored exam, that's where that word comes from.

85
00:07:07,680 --> 00:07:09,440
So what does it take to pass this exam?

86
00:07:09,440 --> 00:07:12,560
Well, you're going to be watching lecture videos and memorizing key information.

87
00:07:13,120 --> 00:07:18,560
The second one, I probably should give it a lot more emphasis, but you're going to be doing hands-on labs and follow-ongs within your own Azure account.

88
00:07:19,280 --> 00:07:22,400
Even with my course, I probably don't have enough.

89
00:07:22,400 --> 00:07:22,960
You know what I mean?

90
00:07:22,960 --> 00:07:26,960
Because they're always adding stuff and there's just so many things to do.

91
00:07:27,640 --> 00:07:33,040
And so I'd be making this course for 1000 years, but I will kind of point that out when we get into the exam guide breakdown.

92
00:07:33,280 --> 00:07:37,920
We'll talk about how Azure frequently updates their exams and that's what makes it really hard.

93
00:07:38,560 --> 00:07:42,320
You'll definitely, need to use paid online practice exams.

94
00:07:42,880 --> 00:07:45,400
If you're looking for some, I have one bundled with this course.

95
00:07:45,400 --> 00:07:55,240
So this course, my video content is always free, but I always have additional layered paid content that's here to support the free content that I produce.

96
00:07:55,240 --> 00:08:03,040
So, you know, I strongly recommend that you go out and purchase the paid layered content because it helps me produce more free courses for you.

97
00:08:03,800 --> 00:08:07,120
And also it's just going to increase your odds of passing the exam, okay?

98
00:08:08,440 --> 00:08:17,840
In terms of the content outline, and this is basically the domains of the exam, which we will look in more detail in the next video here, but we have Manage Azure Identities and Governance.

99
00:08:17,840 --> 00:08:19,080
I think that's a spelling mistake.

100
00:08:19,080 --> 00:08:22,160
There shouldn't be an R on there, so please nobody tell me about that.

101
00:08:22,880 --> 00:08:23,600
right here.

102
00:08:23,920 --> 00:08:30,120
And then we have implement and manage storage, deploy and manage Azure compute resources, configure and manage virtual networks.

103
00:08:30,120 --> 00:08:34,880
So notice here we got storage, compute, virtual networking, and this is like IAM, right?

104
00:08:35,200 --> 00:08:37,040
So these are the core services.

105
00:08:37,040 --> 00:08:40,320
The thing I'm surprised is they didn't put databases in here, but that's okay.

106
00:08:41,280 --> 00:08:45,680
So we'll go, oh, and sorry, there's one more, monitor and backup Azure resources.

107
00:08:45,680 --> 00:08:45,960
Okay.

108
00:08:46,000 --> 00:08:48,160
Now the passing grade here is

109
00:08:48,760 --> 00:08:48,800
70%.

110
00:08:48,800 --> 00:08:51,800
So I believe they scored out of 1000 points.

111
00:08:51,800 --> 00:08:53,280
So you got to get 700 more points.

112
00:08:53,360 --> 00:08:57,600
I put an asterisk around here to emphasize that you need to be around that score.

113
00:08:57,600 --> 00:08:59,840
So it's totally possible you could fail with a 70%.

114
00:08:59,840 --> 00:09:02,960
So I always recommend, because it's scaled scoring, right?

115
00:09:03,200 --> 00:09:05,840
So I always recommend that you get at least 75.

116
00:09:05,840 --> 00:09:06,720
That's your target goal.

117
00:09:06,720 --> 00:09:15,760
And so when you're studying, whoops, when you're studying, you're looking to get an 85% on your practice exams, okay, before you do that.

118
00:09:15,760 --> 00:09:18,680
So that hopefully on the real exam, you're going to be, you have

119
00:09:18,760 --> 00:09:19,400
have a buffer of 10%.

120
00:09:19,400 --> 00:09:20,480
All right.

121
00:09:21,680 --> 00:09:24,560
In terms of response types, there are 40 to 60 questions.

122
00:09:24,720 --> 00:09:27,760
So that means you can afford to get about 12 to 18 questions wrong.

123
00:09:28,240 --> 00:09:31,480
I put an asterisk here again because Azure is a bit odd.

124
00:09:31,480 --> 00:09:33,840
They don't have consistency across their questions.

125
00:09:33,920 --> 00:09:37,040
They have a bunch of different question types, which we'll talk about here in a moment.

126
00:09:37,360 --> 00:09:39,360
So some questions are worth more than one point.

127
00:09:39,440 --> 00:09:43,200
There is no penalty for wrong questions, so never leave a question blank.

128
00:09:43,440 --> 00:09:46,000
And there are some cases where you cannot skip questions.

129
00:09:46,400 --> 00:09:51,760
So you might face a part and you just feel really stressed because you want to come back to it, but you just can't.

130
00:09:51,760 --> 00:09:53,440
You've got to do what's in front of you.

131
00:09:53,680 --> 00:09:58,920
In terms of the types of questions, we have multiple choice and multiple answer, which most people are common with.

132
00:09:59,280 --> 00:10:06,080
But what's unique here is we've got drag and drop, hot areas, which is basically concept matching, and case studies.

133
00:10:06,080 --> 00:10:10,240
And case studies is really interesting because what they do is they give you a business scenario.

134
00:10:10,400 --> 00:10:16,080
So they give you a bunch of text to read with a huge breakdown, and then they ask you a series of questions all relating back to that

135
00:10:16,880 --> 00:10:18,080
that case, okay?

136
00:10:18,520 --> 00:10:28,600
And so that's what I mean when I put an asterisk where I say, you can get X amount of questions wrong or there's more than one point because we have these different types and this really throws us a...

137
00:10:28,880 --> 00:10:29,920
for a loop, okay?

138
00:10:30,320 --> 00:10:34,880
In terms of the duration, you have 3 hours, which is a very, very long time to study.

139
00:10:35,360 --> 00:10:40,960
And so, again, take this with a grain of salt, but if it was just multiple choice and multiple answers, that'd be one minute per study.

140
00:10:41,280 --> 00:10:46,000
Your exam time is 180 minutes, but that's not the time that you should allocate.

141
00:10:46,000 --> 00:10:50,360
You should make sure that you are blocking off 210 minutes.

142
00:10:50,360 --> 00:10:52,560
That's just 30 minutes on top of that, because

143
00:10:52,920 --> 00:10:56,240
For your seat time, that means it refers to the time you should allocate for the exam.

144
00:10:56,240 --> 00:11:02,880
So things like time to review the instructions, read and accept the NDA, complete the exam, and provide feedback at the end.

145
00:11:03,040 --> 00:11:06,480
Now, once you get the certification, it's going to be valid for 24 months.

146
00:11:06,480 --> 00:11:08,560
So that's two years before recertification.

147
00:11:08,800 --> 00:11:13,240
And I believe that Azure has some kind of way that you can get recertified for free.

148
00:11:13,240 --> 00:11:16,160
I think they have like some kind of like thing you can do online for that.

149
00:11:16,160 --> 00:11:20,880
So I don't have that slide here today, but maybe I'll add it into the course later.

150
00:11:21,320 --> 00:11:27,760
But I just want you to know that if you do get this, you probably can renew for free, but you'd have to do some kind of a reassessment test or something.

151
00:11:27,760 --> 00:11:29,040
OK, so there you go.

152
00:11:33,320 --> 00:11:38,560
Hey, this is Andy Brown from Exam Pro, and we're taking a look at the Azure Administrator Exam Guide Breakdown.

153
00:11:38,880 --> 00:11:45,280
And so what we're going to do is read the official outline so you can have an understanding of what it is that we need to study.

154
00:11:45,440 --> 00:11:52,800
And also I'll just tell you a little bit about how frequently they update their certifications and how do you kind of like deal with that.

155
00:11:52,800 --> 00:11:57,840
Because when I started producing this course, they've already changed it twice on me.

156
00:11:58,640 --> 00:12:07,920
And so, if this is in the future, I just want to make sure that where to look and so that you can, if you need to self-study or just be aware of what has changed, okay?

157
00:12:08,320 --> 00:12:16,160
So, yeah, I went into Google, I typed in AZ-104, Azure Administrator, I got to this page, scroll on down, and they'll have the skills outline.

158
00:12:16,160 --> 00:12:17,680
So I'll just open that in a new tab.

159
00:12:18,160 --> 00:12:24,000
And if it has at the top, see this red text, it'll say, this document contains skills measured on the exams associated with certification.

160
00:12:24,240 --> 00:12:26,160
It does not include the upcoming or recent changes.

161
00:12:26,320 --> 00:12:28,520
They might as well have red text here all the time, because they always have.

162
00:12:28,640 --> 00:12:28,880
have it.

163
00:12:29,200 --> 00:12:32,560
If you scroll on down, it doesn't show any of the changes.

164
00:12:32,640 --> 00:12:42,160
Okay, so if I make my way back here and you scroll on down, what you'll do is you'll right-click on this, and this one's a lot better, I think.

165
00:12:42,160 --> 00:12:44,800
And if you scroll on down, it looks the same, but it's not.

166
00:12:44,800 --> 00:12:49,600
See, it's pretty darn similar, but see, this is Schedule Exam.

167
00:12:49,840 --> 00:12:54,320
And if you scroll on down here, and we open this new tab here,

168
00:12:56,000 --> 00:13:03,840
We have that red text again, and it tells you the date, so this is March 26th, and if you scroll all the way down, it shows you what has changed, right?

169
00:13:04,240 --> 00:13:12,160
So, what I'm going to do is we'll just use this one as our example, but before we do, I just want to point out that...

170
00:13:12,960 --> 00:13:17,520
Azure has a thing, or sorry, Azure or Microsoft has, it's called Microsoft Learn.

171
00:13:17,800 --> 00:13:19,640
And so they have a lot of free content.

172
00:13:19,920 --> 00:13:24,000
And so, should you go use this content for study?

173
00:13:24,000 --> 00:13:24,400
Sure.

174
00:13:24,720 --> 00:13:26,240
Is it enough to pass the exam?

175
00:13:26,240 --> 00:13:26,640
No.

176
00:13:27,200 --> 00:13:35,920
But the thing is, that when you're doing my course, if for whatever reason I don't have a particular follow along and you're looking for more follow alongs, you might find them in here.

177
00:13:36,400 --> 00:13:39,920
So it doesn't hurt to go through it or just to be able to read it in a different way.

178
00:13:40,160 --> 00:13:42,840
But I'm going to tell you that it really is not enough to

179
00:13:42,920 --> 00:13:48,360
to pass the exam, but it is definitely a good accompaniment to the course that I have here, okay?

180
00:13:48,960 --> 00:13:58,960
So let's go make our way back over to the exam here, and I'm pretty sure, I'm just a bit uncertain here, so I'm just going to open up the original one here, just to make sure that they're the same.

181
00:14:04,080 --> 00:14:05,120
Yeah, it looks like it's fine.

182
00:14:05,120 --> 00:14:06,720
So we'll use the one where they have changes.

183
00:14:07,040 --> 00:14:10,720
So at the top here, we have Manage Azure Identities and Governance.

184
00:14:11,200 --> 00:14:11,920
Actually, what we'll do?

185
00:14:11,920 --> 00:14:14,160
We'll just go down below here because they show them all here.

186
00:14:14,400 --> 00:14:17,600
So this is prior to March 26th, and this is the new updated guide.

187
00:14:17,600 --> 00:14:19,920
This is what I'm going to be focusing here on the right-hand side.

188
00:14:20,160 --> 00:14:23,920
So the first thing, and it's just rewording, but manage Azure Active Directory.

189
00:14:24,160 --> 00:14:32,280
Active Directory is a way for you to manage your users and their permissions with their identities, okay?

190
00:14:32,280 --> 00:14:36,320
So you've got to be able to create user groups, manage user groups and properties, manage device settings.

191
00:14:37,400 --> 00:14:43,280
And this is weird because I feel like device management needs a lot more of a section here.

192
00:14:43,760 --> 00:14:46,960
Like what I was saying, I found that like there was a lot more to it.

193
00:14:46,960 --> 00:14:52,440
And so I made just a section just for this in the course because I just felt like it got glossed over.

194
00:14:52,440 --> 00:14:58,560
Because when I started doing practice exams and then taking my real exam, I was so surprised on like how I missed that information.

195
00:14:58,560 --> 00:14:59,920
So I put some emphasis in there.

196
00:15:00,160 --> 00:15:05,760
We got bulk user updates, manage guest accounts, Azure AD join, configure self-service password reset.

197
00:15:06,600 --> 00:15:09,440
Then you have manage role-based access controls, RBAC.

198
00:15:10,000 --> 00:15:16,320
So create a custom role, provide access to Azure resources by assigning roles to different scopes, intercept access assignments.

199
00:15:16,320 --> 00:15:26,040
Then we have manage subscriptions and governance, configure Azure policies, resource locks, apply manage tags resources, manage resource groups, manage subscriptions, manage costs.

200
00:15:26,040 --> 00:15:28,240
A lot of these are just rewordings, right?

201
00:15:28,240 --> 00:15:30,800
So cost management, just to costs.

202
00:15:31,120 --> 00:15:31,520
Okay.

203
00:15:33,320 --> 00:15:36,800
Coming down below here, we have secure storage.

204
00:15:36,960 --> 00:15:40,480
So it's interesting they just put the word secure in there to emphasize it.

205
00:15:40,480 --> 00:15:42,240
They just changed the category name there.

206
00:15:42,720 --> 00:15:50,160
But network access to storage, configure storage accounts, generate out an SAS, manage keys, Azure AD authentication, Azure files.

207
00:15:52,280 --> 00:15:53,960
I think file sync should be here.

208
00:15:53,960 --> 00:15:55,280
It might be, oh yeah, it's down here.

209
00:15:55,280 --> 00:15:55,480
Okay.

210
00:15:56,560 --> 00:15:58,960
So now the next thing here, managed storage.

211
00:15:58,960 --> 00:16:06,800
So we got export Azure jobs, import jobs, Azure Storage Explorer, AZ Copy, replication, blob, object replication.

212
00:16:06,800 --> 00:16:16,960
Then for Azure File, Azure Blob Storage, we got file share, file sync, blob storage, just all the different types of blobs, and the blob lifecycle management.

213
00:16:18,080 --> 00:16:25,760
For deploy and manager Azure compute resources, we got the automate deployment of VMs via the Amazon Resource Manager.

214
00:16:27,520 --> 00:16:34,800
Resource Manager is a really great tool to learn, so I do use it quite a bit in our follow along, so I keep on coming back to it.

215
00:16:35,440 --> 00:16:44,560
The AZ or the Azure Resource Manager template, virtual hard disk template, deploying a template, deploying a virtual machine.

216
00:16:44,560 --> 00:16:48,240
So for configuring virtual machines, we have Azure Disk Encryption.

217
00:16:49,040 --> 00:16:52,640
You can move a VM between resource groups, managing VM sizes,

218
00:16:53,120 --> 00:16:57,360
Adding disks, configuring deploys, high availability, scale sets.

219
00:16:57,600 --> 00:16:59,760
Scale sets are such a pain to set up.

220
00:17:00,640 --> 00:17:02,320
Like I thought they worked like AWS.

221
00:17:03,280 --> 00:17:05,280
Auto scaling groups, they absolutely do not.

222
00:17:06,320 --> 00:17:08,120
So that was something that was very interesting.

223
00:17:08,120 --> 00:17:09,520
I think you should give some attention to.

224
00:17:10,040 --> 00:17:11,280
creating configured containers.

225
00:17:11,440 --> 00:17:14,160
This, I think that mine is a little bit more light.

226
00:17:14,160 --> 00:17:19,200
So when I did this, I just did the bare minimum here for Kubernetes.

227
00:17:19,400 --> 00:17:21,440
And it looks like they've added a bunch of other stuff.

228
00:17:21,440 --> 00:17:25,320
So I will be adding them to the course, but probably I just won't have them initially.

229
00:17:25,320 --> 00:17:27,040
So just watch out for that kind of stuff.

230
00:17:27,280 --> 00:17:36,480
I honestly didn't see, and I took the exam after this date here, but I didn't really see that many Kubernetes questions at the time when I sat it.

231
00:17:36,720 --> 00:17:39,520
So I'm not too worried about it, but I'm just saying like,

232
00:17:40,400 --> 00:17:46,480
just watch out and make sure if I don't have that content, make sure you just read some of the docs there or poke around the panel there.

233
00:17:46,960 --> 00:17:57,040
For Azure App Services, so create app service plans, configure scaling sets, create secure custom domains, backup, networking, deployment.

234
00:17:57,040 --> 00:18:00,160
What's interesting is they don't have, there's a service called Web Apps.

235
00:18:00,160 --> 00:18:02,160
It allows you to run remote scripts.

236
00:18:02,320 --> 00:18:04,560
So they don't have that in there, which I was a bit surprised.

237
00:18:05,120 --> 00:18:07,200
but I found that as I did my actual exam.

238
00:18:07,840 --> 00:18:17,120
Configure and manage virtual networking, so you just have to know the ins and outs of virtual networking, which is not too hard here, like peering and stuff like that.

239
00:18:17,920 --> 00:18:25,120
Secure virtual networks, that's where we're talking about NSGs, the firewall, bastion service, load balancer, so the Azure Application Gateway.

240
00:18:26,120 --> 00:18:34,400
And the last here is to monitor and troubleshoot virtual networking, so monitor on-premise connectivity, network performance monitor, Azure Network Watcher, these stuff.

241
00:18:35,000 --> 00:18:45,520
I honestly found this part the hardest to set up because at least at the time when I did this, the services are so old and they're also being transitioned to something else.

242
00:18:45,920 --> 00:18:51,440
And, I looked around and I figured, maybe other people had better resources and they honestly didn't.

243
00:18:51,600 --> 00:18:56,640
So I don't feel too bad about it, but I'm just, if you feel some pain doing this part, I totally understand, okay?

244
00:18:57,040 --> 00:18:59,000
Then down below we have integrate on-premise.

245
00:18:59,000 --> 00:19:02,640
So we got VPN Gateway, ExpressRoute, Virtual WAN.

246
00:19:02,880 --> 00:19:13,600
I gave Virtual WAN a lot of attention just because I've never had a strong networking background and I just thought that, you know, if you didn't either, that I would give it a very thorough explanation, which I do.

247
00:19:14,840 --> 00:19:22,440
For monitor and backup Azure resources, we got intercept metrics, logs, analyze log queries, application insights.

248
00:19:22,440 --> 00:19:28,160
And for backups, we got recovery services, Azure backup, Azure site recovery, and stuff like that.

249
00:19:28,400 --> 00:19:31,040
So yeah, that is basically everything you need to learn.

250
00:19:31,760 --> 00:19:35,680
Yeah, if something's missing, just go look up that individual item on your own there.

251
00:19:35,680 --> 00:19:38,960
But you know, my course is very complete, but you know what?

252
00:19:38,960 --> 00:19:42,720
It could be like three months later, and then they just add a few little extra things in there.

253
00:19:42,720 --> 00:19:44,080
So just watch out for that, okay?

254
00:19:49,440 --> 00:20:00,000
Hey, this is Andrew Brown from Exam Pro, and we are looking at Azure Active Directory, and this is a cloud-based identity and access management service to manage user sign-ins and access to AD related resources.

255
00:20:00,240 --> 00:20:08,080
So Azure Active Directory is Microsoft's cloud-based identity and access management service, which helps your employees sign in and access resources.

256
00:20:08,400 --> 00:20:14,760
So that could be external resources like Microsoft Office 365, Azure Portal, SaaS applications, or internal resources.

257
00:20:14,840 --> 00:20:40,560
resources, so applications within your internal networking or access to workstations on-premise. And you can use Azure AD to implement single sign-on. So you can see that Azure AD is basically like the one solution to log into everything. And we actually use it at Exam Pro. We use it with Microsoft Teams, or for the Exam Pro platform, our admin panel is tied to it. So when we want to log into the mid panel with credentials, we have it there.

258
00:20:41,360 --> 00:21:02,640
We use it with AWS to log into there, and we use it to log into Azure. So it has a lot of flexibility, and if you're building out applications for enterprises, they're likely using AD, and so this is the reason why everybody adopts it or needs to understand it. So it's a service I really, really do want you to understand and know. Azure Active Directory comes in four editions. We have the free tier, and by the way, each...

259
00:21:03,760 --> 00:21:13,760
A tier that goes up has the features before it, but free has MFA, SSO, basic security, usage reports, and user management. Then you have the Office 365 apps, which is...

260
00:21:14,160 --> 00:21:42,080
revolves around if you're using that suite. So you have company branding, SLA, to sync between on-premise and cloud. And then the premium tiers, which really comes into enterprise or on-premise hybrid architectures. So hybrid architectures, advanced group access, conditional access, premium two, identity protection, and identity governance. The only thing I don't like about Azure AD is that you can't really create your custom access controls unless you have premium one or premium two, but that's just how they do it. So there you go.

261
00:21:46,560 --> 00:22:12,560
So let's take a look at the use case for Azure AD. And we basically covered it in the introduction, but I just want to reiterate it in a different way with a bit of a visual so that it really helps it sink into your brain there. So Azure AD can authorize and authenticate to multiple sources. So it can authenticate to your on-premise AD, to your web application, allow users to log in with IPDs. So identity providers could be like use Facebook or Google login.

262
00:22:13,120 --> 00:22:42,160
You can use it with Office 365 or Azure Microsoft. And so just a visual here. Notice that we have Azure AD. And using Azure AD Connect, we can connect to on-premise. Through app registrations, we're able to connect our web application to Azure AD. With external identities, we can use Facebook or Google login. And then for cloud applications, we can connect to Office 365 or Microsoft Azure.

263
00:22:47,600 --> 00:23:08,480
So Active Directory existed way before Azure, and so let's just do a quick rundown of the history so we have an idea of what we're looking at. So Microsoft introduced Active Directory Domain Services in Windows 2000 to give organizations the ability to manage multiple on-premise infrastructure components and systems using a single identity per user. So it's been around for 20 years.

264
00:23:08,920 --> 00:23:34,880
And Azure AD takes this approach to the next level by providing organizations with identity as a service, so ID AAS, solution for their apps across cloud and on-premise. And both versions are still used today because they just have different utility. And so we have Active Directory, which is for on-premise. And then you have Azure AD, which is just the cloud-hosted version. And in many regards, these can also be connected together. But there you go.

265
00:23:39,760 --> 00:24:02,880
So I want to cover some Active Directory terminology. And the honest truth is that for Azure, you're not going to be too worried about these things, but they're going to come up with a documentation. You're going to kind of wonder what they are. And so I just wanted to tell you about these up front, even though they're not core to study, so that it just really rounds out your Active Directory knowledge. Because Active Directory is such a core service to Azure and Microsoft products, you should know these things.

266
00:24:03,600 --> 00:24:32,240
So the first thing is all about domains. So a domain is an area of network organized by a single authentication database. An Active Directory domain is a logical grouping of AD objects on a network. So just think of it in a way as you know how you have resource groups to logically group your Azure resources. Domains are a logical grouping for your AD objects. Then you have a domain controller. A domain controller is a server that authenticates user identities and authorizes their access to resources. Very common to have multiples of these.

267
00:24:32,720 --> 00:25:01,920
because you want to have redundant domain controllers so you can log in or availability or launching domain controller nearby so people can log in to different places. So definitely very core to Active Directory. Then you have the domain computer. This is a computer that is registered with a central authentication database. And a domain computer would be an AD object. So then you have AD objects. So this is the basic element of Active Directory. So you have users, groups, printers, computers, shared folders, et cetera.

268
00:25:02,440 --> 00:25:20,880
Then you have a Group Policy Object, a GPO. This is a virtual collection of policy settings. It controls what an AD object has access to. You have your organizational units. This is a subdivision within Active Directory into which you can place users, groups, computers, and other organizational units. So it's just another way of doing logical grouping.

269
00:25:22,120 --> 00:25:51,680
Then you have a directory service, and this provides a method for storing directory data and making this data available to network users and administrators. A directory service runs on a domain controller. So there you go. That is the rundown of Active Directory terminology. And again, hopefully when you see it in the documentation, you can refer back to this or you'll have a better understanding of all the components. I would have loved to have made a diagram, but I just couldn't find an example of 1. And so, I mean, I feel like there could be a really good picture for all this stuff.

270
00:25:56,320 --> 00:26:20,920
So let's talk about the term tenant, and a tenant represents an organization in an Active Directory, and a tenant is dedicated to the Azure AD service instance. A tenant is automatically created when you sign up for either Microsoft Azure or Microsoft Intune or Microsoft 365, and each Azure AD tenant is distinct and separate from other Azure AD tenants, and so if you

271
00:26:21,600 --> 00:26:50,240
if you were in Azure AD and you click on your tenant information, that's basically what that is, right? So that's my ExamPro one, and it has its own special tenant ID. And we can see that it's licensed for Office 365, and so that tells you that I'm using the Office 365 tier of Azure AD. So remember that the domain controller is the server that users are going to be using to authenticate to the directory service.

272
00:26:51,040 --> 00:27:20,920
And so when you create an Active Directory, Azure sets one up for you, but there's some cases where you might want to set one up yourself. And the reason why is that you could be like an enterprise where you already have your own Active Directory on-premise, but you've decided that you want to move it over to Azure AD because you just want a fully managed Active Directory and you want to tap into the cloud. But the thing is that some domain services, those are features on your domain controller, just might not be available, and that's where you're going to need to set up your own domain controller.

273
00:27:21,080 --> 00:27:34,320
And that's where Azure Active Directory Domain Services come into play, because these provide managed domain services, and so they have managed domain services such as domain joins, group policies, LDAPs.

274
00:27:35,000 --> 00:27:48,960
But Kirby Ross, never can say that properly, NTLM authentication. And so the great thing is here is you can have these domain services, but you're not going to have to deploy them, manage them, patch them. They're just going to work. So there you go.

275
00:27:53,800 --> 00:28:14,560
Let's take a look at Azure AD Connect, and this is a hybrid service that is used to connect your on-premise Active Directory to your Azure account. So, Azure AD Connect allows for seamless single sign-on from your on-premise workstations to Microsoft Azure, and Azure AD Connect has the following features: We have password hash synchronization, so this is a sign-in method, and it synchronizes a hash.

276
00:28:15,160 --> 00:28:25,360
of a user on-premise AD password with Azure AD. Then you have password authentication. This is another sign-in method that allows users to use the same password on-premise and in the cloud. That's the one I like.

277
00:28:26,240 --> 00:28:48,960
Then moving on from password authentication, we have federation integration. So this is a hybrid environment using an on-premise AD FS infrastructure for certificate renewal. Then you have synchronization. This is responsible for creating users, groups, and other objects and ensures on-premise and cloud data matches. So you have the same AD objects, both on-prem and in cloud. And then you got health monitoring. And this is a robust monitoring

278
00:28:50,080 --> 00:29:01,600
Service, and it provides a central location in the Azure portal to view this activity, and it's called Azure AD Connect Health. So, yeah, the big takeaway is that Azure AD Connect is used to create a hybrid connection.

279
00:29:06,440 --> 00:29:23,520
So now let's take a look at some of the AD objects, starting with users. So users represent an identity for a person or employee in your domain, and a user has login credentials and can use them to log into the Azure portal. So here I am, a user, and you can see it shows how many times I've logged in, and I'm part of different AD groups.

280
00:29:24,200 --> 00:29:40,640
And so you can assign roles and administrative roles to users. You can add users to groups. You can enforce authentication, like with MFA. You can track user sign-ins, as you can see on the right-hand side. You can track devices, users' login, and allow or deny devices.

281
00:29:41,360 --> 00:29:59,960
You can assign Microsoft licenses. Azure AD has two kinds of users. We have users, that's a user that belongs to an organization, and guest users. This is a user that belongs from another organization. And we'll cover Azure AD roles in the roles section here, because that is what you're going to be using.

282
00:30:00,080 --> 00:30:24,800
to apply to these users. So groups in Azure AD lets resource owners assign a set of access permissions to all members of the group instead of having to provide the rights one by one. And so on the right-hand side here, you can see I have a bunch of groups in Exam Pro, and groups can contain owners, and owners have permissions to add or remove members, and then the members have rights to do things. Okay?

283
00:30:25,640 --> 00:30:50,960
And so for assignment, you can assign roles directly to a group. You can assign applications directly to a group. And to request join groups, so the group owner can let users find their own groups to join instead of assigning them to them. And the owner can set up the group to automatically accept all users that join or require approval. This is really great when you just want people to do the work themselves, as opposed to having to do all that manual labor of adding them to groups.

284
00:30:55,200 --> 00:31:09,520
Let's talk about how we're going to give users rights to access resources, and there are four different ways to do that. The first is direct assignment. This is where the resource owner is going to directly assign the user to the resource. Then you have group assignment. This is where the resource owner assigns an...

285
00:31:10,120 --> 00:31:35,600
a group to the resource, which automatically gives all group members access to the resource. Then you have rule-based assignment. This is where the resource owner creates a group and uses a rule to define which users are assigned to a specific resource. And then you have external authority assignment. This access comes from an external source, such as an on-premise directory or SaaS application. I just want you to know that there's four different ways to do it to get access to resources.

286
00:31:40,000 --> 00:32:04,400
Let's talk about external identities. So external identities in Azure AD allows people outside your organization to access your apps and resources while letting them sign in and use whatever identity they prefer. So your partners, distributors, suppliers, vendors, or other guests can bring their own identities, such as Google or Facebook. You can share apps with external users, so that's for B2B stuff. If you develop apps intended for Azure AD tenants,

287
00:32:04,720 --> 00:32:14,320
for single tenant or multi-tenant, you can do that as well. You can develop white label apps for consumers and customers. This would be like Azure AD B2C. So there you go.

288
00:32:19,120 --> 00:32:47,200
Hey, this is Andrew Brown, and welcome to the AZ-104 follow-along. And the first video in our journey on learning on how to be a good administrator is learning about Azure Active Directory tenants. And so tenants is the way we are going to group all of our users within an organization. So this is like the logical division of organizations within Azure. And so let's just make our way over to where tenants are, and they're under Azure Active Directory AD.

289
00:32:48,080 --> 00:33:16,560
We'll click there. And so the idea is that when you first created your Azure account, you already have a single tenant. That is your organization. So here I can have, I see I have one here called the Hushnook. And down below, I have a license applied to it. So this is the Azure AD Premium P2. But the idea is you can create multiple ones. And so these can act as different organizations. And really what a tenant is, it's just an instance of Azure Active Directory.

290
00:33:17,040 --> 00:33:42,480
That's exactly what it is underneath. But let's go ahead and go create a new one. And we have two options here. We can create an Azure Active Directory. And I think what really is implied here is that it's a B2B. When you read the documentation, they talk about B2C and B2B. B2B means business to business, meaning that you're joining businesses and other businesses together. And then B2C means business to consumer. And so up here in the description, they say the B2C enables users.

291
00:33:43,040 --> 00:34:09,440
to access applications published by your organization and share administration experiences. All right. So what we'll do is we'll go to the next step here. And we're going to need to name our organization. I'm going to name it Starfleet. And we need our initial domain. Notice it's going to be on Microsoft.com. So we will just lowercase that. If it's already used, it might complain. We'll see if I can take that. And it's already taken. So we'll say

292
00:34:11,440 --> 00:34:36,240
the USS Starfleet. Oh, it must be numeric. Take that out there. we go. U and three S's. That's not easy at all, but that's okay. I'm going to change my default location to Canada. I think it still deploys in the US anyway. It's still going to say United States where the data center is going to be. We're going to go ahead and hit review, create, and give it a moment.

293
00:34:36,960 --> 00:35:01,920
It's saying I'm missing some information there, already used by another directory, so I still can't call it that. Boy, oh boy. So I'll just say Starfleet 1984. And I think we should be able to do that. And we'll go ahead and create it. And so you're going to have to play around and find the name that's going to work for you. And then we'll just wait for it to create this tenant. It shouldn't take too long here.

294
00:35:15,680 --> 00:35:37,680
And after waiting there a couple of minutes, down on the right-hand side, it says it created the tenant. So we can just proceed back here. And so I'm just going to go back to Azure Active Directory at the top. I find it just easier to always search and go back this way. And so we'll just wait a moment for this to load. But we're still in our Husnuk

295
00:35:38,240 --> 00:36:03,920
Azure Active Directory, that's my default one there. But let's say I wanted to go ahead and switch a tenant. I can go now and just switch. And so here I have my ExamPro one, Hushnook, and Starfleet. I'm going to go ahead and switch it over to this one. And so essentially now I have all these isolate users. So I can have different users in these other tenants, and that's the way you'd isolate them out. Notice that this one is Azure AD free. And so the thing with...

296
00:36:04,240 --> 00:36:30,880
Azure Active Directory is that the higher up the tier you go, the more functionality you have. And one that is very popular, especially with enterprises, is going to have the P2 tier, Premium 2. I just want to show you how you'd go about upgrading to that. It does cost money, but you also get a free trial. I don't believe that you are billed during the time of the trial. At the end of it, then you have to enter in or make an explicit purchase of it. Let's go ahead here and see if I can do it.

297
00:36:31,520 --> 00:36:58,720
It might not give me trial because I'm already running another one, but let's go find out. So I clicked on licenses on the left-hand side. We'll go to all products, and then we have try and buy. And so on the right-hand side, it says Azure AD Premium 2. And we can click on free trial, and it's going to tell you why you'd want P2, such as multi-factor authentication, policy-driven management, and end-user self-service. And so I'm going to just go ahead and upgrade that. You don't have to do that. You can just watch me do that here.

298
00:36:59,240 --> 00:37:22,720
And so I'll just hit activate, and it's just going to go activate that in my account. And now it's activated. So if I go back to Azure Active Directory here, I'll probably go home, but I'm just going to go back this way. It's a lot more safe that way. Eventually it should update here. So it says Azure AD free, but really I've upgraded. It's just the delay in the console. And so after a few refreshes, it will probably show up.

299
00:37:24,640 --> 00:37:54,780
But what that's going to do is it's going to enable some additional features. They don't really matter so much for the course. I mean, maybe I could show dynamic role assignment if I try to remember how that works. Let me think for a moment. I think it's under roles. But anyway, so, you know, that's how you do that. I just wanted to show you how to create a tenant and then disable the switch between them there.

300
00:37:59,520 --> 00:38:25,200
So we created ourselves a tenant. Let's go ahead and actually create some users. And just before we proceed forward to create a user, I just want to point out, you can tell what tenant you are in if you look in the top right corner. So here I'm in my Starfleet tenant. And there's actually, I think you can switch between here. Yeah, that's an easier way to switch between your directories. But generally, that's not how I do it. I'll go to the top here and just type in Azure Active Directory.

301
00:38:26,240 --> 00:38:51,280
And when I want to switch a tenant, I just click the Switch Tenant button and click on what I want. But we'll make our way back to the Starfleet tenant that I have here. you can see my information, and I've obviously activated Azure AD Premium P2. But before we go ahead and create a user, we're going to have to create a group, and I'll show you why. If I'm going to go ahead, I'm just going to speed through this for a second. But when I scroll on down, I have this option where I need to assign it to a group. I guess I don't have to.

302
00:38:51,680 --> 00:39:21,360
But the problem is I don't have one. And so before I create my user, let's go ahead and create ourselves a new user group. And so we'll go ahead and create a new group here. And we have two options. We have security and Microsoft 365. It explains right here the difference. So 365 is really for giving access to mailbox, calendar, files, SharePoint. We're not doing that stuff here. We're just sticking with regular security groups, which is for Azure stuff. We'll name this developers. And then we'll name this developers.

303
00:39:22,360 --> 00:39:49,600
And notice here that the membership type, I have a drop-down. If you're on the free tier, this is going to be grayed out. But this dynamic user is part of P2. And so this allows us to add a dynamic query. And the idea here is that if I start having users and I just say if a user is from Canada, then they'll automatically be added to this group. And so that's the query that gets outputted. But we're not going to make a dynamic group today. We'll just make our way back

304
00:39:50,000 --> 00:40:18,240
here to the new group. And we'll just manually assign stuff, all right? I'll go ahead there and create that user, or that group there. And now that we have that group, let's make our way over to users. So we'll go back here. I'm going to make myself a new user. And on the top here, we'll go here. And we'll name this one Kevin. And we'll have that lowercase. And we will call them Kevin Uxbridge.

305
00:40:19,840 --> 00:40:20,240
All right.

306
00:40:22,240 --> 00:40:24,640
And you'll notice here it will auto-generate a password.

307
00:40:24,640 --> 00:40:26,080
It's 4 letters and four numbers.

308
00:40:26,080 --> 00:40:33,760
I don't find this personally very secure, but the idea here is that a user is going to reset that password right away, so it's not a big deal, and that's very easy to remember.

309
00:40:34,280 --> 00:40:36,640
And now I can go here and assign groups.

310
00:40:38,240 --> 00:40:40,080
And if I want to assign the role, I can do that here.

311
00:40:40,080 --> 00:40:41,120
So we'll open that up.

312
00:40:41,520 --> 00:40:43,280
We have a bunch of different options.

313
00:40:43,280 --> 00:40:44,960
Maybe we want these two roles here.

314
00:40:46,720 --> 00:40:48,240
And then we have some additional information.

315
00:40:48,240 --> 00:40:49,600
I'll go ahead and create this user.

316
00:40:49,880 --> 00:40:51,280
And so now this user exists.

317
00:40:52,320 --> 00:40:56,000
What's interesting is that I can go ahead and delete users and then recover them.

318
00:40:56,080 --> 00:41:00,560
The groups have this as well, where if you go here, and I actually have a user I deleted previously.

319
00:41:01,200 --> 00:41:02,760
So it just takes some time to show up.

320
00:41:02,760 --> 00:41:05,600
But if you go ahead, you can hit the delete user here.

321
00:41:06,400 --> 00:41:12,400
And then they will remain in here for 30 days, and then they'll automatically be deleted.

322
00:41:12,400 --> 00:41:15,600
So if someone made a mistake, this is a great opportunity to bring them back.

323
00:41:16,000 --> 00:41:21,440
And so I can just go checkbox on Rishon here, and we can just bring her on back, restore that user.

324
00:41:23,600 --> 00:41:24,080
All right.

325
00:41:24,240 --> 00:41:28,880
And again, you know, this is sometimes a bit delayed, so we might have to hit refresh.

326
00:41:30,320 --> 00:41:30,920
There she is.

327
00:41:30,920 --> 00:41:35,440
And so, you know, that is the whole group and user stuff there.

328
00:41:41,840 --> 00:41:45,120
Okay, now let's take a look at the concept of guest users.

329
00:41:45,120 --> 00:41:50,040
So, let's make our way back to users within our tenant, and there's this button here for new guest users.

330
00:41:50,040 --> 00:42:00,080
The idea behind guest users is that we're able to invite other users from other tenants, and this is a much simpler process than using federation.

331
00:42:00,240 --> 00:42:01,600
Federation is the concept of...

332
00:42:01,840 --> 00:42:04,160
of joining Active Directories together.

333
00:42:04,160 --> 00:42:10,560
So if there is an on-premise or other external Active Directory, they would somehow want to connect the two together.

334
00:42:10,800 --> 00:42:13,040
And there's a lot of administrative burden with that.

335
00:42:13,040 --> 00:42:18,240
But if everybody's already using Azure Active Directory, it's as simple as adding a guest user.

336
00:42:18,480 --> 00:42:21,200
So what we're going to do is go back to home here.

337
00:42:21,200 --> 00:42:23,880
I'm just going to go back to Azure Active Directory.

338
00:42:23,880 --> 00:42:25,080
And we're going to switch tenants.

339
00:42:25,080 --> 00:42:26,800
I'm going to go back to my Hushnuk one here.

340
00:42:28,320 --> 00:42:29,600
And you probably won't see that.

341
00:42:29,600 --> 00:42:31,760
It's just showing up because it wants me to use MFA.

342
00:42:32,720 --> 00:42:36,920
And I'm going to go here to users, and we're going to go ahead and create ourselves a new user.

343
00:42:36,920 --> 00:42:38,400
I'm going to call this one a Hushnook.

344
00:42:41,360 --> 00:42:43,280
And we will name it simply that.

345
00:42:44,640 --> 00:42:49,120
And let's make note of the actual e-mail there.

346
00:42:49,120 --> 00:42:52,080
That's Hushnook on Microsoft.com.

347
00:42:52,080 --> 00:42:54,240
And we'll go ahead and create that.

348
00:42:55,560 --> 00:43:00,320
And now what I'm going to do is I'm just going to copy that e-mail there.

349
00:43:01,600 --> 00:43:01,840
Okay.

350
00:43:01,840 --> 00:43:03,360
I think I got it.

351
00:43:03,600 --> 00:43:04,240
Yes, I do.

352
00:43:04,240 --> 00:43:04,560
Good.

353
00:43:05,120 --> 00:43:07,760
And we're going to make our way back to Azure Active Directory.

354
00:43:07,760 --> 00:43:11,040
We're going to switch tenants back to Starfleet.

355
00:43:13,520 --> 00:43:17,040
And we are going to go to users and we're going to add a new guest user.

356
00:43:17,040 --> 00:43:18,160
I'm going to invite a user.

357
00:43:18,880 --> 00:43:20,480
And I'm just going to put in their e-mail there.

358
00:43:22,560 --> 00:43:24,000
And we will say Hushnook.

359
00:43:29,360 --> 00:43:31,200
And we'll just put that both.

360
00:43:33,360 --> 00:43:36,760
And we can assign them to groups and roles.

361
00:43:36,760 --> 00:43:37,880
It's all the same story here.

362
00:43:37,880 --> 00:43:43,640
I'm just going to go ahead and invite them.

363
00:43:43,640 --> 00:43:45,560
And so now they've been sent off an invitation.

364
00:43:45,560 --> 00:43:47,520
Notice that they show up under as guest.

365
00:43:47,760 --> 00:43:48,880
All right, so there you go.

366
00:43:54,000 --> 00:43:55,640
Let's take a look at bulk operations.

367
00:43:55,640 --> 00:43:59,600
Let's say we needed to bring in a bunch of different people into our actual account here.

368
00:44:00,000 --> 00:44:01,920
And so we have this option of bulk create.

369
00:44:02,240 --> 00:44:07,040
And if you look on the right-hand side, we can go ahead and download a CSV template that's ready to use.

370
00:44:07,280 --> 00:44:08,320
I'm going to just double-click that.

371
00:44:08,320 --> 00:44:09,920
I already have Excel installed here.

372
00:44:11,680 --> 00:44:18,560
And off the bat, what you can see is we have a bunch of options that we can fill in.

373
00:44:20,480 --> 00:44:22,480
And here we have one example there.

374
00:44:23,200 --> 00:44:32,200
And so I think that we could try to give this a go here, but we're going to have to make sure we use the same principal username or here thing here.

375
00:44:32,200 --> 00:44:33,520
So I'm just going to grab this here.

376
00:44:35,760 --> 00:44:37,200
And let's just make a few people.

377
00:44:40,320 --> 00:44:41,840
So we need our principal here.

378
00:44:43,520 --> 00:44:44,720
We'll just say Picard.

379
00:44:47,760 --> 00:44:48,240
Whoops.

380
00:44:49,320 --> 00:44:50,560
Did not like that I copied that.

381
00:44:54,320 --> 00:45:07,840
And we'll do up here, we'll say data, Picard, data, Picard, Picard, data, data.

382
00:45:09,840 --> 00:45:10,880
Just see what else I need.

383
00:45:10,880 --> 00:45:11,920
We're going to need a password.

384
00:45:11,920 --> 00:45:13,200
I'm just going to use the same one here.

385
00:45:14,960 --> 00:45:15,880
Set that as no.

386
00:45:17,440 --> 00:45:20,240
I don't think any of the other things there are needed.

387
00:45:20,560 --> 00:45:22,000
We'll go ahead and save that.

388
00:45:23,360 --> 00:45:26,400
And I'm just going to save this somewhere convenient.

389
00:45:28,360 --> 00:45:28,520
Okay.

390
00:45:30,080 --> 00:45:33,440
And what I'm just going to do is pull this up off screen here.

391
00:45:34,400 --> 00:45:35,840
I'm just looking for where I saved it.

392
00:45:36,120 --> 00:45:37,000
Just give me a moment.

393
00:45:38,080 --> 00:45:39,080
And there it is.

394
00:45:39,080 --> 00:45:40,560
I'm just going to drag it on in here.

395
00:45:40,960 --> 00:45:42,240
I think I can drag it in like that.

396
00:45:44,480 --> 00:45:45,520
Maybe not as easy.

397
00:45:46,720 --> 00:45:50,240
Let's go back to, it's under my downloads.

398
00:45:52,640 --> 00:45:53,520
Here we go.

399
00:45:56,160 --> 00:45:57,440
And we'll just hit submit.

400
00:45:58,720 --> 00:45:59,480
We'll give that a moment.

401
00:45:59,480 --> 00:46:00,560
It shouldn't take too long.

402
00:46:00,560 --> 00:46:05,280
You can probably view the status here if we click that there.

403
00:46:05,760 --> 00:46:07,440
Now we're just under bulk operation results.

404
00:46:07,440 --> 00:46:08,480
I'm just going to give it a refresh.

405
00:46:09,040 --> 00:46:10,560
You can see that it's not completed yet.

406
00:46:11,760 --> 00:46:12,800
I can click into it.

407
00:46:16,160 --> 00:46:17,840
And we'll just have to wait a little bit here, okay?

408
00:46:19,600 --> 00:46:21,000
Oh, it looks like it just succeeded.

409
00:46:21,000 --> 00:46:22,080
I'll give it a nice refresh.

410
00:46:22,320 --> 00:46:23,880
It's going to tell me how did it turn out.

411
00:46:23,880 --> 00:46:26,800
To success, 0 failures, total requests.

412
00:46:27,440 --> 00:46:29,760
Let's click into that so we can see what it did.

413
00:46:29,760 --> 00:46:31,360
That looks pretty darn good to me.

414
00:46:32,640 --> 00:46:33,760
So that is pretty good.

415
00:46:33,760 --> 00:46:35,520
We'll make our way back to our users.

416
00:46:37,920 --> 00:46:39,720
And you can see that they're on mass imported.

417
00:46:39,720 --> 00:46:40,240
So there you go.

418
00:46:46,000 --> 00:46:50,080
Let's take a look at how we can enable multi-factor authentication for our users.

419
00:46:50,320 --> 00:46:52,560
And so multi-factor stands for MFA.

420
00:46:52,640 --> 00:47:00,880
You're probably used to it, where it's a secondary step to confirm your identity before logging in, either via a phone or a hardware device such as an UbiKey.

421
00:47:01,800 --> 00:47:02,960
And so there's this button here.

422
00:47:02,960 --> 00:47:04,880
It says multi-factor authentication.

423
00:47:04,880 --> 00:47:06,880
And it could be disabled for you.

424
00:47:07,120 --> 00:47:12,880
It very likely is if you're on the free version of your Azure AD.

425
00:47:13,200 --> 00:47:14,960
Just going back up here one level.

426
00:47:15,680 --> 00:47:17,840
You can tell based on what that is here.

427
00:47:17,840 --> 00:47:20,320
So I'm using Azure AD Premium P2.

428
00:47:20,480 --> 00:47:22,560
That's definitely going to allow me to have MFA.

429
00:47:22,720 --> 00:47:27,360
So if you just don't want to turn on P2 or it's trying to charge you money, don't worry about it.

430
00:47:27,360 --> 00:47:28,480
Just watch me do it here.

431
00:47:28,640 --> 00:47:30,080
You'll pretty much learn what you need to know.

432
00:47:30,400 --> 00:47:32,000
So we'll just go ahead and click that button.

433
00:47:32,000 --> 00:47:34,080
It's going to bring us to a different screen here.

434
00:47:35,080 --> 00:47:36,320
And here we have our users.

435
00:47:36,560 --> 00:47:39,760
And you can see multi-factor authentication is turned off for all of them.

436
00:47:39,760 --> 00:47:43,440
So we can go ahead here and turn it on for a single one if I click enable.

437
00:47:44,720 --> 00:47:46,720
And so that enables it for Kevin.

438
00:47:46,720 --> 00:47:49,840
Then we have some other additional options like manage user settings.

439
00:47:50,160 --> 00:47:52,360
And here you can see we have some extra options.

440
00:47:52,360 --> 00:48:02,480
So require selected users to provide contact methods again, delete all existing app passwords generated by the selected users, restore multi-factor authentication on all remembered devices.

441
00:48:02,480 --> 00:48:03,920
So just some additional things.

442
00:48:04,160 --> 00:48:08,480
Another thing you will want to check out here, it's not very obvious, but we have a service settings button up here.

443
00:48:09,680 --> 00:48:12,880
And this will give us more additional options to enforce for our users.

444
00:48:13,200 --> 00:48:15,040
So first we have app passwords.

445
00:48:15,280 --> 00:48:21,760
So this allows users to create app passwords to sign into non-browser apps, so things that are not part of the website here.

446
00:48:22,360 --> 00:48:28,000
And so you can whitelist some IP addresses for them so that they are trusted from those locations.

447
00:48:28,400 --> 00:48:30,960
Then for verification options, this is something that's important.

448
00:48:31,200 --> 00:48:33,200
We have some options like call to phone.

449
00:48:33,200 --> 00:48:45,280
So it will actually, to do the MFA, it will actually call your phone and it'll tell you the letters and numbers that you enter in, or it can send you a text message, or it can notify you through the mobile application.

450
00:48:45,280 --> 00:48:50,720
So you can install the companion app from the Android or iOS store or the Windows store.

451
00:48:50,720 --> 00:48:52,080
I imagine there's a Windows store too.

452
00:48:52,680 --> 00:48:56,680
And then there is the verification code and mobile app on our hardware tokens.

453
00:48:56,680 --> 00:48:59,280
So hardware tokens could be with an UB key, right?

454
00:49:00,080 --> 00:49:04,440
Then you can say, remember a multi-factor authentication on trusted devices for X amount of days.

455
00:49:04,440 --> 00:49:08,880
That way they don't have to enter it all the time because it might get annoying for some users.

456
00:49:09,120 --> 00:49:12,800
Honestly, for me, I want everyone to enter it every single time because that's just how I am.

457
00:49:13,200 --> 00:49:16,800
But let's make our way back here and see how we can do some bulk assignment.

458
00:49:17,200 --> 00:49:20,560
So what I'll do is I want to enable it for a few people here.

459
00:49:20,560 --> 00:49:22,160
So if I go up to bulk update,

460
00:49:23,040 --> 00:49:27,600
I can download a sample file, and that's going to go ahead and download that.

461
00:49:29,440 --> 00:49:32,560
And you can see I actually did this previously here, so I'll just copy it.

462
00:49:33,520 --> 00:49:35,920
And what we'll do is just paste that in there.

463
00:49:36,880 --> 00:49:43,760
So we're just pasting in, yeah, that's fine, we're just pasting in their name, right, and the MFA status.

464
00:49:44,080 --> 00:49:47,520
You can always get the name from here, just back on the list there.

465
00:49:48,160 --> 00:49:51,840
And so once we have saved that file, we can go ahead and upload that.

466
00:49:54,560 --> 00:49:56,080
They're the same here, so it's not a big deal.

467
00:49:57,840 --> 00:49:59,880
And we'll just wait a few seconds here.

468
00:49:59,880 --> 00:50:00,960
This is pretty darn quick.

469
00:50:05,280 --> 00:50:09,440
Usually it doesn't take minutes, sometimes it takes seconds, but we'll just give it a moment here.

470
00:50:19,840 --> 00:50:20,480
And there we go.

471
00:50:20,480 --> 00:50:21,840
So that was a long wait.

472
00:50:21,840 --> 00:50:24,400
I don't know why, but I verified the two there.

473
00:50:24,400 --> 00:50:27,120
And so if we go next, now those will be now enabled.

474
00:50:27,560 --> 00:50:29,560
There's also this option to enforce.

475
00:50:29,560 --> 00:50:30,720
So let's go there.

476
00:50:31,360 --> 00:50:37,920
After multi-factor authentication is forced, users will need to create app passwords to use non-browser applications such as Outlook or Lynx.

477
00:50:38,360 --> 00:50:39,880
And so that's a great option to have.

478
00:50:39,880 --> 00:50:41,520
So I'll just go ahead and enable that as well.

479
00:50:42,640 --> 00:50:43,600
So now that's enforced.

480
00:50:43,920 --> 00:50:46,400
And so that's all you really need to know about MFA.

481
00:50:51,520 --> 00:50:53,600
Okay, so we're back in our tenant here.

482
00:50:53,600 --> 00:51:01,840
And what I want to do now is actually set some abilities for users to reset their passwords so they don't have to come and bother the administrator all the time.

483
00:51:02,160 --> 00:51:06,400
So under your tenant on the left-hand side, what you want to look for is password reset.

484
00:51:06,880 --> 00:51:10,160
And now we have a bunch of options here for resetting password.

485
00:51:10,720 --> 00:51:12,560
So we're going to have to go ahead and enable it.

486
00:51:12,560 --> 00:51:15,600
We can enable it based on a per group level.

487
00:51:16,240 --> 00:51:17,280
such as developers.

488
00:51:17,520 --> 00:51:20,960
But what I'm going to do is set it for everybody here, which I think is a lot better option.

489
00:51:22,360 --> 00:51:24,800
And then down below, we have a lot of things we can do here.

490
00:51:24,800 --> 00:51:29,040
So looking at authentication methods, we can choose the number of methods required to reset.

491
00:51:29,840 --> 00:51:34,320
So maybe they need to use two options in order to reset their password, which is a lot more secure.

492
00:51:35,040 --> 00:51:39,360
And then we can check box on possible methods they can use.

493
00:51:39,680 --> 00:51:43,520
Then we could require a certain number of questions required here.

494
00:51:43,520 --> 00:51:44,360
So 3 and three.

495
00:51:44,360 --> 00:51:46,160
You can see I was setting something earlier here.

496
00:51:46,400 --> 00:51:48,480
You can create your own custom questions.

497
00:51:48,480 --> 00:51:50,640
And then so we'd go ahead here and just add a new one.

498
00:51:50,640 --> 00:51:57,760
So, you know, what is the best, you know, song?

499
00:51:58,320 --> 00:51:59,440
We'll go ahead and hit add.

500
00:51:59,880 --> 00:52:02,560
And the idea is that you can add them there.

501
00:52:02,720 --> 00:52:04,280
There's also a bunch of predefined ones.

502
00:52:04,280 --> 00:52:09,280
So if you're having a hard time thinking of any, you can definitely check box on some here, right?

503
00:52:13,040 --> 00:52:15,840
And so now we have a large pool of questions that can be used there.

504
00:52:15,840 --> 00:52:16,880
We'll go ahead and save that.

505
00:52:17,600 --> 00:52:22,480
Then under registration, we can say require users to register when signing in.

506
00:52:22,880 --> 00:52:24,480
I think that's a great option to have there.

507
00:52:24,480 --> 00:52:28,560
And then you can have number of days before users are asked to reconfirm their authentication method.

508
00:52:28,960 --> 00:52:30,960
And that's defaulted to 180 days.

509
00:52:31,120 --> 00:52:33,600
So I would probably leave that as on.

510
00:52:34,800 --> 00:52:39,640
And we can notify users on password reset, notify all admins when other admins reset their password.

511
00:52:39,640 --> 00:52:40,240
Very useful.

512
00:52:40,240 --> 00:52:42,720
This was probably turned off, so I'd go ahead and turn that on there.

513
00:52:43,520 --> 00:52:45,200
You can customize a help desk link.

514
00:52:45,440 --> 00:52:51,120
So the idea here is that when someone's having trouble, they might say contact your administrator.

515
00:52:51,280 --> 00:52:52,640
Well, how do you contact the administrator?

516
00:52:52,640 --> 00:52:55,760
Well, you provide that information, either a URL or an e-mail.

517
00:52:55,760 --> 00:52:57,120
So I've just provided my e-mail there.

518
00:52:57,280 --> 00:52:58,800
There's some on-premise integrations.

519
00:52:58,880 --> 00:53:01,600
Never used this stuff before because I'm never working with on-prem.

520
00:53:02,200 --> 00:53:15,920
But that stuff is pretty straightforward as well, and then you have usage and insights, so you can actually see what people are resetting their passwords and things like that, and what is being used, so that seems pretty darn good, but that's pretty much it to it.

521
00:53:16,640 --> 00:53:17,520
Yeah, so there you go.

522
00:53:22,880 --> 00:53:26,760
Hey, this is Andrew Brown from Exam Pro, and we're looking at the Azure Active Directory Cheat Sheet.

523
00:53:26,760 --> 00:53:30,960
This one's 3 pages long, so get ready for it and let's jump into it.

524
00:53:31,200 --> 00:53:39,600
So, Active Directory, just Active Directory alone, which is AD, is Microsoft's Identity and Access Management Service, helps your employees sign in and access resources.

525
00:53:39,760 --> 00:53:44,640
Then you have Azure AD, and this is the same thing, except it's the cloud-based version.

526
00:53:45,120 --> 00:53:53,440
And one term that you'll hear a lot with this is identity as a service, which just means that it's like the serverless or hosted version of this, so you don't have to think about it or manage servers.

527
00:53:53,680 --> 00:53:55,840
Azure Active Directory comes into four editions.

528
00:53:55,840 --> 00:54:02,560
You've got the free one, the Office 365 apps, Premium One, which is also known as P1, Premium Two, which is P2.

529
00:54:02,720 --> 00:54:04,240
It's good to know the differences.

530
00:54:04,720 --> 00:54:06,880
between what features you have here.

531
00:54:06,880 --> 00:54:09,280
So you should know all the details in between here.

532
00:54:09,280 --> 00:54:13,280
So I highlighted conditional access because that's an important one on the exam to know.

533
00:54:13,520 --> 00:54:16,560
Azure AD can authorize and authenticate to multiple sources.

534
00:54:16,720 --> 00:54:19,760
So if you're doing on-prem, you're going to be using Azure AD Connect.

535
00:54:19,840 --> 00:54:23,200
If it's for a web app, you're using app registers, registration, sorry.

536
00:54:23,360 --> 00:54:26,160
If you're using Facebook or Google, you're using external identities.

537
00:54:26,320 --> 00:54:31,680
If you're, you can also connect to Office 365 or Azure Microsoft.

538
00:54:31,680 --> 00:54:32,000
Okay.

539
00:54:33,120 --> 00:54:39,040
For Active Directory terminologies, when we're talking about a domain, a domain is an area of network organized by a single authentication database.

540
00:54:39,480 --> 00:54:42,800
An Active Directory domain is a logical grouping of 80 objects on a network.

541
00:54:43,040 --> 00:54:44,240
Then you have domain controller.

542
00:54:44,960 --> 00:54:51,920
Commonly abbreviated as DC, domain controller is a server that authenticates user identities and authorizes their access to resources.

543
00:54:52,000 --> 00:54:58,640
If you have a domain computer, a computer that is registered with a central authentication database, a domain computer would be an AD object.

544
00:54:58,880 --> 00:55:05,120
Then you have AD objects, that just is the base element of Active Directory things like users, groups, printers, et cetera.

545
00:55:05,440 --> 00:55:06,960
You have a GPO.

546
00:55:06,960 --> 00:55:09,200
This is a virtual collection of policy settings.

547
00:55:09,840 --> 00:55:11,360
Then you have organizational units.

548
00:55:11,360 --> 00:55:15,600
This is a subdivision of your AD, which you can place users, groups, computers, etc.

549
00:55:15,600 --> 00:55:15,920
in.

550
00:55:16,160 --> 00:55:25,920
You have directory service, such as Active Directory Domain Service (ADS), which provides a method of storing directory data and making the data available to network users.

551
00:55:26,240 --> 00:55:29,080
A directory service can run on a domain controller.

552
00:55:29,080 --> 00:55:30,080
That's only page one.

553
00:55:30,080 --> 00:55:31,360
We're on to page two.

554
00:55:31,520 --> 00:55:33,520
So a tenant represents an organization.

555
00:55:33,680 --> 00:55:37,600
A tenant is a dedicated Azure AD service instance.

556
00:55:37,600 --> 00:55:43,760
A tenant is automatically created when you first sign up, either with Microsoft Azure, Intune, or 365.

557
00:55:43,760 --> 00:55:47,040
Each AD tenant is distinct and separate from other tenants.

558
00:55:47,280 --> 00:55:51,960
When you perform a lift and shift of AD to Azure, not all the features are supported.

559
00:55:51,960 --> 00:55:53,880
In that case, you're going to be using ADDS.

560
00:55:53,880 --> 00:55:56,120
So ADDS provides managed domains

561
00:55:56,200 --> 00:56:03,120
services such as domain joins, group policies, lightweight directory access, and I never can say that word, so I'm not even going to try.

562
00:56:04,320 --> 00:56:06,640
Azure AD Connect has the following features.

563
00:56:06,640 --> 00:56:12,720
It has password hash synchronization, pass-through authentication, federation, integration, synchronization, health monitoring.

564
00:56:12,960 --> 00:56:16,160
You've got the concept of users, so that's an AD object, remember.

565
00:56:16,160 --> 00:56:22,320
So an identity of a person or employee in your domain, a user has login credentials and can use them to log into the Azure portal.

566
00:56:22,560 --> 00:56:24,160
Azure AD has two kinds of users.

567
00:56:24,160 --> 00:56:26,120
We got a user that belongs to your organization.

568
00:56:26,400 --> 00:56:30,000
and guest users, a user that belongs to a different organization.

569
00:56:30,240 --> 00:56:38,320
Groups let resource owners assign a set of access permissions to all the members of the group instead of having to provide the rights one by one.

570
00:56:38,640 --> 00:56:42,160
And the group contains owners, and it contains members.

571
00:56:42,160 --> 00:56:43,040
Just a moment here.

572
00:56:43,680 --> 00:56:44,040
There we go.

573
00:56:44,040 --> 00:56:47,320
Just want to make sure I'm recording the video so I don't end up fighting halfway.

574
00:56:47,320 --> 00:56:47,920
I didn't do it.

575
00:56:48,400 --> 00:56:49,280
So we got assignments.

576
00:56:49,280 --> 00:56:54,000
So you can assign roles directly to a group, and you can assign applications directly to a group.

577
00:56:54,000 --> 00:56:55,120
We're on to the last

578
00:56:56,560 --> 00:56:57,920
slide here in the cheat sheet.

579
00:56:57,920 --> 00:56:59,120
I told you this one was long.

580
00:56:59,280 --> 00:57:00,520
Request to join groups.

581
00:57:00,520 --> 00:57:05,280
The group owner can let users find their own group to join instead of assigning them.

582
00:57:05,280 --> 00:57:12,080
The owner can also set up, set the group to automatically accept all the users or join to require approval.

583
00:57:12,080 --> 00:57:14,960
There are four ways to assign resource access rights to your users.

584
00:57:15,200 --> 00:57:20,480
Direct assignment, group assignment, rule-based assignment, external authority assignment.

585
00:57:20,480 --> 00:57:22,400
No all four of these, please.

586
00:57:23,760 --> 00:57:24,640
And so there we go.

587
00:57:24,640 --> 00:57:26,800
We're at the end here, and that's all there is.

588
00:57:31,120 --> 00:57:35,920
Hey, this is Andrew Brown from ExamPre, and we are looking at device management for Azure Active Directory.

589
00:57:35,920 --> 00:57:37,200
So what is device management?

590
00:57:37,200 --> 00:57:48,560
Well, that is the management of physical devices such as phones, tablets, laptops, desktop computers that are granted access to company resources such as printers, cloud resources via device-based conditional access.

591
00:57:48,720 --> 00:57:50,640
So if you were to go into Azure AD,

592
00:57:51,040 --> 00:57:57,200
under device management, you could see a list of devices that are joined to that directory there.

593
00:57:57,200 --> 00:58:01,840
So here we have some desktops and some laptops, could be phones, could be a variety of things.

594
00:58:02,000 --> 00:58:05,920
Why would a company want to manage their devices from Azure Active Directory?

595
00:58:05,920 --> 00:58:15,200
Well, imagine your company, you've got a distributed workforce, and that allows employees to work remotely or allow them to use their own personal equipment, which we call

596
00:58:15,880 --> 00:58:27,160
BYOD, bring your own device, and this company is going to want to protect their organizational assets, such as their cloud resources, because they have less control over the physical securities of the work environment.

597
00:58:27,160 --> 00:58:31,360
They're not in office, so you want to make sure those things are safe.

598
00:58:31,680 --> 00:58:34,640
All right, and so that's the whole idea behind device management.

599
00:58:34,880 --> 00:58:37,680
And so let's talk about the three ways to get devices into Azure AD.

600
00:58:37,720 --> 00:58:45,200
We're going to go briefly over these three ways, and then we're going to dive deep into each three, because it's super important to know the difference

601
00:58:45,680 --> 00:58:46,960
for the exams, okay?

602
00:58:47,200 --> 00:58:49,840
So the 1st way is Azure AD registered.

603
00:58:50,000 --> 00:58:59,440
So this is where you personally own the mobile, it's a personally owned or mobile device, and you're signing in with personal, Microsoft, or local account.

604
00:58:59,440 --> 00:59:01,840
Notice the emphasis on personal or mobile.

605
00:59:02,080 --> 00:59:05,920
And these are for things like Windows 10, iOS, Android, Mac OS.

606
00:59:06,160 --> 00:59:08,080
Then you have Azure AD joined.

607
00:59:08,240 --> 00:59:14,800
This is when the device is owned by the organization, and they're signed in with the Azure AD account belonging to the organization.

608
00:59:15,280 --> 00:59:17,760
And they exist only in the cloud, so they're cloud native.

609
00:59:17,760 --> 00:59:23,840
And again, this could be Windows 10, but then we have Windows Server 2019 VMs, so things like that.

610
00:59:24,480 --> 00:59:27,120
Then you have hybrid Azure AD joined.

611
00:59:27,520 --> 00:59:34,160
This is again owned by the organization, and you are signed in with an Azure Active Directory Domain Service account belonging to that organization.

612
00:59:34,320 --> 00:59:37,320
And these exist in the cloud or on-premise.

613
00:59:37,320 --> 00:59:41,360
So here we got Windows 7, 8.1, 10, Windows Server 2008 or newer.

614
00:59:42,000 --> 00:59:42,880
So notice

615
00:59:43,240 --> 00:59:46,880
that I'm emphasizing for Azure AD, it's personal, right?

616
00:59:46,880 --> 00:59:50,640
For Azure AD joint, it's cloud native, owned by the organization.

617
00:59:50,840 --> 00:59:54,440
And for the third one, it's owned by the organization, and it's cloud on-premise.

618
00:59:54,440 --> 00:59:59,960
So if the question says, you know, for which device, in the case of on-premise, it's going to have to be.

619
01:00:00,240 --> 01:00:09,440
Hybrid Azure AD joined, but this is just a very simple representation of the stuff, but we've got to go digging deeper into all these three categories right now.

620
01:00:14,000 --> 01:00:21,520
So the first join type or way of getting devices into Azure Active Directory is the AD registered device.

621
01:00:21,520 --> 01:00:30,960
And so these slides are going to be really boring, but we just got to go through the nitty gritties because some of these will help you understand how to choose which one on the exam.

622
01:00:30,960 --> 01:00:33,760
So pay close attention to the stuff that I'm highlighting here, okay?

623
01:00:34,080 --> 01:00:42,960
So the definition here is for registered devices to Azure AD without requiring organizational accounts to sign into the device, which means personal accounts, okay?

624
01:00:43,360 --> 01:00:43,840
Primary

625
01:00:43,960 --> 01:00:49,200
is bring your own device, so BYOD, or mobile devices.

626
01:00:49,760 --> 01:00:55,280
The device ownership is either the user or the organization, but really just remember, personal, okay?

627
01:00:55,520 --> 01:01:02,240
For the operating systems that can manage here, we got Windows 10, iOS, Android, and Mac OS for provisioning.

628
01:01:02,640 --> 01:01:11,240
We have Windows 10 settings, iOS, Android, so company portal with Microsoft Authenticator app, the Mac OS company portal for device sign-in options.

629
01:01:11,240 --> 01:01:15,040
We have end user, local credentials, password, Windows Hello, and PIN.

630
01:01:15,040 --> 01:01:17,360
If you've never heard of Windows Hello, we'll cover it here in a moment.

631
01:01:18,080 --> 01:01:22,400
It has biometrics or pattern for other devices for device management.

632
01:01:22,800 --> 01:01:26,560
We can use mobile device management, so that would be Microsoft Intune.

633
01:01:26,560 --> 01:01:28,640
We're definitely going to be talking about that here in a moment.

634
01:01:28,880 --> 01:01:32,800
Mobile application management, which is similar to the one above.

635
01:01:32,920 --> 01:01:34,480
Again, we're going to cover this as well.

636
01:01:34,960 --> 01:01:43,440
For key capabilities, we have SSO to sign for cloud resources, so that stands for single sign-on, conditional access with enrolled.

637
01:01:43,920 --> 01:01:52,000
into Intune conditional access with app protection policy and enable phone sign in with Microsoft Authenticator app.

638
01:01:52,000 --> 01:01:52,480
Okay.

639
01:01:57,320 --> 01:02:03,760
Let's just talk quickly about Windows Hello, because you might see questions on your exam and you might see this word appear and wonder what that is.

640
01:02:04,000 --> 01:02:13,360
So Windows Hello is a way to give Windows 10 users an alternative way to log into their devices and applications using fingerprints, iris scan, or facial recognition.

641
01:02:14,320 --> 01:02:18,560
I've never used this service before, but I would think it'd be super cool to have an iris scanner.

642
01:02:18,560 --> 01:02:20,080
I don't know what the cost of that is.

643
01:02:20,840 --> 01:02:22,680
But that's all there really is to this service.

644
01:02:22,680 --> 01:02:26,560
So just remember that Windows Hello has these alternate ways of logging in.

645
01:02:31,080 --> 01:02:33,600
All right, so now we're taking a look at MDM and MAM.

646
01:02:33,600 --> 01:02:43,360
And I want to tell you that this is probably the most important concept relating to device management because this allows us to actually put in mechanisms of control.

647
01:02:43,600 --> 01:02:46,800
So you definitely want to remember these two absolutely 100%.

648
01:02:46,800 --> 01:02:49,760
The first one is called Mobile Device Management, MDM.

649
01:02:50,000 --> 01:02:56,280
And this allows you to control the entire device so that you can actually wipe the data from it and also reset it to factory settings.

650
01:02:56,280 --> 01:03:00,640
So you can imagine that's a very powerful way of managing company devices or

651
01:03:01,200 --> 01:03:01,920
other devices.

652
01:03:02,080 --> 01:03:10,880
The other one, which is mobile application management, allows you to publish, push, configure, secure, monitor, and update mobile apps for your users.

653
01:03:11,040 --> 01:03:15,600
So you have one where you can actually control the entire device, and then you have one at a per app level.

654
01:03:16,880 --> 01:03:23,760
And so what you do is under your Azure AD, there's a section called mobility, which is MDM and also MAM.

655
01:03:24,400 --> 01:03:29,680
And so here we can actually add different applications to apply MDM and MAM for

656
01:03:30,600 --> 01:03:33,040
Microsoft, you're going to be using Microsoft Intune.

657
01:03:33,120 --> 01:03:37,680
So whenever you think of MDM or MAM, I want you to think of Microsoft Intune.

658
01:03:38,320 --> 01:03:42,720
That is just this service that allows you to apply these two techniques.

659
01:03:43,040 --> 01:03:47,200
To use Microsoft Intune, you have to upgrade to Azure AD Premium 2.

660
01:03:47,920 --> 01:03:51,120
And Microsoft Intune is part of the Microsoft Endpoint Manager.

661
01:03:51,440 --> 01:03:56,680
And then Microsoft Endpoint Manager and Intune are part of the Microsoft Enterprise Mobility and Security EMS.

662
01:03:56,680 --> 01:03:58,000
I'm going to tell you this.

663
01:03:58,000 --> 01:03:59,280
That is so confusing.

664
01:03:59,280 --> 01:04:00,160
I don't know why.

665
01:04:00,480 --> 01:04:03,680
I mean, like, it's probably for marketing reasons or business reasons.

666
01:04:04,240 --> 01:04:06,960
But the thing is, that all these things are very similar.

667
01:04:07,440 --> 01:04:11,200
And so I just want to try to spell a little bit out a bit better in the next slide.

668
01:04:11,200 --> 01:04:11,520
Okay.

669
01:04:16,040 --> 01:04:17,320
Okay, let's quickly talk about EMS.

670
01:04:17,360 --> 01:04:30,720
So EMS is Microsoft's Enterprise Mobility Plus Security, and it is an intelligent mobility management and security platform that protects and secures your organization and empowers your employees to work in new and flexible ways.

671
01:04:31,360 --> 01:04:34,480
And EMS is an umbrella of multiple Microsoft and Azure services.

672
01:04:34,480 --> 01:04:35,360
So here's a list.

673
01:04:35,360 --> 01:04:41,440
So we have Azure Active Directory, Microsoft Endpoint Configuration Manager, Microsoft Intune, and a bunch of others.

674
01:04:41,440 --> 01:04:44,800
The ones that I want you to remember are these two, right?

675
01:04:44,800 --> 01:04:47,040
Microsoft Intune and Azure Active Directory.

676
01:04:47,200 --> 01:04:51,520
It's just confusing because first they had Microsoft Intune, then they had Microsoft...

677
01:04:51,920 --> 01:04:56,000
Endpoint Configuration Manager, which Intune's a part of, and then they rolled it into this.

678
01:04:56,240 --> 01:05:04,640
It's all marketing buzz, and I know it gets confusing, but I just wanted you to, when you see these three things, you know that they're pretty much the same thing, or they're talking about MDM and MAM.

679
01:05:04,640 --> 01:05:05,760
Okay, so there you go.

680
01:05:10,320 --> 01:05:12,320
Let's just touch on Microsoft Authenticator.

681
01:05:12,320 --> 01:05:17,440
I'm pretty sure I covered this in the AZ-900, but let's just cover it again, just in case we don't remember what it is.

682
01:05:17,600 --> 01:05:21,440
And again, this is a method of using it for registered devices, a way of

683
01:05:21,800 --> 01:05:22,960
authenticating or logging in.

684
01:05:23,280 --> 01:05:29,920
So Microsoft Authenticator is an application that allows you to do secure sign-ins from all your accounts using multi-factor authentication.

685
01:05:30,160 --> 01:05:34,880
It's passwordless, meaning you don't have to put a password in, or it will auto-fill your passwords.

686
01:05:34,880 --> 01:05:38,880
And if you are in the Google Play Store or the Apple Store, you can download this thing in.

687
01:05:39,120 --> 01:05:41,200
It's a great tool to manage your devices.

688
01:05:41,360 --> 01:05:44,800
I strongly recommend you install it just to get the experience of what this thing can do.

689
01:05:44,800 --> 01:05:45,280
Okay?

690
01:05:49,960 --> 01:05:55,360
All right, so we're on to our second type of join type, which is AD join devices.

691
01:05:55,360 --> 01:05:57,920
So again, very boring slide, but let's work our way through it.

692
01:05:57,920 --> 01:06:04,200
So the definition here is joined only to the Azure AD, requiring organizational account to sign into the device.

693
01:06:04,200 --> 01:06:06,440
So this means it's not a personal account.

694
01:06:06,440 --> 01:06:09,680
It's going to be the company's account there for the primary audience.

695
01:06:09,840 --> 01:06:17,920
It's suitable for both cloud only and hybrid organizations, but really the way you should, and hybrid usually means on-prem and cloud, but really it's a cloud native thing, okay?

696
01:06:18,600 --> 01:06:20,720
applicable to all users in an organization.

697
01:06:20,800 --> 01:06:22,720
The device ownership here is organizations.

698
01:06:22,880 --> 01:06:27,600
The operating systems that you can utilize is Windows 10 devices, except for Windows 10 Home.

699
01:06:27,840 --> 01:06:30,160
So it's an organization, it's professional.

700
01:06:30,160 --> 01:06:31,920
You're not going to be using the Home Edition, right?

701
01:06:32,320 --> 01:06:36,320
We can do Windows Servers 2019 with virtual machines running in Azure.

702
01:06:36,480 --> 01:06:38,720
Server Core is not supported.

703
01:06:38,720 --> 01:06:42,080
I don't think that'll show up in the exam, but just a good thing to know.

704
01:06:42,920 --> 01:06:49,200
provisioning, it's self-service with Windows OOB or setting or bulk enrollment or Windows Autopilot.

705
01:06:49,200 --> 01:06:51,200
I think we'll talk about Autopilot in the next section here.

706
01:06:51,520 --> 01:07:03,440
For device sign-in options, we have organizational accounts using passwords, Windows Hello, which we covered before, but this is the business version, FIDO 2.0 security keys, which if you've never heard of, we're going to talk about here shortly.

707
01:07:03,600 --> 01:07:06,560
For device management, we have mobile device management again.

708
01:07:07,160 --> 01:07:11,600
We have co-management with Microsoft Intune and Microsoft Endpoint Configuration Manager.

709
01:07:11,800 --> 01:07:15,440
For key capabilities, we have SSO to both cloud and on-premise resources.

710
01:07:15,760 --> 01:07:20,240
It has conditional access via MDM enrollment and MDM compliance evaluation.

711
01:07:20,400 --> 01:07:26,000
We have self-service password reset and Windows Hello PIN reset on the lock screen.

712
01:07:26,000 --> 01:07:29,760
And the last is enterprise state roaming across devices.

713
01:07:29,760 --> 01:07:30,160
Okay?

714
01:07:35,480 --> 01:07:41,920
All right, we're taking a look here at FIDO 2.0 Security Keys, and that stands for Fast Identity Online Alliance.

715
01:07:42,080 --> 01:07:50,160
And this is an open industry association whose mission is to develop and promote authentication standards that help reduce the world's over-reliance on passwords.

716
01:07:50,160 --> 01:07:55,720
So FIDO Alliance has published three sets of open specifications for simpler, stronger user authentications.

717
01:07:55,720 --> 01:07:56,960
And when we're talking about

718
01:07:57,560 --> 01:08:02,400
a lot of authentication devices, you'll see these terms like U2F, UAF, and things like that.

719
01:08:02,400 --> 01:08:03,760
And this is where this comes from.

720
01:08:03,760 --> 01:08:07,200
Okay, so we have FIDO universal second factor.

721
01:08:07,680 --> 01:08:09,600
We have universal authentication framework.

722
01:08:09,600 --> 01:08:12,520
We have client to authenticator protocols, CTAP.

723
01:08:12,920 --> 01:08:17,520
And then there's also CTAP, which is complementary with WebAuthN.

724
01:08:17,920 --> 01:08:20,800
And together, those are known as FIDO2.

725
01:08:21,200 --> 01:08:34,720
So I know we're not digging into what these things are, but I just want you to know where they come from, because when you buy a security device, generally you'll see those initialisms, and you'll want to know, if you need to go digging, you'll find out more.

726
01:08:34,720 --> 01:08:36,160
But what is a security key?

727
01:08:36,480 --> 01:08:42,960
It's a secondary device used as a second step in an authentication process to gain access to device, workstation, or application.

728
01:08:43,200 --> 01:08:51,080
A security key can resemble something like a memory stick, and when your finger makes contact with a button or exposed metal on the device, it will generate an autofill security token.

729
01:08:51,520 --> 01:08:56,400
And a very popular brand of UbiKey, or sorry, a security key is called an UbiKey.

730
01:08:56,680 --> 01:09:03,360
And this is the exact key I have sitting on my desk right now that I use to authenticate to a lot of my devices.

731
01:09:03,800 --> 01:09:09,200
And just in this key particular, what it can do is it works out-of-the-box with Gmail, Facebook, and hundreds more.

732
01:09:09,360 --> 01:09:14,080
It supports FIDO2, WebAuthN, U2F.

733
01:09:14,520 --> 01:09:16,240
It's waterproof and crust resistance.

734
01:09:16,400 --> 01:09:20,720
It works with USB-A and NFC dual connectors on a single key.

735
01:09:20,960 --> 01:09:24,640
So if you do not have a UbiKey, I strongly recommend picking this one up.

736
01:09:24,800 --> 01:09:25,840
This one is super cheap.

737
01:09:25,840 --> 01:09:28,480
I think it's like 30 USD.

738
01:09:29,280 --> 01:09:35,920
So it's not super expensive, but it's just a great way of learning how to better secure your devices.

739
01:09:35,920 --> 01:09:36,240
Okay?

740
01:09:40,680 --> 01:09:44,160
So we're on to the last type of join type for device management.

741
01:09:44,160 --> 01:09:46,800
This one's called Hybrid Azure AD Join Devices.

742
01:09:47,080 --> 01:09:54,080
And this is allowing you to join to an on-premise AD or Azure AD, requiring organizational account to sign in to the device.

743
01:09:54,160 --> 01:09:56,720
So the emphasis there is on-premise, right?

744
01:09:57,280 --> 01:10:01,280
It's suitable for hybrid organizations with existing on-premise AD infrastructure.

745
01:10:01,440 --> 01:10:03,840
It's applicable to all users within an organization.

746
01:10:04,000 --> 01:10:06,000
The device is going to be owned by the company.

747
01:10:06,160 --> 01:10:10,600
For the OS, we got Windows 10, 8.1, Windows 7,

748
01:10:11,120 --> 01:10:15,440
Windows Server 2008, R2, 2012, and a bunch of other ones there.

749
01:10:15,440 --> 01:10:19,840
For provisioning, we got Windows 10 and Windows Server 2016, 2019.

750
01:10:20,160 --> 01:10:28,800
You can join the domain by, or domain is joined by the IT, and it will auto-join via Azure AD Connect or configured with ADFS.

751
01:10:29,920 --> 01:10:35,280
You can join the domain using Windows Autopilot, which we'll talk about a little bit next here in the next slide.

752
01:10:35,760 --> 01:10:40,640
We got Windows 8.1, Windows 7, Windows Server 2012, et cetera.

753
01:10:41,200 --> 01:10:46,800
Device sign-in options here is for the organizational account would be password, Windows Hello for Business, right?

754
01:10:47,040 --> 01:10:52,880
Device management, we got group policies, configuration manager, standalone or co-management with Microsoft Intune.

755
01:10:53,120 --> 01:10:57,360
For key capabilities, we got SSO to both the cloud and on-premise resources.

756
01:10:57,520 --> 01:11:00,920
Conditional access through domain join or through Intune if co-managed.

757
01:11:01,200 --> 01:11:03,400
Self-service, reset password, and

758
01:11:03,960 --> 01:11:10,160
Windows, hello, PIN, reset on the lock screen, and last but not least, enterprise state roaming across devices.

759
01:11:10,160 --> 01:11:14,640
So yeah, those are all really boring slides, but hopefully some of this information will stick in your head.

760
01:11:14,640 --> 01:11:19,440
So when you see these things, you'll be able to identify between which is which.

761
01:11:19,440 --> 01:11:19,760
Okay.

762
01:11:24,040 --> 01:11:26,400
Okay, so we're going to look at Windows Autopilot here.

763
01:11:26,400 --> 01:11:31,840
So this is a collection of technologies used to set up and pre-configure new devices, getting them ready for productive use.

764
01:11:32,240 --> 01:11:36,480
I would have loved to include a diagram for this, but I couldn't find a very consistent one.

765
01:11:36,640 --> 01:11:38,720
So we're going to have to live with text here today.

766
01:11:39,200 --> 01:11:42,320
But this is when you're initially deploying a new Windows device.

767
01:11:42,480 --> 01:11:46,480
And so Windows Autopilot uses an OEM optimized version of Windows 10.

768
01:11:46,720 --> 01:11:51,520
This version is pre-installed on the device, so you don't have to maintain custom images and drivers for every model.

769
01:11:51,760 --> 01:11:53,960
Instead of re-imaging the device, your existing Windows 10

770
01:11:54,080 --> 01:12:07,240
Installation can be transformed into a business-ready state that can, once deployed, you can manage Windows 10 devices with Microsoft Intune, Windows Update for Business, Microsoft Endpoint Configuration Manager, and other similar tools.

771
01:12:07,240 --> 01:12:09,840
So, what's the point of Microsoft Autopilot?

772
01:12:09,840 --> 01:12:13,840
It's just a great way of setting up your Windows devices, okay?

773
01:12:18,680 --> 01:12:22,640
Hey, this is Andrew Brown from Exam Pro, and we are on to the Device Management Cheat Sheet.

774
01:12:22,640 --> 01:12:28,800
So Device Management allows organizations to manage laptops, desktops, and phones that need access to cloud resources.

775
01:12:28,800 --> 01:12:33,440
Device Management is found under the Azure Active Directory or Azure AD service.

776
01:12:33,600 --> 01:12:38,880
There are three ways to join types, or we should say bring devices into Device Management.

777
01:12:38,880 --> 01:12:47,040
We have Azure Registered, which are personally owned devices or mobile devices that sign in with a local personal account, uses Windows 10 iOS, et cetera.

778
01:12:47,280 --> 01:12:48,600
You have Azure AD Join.

779
01:12:48,880 --> 01:12:57,200
These are devices owned by the org and signed in with an organizational account, and the access is generally for cloud native, but hybrid's possible as well.

780
01:12:57,440 --> 01:13:02,880
Then you have Hybrid Azure AD Joined, and as the name says, it's really for hybrid architecture.

781
01:13:03,120 --> 01:13:05,280
The devices are owned by the organization.

782
01:13:05,360 --> 01:13:09,440
You're going to be using AD DS as a way of managing them, okay?

783
01:13:10,080 --> 01:13:14,080
So for mobile device management, it's good for you to know this concept here.

784
01:13:14,080 --> 01:13:20,960
So MDM is when you control the entire device, can wipe the data from it and also reset it to factory settings.

785
01:13:21,200 --> 01:13:28,600
Whereas mobile application management, MAM, is all about publish, push, configure, secure, monitor, update mobile apps for your users.

786
01:13:28,600 --> 01:13:30,080
That's at the data layer.

787
01:13:30,320 --> 01:13:32,400
So that's all you need to know about device management.

788
01:13:32,400 --> 01:13:33,120
There you go.

789
01:13:37,880 --> 01:13:40,480
So let's take a look at the type of Azure roles.

790
01:13:40,480 --> 01:13:47,760
And I was honestly first confused with Azure roles because I'm from AWS, and we only have one kind of role.

791
01:13:47,760 --> 01:13:51,760
But Azure happens to have three kinds, and there's definitely good reason for it.

792
01:13:52,000 --> 01:13:52,880
So let's break that down.

793
01:13:52,880 --> 01:13:56,320
And the first one is classic subscription administrator roles.

794
01:13:56,640 --> 01:13:58,640
And this is the original role system.

795
01:13:58,640 --> 01:14:03,200
Now, it's not something you're going to be really using, but you should know about it because it still does exist.

796
01:14:03,560 --> 01:14:04,720
Then you have Azure Roles.

797
01:14:04,720 --> 01:14:11,360
This is the authorization system known as Role-Based Access Controls, or RBAC.

798
01:14:11,360 --> 01:14:14,880
And it's built on top of Azure Resource Manager.

799
01:14:15,120 --> 01:14:19,920
And then thirdly, we have Azure Active Directory, also known as Azure AD Roles.

800
01:14:20,240 --> 01:14:25,600
And these Azure AD roles are used to manage Azure AD resources in a directory.

801
01:14:25,600 --> 01:14:26,960
So let's jump into it.

802
01:14:31,400 --> 01:14:34,480
So let's first talk about access controls, or IAM.

803
01:14:34,480 --> 01:14:40,160
So IAM stands for Identity Access Management, and it allows you to create and assign roles to users.

804
01:14:40,440 --> 01:14:44,560
And so this is the general interface for IAM in Azure.

805
01:14:45,120 --> 01:14:49,480
And so we're going to have Azure Roles, which is part of that role.

806
01:14:49,600 --> 01:14:51,360
role-based access system.

807
01:14:51,680 --> 01:15:01,920
And so roles restrict access to resource actions, known as operations, and there's two types of roles for the Azure role-based access system.

808
01:15:02,080 --> 01:15:09,240
You have built-in role, so this is managed by Microsoft, and they are read-only, and they're pre-created roles for you to use.

809
01:15:09,240 --> 01:15:14,360
And then we have custom roles, and these are a role created by you with custom logic.

810
01:15:14,360 --> 01:15:17,280
And so the place you're going to find it there is you're going to see...

811
01:15:17,640 --> 01:15:19,200
It says roles right there.

812
01:15:19,200 --> 01:15:21,680
And that's what we're looking at down below is a bunch of roles.

813
01:15:21,680 --> 01:15:23,360
So you see owner, contributor, reader.

814
01:15:23,680 --> 01:15:25,440
Those are predefined roles for you.

815
01:15:26,560 --> 01:15:28,480
And so then you have role assignment.

816
01:15:28,680 --> 01:15:35,040
And this is when you apply a role to either a service principal, a user group, a user.

817
01:15:35,040 --> 01:15:37,360
And so that's going to be under the tab there.

818
01:15:37,360 --> 01:15:39,200
So that's just you applying a role to somebody.

819
01:15:39,560 --> 01:15:41,280
And then you have deny assignment.

820
01:15:41,280 --> 01:15:47,120
So these block users from performing specific actions, even if a role assignment grants them access.

821
01:15:47,160 --> 01:15:47,520
And the only

822
01:15:47,640 --> 01:15:51,640
The only way to apply a deny assignment is through Azure Blueprint.

823
01:15:51,640 --> 01:15:58,400
So this is just something where you're just setting up like guardrails to make sure that certain things are never used regardless if a role is applied.

824
01:16:03,040 --> 01:16:05,840
So now let's take a look at classic administrators.

825
01:16:06,080 --> 01:16:07,920
And this is the original role system.

826
01:16:08,080 --> 01:16:13,040
And you honestly want to be using the new RBAC system whenever possible.

827
01:16:13,440 --> 01:16:16,960
But the idea here is that you're going to go

828
01:16:17,240 --> 01:16:21,600
It's in the same place that we just saw, the access control, and there's a tab called Classic Administrator.

829
01:16:22,080 --> 01:16:27,120
And in there, you can set up administrators here.

830
01:16:27,360 --> 01:16:29,120
And so you have three types of roles.

831
01:16:29,120 --> 01:16:35,360
You have the account administrator, this is the billing owner of the subscription, and has no access to the Azure portal.

832
01:16:35,600 --> 01:16:44,240
You have the service administrator, so this is the same access of a user assigned, the owner role at the subscription scope, and they have full access to Azure portal.

833
01:16:44,480 --> 01:16:46,960
And then you have the co-administrator, so this is the same.

834
01:16:47,280 --> 01:16:50,560
access of a user who is assigned to the owner role of the subscription scope.

835
01:16:50,800 --> 01:16:53,280
So those are very three simple roles.

836
01:16:53,480 --> 01:17:00,160
And we actually have one because when Baker, who's the other Andrew, set up our Azure account, I think it just sets you up one.

837
01:17:00,160 --> 01:17:06,080
So even though you're not really going to be using it, I do believe that it still sets you up one when you make your account.

838
01:17:06,600 --> 01:17:08,640
So that's just what it is, but there you go.

839
01:17:13,800 --> 01:17:19,520
So let's take a closer look here at Azure role-based access controls, because this is something we're definitely going to be using a lot.

840
01:17:19,840 --> 01:17:28,240
And so role-based access control helps you manage who has access to Azure resources, what they can do with those resources, and what areas they have access to.

841
01:17:28,560 --> 01:17:33,280
And the idea is that you have a user and you want to assign them a role, so you're going to use a role assignment.

842
01:17:33,600 --> 01:17:35,600
And a role assignment is made-up of three elements.

843
01:17:35,600 --> 01:17:38,880
You have the security principle, the role definition, and the scope.

844
01:17:39,160 --> 01:17:42,120
And we're going to look at those three things in a little bit more detail here in a second.

845
01:17:42,400 --> 01:17:43,720
And there are four fundamental

846
01:17:44,000 --> 01:17:53,760
Azure roles, which we are going to learn, and then Azure RBAC also includes over 70 built-in roles, which we definitely do not need to go into great detail.

847
01:17:54,480 --> 01:17:59,360
So let's take a look at one of those three elements first, which is the security principle.

848
01:17:59,600 --> 01:18:03,640
And this represents the identity requesting access to an Azure resource.

849
01:18:03,640 --> 01:18:06,800
And when we say identity, that's just like a loose term for something.

850
01:18:07,120 --> 01:18:20,160
And that something could be a user in your Azure Active Directory, a group which defines a set of users in your Azure Active Directory, a service principle, so a security identity used by applications or services

851
01:18:20,600 --> 01:18:29,040
To access specified Azure resources or a managed identity, an identity in your Azure Active Directory that is automatically managed by Azure.

852
01:18:29,040 --> 01:18:34,160
So, service principle is basically an Azure service, and then managed identity is something in your Azure Active Directory.

853
01:18:35,360 --> 01:18:40,400
Then we'll move on to scope, and a scope is just a set of resources that access that...

854
01:18:40,880 --> 01:18:44,640
assess the role, the role assignment applies to.

855
01:18:45,040 --> 01:18:49,520
And so scope access controls at the management subscription or resource group level.

856
01:18:49,520 --> 01:18:50,560
So what does that mean?

857
01:18:50,840 --> 01:18:52,440
And we have another slide on this.

858
01:18:52,440 --> 01:18:58,800
I can't remember what section it's in, but you have this breakdown of scope where you have management groups, subscriptions, resource groups, or resources.

859
01:18:58,800 --> 01:19:01,680
So when you're saying I'm setting a scope, you're saying what is the scope?

860
01:19:01,680 --> 01:19:02,960
Is it on a management group?

861
01:19:03,040 --> 01:19:04,320
Is it on a particular resource?

862
01:19:04,560 --> 01:19:05,480
Is it a resource group?

863
01:19:05,480 --> 01:19:07,200
And that's what we're trying to say there.

864
01:19:07,960 --> 01:19:13,040
And then last, the last element there is a role definition, and this is a collection of permissions.

865
01:19:13,360 --> 01:19:18,320
So a role definition lists operations that can be performed, such as read, write, and delete.

866
01:19:18,800 --> 01:19:24,240
And roles can be high-level, like owner-specific, or like a virtual machine reader.

867
01:19:24,560 --> 01:19:28,160
And so Azure has built-in roles.

868
01:19:28,280 --> 01:19:31,560
And we said there were four fundamental built-in roles, and here they are.

869
01:19:31,560 --> 01:19:36,040
It's owner, contributor, reader, and user administrator.

870
01:19:36,040 --> 01:19:37,280
So you want to know those four.

871
01:19:37,680 --> 01:19:44,560
And then across the board, you have those three operations, read, grant, and then create, update, delete.

872
01:19:44,560 --> 01:19:46,560
So you can see the owner can do everything.

873
01:19:46,880 --> 01:19:48,080
The contributor can

874
01:19:48,600 --> 01:19:51,440
both read and create stuff, but they just can't grant access to other people.

875
01:19:51,760 --> 01:19:53,600
The reader just has read-only access.

876
01:19:53,600 --> 01:20:00,320
And then a user access administrator is granting other users privileges, but themselves are not creating anything.

877
01:20:00,320 --> 01:20:00,800
All right.

878
01:20:05,760 --> 01:20:10,440
So now let's take a look at the third type of roles, and that's Azure AD roles.

879
01:20:10,440 --> 01:20:14,720
And so Azure AD roles are used to manage Azure AD resources.

880
01:20:15,280 --> 01:20:24,840
in the directory, such as creating or editing users, assigning administrative roles to others, resetting user passwords, managing user licenses, and managing domains.

881
01:20:24,840 --> 01:20:38,760
And so on the right-hand side here, what we can do is go into Azure Active Directory in Azure, and under Roles and Administrators, we can see there is a bunch of roles predefined for us, like Application Administrator, Application Developer, et cetera.

882
01:20:38,760 --> 01:20:39,920
There's a lot in there.

883
01:20:40,520 --> 01:20:46,160
And a few important built-in roles that you should know is the global administrator, so this gives you full access to everything.

884
01:20:46,160 --> 01:20:48,880
The user administrator, full access to create and manage users.

885
01:20:49,280 --> 01:20:53,520
The billing administrator makes purchases, manage subscriptions, and support tickets.

886
01:20:54,000 --> 01:21:00,720
And I want you to know that you can create your own custom roles, but for whatever reason, you have to purchase this.

887
01:21:00,720 --> 01:21:03,440
to me is a bit unusual because in the AWS world,

888
01:21:04,120 --> 01:21:12,200
This is something you don't have to pay for, but I guess Azure Active Directory has been around for a long time, and so they have this whole big tier in there.

889
01:21:12,200 --> 01:21:17,280
And so if you want to be able to make custom roles, you have to upgrade your Azure AD to premium.

890
01:21:17,440 --> 01:21:24,240
So premium could be P1 or P2, and I'm assuming the higher the number, the more controls.

891
01:21:24,240 --> 01:21:24,640
Okay?

892
01:21:29,840 --> 01:21:32,080
So let's take a look at the anatomy of an Azure role.

893
01:21:32,080 --> 01:21:39,880
And as you saw in the previous slide, it does cost money to be able to have the privilege to create custom roles.

894
01:21:39,880 --> 01:21:44,560
You'd need an Active Directory Premium version one or two.

895
01:21:44,800 --> 01:21:54,880
But it's still a good practice to go take a look at what the contents of an actual role is, because you can actually look at the managed roles, open them up and see what they do.

896
01:21:55,200 --> 01:21:57,840
And you should really look at them and not just take them

897
01:21:58,520 --> 01:22:18,560
Based on the face value of the name of the role, so I want you to know that Azure role documents have two different syntaxes, whether you're using PowerShell or CLI, and so the example here on the right-hand side is going to be using PowerShell, and it's very simple, and it's just the property name is going to change, so see where it says Name.

898
01:22:19,200 --> 01:22:22,200
If you were using PowerShell, I have in parentheses, it'd be role name.

899
01:22:22,200 --> 01:22:28,560
Okay, so if you look one up and it's using JSON and the names are different, you're going to have to do that translation, all right?

900
01:22:29,720 --> 01:22:31,360
So let's just quickly go through the properties here.

901
01:22:31,360 --> 01:22:32,560
So the first thing is the name.

902
01:22:32,880 --> 01:22:34,960
That's going to describe what the role is.

903
01:22:35,200 --> 01:22:36,480
Then you have the ID.

904
01:22:36,480 --> 01:22:38,400
This is not something that you are creating.

905
01:22:38,400 --> 01:22:40,240
It's going to be auto-generated for you.

906
01:22:40,560 --> 01:22:43,280
Then you have is custom, whether it's going to be custom or not.

907
01:22:43,280 --> 01:22:45,360
The description, that's self-explanatory.

908
01:22:45,600 --> 01:22:46,640
And then the actions.

909
01:22:46,640 --> 01:22:50,720
This is what you care about because the actions tell you exactly what you're allowed to perform.

910
01:22:52,000 --> 01:22:53,800
So that's a big list there.

911
01:22:53,800 --> 01:22:55,200
It's pretty self-explanatory.

912
01:22:55,440 --> 01:22:56,800
But then you have not actions.

913
01:22:56,800 --> 01:23:00,240
And this is basically you explicitly saying you're not allowed to do these things.

914
01:23:00,240 --> 01:23:01,840
It's just a guardrail to make things safe.

915
01:23:02,320 --> 01:23:03,840
Do you really need a not actions?

916
01:23:03,840 --> 01:23:04,240
I don't know.

917
01:23:04,240 --> 01:23:05,360
That's just how they designed it.

918
01:23:05,760 --> 01:23:07,600
Then you have data actions.

919
01:23:07,600 --> 01:23:13,280
This is an array of strings that specifies data operations that are allowed to be performed within the data.

920
01:23:13,800 --> 01:23:14,640
within that object.

921
01:23:14,640 --> 01:23:18,240
And then you have not data actions, so things you're not allowed to do with data.

922
01:23:18,640 --> 01:23:20,080
And then assignable scopes.

923
01:23:20,080 --> 01:23:23,200
And this is an array of strings that specify the scope for the custom role.

924
01:23:24,240 --> 01:23:28,400
And you can only define one management group for assignable scopes for a custom role.

925
01:23:29,600 --> 01:23:33,520
I do want to just point out one other things with these roles.

926
01:23:33,760 --> 01:23:37,840
And it really just has to do with these asterisks, just if you're not familiar with them.

927
01:23:37,840 --> 01:23:40,240
But that usually indicates A wildcard permission.

928
01:23:40,240 --> 01:23:42,080
It's like saying match everything.

929
01:23:42,640 --> 01:23:49,360
And so when you're doing that, it's going to match things like you can use it in actions, not actions, data actions, and not data actions.

930
01:23:50,240 --> 01:23:55,520
And so again, it just matches everything in that sub thing because you might have a bunch of options you can put there.

931
01:23:56,280 --> 01:24:03,040
And so for example, what it's doing, like let's see, you see where it says management or cost management.

932
01:24:03,560 --> 01:24:10,960
and it has action, read, write, delete, run, action, all that stuff in red would be matched with that asterisk.

933
01:24:11,080 --> 01:24:16,240
And I know it doesn't match the examples on the right-hand side, but you just got to imagine that there's other things there, okay?

934
01:24:21,120 --> 01:24:28,720
Now let's just do a quick comparison between Azure policies and Azure roles, just to make sure that we're very clear what the difference of these two things are.

935
01:24:29,120 --> 01:24:32,640
So Azure policies, these are used to ensure compliance of resources.

936
01:24:33,120 --> 01:24:36,800
And Azure roles, these are used to control access to Azure resources.

937
01:24:36,800 --> 01:24:47,840
So on the policy side, these are going to evaluate the state by examining properties on the resources that are represented in resource manager and properties of some resource providers.

938
01:24:48,000 --> 01:24:50,000
They do not restrict actions.

939
01:24:50,080 --> 01:24:52,480
And we call this operations.

940
01:24:53,560 --> 01:25:01,520
It ensures that resource state is compliant to your business rules without concern for who made change or who has permission to make the change.

941
01:25:02,160 --> 01:25:12,320
Even if an individual has access to perform an action, if the result is a non-compliant resource, Azure Policy still blocks the create or update actions there.

942
01:25:13,280 --> 01:25:15,200
On the role side, it's very simple.

943
01:25:15,360 --> 01:25:20,400
It focuses on managing user actions at different scopes, and it does restrictions.

944
01:25:20,960 --> 01:25:23,760
it does apply restrictions on Azure resources.

945
01:25:24,640 --> 01:25:30,720
So Azure resource or Azure roles controls what you have access to, Azure policies, ensures compliancy.

946
01:25:35,040 --> 01:25:36,640
All right, just another comparison here.

947
01:25:36,640 --> 01:25:41,520
I want to compare Azure AD roles to the Azure roles, the RBAC versions.

948
01:25:41,920 --> 01:25:45,920
So AD roles, they're used to control access to AD resources.

949
01:25:46,320 --> 01:25:49,160
And Azure roles control access to Azure resources.

950
01:25:49,160 --> 01:25:56,000
And here's a good representation here, where you have AD roles on the left-hand side and Azure roles on the right-hand side.

951
01:25:56,680 --> 01:26:07,120
And the idea on the left-hand side, that actually represents like Office 365, but you can see Azure AD has some coverage both inside and outside of Azure.

952
01:26:07,920 --> 01:26:12,880
So an AD resource could be something like users, groups, billing,

953
01:26:13,520 --> 01:26:16,560
licensing, application registration, or et cetera.

954
01:26:17,200 --> 01:26:23,840
And then on the right-hand side for Azure resources, this could be virtual machines, databases, cloud storage, cloud networking, and et cetera.

955
01:26:24,160 --> 01:26:29,760
By default, Azure roles and Azure AD roles do not span Azure and 8 and Azure AD.

956
01:26:30,160 --> 01:26:35,280
And by default, the global administrator doesn't have access to Azure resources.

957
01:26:35,600 --> 01:26:37,440
So that's just good to know.

958
01:26:37,600 --> 01:26:43,400
And global administrators can gain access to Azure resources if granted the user access administrator role, so the Azure

959
01:26:43,480 --> 01:26:44,560
Azure role.

960
01:26:44,560 --> 01:26:45,280
So there you go.

961
01:26:49,840 --> 01:26:53,760
Hey, this is Andrew Brown from Exam Pro, and we are looking at the Azure Roles Cheat Sheet.

962
01:26:53,760 --> 01:26:58,480
And when we say Azure Roles Cheat Sheet, we're actually talking about all the roles, not just the Azure Roles, okay?

963
01:26:58,480 --> 01:26:59,760
Because there's three types.

964
01:27:00,000 --> 01:27:02,640
You've got the classic subscription administrator roles.

965
01:27:02,800 --> 01:27:07,280
You have Azure Roles, which is also known as role-based access controls.

966
01:27:07,760 --> 01:27:12,560
That's built on top of ARM, and then you have Azure Active Directory roles.

967
01:27:12,560 --> 01:27:20,720
Okay, so you need to know the difference between the three when we're talking about Identity Access Management (IAM) that allows you to create and assign.

968
01:27:21,200 --> 01:27:22,800
Azure roles to users.

969
01:27:23,040 --> 01:27:26,640
Roles restrict access to resource actions, also known as operations.

970
01:27:26,640 --> 01:27:27,960
There's two types of roles.

971
01:27:27,960 --> 01:27:39,360
You've got built-in roles, managed Microsoft roles are read-only pre-created roles for you to use, and then you have custom roles, a role created by you with your own custom logic.

972
01:27:39,600 --> 01:27:46,640
For a role assignment is when you apply a role to a user, and a role assignment is composed of a security principle, role definition, and scope.

973
01:27:47,080 --> 01:27:51,360
measures for built-in roles are owner, contributor, reader, and user access administrator.

974
01:27:51,360 --> 01:27:57,120
I don't have the table here, but you should know the difference between them, but usually they're pretty self-explanatory based on their name.

975
01:27:57,600 --> 01:28:00,240
For classic administrators, we have three types of roles.

976
01:28:00,240 --> 01:28:04,720
We've got account administrator, service administrator, and co-administrator.

977
01:28:05,040 --> 01:28:16,160
For important Azure AD roles, you need to remember you have global administrator, user administrator, billing administrator, and on the exam, you might even see more kinds there, so I would encourage you to go look up all the different kinds.

978
01:28:16,720 --> 01:28:20,480
Or I might end up making a video going in more in-depth for some of them in this course.

979
01:28:20,800 --> 01:28:25,600
You can create custom Azure AD roles, but you're going to need that P1 or P2.

980
01:28:25,600 --> 01:28:27,520
So there you go, that's Azure roles.

981
01:28:31,800 --> 01:28:37,760
So Azure policies are used to enforce organizational standards to assess compliance at scale.

982
01:28:37,760 --> 01:28:39,720
And policies do not restrict access.

983
01:28:39,720 --> 01:28:41,600
They only observe for compliance.

984
01:28:41,840 --> 01:28:48,240
So here on the right-hand side in the Azure policy portal, you're going to see a big list of policies.

985
01:28:48,480 --> 01:28:52,240
And Azure has a bunch of policies built in for you right away that you can use.

986
01:28:52,480 --> 01:29:01,440
So if you need to meet NIST or FedRAMP or HIPAA, what you can do is just turn those on, and it's going to check based on the categories to see if you're using Cosmo DB.

987
01:29:01,800 --> 01:29:05,520
It's going to check for that compliance and tell you whether you're being compliant or not.

988
01:29:05,760 --> 01:29:09,440
And there's a bunch of components that are involved when you're making Azure policies.

989
01:29:09,520 --> 01:29:11,680
So you have the policy definition file.

990
01:29:11,960 --> 01:29:16,320
This is just a JSON file that describes business rules to control access to resources.

991
01:29:16,560 --> 01:29:17,720
You have policy assignment.

992
01:29:17,720 --> 01:29:22,720
This is the scope of a policy that it can affect, assigned to a user, a resource group, or a management group.

993
01:29:22,960 --> 01:29:24,720
You have policy parameters.

994
01:29:24,880 --> 01:29:29,920
These are values you can pass into your policy definition, so your policies are more flexible for use.

995
01:29:30,240 --> 01:29:31,720
And you have initiative definition.

996
01:29:31,960 --> 01:29:36,400
And these are an initiative definition is a collection of policy definitions that you can assign.

997
01:29:36,400 --> 01:29:41,280
So it's a group of policies to enforce some kind of compliance like PCI DSS compliance.

998
01:29:41,520 --> 01:29:47,520
And I want you to carefully look at the screenshot on the right-hand side where it says definition type and you see policy initiative.

999
01:29:47,520 --> 01:29:50,400
So the ones at the top there is talking about policy definitions.

1000
01:29:50,520 --> 01:29:54,080
And then you have initiative definitions which are just a group of policy definitions.

1001
01:29:54,080 --> 01:29:54,560
All right.

1002
01:29:55,040 --> 01:29:59,960
Hey, this is Andrew Brown from Exam Pro and we're looking at Azure policies which are used to enforce organizational standards.

1003
01:30:00,040 --> 01:30:01,360
standards for compliance.

1004
01:30:05,520 --> 01:30:10,840
So once you turn on some policies, you're going to want to see when things are becoming non-compliant.

1005
01:30:10,840 --> 01:30:18,240
And so what you can do is you can just go under policies and compliance, and you're going to see whether something is compliant or not.

1006
01:30:18,800 --> 01:30:20,480
So that's what we're seeing.

1007
01:30:20,480 --> 01:30:26,760
And then down below, I launched an Azure Virtual Machine for disaster recovery, and you can see that it's in a non-compliant state.

1008
01:30:26,760 --> 01:30:28,000
So it's as simple as that.

1009
01:30:28,800 --> 01:30:30,320
I just wanted you to know that, okay?

1010
01:30:35,280 --> 01:30:38,160
So let's take a look at the anatomy of an Azure Policy Definition file.

1011
01:30:38,160 --> 01:30:43,200
Probably not going to be in your exam, but I think it's a really good practice just to open these up and see what they look like.

1012
01:30:43,680 --> 01:30:48,080
So on the right-hand side, we have an Azure policy definition file, and we'll just walk our way through it.

1013
01:30:48,120 --> 01:30:52,240
The first thing you're going to have is the display name that's going to describe what the policy is for.

1014
01:30:52,800 --> 01:30:56,880
Then you're going to have a certain type, and we have built-in, custom, and static.

1015
01:30:57,120 --> 01:30:59,200
So built-in means that it's maintained by Microsoft.

1016
01:30:59,200 --> 01:31:07,280
Then there's custom, whether it's created by you, and then static, where it's owned by Microsoft, but it's for a regulatory compliance, so maybe HIPAA or FedRAMP or something like that.

1017
01:31:07,680 --> 01:31:11,360
Then you have the description, so that's going to elaborate on the actual policy itself.

1018
01:31:11,360 --> 01:31:14,000
But generally, the display names are pretty darn robust.

1019
01:31:14,560 --> 01:31:19,760
Then you have metadata, and this is just going to be optional data that you can provide.

1020
01:31:19,760 --> 01:31:24,240
So if you look down below in the parameters, we have some metadata explaining what that parameter is.

1021
01:31:24,560 --> 01:31:25,760
Then you have the mode.

1022
01:31:26,240 --> 01:31:29,520
And so the mode is determined by the type of resource it is.

1023
01:31:29,520 --> 01:31:32,560
And so it can either be a resource provider or an Azure resource

1024
01:31:32,920 --> 01:31:34,160
or Azure Resource Manager.

1025
01:31:34,400 --> 01:31:37,840
In the case of Resource Manager, it's going to either be all or index.

1026
01:31:38,200 --> 01:31:42,160
And so for all, that's going to basically select everything like resource groups, subscriptions, and all resource types.

1027
01:31:42,160 --> 01:31:45,760
And for index, it's only going to be resource types that support tags and locations.

1028
01:31:46,240 --> 01:31:48,560
For resource provider, it's a very limited list.

1029
01:31:48,560 --> 01:31:54,400
And so we have the MicrosoftContainerService.data, which is now generally not used.

1030
01:31:54,600 --> 01:31:57,520
And then you have Kubernetes data and Key Vault.

1031
01:31:57,920 --> 01:32:03,600
Data, okay, and then just moving on a bit further here, I just want to go into parameters.

1032
01:32:03,600 --> 01:32:10,920
So, for parameters, these are values you can pass into the policy to allow the policy to be more flexible, and so here we are just to find the parameters.

1033
01:32:10,920 --> 01:32:16,400
So, we have the name of the parameter, the type, so string, array, object, boolean, integer, float, etc.

1034
01:32:16,640 --> 01:32:19,600
You'll notice that there's no name on that parameter, which is totally fine.

1035
01:32:21,000 --> 01:32:24,160
And then you have the metadata actually follows a particular structure.

1036
01:32:24,160 --> 01:32:27,640
So you have description, display name, strong type, assigned permissions.

1037
01:32:27,640 --> 01:32:30,640
You have the default value, which you don't necessarily have to set.

1038
01:32:30,640 --> 01:32:32,000
You have the allowed value.

1039
01:32:32,560 --> 01:32:36,000
And then when you want to reference a parameter, you're going to use this field and in.

1040
01:32:36,000 --> 01:32:37,920
So you say field location in.

1041
01:32:38,240 --> 01:32:43,600
And there you can see that we're using a function, which is very similar to the ARM templates.

1042
01:32:43,840 --> 01:32:47,520
And then over there, you can just see that it's over there how it's referencing it.

1043
01:32:49,080 --> 01:32:52,280
And then just the last thing here, I just want to talk about policy rules.

1044
01:32:52,280 --> 01:32:54,400
So this consists of an if and then block.

1045
01:32:54,640 --> 01:32:59,680
So in the if block, you define one or more conditions that specify when the policy is enforced.

1046
01:32:59,960 --> 01:33:04,880
And you can apply logical operators to these conditions to precisely define the scenario for a policy.

1047
01:33:05,200 --> 01:33:09,120
So here you have the if, and if the if is met, then make that thing happen.

1048
01:33:09,120 --> 01:33:17,760
So there you can see on the policy rule, if it says, if you have a type of virtual machines, then you want the effect and you'll pull in the effect parameter.

1049
01:33:18,240 --> 01:33:24,400
And then what it's going to do is it's going to check for the status code and make sure whether it's healthy or not.

1050
01:33:24,640 --> 01:33:26,480
And so that's basically how they work.

1051
01:33:26,960 --> 01:33:27,880
And just one more thing.

1052
01:33:27,880 --> 01:33:30,480
Let's just talk about the policy rule a little bit more about the policy effect.

1053
01:33:30,640 --> 01:33:32,440
So we have that if and then statement.

1054
01:33:32,440 --> 01:33:34,160
We'll just talk about what we can do there.

1055
01:33:34,160 --> 01:33:40,160
So deny is whether the resource as creation update failed due to policy.

1056
01:33:40,400 --> 01:33:40,840
Audit.

1057
01:33:40,840 --> 01:33:46,480
So create a warning event in the activity log when evaluating A non-compliance resource, but it doesn't stop the request.

1058
01:33:46,720 --> 01:33:47,280
Append.

1059
01:33:48,000 --> 01:33:51,520
add additional parameters fields to the requested resource during the creation or update.

1060
01:33:51,800 --> 01:33:58,720
A common example is adding tags on resources such as cost center or specifying allowed IPs for storage resources.

1061
01:33:59,600 --> 01:34:01,520
Then you have an audit if not exists.

1062
01:34:01,520 --> 01:34:06,240
Create a warning event in the activity log when evaluating A compliance resource, but it doesn't stop the request.

1063
01:34:06,520 --> 01:34:08,120
Deploy if not exists.

1064
01:34:08,120 --> 01:34:10,960
So execute a template deployment when a specific condition is met.

1065
01:34:11,200 --> 01:34:18,480
For example, if SQL encryption is enabled on a database, then it can run a template after the DB is created to specify a way.

1066
01:34:18,680 --> 01:34:19,840
And the last one here is disabled.

1067
01:34:19,840 --> 01:34:22,800
So the policy rule is ignored, often used for testing.

1068
01:34:22,800 --> 01:34:27,200
The reason I'm just showing you this last one here is I just wanted to show you what action is taken

1069
01:34:28,160 --> 01:34:29,840
based on the policy, okay?

1070
01:34:30,400 --> 01:34:37,320
And again, probably not going to be in your exam, but it's something I want you to know so that you understand what a policy can actually do.

1071
01:34:37,320 --> 01:34:40,000
And this is basically the last one I really want you to know, okay?

1072
01:34:45,040 --> 01:34:52,080
Hey, this is Andrew Brown from Exam Pro, and we're going to take a look at how to keep things compliant within our Azure account with Azure Policy.

1073
01:34:52,080 --> 01:34:56,560
So let's make our way over to the Azure Policy Portal by typing policy at the top here.

1074
01:34:56,880 --> 01:35:00,320
And right away, you can see already that I have a policy assigned.

1075
01:35:00,560 --> 01:35:01,520
I didn't assign this.

1076
01:35:01,520 --> 01:35:06,240
Azure did this for me by default, and it's a great way to start understanding how this is useful.

1077
01:35:06,240 --> 01:35:08,640
So I'm going to go ahead and just click into that one there.

1078
01:35:08,880 --> 01:35:13,400
And this is an initiative policy, meaning that it's made-up of a bunch of policies.

1079
01:35:13,400 --> 01:35:14,920
We'll go over that over in a moment.

1080
01:35:15,040 --> 01:35:18,000
But you can see here that's saying, hey, you should turn on all these things.

1081
01:35:18,000 --> 01:35:20,320
They're not turned on by default, so you should turn them on.

1082
01:35:20,560 --> 01:35:22,480
And these are ones that you have not turned on.

1083
01:35:22,640 --> 01:35:28,400
You might not want to consider turning some of these on if you have to consider costs, but I think most of these are free.

1084
01:35:29,200 --> 01:35:31,520
But that's something that you'll have to decide on your own.

1085
01:35:32,000 --> 01:35:33,600
But that gives you a general idea there.

1086
01:35:33,600 --> 01:35:35,360
So let's go back to policy at the top.

1087
01:35:35,360 --> 01:35:38,400
On the left-hand side here, we can see our assignments.

1088
01:35:38,720 --> 01:35:40,800
And here I have that initiative type there.

1089
01:35:40,800 --> 01:35:43,040
If I click into it, allows me to edit it there.

1090
01:35:43,720 --> 01:35:47,120
And what's really nice is if I want to disable it, I could just disable it.

1091
01:35:47,360 --> 01:35:48,720
But I think this is the default one.

1092
01:35:48,720 --> 01:35:50,160
So, oh, no, I can disable it.

1093
01:35:50,160 --> 01:35:50,720
Okay, great.

1094
01:35:51,200 --> 01:35:52,720
And you can see it was assigned by who.

1095
01:35:53,240 --> 01:35:56,960
And then you can also take remediation actions here.

1096
01:35:56,960 --> 01:36:00,440
So by default, this assignment will only take effect on newly created resources.

1097
01:36:00,440 --> 01:36:04,560
Existing resources can be updated via a remediation task after the policy is assigned.

1098
01:36:04,720 --> 01:36:08,960
So if you need this, apply to ones that are created or prior.

1099
01:36:09,680 --> 01:36:11,680
updated, that's something you might want to do.

1100
01:36:12,040 --> 01:36:13,360
But anyway, we'll get out of there.

1101
01:36:13,680 --> 01:36:19,640
And we'll go take a look at all the big list of predefined definitions that Azure gives us.

1102
01:36:19,640 --> 01:36:22,080
So this is a great way for us to get started.

1103
01:36:22,720 --> 01:36:26,080
You'll notice on the right hand side, we have initiative and we have policy.

1104
01:36:26,080 --> 01:36:28,840
Again, initiative is a collection of policies down below.

1105
01:36:28,840 --> 01:36:30,080
And these are individual ones.

1106
01:36:30,400 --> 01:36:33,040
Let's just go take a look at some policies.

1107
01:36:33,040 --> 01:36:35,600
And maybe we can go apply one to like a virtual machine.

1108
01:36:36,160 --> 01:36:38,640
So what I'm going to do is just drop down

1109
01:36:39,920 --> 01:36:44,400
This here, and we can just unselect here, and let's just go take a look.

1110
01:36:44,960 --> 01:36:46,720
Do we have one called virtual machines?

1111
01:36:46,720 --> 01:36:53,920
Not really, but we can go for compute here, and we can just take a look here.

1112
01:36:53,920 --> 01:36:57,120
So, audit virtual machine without disaster recovery.

1113
01:36:57,600 --> 01:36:58,720
Let's take a look at that one.

1114
01:37:00,640 --> 01:37:03,360
And I just want to see the full description here.

1115
01:37:03,680 --> 01:37:05,960
Audit virtual machine without disaster recovery configured.

1116
01:37:05,960 --> 01:37:07,520
I think that sounds really good to me.

1117
01:37:07,520 --> 01:37:09,520
So I'm going to go ahead and assign that.

1118
01:37:10,080 --> 01:37:11,840
And we can choose a scope.

1119
01:37:12,880 --> 01:37:14,880
And so I'm going to choose my subscription here.

1120
01:37:14,880 --> 01:37:16,440
And then we can choose a resource group.

1121
01:37:16,440 --> 01:37:18,960
And you're going to notice that I don't actually have any resources.

1122
01:37:18,960 --> 01:37:21,040
So to scope that within.

1123
01:37:21,040 --> 01:37:24,160
So what we'll go do is launch ourself a virtual machine.

1124
01:37:24,480 --> 01:37:28,480
So make our way over to the virtual machine portal here.

1125
01:37:28,480 --> 01:37:29,760
We'll add a virtual machine.

1126
01:37:31,040 --> 01:37:32,880
And I want something really cheap.

1127
01:37:33,120 --> 01:37:40,320
And so here it's set to a more expensive one because I was launching a Windows server previously, but I want the cheapest server I can get.

1128
01:37:40,640 --> 01:37:44,880
Actually, before I do that, I'm just going to go back and oh yeah, it's on Ubuntu, just making sure.

1129
01:37:45,760 --> 01:37:50,000
And the one I had that was really cheap is the B1LS.

1130
01:37:51,240 --> 01:37:53,440
And so I'm just going to go up here to the top.

1131
01:37:53,680 --> 01:37:55,040
We'll name this Bajor.

1132
01:37:55,840 --> 01:37:58,720
And we'll put it in the Bajor group there.

1133
01:38:01,160 --> 01:38:02,800
This size does not support Azure spot.

1134
01:38:02,800 --> 01:38:03,640
That's totally fine.

1135
01:38:03,640 --> 01:38:04,560
I don't need spot.

1136
01:38:04,560 --> 01:38:05,920
Did I turn that on by accident?

1137
01:38:06,240 --> 01:38:06,880
Oh, I did.

1138
01:38:07,840 --> 01:38:10,000
And this all looks fine to me.

1139
01:38:10,000 --> 01:38:11,880
I'm not going to be logging into this machine.

1140
01:38:11,880 --> 01:38:13,480
We just want to launch it up as an example.

1141
01:38:13,480 --> 01:38:16,000
I'm going to move to standard SSD because I don't need premium here.

1142
01:38:16,720 --> 01:38:18,160
And this looks fine to me.

1143
01:38:18,160 --> 01:38:20,480
We'll go ahead and hit review and create.

1144
01:38:20,960 --> 01:38:24,080
So we'll go ahead and create that.

1145
01:38:26,960 --> 01:38:28,720
And I guess we have to download that private key.

1146
01:38:28,720 --> 01:38:29,520
Probably a good idea.

1147
01:38:29,520 --> 01:38:31,360
We're not going to use it for anything, but that's okay.

1148
01:38:34,400 --> 01:38:37,320
And now that's deploying, let's see if we can select the scope as it's creating.

1149
01:38:37,320 --> 01:38:38,280
I'm not sure if it'll let us do that.

1150
01:38:38,280 --> 01:38:41,040
I'm just going to hit cancel here and reopen here.

1151
01:38:42,320 --> 01:38:43,840
And let's see if it shows up now.

1152
01:38:43,840 --> 01:38:44,640
It doesn't.

1153
01:38:44,640 --> 01:38:47,200
So we'll just wait a moment here.

1154
01:38:47,880 --> 01:38:50,000
I'll go back to my policy here.

1155
01:38:51,360 --> 01:38:53,360
And I'm just going to wait for this server to create.

1156
01:38:53,360 --> 01:38:54,720
And once that is created,

1157
01:38:56,200 --> 01:38:59,440
What we'll do is we'll just come back here and see if we can now scope that.

1158
01:38:59,920 --> 01:39:15,120
All right, so after a short little wait, our server is ready here, so let's make our way back to our policy here, and I guess I lost it, so I'll have to go back to definitions and we'll drop down categories, deselect, we'll go to compute.

1159
01:39:16,400 --> 01:39:19,440
And we'll go ahead and click on disaster recovery again.

1160
01:39:19,440 --> 01:39:21,920
Here you can see the policy in its entirety.

1161
01:39:21,920 --> 01:39:22,800
So that's kind of nice.

1162
01:39:23,040 --> 01:39:24,400
And we'll go ahead and assign that.

1163
01:39:24,480 --> 01:39:25,680
And we'll choose our scope.

1164
01:39:26,000 --> 01:39:27,960
So we'll go back here to subscription one.

1165
01:39:27,960 --> 01:39:29,760
Now we should have Bajour.

1166
01:39:30,160 --> 01:39:31,680
And I'll go ahead and hit select.

1167
01:39:32,480 --> 01:39:35,120
We can assign it exclusions, not something I'm going to do today.

1168
01:39:35,600 --> 01:39:36,520
There is the name of it.

1169
01:39:36,520 --> 01:39:37,280
That's totally fine.

1170
01:39:37,280 --> 01:39:38,480
And we can hit enabled.

1171
01:39:38,480 --> 01:39:40,160
And I'm the one who's enabling it.

1172
01:39:40,160 --> 01:39:41,360
So that sounds like a good idea.

1173
01:39:41,920 --> 01:39:42,760
We'll go next.

1174
01:39:43,080 --> 01:39:44,840
We're going to leave remediation off.

1175
01:39:44,840 --> 01:39:45,920
We don't need to do that today.

1176
01:39:45,920 --> 01:39:46,880
We'll hit create.

1177
01:39:47,600 --> 01:39:49,280
And so now this policy is assigned.

1178
01:39:49,280 --> 01:39:52,720
It says here, please note that the assignment takes around 30 minutes to take effect.

1179
01:39:52,960 --> 01:39:55,680
So we work our way back here and look at assignments.

1180
01:39:56,720 --> 01:39:57,920
I don't see it here yet.

1181
01:39:57,920 --> 01:39:58,880
So there it is.

1182
01:40:00,160 --> 01:40:03,520
And it's probably not going to show us on there.

1183
01:40:03,520 --> 01:40:04,960
So we'll go back to our overview.

1184
01:40:05,920 --> 01:40:09,360
And so I want to see, it hasn't started yet.

1185
01:40:09,360 --> 01:40:11,200
So we'll just wait for a while here.

1186
01:40:11,200 --> 01:40:13,520
It might take 30 minutes, might take 10, not sure.

1187
01:40:13,840 --> 01:40:15,360
And we'll just see what happens.

1188
01:40:15,360 --> 01:40:18,640
It should show up as non-compliant, but let's see that actually happen.

1189
01:40:19,280 --> 01:40:25,880
All right, so after waiting a little while here, I think it was about 15, 20 minutes, we can now see that it's saying that it's non-compliant.

1190
01:40:25,880 --> 01:40:27,360
So we'll go ahead and click into there.

1191
01:40:30,120 --> 01:40:32,800
And we can see what exactly it is complaining about.

1192
01:40:33,600 --> 01:40:35,200
Let me click over to that resource.

1193
01:40:36,320 --> 01:40:36,960
So there you go.

1194
01:40:36,960 --> 01:40:38,960
It's not too complicated there.

1195
01:40:39,240 --> 01:40:41,360
We'll go ahead and just delete that assignment.

1196
01:40:44,960 --> 01:40:47,840
And if you're wondering where blueprints are, they're all the way over here.

1197
01:40:47,840 --> 01:40:58,400
We talked about blueprints in the actual course, not something we actually have to do for the AZ 104, but because it is probably a better way of doing things, I just wanted to point that out to you.

1198
01:40:59,120 --> 01:41:00,000
But yeah, there you go.

1199
01:41:00,000 --> 01:41:01,280
So it's as simple as that.

1200
01:41:05,920 --> 01:41:09,320
Hey, this is Andrew Brown from Exam Pro and we are looking at Azure Policies Cheat Sheet.

1201
01:41:09,320 --> 01:41:13,360
This is an extremely short one because there's not a whole lot we need to know, but let's get through it.

1202
01:41:13,600 --> 01:41:16,160
So Azure Policies enforce organizational standards.

1203
01:41:16,880 --> 01:41:18,720
and to assess compliance at scale.

1204
01:41:18,720 --> 01:41:20,120
Policies do not restrict access.

1205
01:41:20,120 --> 01:41:21,520
They only observe for compliance.

1206
01:41:21,840 --> 01:41:25,360
Once a policy is assigned, it will evaluate for compliance state periodically.

1207
01:41:25,600 --> 01:41:30,240
The rules of a policy are described in JSON file and is known as a policy definition.

1208
01:41:30,400 --> 01:41:35,840
A policy definition can be grouped together, which is known as a policy initiative, formerly known as a policy set.

1209
01:41:36,080 --> 01:41:42,720
So there could be some interesting information you might want to read in the Azure docs where they talk about different kinds of use cases.

1210
01:41:42,960 --> 01:41:46,760
I didn't see any kind of questions on the exam that were like that, so it's only for you.

1211
01:41:46,920 --> 01:41:49,800
own benefit, but I just want to tell you, you might round out your knowledge there, so there you go.

1212
01:41:49,800 --> 01:42:03,440
All right, so let's take a quick introduction into Azure Resource Manager, which is short for ARM, and is a service that allows you to manage Azure resources.

1213
01:42:03,440 --> 01:42:10,320
And one thing that really confused me about the service when I first started using Azure was that you couldn't just type in Azure Resource Manager.

1214
01:42:10,560 --> 01:42:16,480
And the reason why is because it's actually a collection of services, and it makes up what we call this

1215
01:42:16,840 --> 01:42:38,880
Management layer, and it allows you to do things like create, update, delete resources, apply management features such as access controls, locks, and tags, writing infrastructure as code via JSON templates, and there are very specific features we're going to be looking at that make up the ARM layer, and it's going to be the following: so we're going to be looking at subscriptions, management groups, resource groups.

1216
01:42:39,320 --> 01:42:52,240
resource providers, resource locks, Azure blueprints, resource tags, access control, so also known as IM, role-based access controls, Azure policies, and ARM templates.

1217
01:42:52,960 --> 01:42:54,960
I don't know why I don't have tenant in there.

1218
01:42:54,960 --> 01:42:57,280
I might have it in another slide, but it's not a big deal.

1219
01:42:57,600 --> 01:43:01,440
But that is what we're going to be covering in this Azure Resource Manager section.

1220
01:43:01,600 --> 01:43:02,000
All right.

1221
01:43:02,800 --> 01:43:02,920
Hey.

1222
01:43:03,000 --> 01:43:14,560
Hey, this is Angie Brown from ExamPro, and we are taking a look here at Azure Resource Manager, which is a deployment and management service for Azure that enables you to create, update, and delete resources in your Azure account.

1223
01:43:19,000 --> 01:43:22,640
So let's take a quick look at the use case for Azure Resource Manager.

1224
01:43:22,640 --> 01:43:27,360
And this is just to kind of give you a visualization because it is an abstract thing.

1225
01:43:27,360 --> 01:43:31,040
So I just want you to have some kind of picture in your head of what it is.

1226
01:43:31,360 --> 01:43:43,280
So here I have this diagram and just to follow up with this tech, think of Azure Resource Manager as a gatekeeper and all requests flow through ARM and it decides whether that request can be performed on a resource.

1227
01:43:43,520 --> 01:43:46,160
And so on the left-hand side, you have your requests.

1228
01:43:46,360 --> 01:43:48,800
And so requests could be happening in the Azure portal.

1229
01:43:49,080 --> 01:43:54,160
be the Azure PowerShell, the CLI, or the REST client, which would be the API.

1230
01:43:54,600 --> 01:43:57,800
And then you can see the two middle ones would use the Azure SDK.

1231
01:43:57,800 --> 01:44:00,480
And then in the middle, that's the gatekeeper.

1232
01:44:00,480 --> 01:44:02,160
And so we have Azure Resource Manager.

1233
01:44:02,400 --> 01:44:08,920
That's going to work in conjunction with your authentication, which generally should be Active Directory.

1234
01:44:08,920 --> 01:44:10,800
I don't think you can swap that out for anything else.

1235
01:44:11,120 --> 01:44:13,920
And then on the right-hand side, you're going to get access to resources.

1236
01:44:13,920 --> 01:44:16,960
So this could be virtual machines, containers, databases, and storage.

1237
01:44:17,120 --> 01:44:18,920
There's obviously a lot of Azure

1238
01:44:19,040 --> 01:44:22,320
services, but that is what it is in a snapshot.

1239
01:44:23,120 --> 01:44:29,840
So let's understand the concept of scoping, because this is going to help you understand all the components that are involved with Azure's Resource Manager.

1240
01:44:30,080 --> 01:44:31,040
So what is a scope?

1241
01:44:31,080 --> 01:44:41,840
A scope is a boundary of control for Azure resources, and it is a way to govern your resources by placing resources within a logical grouping, applying logical restrictions in the form of rules.

1242
01:44:42,400 --> 01:44:45,600
And so let's now go break down what

1243
01:44:46,400 --> 01:44:47,840
these scopes are.

1244
01:44:47,840 --> 01:44:50,280
And so the first scope we're going to talk about is management groups.

1245
01:44:50,280 --> 01:44:56,560
And this is a logical grouping of multiple subscriptions, just because you can have lots of subscriptions in your account.

1246
01:44:56,720 --> 01:45:01,440
And you might want a subscription to a collection of subscriptions to belong to some kind of domain.

1247
01:45:01,440 --> 01:45:06,800
So maybe it's for development or business or data sciences, whatever you want.

1248
01:45:07,040 --> 01:45:08,240
Then you have a subscription.

1249
01:45:08,240 --> 01:45:12,880
And this grants you access to Azure services based on a billing and support agreement.

1250
01:45:13,600 --> 01:45:14,800
So the idea is that

1251
01:45:15,320 --> 01:45:18,040
When you launch resources, you're going to choose what subscription to go under.

1252
01:45:18,040 --> 01:45:22,240
It's just going to determine the billing, okay, under that things you're going to pay for.

1253
01:45:22,880 --> 01:45:24,080
Then you have resource groups.

1254
01:45:24,080 --> 01:45:27,680
This is a logical grouping of multiple resources within a subscription.

1255
01:45:28,000 --> 01:45:29,280
Then you have resources.

1256
01:45:29,280 --> 01:45:29,760
This is...

1257
01:45:30,560 --> 01:45:41,280
The actual service itself, like Azure Virtual Machine, and I just want you to know that we're going to revisit the scope when we go look at role-based access controls, because that's going to really help it make a lot more sense.

1258
01:45:41,280 --> 01:45:46,160
Okay, but let's just go jump into some of these scopes in specific and talk about them a bit more.

1259
01:45:54,600 --> 01:45:57,280
So let's take a closer look here at subscriptions.

1260
01:45:57,280 --> 01:46:01,200
So the thing is, before you can do anything in your Azure account, you're going to need a subscription.

1261
01:46:01,440 --> 01:46:10,480
And the reason why is that you need to have a subscription so that when you're launching resources, they know what kind of plan to put you on because they want to bill you, right?

1262
01:46:10,720 --> 01:46:14,440
And so in Azure, you can actually have multiple subscriptions.

1263
01:46:14,440 --> 01:46:19,280
And the most common ones are a free trial, pay as you go, Azure for students.

1264
01:46:19,360 --> 01:46:22,000
And the most common three ones I want you to know about are

1265
01:46:22,400 --> 01:46:23,280
those three there.

1266
01:46:23,560 --> 01:46:25,760
And so there's actually a lot more boxes than that.

1267
01:46:26,000 --> 01:46:34,480
And so just as an example to show you outside of the scope of those, if you wanted developer support, you'd have to pay for a developer support subscription.

1268
01:46:35,680 --> 01:46:39,600
And the thing is that the subscription level, you'll have the ability to do a lot of things.

1269
01:46:39,600 --> 01:46:44,880
So this is where you can set resource tags, your access controls, which you're going to look at here in a second.

1270
01:46:45,320 --> 01:46:56,080
Resource groups and a lot of other things, so just to pull up there, you can see under the description there's access controls, and I've added myself as a user, and that is that there.

1271
01:47:00,920 --> 01:47:03,440
So let's take a look here at Azure Management Groups.

1272
01:47:03,440 --> 01:47:10,000
And the idea here is you're able to manage multiple subscriptions within a hierarchical structure.

1273
01:47:10,000 --> 01:47:15,120
And so each directory is given a single top-level management group called the Root Management Group.

1274
01:47:15,360 --> 01:47:21,760
And all these subscriptions within a management group automatically inherit the conditions applied to the management group.

1275
01:47:21,920 --> 01:47:25,520
So here is this hierarchical structure that we're talking about.

1276
01:47:25,720 --> 01:47:30,840
And you can see that the root is on the top, and underneath we have management groups such as human.

1277
01:47:30,920 --> 01:47:35,240
resources, IT, marketing, and within those accounts we have different subscriptions.

1278
01:47:35,240 --> 01:47:40,480
And you can even see that you can have a resource group within a resource group to really narrow that down.

1279
01:47:40,720 --> 01:47:56,960
And again, the whole point is that you're creating these choke points where you can apply access controls and other permissions so that, you know, let's say you only want people within the marketing account to only have access to billing information, then you're locking down all those sub-accounts or subscriptions

1280
01:47:57,440 --> 01:48:00,400
in order to only have access to that kind of stuff.

1281
01:48:00,400 --> 01:48:01,120
So there you go.

1282
01:48:05,680 --> 01:48:07,960
So let's take a quick look here at resource groups.

1283
01:48:07,960 --> 01:48:12,880
So here is a visual representation of a bunch of virtual machines within a resource group.

1284
01:48:13,080 --> 01:48:16,640
And all resource group is a container that holds related resources.

1285
01:48:16,800 --> 01:48:20,080
And then an individual resource would be one of those virtual machines.

1286
01:48:20,320 --> 01:48:22,120
And then you have the resource provider.

1287
01:48:22,120 --> 01:48:24,720
And that's a service that supplies Azure

1288
01:48:25,440 --> 01:48:36,000
The Azure resource, and so, in this case, we have Microsoft.compute, and we're going to look in greater detail at resource providers next, because there's a little bit more to it than just that.

1289
01:48:40,400 --> 01:48:54,160
So, in order to use an Azure resource, you're going to have to register resource providers, and many resource providers are already registered by default for you within your subscription, and that's why you're able to use a lot of services right off the bat.

1290
01:48:54,720 --> 01:49:07,840
So here in Azure subscriptions, if you go down to resource providers, you're going to see a bunch of provider names like Microsoft Compute or Microsoft Consumption and a variety of other ones.

1291
01:49:08,000 --> 01:49:11,280
And the idea is that you're going to register them, basically turn them on.

1292
01:49:11,760 --> 01:49:15,040
And so there's some services that you might search for that are just not available.

1293
01:49:15,040 --> 01:49:16,480
I think Kubernetes might be one.

1294
01:49:17,280 --> 01:49:28,240
And so the thing is that if you are following a tutorial or you're trying to find something in the documentation, but you're typing it in into the search bar and it's not showing up, it's possible you just don't have it registered.

1295
01:49:28,560 --> 01:49:32,080
And so all you'd have to do is to go to your subscription and then register that.

1296
01:49:32,240 --> 01:49:44,720
And it's just kind of like a safeguard so that, you know, if there are services that are expensive or things like that, you are making the conscious decision to say, yes, I want to use this.

1297
01:49:44,720 --> 01:49:44,960
Okay?

1298
01:49:49,520 --> 01:49:54,000
Let's take a look at the concept of resource tags, or just sometimes known as a tag.

1299
01:49:54,200 --> 01:49:57,840
And this is a key and value pair that you can assign to Azure resources.

1300
01:49:58,080 --> 01:50:06,960
So generally when you are launching a new resource, you're going to have a tags page, and this is where you can apply that key and value name.

1301
01:50:07,280 --> 01:50:15,280
And just to give you some examples of tags you might want to apply, you might want to have a department and then the type of department, status approved,

1302
01:50:15,880 --> 01:50:20,320
a team, an environment, or the project, or the location.

1303
01:50:21,080 --> 01:50:23,680
And so you have a lot of tags that you can apply.

1304
01:50:23,920 --> 01:50:26,960
And tags allow you to organize your resources in the following ways.

1305
01:50:27,760 --> 01:50:35,520
You can organize them via resource management, so that's where you are specifying workloads, environments like developer environments.

1306
01:50:36,000 --> 01:50:41,840
There's cost management and optimization, so cost tracking, budgets and alerts, operation management, so the

1307
01:50:42,440 --> 01:50:50,160
That could be business commitments to SLA operations, so you might want to tag services that are considered mission-critical services.

1308
01:50:50,640 --> 01:50:54,240
There's security, so that's classification of data and security impact.

1309
01:50:54,480 --> 01:51:04,800
So, if there's certain databases that have very specific compliance rules, you might want to do that as well, which I think is the next example here, or maybe you're defining...

1310
01:51:05,120 --> 01:51:20,080
Services that are used for automation or services that are for workload optimization, so there's a lot to do with tags, and even though I don't use them frequently in my follow-alongs, it's definitely something that's a good habit to do and you should do in your production workloads.

1311
01:51:24,520 --> 01:51:26,240
Let's take a look at resource lock.

1312
01:51:26,240 --> 01:51:36,240
So, as an admin, you might have a case where you want to lock a subscription, resource group, or resource to prevent other users from accidentally deleting or modifying critical resources.

1313
01:51:36,480 --> 01:51:41,440
So, within the Azure portal, you can set the following lock levels: you have the cannot delete.

1314
01:51:41,960 --> 01:51:44,640
which basically prevents deletion.

1315
01:51:45,000 --> 01:51:48,720
So authorized users can still read a modified resource, but they can't delete the resource.

1316
01:51:48,720 --> 01:51:50,480
And the other mode is read-only.

1317
01:51:50,880 --> 01:51:55,680
So authorized users can read a resource, but they can't delete or update the resource.

1318
01:51:56,160 --> 01:52:00,240
So those are the two modes, and that's something you might be interested in doing.

1319
01:52:04,520 --> 01:52:06,040
Let's take a look at Azure Blueprints.

1320
01:52:06,040 --> 01:52:09,840
And this is a way to enable quick creation of governed subscriptions.

1321
01:52:09,840 --> 01:52:11,600
The keyword there is governed.

1322
01:52:11,920 --> 01:52:14,720
So the idea is like you can go in your account and just create a subscription.

1323
01:52:14,720 --> 01:52:21,600
But when it's a governed subscription, that means there's a process and certain expectations on how the subscription should be set up.

1324
01:52:22,320 --> 01:52:29,440
So the idea is you're going to compose artifacts based on common or organization-based patterns into reusable blueprints.

1325
01:52:29,760 --> 01:52:32,960
And the service is designed to help with environment setup.

1326
01:52:33,200 --> 01:52:34,080
So blueprints are

1327
01:52:34,800 --> 01:52:40,160
declarative way to orchestrate the deployment of various resource templates and artifacts.

1328
01:52:40,160 --> 01:52:41,840
I just want to emphasize that we're declarative.

1329
01:52:42,080 --> 01:52:47,360
Declarative means that everything is spelled out, so we exactly know what's going to be created.

1330
01:52:47,680 --> 01:52:56,240
And so artifacts could be role assignments, policy assignments, Azure Resource Manager templates, also known as ARM templates, resource groups.

1331
01:52:56,760 --> 01:53:02,160
And the Azure Blueprint service is backed by the globally distributed Azure Cosmos DB.

1332
01:53:02,600 --> 01:53:08,400
Blueprint objects are replicated to multiple regions, so they're definitely well backed up.

1333
01:53:09,040 --> 01:53:14,800
And so the main question people are going to ask, well, what's the difference between an ARM template and an Azure Blueprint?

1334
01:53:14,800 --> 01:53:17,360
Because an ARM template can automate the setup of stuff.

1335
01:53:17,360 --> 01:53:24,640
Well, basically, nearly everything you want to include for deployment in an Azure Blueprint can technically be accomplished in an ARM template.

1336
01:53:24,880 --> 01:53:32,520
But the thing is that an ARM template, you are storing that either locally or in source control, and there is no active connection or

1337
01:53:32,600 --> 01:53:34,400
relationship to the ARM template.

1338
01:53:34,840 --> 01:53:50,960
Whereas Azure Blueprints, the relationship between the blueprint definition, what should be deployed, and the blueprint assignment, what was deployed, and it can also be upgraded, it can also upgrade several subscriptions at once that are governed by the same blueprint.

1339
01:53:50,960 --> 01:53:55,600
So blueprints support improved tracking and auditing of deployments, that is a thing.

1340
01:53:55,600 --> 01:53:57,200
So they're very similar to ARM templates,

1341
01:53:57,680 --> 01:54:01,520
But generally, if you have the option, you should always use Azure Blueprints.

1342
01:54:01,520 --> 01:54:02,320
So there you go.

1343
01:54:06,880 --> 01:54:14,640
Hey, this is Andy Brown from Exam Pro, and what we're going to be doing is moving resources from one resource group to another and understanding the limitations around that.

1344
01:54:15,120 --> 01:54:25,520
So I just have this page pulled up here because I just want to emphasize that I've seen exam questions on this stuff, and there's a lot of little nitty-gritty things that could show up as a solution.

1345
01:54:25,760 --> 01:54:27,560
So the idea is that when you're talking about moving

1346
01:54:27,680 --> 01:54:33,560
resources, you're moving them into different regions or to different subscriptions or different resource groups.

1347
01:54:33,560 --> 01:54:42,720
And generally, they're pretty straightforward, but there are some edge cases where things will not work as expected, and that's based on some particular services.

1348
01:54:42,720 --> 01:54:54,720
So when we're looking at app services, DevOps services, classic deployment, network movement guidance, recovery services, virtual machines, so I definitely know that for app services, you're going to run into issues

1349
01:54:55,240 --> 01:55:04,480
Like if you're moving from one subscription to another, and you already have a web app service in the one that you're moving it into, it won't allow you to do it.

1350
01:55:04,680 --> 01:55:06,960
And so there's a lot of little things like that, okay?

1351
01:55:08,360 --> 01:55:16,880
And also, if you are migrating them, you can go ahead and use the diagnostic tool to debug it, and it will tell you some additional information.

1352
01:55:16,880 --> 01:55:19,120
So you will have to read through all of these.

1353
01:55:19,440 --> 01:55:21,840
I just can't show you all of that in a follow along.

1354
01:55:22,680 --> 01:55:28,080
But what we'll do is we'll just go through the basics here of moving things between resource groups.

1355
01:55:28,400 --> 01:55:30,160
And so what we'll need is a few resource groups.

1356
01:55:30,160 --> 01:55:31,280
So I'm going to add a new one.

1357
01:55:31,600 --> 01:55:37,040
And we're going to call this one the USS or the Federation of Planets.

1358
01:55:40,000 --> 01:55:41,920
And we'll put that in East US.

1359
01:55:44,880 --> 01:55:46,960
And then we will make another resource group.

1360
01:55:46,960 --> 01:55:48,800
We'll call this the Klingon Empire.

1361
01:55:52,800 --> 01:55:56,320
And for fun, we will place it in West.

1362
01:56:01,120 --> 01:56:02,240
So we'll go ahead and create that.

1363
01:56:02,240 --> 01:56:05,240
So now we just need something we can move around back and forth.

1364
01:56:05,240 --> 01:56:12,000
So what I'm going to do is I'm going to make my way over to disk, because that's a great example of something we can move around and change.

1365
01:56:12,400 --> 01:56:13,920
And so I'm going to add a new disk.

1366
01:56:14,880 --> 01:56:17,440
And I'm going to place this in the Federation.

1367
01:56:20,640 --> 01:56:24,720
And I'm just going to say dilithium.

1368
01:56:26,160 --> 01:56:27,280
I can never spell that right.

1369
01:56:28,160 --> 01:56:32,240
Well, let's see if I can get the proper spelling for this thing that is not real.

1370
01:56:32,640 --> 01:56:33,680
Dilithium here.

1371
01:56:35,080 --> 01:56:36,880
And so it's going to be over here.

1372
01:56:36,880 --> 01:56:39,120
I don't care about availability zones and stuff like that.

1373
01:56:39,120 --> 01:56:41,600
Source type, this is fine.

1374
01:56:42,160 --> 01:56:44,000
And so we have the initial size.

1375
01:56:44,000 --> 01:56:45,840
I do not need to drive that big.

1376
01:56:45,840 --> 01:56:47,120
Let's go super small.

1377
01:56:48,640 --> 01:56:51,040
We could even do an HDD because those are even cheaper.

1378
01:56:51,520 --> 01:56:53,920
And we'll just choose the small size down here.

1379
01:56:57,120 --> 01:56:58,640
And so we'll pick 32.

1380
01:57:01,320 --> 01:57:05,080
And so this should be all final encryption, networking, we don't really care.

1381
01:57:05,080 --> 01:57:06,960
We're not doing anything other than moving this around.

1382
01:57:06,960 --> 01:57:08,640
So we'll go ahead and review and create.

1383
01:57:10,000 --> 01:57:10,240
Right.

1384
01:57:10,560 --> 01:57:12,560
And so then we'll go create that resource.

1385
01:57:15,560 --> 01:57:18,080
And we'll just wait a little while here, it shouldn't take too long.

1386
01:57:20,800 --> 01:57:22,320
Alright, so the disk is ready.

1387
01:57:22,320 --> 01:57:23,520
So we'll go to this resource.

1388
01:57:23,520 --> 01:57:24,800
And here it is.

1389
01:57:24,800 --> 01:57:36,960
So now let's say we want to move that to our other resource group, which is in another region, what we're going to do is we're going to go back to our resource groups here.

1390
01:57:38,480 --> 01:57:40,960
And if we go into the Federation of planets,

1391
01:57:41,800 --> 01:57:49,840
what we can do is go to overview, select the disk, go over here and say move to another resource group.

1392
01:57:49,840 --> 01:57:51,760
And I'll just click these other ones to show you.

1393
01:57:51,760 --> 01:57:53,760
I don't have any other subscriptions to move this to.

1394
01:57:55,440 --> 01:57:56,480
So I'll just go back there.

1395
01:57:56,480 --> 01:58:02,080
I thought maybe I could show you some stuff, but I just realized I don't have much in this account or with other subscriptions.

1396
01:58:02,480 --> 01:58:06,240
So we'll just go back to overview here and just move it to another resource group.

1397
01:58:07,160 --> 01:58:10,480
And technically we're moving it to another region, so we'll see how that goes.

1398
01:58:11,640 --> 01:58:20,720
And so we will select the Klingon Empire, I understand that the tools and scripts associated with the will not work, etc, etc.

1399
01:58:21,040 --> 01:58:22,000
So we'll hit OK.

1400
01:58:28,680 --> 01:58:31,000
And that's going to take a little bit of time to move.

1401
01:58:31,000 --> 01:58:34,600
So while that is going, I'm going to make a new tab so we don't lose that history there.

1402
01:58:34,600 --> 01:58:37,960
And I just want to talk about some settings you can put on your resource groups.

1403
01:58:38,360 --> 01:58:45,120
So if we go into the Klingon Empire, and we go down below here, we should have the ability to apply locks.

1404
01:58:45,440 --> 01:58:49,440
And there are a few different types of locks, we have read only and delete.

1405
01:58:49,440 --> 01:58:52,240
So read only means it's a read only resource.

1406
01:58:52,560 --> 01:58:56,640
And delete means we cannot delete the resource, which makes sense, right?

1407
01:58:57,040 --> 01:58:59,400
So read only should mean we shouldn't be able to modify this.

1408
01:58:59,400 --> 01:59:03,760
So I'm going to say, don't touch, do not touch.

1409
01:59:06,160 --> 01:59:07,600
And I say OK here.

1410
01:59:08,640 --> 01:59:13,840
And so what that means is that I should not be able to modify the resource.

1411
01:59:14,160 --> 01:59:15,960
Whether I can delete it or not is another story.

1412
01:59:15,960 --> 01:59:16,800
We'll find that out.

1413
01:59:17,120 --> 01:59:22,200
And another question is, can I move that resource outside of this if it's set to those modes?

1414
01:59:22,200 --> 01:59:23,760
And that's what we're going to find out.

1415
01:59:23,760 --> 01:59:27,440
So moving back over here, has this finished moving?

1416
01:59:27,440 --> 01:59:28,560
It's still validating.

1417
01:59:28,560 --> 01:59:31,280
So we're going to have to wait a little bit here, and I'll see you back in a moment.

1418
01:59:32,200 --> 01:59:35,320
All right, so after waiting a little while here, I believe that it's done moving.

1419
01:59:35,320 --> 01:59:37,280
So I'm still in my old resource group here.

1420
01:59:37,440 --> 01:59:42,160
What we'll do is click back into here, go to overview, and we see that it's no longer there.

1421
01:59:42,320 --> 01:59:47,360
But if we go over to the Klingon Empire, we go back over, just click into overview.

1422
01:59:47,600 --> 01:59:48,160
There it is.

1423
01:59:48,160 --> 01:59:52,560
So we had no problems moving a disk to another region and another resource group.

1424
01:59:53,360 --> 01:59:55,760
Now we did apply this lock over here.

1425
01:59:56,240 --> 01:59:59,520
So what is going to happen when we try to modify

1426
02:00:00,720 --> 02:00:01,600
this disk.

1427
02:00:01,600 --> 02:00:04,560
I think you know the answer, but let's give it a go just to see what happens.

1428
02:00:05,120 --> 02:00:08,640
So over here, we're going to want to resize it here.

1429
02:00:09,440 --> 02:00:10,640
I'm going to pick 64.

1430
02:00:10,640 --> 02:00:12,040
I'm going to go hit resize.

1431
02:00:12,040 --> 02:00:15,760
And it says fail to update the disk because of that reason.

1432
02:00:15,760 --> 02:00:19,280
So you cannot perform a write operation because of the lock.

1433
02:00:19,280 --> 02:00:20,000
So there you go.

1434
02:00:20,640 --> 02:00:27,240
Now let's go back and we are going to go apply another lock here.

1435
02:00:27,240 --> 02:00:29,280
This time I'm going to make it so you can't delete it.

1436
02:00:29,840 --> 02:00:33,520
And so we say, don't, do not delete me.

1437
02:00:33,520 --> 02:00:35,440
All right.

1438
02:00:35,880 --> 02:00:41,360
And so what we'll do is we'll go back and we'll try to delete it.

1439
02:00:41,920 --> 02:00:43,760
So we'll hit the delete button.

1440
02:00:43,760 --> 02:00:44,480
We'll say yes.

1441
02:00:44,640 --> 02:00:46,040
Again, it says you cannot do it.

1442
02:00:46,040 --> 02:00:47,040
Now here's the next question.

1443
02:00:47,040 --> 02:00:53,360
Can you move that resource out or in to resource group if it has lock or read only on?

1444
02:00:54,320 --> 02:00:58,320
And that's what I want you to guess whether you can or not.

1445
02:00:58,440 --> 02:01:02,240
Because you are in read-only, so would you be able to move something that's read-only?

1446
02:01:03,040 --> 02:01:04,320
So we'll go ahead and move it.

1447
02:01:04,320 --> 02:01:09,920
We're going to move this to another resource group, and I'm going to send it back to the Federation of Planets.

1448
02:01:10,280 --> 02:01:11,320
I say, I understand.

1449
02:01:11,320 --> 02:01:12,160
Hit OK.

1450
02:01:13,200 --> 02:01:14,400
And it failed to check.

1451
02:01:14,400 --> 02:01:15,200
We'll see why.

1452
02:01:15,520 --> 02:01:18,240
Cannot perform the write operation because there are locks.

1453
02:01:18,240 --> 02:01:19,520
Please remove some of the locks.

1454
02:01:19,760 --> 02:01:20,480
So which is it?

1455
02:01:20,480 --> 02:01:21,280
Is it delete?

1456
02:01:21,280 --> 02:01:22,240
Is it the read-only?

1457
02:01:22,240 --> 02:01:23,280
Do I have to remove both?

1458
02:01:23,720 --> 02:01:25,040
That's what we need to go find out.

1459
02:01:25,040 --> 02:01:32,560
So back in our resource group, I'm going to go ahead and 1st remove pair resource locks can't be edited here.

1460
02:01:32,640 --> 02:01:33,520
Okay, that's fine.

1461
02:01:33,520 --> 02:01:40,160
So we'll go back to here and we will go into the locks and we'll first delete the read only.

1462
02:01:43,680 --> 02:01:49,520
And then what we'll do is we will attempt to delete this again.

1463
02:01:51,440 --> 02:01:52,320
See what happens.

1464
02:01:52,640 --> 02:01:53,760
It looks like it's moving.

1465
02:01:53,760 --> 02:02:02,640
So it's not that you can't move it out if it's in read-only, or sorry, in delete, but you can't if it's read-only because it's read-only, right?

1466
02:02:02,960 --> 02:02:09,520
Now, when we're talking about moving resources into a group that's set to read-only, I'm almost certain that you can absolutely do that.

1467
02:02:10,480 --> 02:02:13,600
So we could stage that, I guess, just to make sure.

1468
02:02:13,920 --> 02:02:15,040
So what I'm going to do

1469
02:02:16,160 --> 02:02:33,520
is I'm just going to set up another resource group, just to make sure that we know this for certain, just in case I'm wrong, the Romulan Star Empire, Romulan Star Empire, and I'm going to just leave it in the same region.

1470
02:02:34,400 --> 02:02:36,640
And so for this one in particular,

1471
02:02:37,880 --> 02:02:40,080
What I'm going to do is apply a read-only.

1472
02:02:40,240 --> 02:02:43,680
I might as well just put both on here, but I'll just, I'm just going to do read-only.

1473
02:02:44,000 --> 02:02:46,160
And we'll say, do not delete me.

1474
02:02:47,760 --> 02:02:50,880
And then what I'll do is I'll go back to the Federation planets.

1475
02:02:52,080 --> 02:02:56,160
And I'm just going to, actually I'll just go to disks and we'll create a new disk here.

1476
02:03:01,560 --> 02:03:03,440
And we will place it in the Federation here.

1477
02:03:05,440 --> 02:03:07,040
And we will just say,

1478
02:03:08,400 --> 02:03:11,760
dark matter, or antimatter.

1479
02:03:14,960 --> 02:03:20,240
And we will just change this to HHD as small as we can go.

1480
02:03:20,560 --> 02:03:21,840
We'll review and create that.

1481
02:03:22,000 --> 02:03:23,520
And we'll go ahead and create that.

1482
02:03:25,560 --> 02:03:28,600
And this will not take long, we do not have to wait that long for this.

1483
02:03:28,600 --> 02:03:33,600
And notice here that

1484
02:03:36,560 --> 02:03:38,360
We could not, this is interesting.

1485
02:03:38,360 --> 02:03:39,960
So there was an error moving the resource.

1486
02:03:39,960 --> 02:03:43,880
Moving resources failed because resource group federation has active deployment.

1487
02:03:43,880 --> 02:03:49,600
So if you are moving stuff and then you do deploy, it's going to cancel that deploy.

1488
02:03:49,600 --> 02:03:50,800
So that's interesting to know.

1489
02:03:51,920 --> 02:03:56,480
So I believe that this new one is deployed.

1490
02:03:56,480 --> 02:03:57,520
I cannot remember.

1491
02:03:57,520 --> 02:04:02,000
I think we set this one to have read only here on the

1492
02:04:03,080 --> 02:04:08,440
what do you call the Romulan Star Empire, which isn't showing up.

1493
02:04:08,440 --> 02:04:09,120
There it is.

1494
02:04:10,040 --> 02:04:11,040
Just double check there.

1495
02:04:11,920 --> 02:04:14,960
So the question is, can I move a resource into a read only?

1496
02:04:17,040 --> 02:04:17,840
We'll go here.

1497
02:04:18,960 --> 02:04:23,040
And I guess we need to actually go to the Federation of Planets.

1498
02:04:25,760 --> 02:04:32,320
We'll go to overview, we have antimatter, and I want to move that into Romulan.

1499
02:04:33,920 --> 02:04:34,640
Star Empire.

1500
02:04:34,880 --> 02:04:35,720
See, I understand.

1501
02:04:37,360 --> 02:04:39,200
It will either say we can or we can't.

1502
02:04:39,680 --> 02:04:40,720
And we absolutely can.

1503
02:04:40,720 --> 02:04:42,120
Otherwise, it would error it out at this point.

1504
02:04:42,120 --> 02:04:44,240
So hopefully you can keep that straight.

1505
02:04:44,240 --> 02:04:48,160
So you can move a resource into a group that has read-only.

1506
02:04:48,480 --> 02:04:51,200
You cannot move it out if it's set.

1507
02:04:51,440 --> 02:04:53,760
You can absolutely move it out if it's set to delete.

1508
02:04:53,920 --> 02:04:55,440
Delete just protects against delete.

1509
02:04:55,680 --> 02:04:58,400
If you are moving a resource from one resource group to another,

1510
02:04:59,280 --> 02:05:17,240
And then you deploy something, it's going to cause that movement to fail, and then there's those edge cases for moving resources with Azure, and that's something you should spend some time reading up on those use cases, or maybe I'll just pick out the most important ones and put it into a cheat sheet.

1511
02:05:17,240 --> 02:05:21,600
All right, and so what I'm going to do is just go ahead and clean this stuff up.

1512
02:05:22,800 --> 02:05:27,760
So what I need to do here is go and remove the delete.

1513
02:05:27,760 --> 02:05:28,960
I think it's only on here.

1514
02:05:29,360 --> 02:05:31,120
So we go to my locks.

1515
02:05:32,880 --> 02:05:34,960
I'm going to go back to resource groups here.

1516
02:05:37,600 --> 02:05:39,600
And we will delete the locks here.

1517
02:05:44,040 --> 02:05:46,960
And so now I can go ahead and delete these.

1518
02:05:49,080 --> 02:05:49,440
Groups.

1519
02:05:49,440 --> 02:05:52,880
I guess I have to do them one by one, which is kind of annoying, but that's just how it goes.

1520
02:06:07,910 --> 02:06:09,790
It says it's locked.

1521
02:06:09,790 --> 02:06:11,070
It's not locked anymore.

1522
02:06:11,070 --> 02:06:11,790
Oh, it's still there.

1523
02:06:11,790 --> 02:06:12,350
Look at that.

1524
02:06:14,910 --> 02:06:15,310
Okay.

1525
02:06:15,310 --> 02:06:23,310
Could have swore I definitely did something there.

1526
02:06:24,390 --> 02:06:24,830
we go.

1527
02:06:27,790 --> 02:06:29,630
And we will go ahead and delete the last one.

1528
02:06:32,960 --> 02:06:33,520
There we are.

1529
02:06:33,760 --> 02:06:36,640
So, hopefully a bit more about moving resources around.

1530
02:06:41,200 --> 02:06:46,160
Hey, this is Andrew Brown from Exam Pro, and we're looking at the Azure Resource Manager Cheat Sheet.

1531
02:06:46,160 --> 02:06:50,640
So ARM is a service that allows you to manage Azure resources.

1532
02:06:50,880 --> 02:07:04,880
It is a management layer that allows you to create, update, delete resources, apply management features such as access controls, locks, and tags, writing infrastructure as code, as JSON templates, and we have a totally separate section and cheat sheet for just ARM templates alone.

1533
02:07:05,120 --> 02:07:11,080
ARM is a service layer that spans multiple features and services, so subscriptions, management groups, resource groups, provider resource

1534
02:07:11,200 --> 02:07:18,320
providers, resource locks, Azure blueprints, resource tags, IAM, role-based access controls, Azure policies, ARM templates.

1535
02:07:18,480 --> 02:07:19,680
So it's all over the place.

1536
02:07:20,640 --> 02:07:23,840
Think of Azure, or sorry, ARM as a gatekeeper.

1537
02:07:24,000 --> 02:07:28,480
All requests flow through ARM and it decides whether the request can be performed on a resource.

1538
02:07:28,640 --> 02:07:31,520
Scope is a boundary of control for Azure resources.

1539
02:07:31,520 --> 02:07:38,800
It's a way to govern your resources by placing resources within a logical grouping and also applying logical restrictions in the form of rules.

1540
02:07:38,960 --> 02:07:41,080
And that hierarchy

1541
02:07:41,680 --> 02:07:46,960
The structure of that is management groups, subscriptions, resource groups, and resources.

1542
02:07:47,320 --> 02:07:54,640
An Azure account has multiple subscriptions, and the most common three are free, trial, pay-as-you-go, Azure for students.

1543
02:07:54,880 --> 02:08:03,040
Resource providers is a list of possible services within Azure, and some services are registered by default, and others need to be explicitly registered.

1544
02:08:03,040 --> 02:08:09,920
So if you're using the Azure portal and a service, you type in the search and it's not working, it's probably just because you need to register it.

1545
02:08:10,240 --> 02:08:11,160
Resource tags is a

1546
02:08:11,280 --> 02:08:14,240
key and value pair that you can assign to Azure resources.

1547
02:08:14,400 --> 02:08:21,280
Resource locks prevent users from accidentally modifying or deleting resources at the subscription, resource groups, or resource scope.

1548
02:08:21,520 --> 02:08:24,160
We got two types of resource locks, cannot delete.

1549
02:08:24,480 --> 02:08:28,960
And again, there's inconsistency between the portal and also the API.

1550
02:08:29,120 --> 02:08:30,640
So cannot delete is delete.

1551
02:08:31,000 --> 02:08:37,360
And this just means users cannot delete resources, and read-only means they cannot modify them and things like that, okay?

1552
02:08:38,280 --> 02:08:40,960
Blueprints enable quick creation of governed subscriptions.

1553
02:08:41,120 --> 02:08:46,160
Nearly everything you want to include for deployment in Azure Blueprints can be accomplished in an ARM template.

1554
02:08:46,320 --> 02:08:53,280
Relationships between blueprint definitions, what should be deployed, and the blueprint assignment, what was deployed.

1555
02:08:53,280 --> 02:08:54,240
So there you go.

1556
02:08:59,320 --> 02:09:01,120
So let's take a look at ARM templates.

1557
02:09:01,440 --> 02:09:07,120
And before we jump into it, let's just make sure we're familiar with infrastructure as code, because that's what ARM templates are all about.

1558
02:09:07,280 --> 02:09:19,480
And this is the process of managing and provisioning computer data centers, such as Azure, through machine readable definition files, such as a JSON file, and in this case, an ARM template, because that's all it is, a JSON file.

1559
02:09:19,480 --> 02:09:23,680
And rather than physical hardware configuration or interactive configuration tools.

1560
02:09:24,000 --> 02:09:29,200
And just to simplify that even further, basically you're writing a script that's going to set up your cloud services

1561
02:09:29,320 --> 02:09:29,840
for you.

1562
02:09:30,080 --> 02:09:33,280
And with IACs, they usually come in two different flavors.

1563
02:09:33,280 --> 02:09:38,480
We have declarative, that's where exactly what you write is what you get, and imperative.

1564
02:09:38,480 --> 02:09:42,560
So you're going to generally define what you want, and then the service will guess what you want.

1565
02:09:42,560 --> 02:09:45,920
It's going to fill in the blanks to save you a lot of time writing those scripts.

1566
02:09:46,560 --> 02:09:52,800
And so ARM templates are JSON files that define Azure resources that you want to provision.

1567
02:09:53,520 --> 02:09:56,160
and Azure services that you want to configure.

1568
02:09:56,320 --> 02:10:01,040
And with ARM templates, they are going to be declarative, so you get exactly what you define.

1569
02:10:01,600 --> 02:10:07,600
They're going to stand up, tear down, or share entire architectures in minutes, and they're going to reduce configuration mistakes.

1570
02:10:07,840 --> 02:10:14,120
And you know exactly what you have defined for a stack to establish an architectural baseline for compliance.

1571
02:10:14,120 --> 02:10:23,040
So you definitely want to use ARM templates or IAC whenever you can, and try to avoid using the console unless you're doing development or test workloads.

1572
02:10:23,280 --> 02:10:23,400
But

1573
02:10:23,440 --> 02:10:27,000
But let's just run through the big list of what you can do with an ARM template.

1574
02:10:27,160 --> 02:10:33,080
I know this is a big boring list, but let's just get through it as quickly as possible, just so we know what we can do with ARM templates.

1575
02:10:33,880 --> 02:10:35,560
So with ARM templates, they're declarative.

1576
02:10:35,720 --> 02:10:37,560
So what you see is what you get.

1577
02:10:37,800 --> 02:10:40,840
You can stand up, tear down, share entire environments in minutes.

1578
02:10:41,000 --> 02:10:42,920
You can reduce configuration mistakes.

1579
02:10:43,080 --> 02:10:45,480
You can establish an architectural baseline for compliance.

1580
02:10:45,720 --> 02:10:49,720
They're modular, so you can break up your architecture in multiple files and reuse them.

1581
02:10:49,880 --> 02:10:53,800
They're extendable, so you can add PowerShell and Bash scripts to your templates.

1582
02:10:54,400 --> 02:11:02,040
It has testing, so you can use the ARM TTK to test, make sure exactly what you've deployed is what you wanted.

1583
02:11:03,080 --> 02:11:08,120
You have preview changes, so before you create infrastructure via templates, you see what it will create.

1584
02:11:08,360 --> 02:11:12,040
Built-in validation, so it will only deploy your template if it passes.

1585
02:11:12,040 --> 02:11:15,240
Track deployments, keep track of changes to your architecture over time.

1586
02:11:15,560 --> 02:11:19,280
Policy as code, so apply Azure policies to ensure you remain compliant.

1587
02:11:19,280 --> 02:11:22,920
And then you have Microsoft Blueprints, which we did cover here.

1588
02:11:23,480 --> 02:11:26,560
which establishes the relationship between resources and templates.

1589
02:11:26,560 --> 02:11:33,800
So it's just one step further where ARM templates don't have any relationship with the resources, where Blueprints is like a better version of ARM templates.

1590
02:11:34,120 --> 02:11:37,800
And then you have CICD integration, exportable code.

1591
02:11:37,880 --> 02:11:43,320
So exporting the current state of the resource groups and resources, authoring tools, I believe, is the last on our list here.

1592
02:11:43,320 --> 02:11:47,360
So you can use Visual Studio Code that has advanced features for authoring ARM templates.

1593
02:11:47,360 --> 02:11:48,520
Makes it a lot easier to write them.

1594
02:11:48,680 --> 02:11:49,720
So there you go.

1595
02:11:54,200 --> 02:11:56,920
So now we were talking about what ARM templates can do.

1596
02:11:56,920 --> 02:11:59,320
Let's actually take a look at what one looks like.

1597
02:11:59,640 --> 02:12:06,360
And so just to get a good snapshot or overview, let's just define what the skeleton is, the general structure of an ARM template.

1598
02:12:06,680 --> 02:12:11,160
So here on the right-hand side, we have JSON, and you can see that we have a structure there.

1599
02:12:11,160 --> 02:12:15,960
So we have schema, content version, API profile, parameters, variables, functions, resources, outputs.

1600
02:12:16,280 --> 02:12:19,320
and let's go down the list here and see what all these things are.

1601
02:12:19,480 --> 02:12:22,760
So the schema describes the properties that are available within a template.

1602
02:12:23,320 --> 02:12:31,080
And so the idea is that you have that JSON link there, and it's going to say, we expect the schema, the actual structure, to have these parameters.

1603
02:12:31,400 --> 02:12:32,720
Then you have the content version.

1604
02:12:32,720 --> 02:12:36,240
This is the version of the template, and you can provide any value for this element.

1605
02:12:36,240 --> 02:12:37,520
It's totally abstract.

1606
02:12:37,520 --> 02:12:41,240
It's just your way of keeping track of the version of your current template.

1607
02:12:41,480 --> 02:12:43,320
Then you have the API profile.

1608
02:12:43,400 --> 02:12:46,160
You use this value to avoid having to specify API versions for

1609
02:12:46,240 --> 02:12:47,720
for each resource in the template.

1610
02:12:47,880 --> 02:12:49,160
You have parameters.

1611
02:12:49,240 --> 02:12:51,240
These are values you can pass along to your template.

1612
02:12:51,240 --> 02:12:52,200
You have variables.

1613
02:12:52,360 --> 02:12:56,920
This is where you transform your parameters or resource properties using function expressions.

1614
02:12:57,160 --> 02:12:58,200
You have functions.

1615
02:12:58,360 --> 02:13:00,840
These are user-defined functions available within the template.

1616
02:13:01,080 --> 02:13:02,200
You have resources.

1617
02:13:02,200 --> 02:13:04,760
These are the Azure resources you want to deploy or update.

1618
02:13:04,920 --> 02:13:06,120
And then you have outputs.

1619
02:13:06,120 --> 02:13:08,600
And these are the values that are returned after deployment.

1620
02:13:08,920 --> 02:13:12,120
So let's go more into deep into some of these things.

1621
02:13:16,280 --> 02:13:20,360
So let's take a deeper look here at the resource section within your ARM template.

1622
02:13:20,360 --> 02:13:23,640
And so a resource is an Azure resource you want to provision.

1623
02:13:23,640 --> 02:13:25,880
Could be a virtual machine, could be a database.

1624
02:13:26,200 --> 02:13:34,920
And so here on the right-hand side, look at where it says resources, and we're going to take a breakdown of the actual columns or attributes that we can set.

1625
02:13:34,920 --> 02:13:40,120
So the first thing is the type, and this is going to follow the format of the resource provider and resource type.

1626
02:13:40,120 --> 02:13:43,000
So there you can see that we are setting up a storage account.

1627
02:13:43,400 --> 02:13:48,080
Then we have the API version, and this is the version of REST API that we're going to use for that resource.

1628
02:13:48,080 --> 02:13:50,760
And each resource provider publishes its own API version.

1629
02:13:50,760 --> 02:13:54,040
So you've got to go look up each one because they all could be different.

1630
02:13:54,360 --> 02:13:56,360
Then you have the name of the resource.

1631
02:13:56,640 --> 02:14:00,920
And so I believe there that is using a variable, so that is going to be dynamic.

1632
02:14:01,320 --> 02:14:02,520
Then you have the location.

1633
02:14:02,520 --> 02:14:08,440
So most resources have a location property, and that's the region that you want it to be deployed in.

1634
02:14:08,920 --> 02:14:11,720
Then you have other properties, and other properties can

1635
02:14:12,920 --> 02:14:17,160
will be based on different kinds of resources.

1636
02:14:17,160 --> 02:14:23,440
So for a storage account, you want to be able to set the kind, and within the properties, you're going to have a bunch of other options there.

1637
02:14:23,440 --> 02:14:24,760
And it's just going to vary, okay?

1638
02:14:25,560 --> 02:14:28,760
But anyway, let's take a closer look next at parameters.

1639
02:14:33,000 --> 02:14:35,360
So let's take a closer look here at parameters.

1640
02:14:35,360 --> 02:14:38,120
And these allow you to pass variables to your ARM template.

1641
02:14:38,120 --> 02:14:40,760
So on the right-hand side, we have

1642
02:14:41,240 --> 02:14:51,000
Our ARM template, and we saw before resources, but if you look above there, we have a thing called parameters, and so there we are setting a parameter, and then down below in the resource we are accessing.

1643
02:14:51,720 --> 02:14:52,680
a parameter.

1644
02:14:53,080 --> 02:14:57,320
And so let's just actually talk about some of the parameter options we have.

1645
02:14:57,480 --> 02:14:59,640
So the first thing you'll want to do is set a type.

1646
02:14:59,800 --> 02:15:02,120
And on the right-hand side, you can see that we're saying it's a string.

1647
02:15:02,120 --> 02:15:07,240
And so we can define that as a string, secure string, int, bool, object, secure object, and array.

1648
02:15:07,800 --> 02:15:14,360
And there are some other things that we can provide when we are defining our parameters that we're not showing in that diagram, but we have default values.

1649
02:15:14,360 --> 02:15:19,480
So this is if you do not provide, if there's no value being passed in, this is what it should use.

1650
02:15:19,720 --> 02:15:20,760
Then you have allowed values.

1651
02:15:20,760 --> 02:15:21,280
So this

1652
02:15:21,360 --> 02:15:24,760
where it's an array and you're restricting it to only the values that are there.

1653
02:15:25,000 --> 02:15:26,280
Then you have the min value.

1654
02:15:26,280 --> 02:15:31,800
So if you, let's say it's an integer, you want to say this is the minimum value, so it can only, like nothing lower than 10.

1655
02:15:32,080 --> 02:15:34,520
Then you have the max value, so nothing above 10.

1656
02:15:34,680 --> 02:15:35,720
You have the minimum length.

1657
02:15:35,720 --> 02:15:39,880
So if you're working with strings, you might say it has to be a minimum of five characters.

1658
02:15:40,440 --> 02:15:41,360
Then you have the maximum.

1659
02:15:41,360 --> 02:15:43,560
So let's say you have a maximum of five characters.

1660
02:15:44,480 --> 02:15:45,480
Then you have the description.

1661
02:15:45,480 --> 02:15:51,000
So this is just going to be something that when you are using the ARM template within the portal, you know what it's for.

1662
02:15:51,000 --> 02:15:57,880
So if you don't have a great description for that parameter or name and you want to provide more information, that's what you can do.

1663
02:15:57,880 --> 02:15:58,600
So there you go.

1664
02:15:58,600 --> 02:15:58,680
So.

1665
02:16:03,120 --> 02:16:05,480
So let's take a look here at functions for ARM templates.

1666
02:16:05,560 --> 02:16:09,600
And these allow you to apply transformations to your ARM variables.

1667
02:16:09,600 --> 02:16:10,760
And they come in two flavors.

1668
02:16:10,760 --> 02:16:20,360
We have template functions, which are built-in functions, and then user-defined functions, which are custom functions that we're creating to allow what other kind of functionality that we want.

1669
02:16:20,680 --> 02:16:24,440
So the way functions work is you give the function name.

1670
02:16:24,440 --> 02:16:25,560
So here it's called equals.

1671
02:16:25,880 --> 02:16:29,800
And then you have parentheses, and you pass in what you want to transform.

1672
02:16:29,800 --> 02:16:31,160
So if you see parentheses,

1673
02:16:31,600 --> 02:16:33,160
That's how you know that is a function.

1674
02:16:33,720 --> 02:16:35,720
So let's talk about some of the built-in functions.

1675
02:16:36,040 --> 02:16:41,800
And so there are a lot available for us, and they're generally self-explanatory, so I'm not going to be showing examples.

1676
02:16:42,080 --> 02:16:43,440
Let's just go quickly through the list.

1677
02:16:43,440 --> 02:16:49,080
So you have array functions like array, concat, contains, create, array, empty, first, et cetera.

1678
02:16:49,400 --> 02:16:55,160
Then you have comparisons like less, equals, less, lesser, equals, greater, greater, or equals.

1679
02:16:55,160 --> 02:16:57,000
You have date functions.

1680
02:16:57,560 --> 02:17:04,840
You have deployment functions, and for example, parameters and variables are actually functions, so that's kind of interesting.

1681
02:17:05,080 --> 02:17:21,400
Then you have a logical operator, so end, or if not, or numerical functions like add, div, float, int, min, max objects, so contains empty intersection, and then you have resources, so extension resource ID.

1682
02:17:22,040 --> 02:17:29,640
Providers, references, et cetera, like that, and there's one more I think we have strings, so we have base sixty-four, concat, contains, et cetera.

1683
02:17:29,880 --> 02:17:38,200
I'm not going to show you how to do user-defined functions I don't think that's that important, but I just want to show you that you have a lot of functions available to you, okay?

1684
02:17:42,960 --> 02:17:44,480
So let's take a look at variables.

1685
02:17:44,480 --> 02:17:47,440
And variables are used to simplify your ARM templates.

1686
02:17:47,440 --> 02:17:53,560
And the idea is that you're transforming parameter and resource properties using functions and then assigning them to reusable variables.

1687
02:17:53,800 --> 02:17:57,200
So under your variables section, notice that we have storage name.

1688
02:17:57,200 --> 02:18:01,000
And on the right-hand side, we're just using a bunch of functions and assigning it to storage name.

1689
02:18:01,320 --> 02:18:07,880
So the idea is that when we have to go call them in our resources, it's going to be a lot shorter than if we had to write that whole thing in there.

1690
02:18:08,040 --> 02:18:12,160
And what's more interesting is that you can nest your variables within a JSON object.

1691
02:18:12,160 --> 02:18:12,880
So on the left-hand

1692
02:18:12,960 --> 02:18:17,960
side, you have this variables, environment settings, test, instance sizes, et cetera.

1693
02:18:18,240 --> 02:18:22,640
And then on the right-hand side, we have a parameter that were defined here.

1694
02:18:22,640 --> 02:18:32,360
And then down below, you can see that we're calling that parameter, and then we're calling variables, environment settings, and then using the square braces to then call within that nested object.

1695
02:18:32,360 --> 02:18:37,480
I know that seems really confusing, but just take a moment to look at it and it will make sense.

1696
02:18:37,760 --> 02:18:39,800
And you'll just understand that there's a lot of power there.

1697
02:18:39,800 --> 02:18:40,520
So there you go.

1698
02:18:44,760 --> 02:18:52,440
So last on our list here for ARM templates is outputs, and outputs return values from deployed resources, so you can use them pragmatically.

1699
02:18:53,000 --> 02:18:53,960
This is very simple.

1700
02:18:53,960 --> 02:19:03,720
So the idea here is that you have outputs, and let's say you want to output the resource ID, so you can say it's a string, and in the value you could use a variable or a bunch of functions.

1701
02:19:04,040 --> 02:19:12,120
And the idea is that when you use the CLI, so imagine here you are using the CLI and you're saying, show me this deployment group, and

1702
02:19:12,600 --> 02:19:15,080
I want to see the output of values.

1703
02:19:15,080 --> 02:19:18,120
So see where it says creates this properties output resource ID value.

1704
02:19:18,360 --> 02:19:22,520
The idea is that now I'm going to be able to pragmatically access it after I've created the resource.

1705
02:19:22,760 --> 02:19:25,080
And this is a great way of chaining things.

1706
02:19:25,080 --> 02:19:32,440
So you might have a bunch of ARM templates you want to run in sequence, and you're going to need the outputs to go into the next one, and that is what you're going to use outputs for.

1707
02:19:32,440 --> 02:19:33,080
So there you go.

1708
02:19:37,600 --> 02:20:01,560
Hey, this is Andrew Brown from ExamPro, and we are looking at Azure Resource Manager Templates, also known as ARM Templates, and this helps you deliver infrastructure as code, meaning that when you have a resource such as a virtual machine or a storage account, instead of manually configuring it every single time through the portal, what you can do is provide a configuration file that defines all the properties that you want it to be configured with, and the idea is that you can...

1709
02:20:01,920 --> 02:20:07,720
But keep this file and share with other people so they can easily create the same resources as you.

1710
02:20:08,440 --> 02:20:11,000
And then exactly how your stuff is configured.

1711
02:20:11,400 --> 02:20:14,760
So what we're going to do is launch a new template.

1712
02:20:15,240 --> 02:20:21,360
Now, you can't go up here and just type in ARM because these ARM templates are managed at different levels.

1713
02:20:21,360 --> 02:20:24,440
So at one level is a subscription or they're resource groups.

1714
02:20:24,600 --> 02:20:29,880
So when you have a resource group, you have deployments within them, and that's where these templates are deployed.

1715
02:20:30,480 --> 02:20:33,560
But just to deploy one from here, what we're going to do is type in deploy.

1716
02:20:33,880 --> 02:20:36,440
Why they didn't make it so you can type in ARM, I do not know.

1717
02:20:36,680 --> 02:20:39,480
But if you go down here, we have deploy a custom template.

1718
02:20:39,960 --> 02:20:42,320
And so from here, we have some common templates.

1719
02:20:42,320 --> 02:20:46,840
So if I click into web app and I go edit a template, we already have some stuff pre-filled in.

1720
02:20:47,080 --> 02:20:51,320
I'm just going to go back and discard that, go back to select a template, and we're going to build our own.

1721
02:20:51,560 --> 02:20:58,360
And by default, we'll have that schema, that content version, which is 1.0.0.0, our parameters and our resources.

1722
02:20:58,360 --> 02:21:00,400
So today I want to launch a virtual machine.

1723
02:21:00,760 --> 02:21:06,120
And what you normally would have to do is go here and look up what it is that you want to create.

1724
02:21:06,120 --> 02:21:13,160
So if it's this, Microsoft Compute Virtual Machine, you'd go through here and you'd have to make sure you have all these properties.

1725
02:21:13,160 --> 02:21:16,680
So you define the resource here, right, the type.

1726
02:21:17,880 --> 02:21:20,040
And then you define the properties that you want.

1727
02:21:20,040 --> 02:21:22,360
And down below, you can go through here and see them all.

1728
02:21:22,520 --> 02:21:23,480
That's a lot of work.

1729
02:21:23,560 --> 02:21:24,520
I don't want to do that.

1730
02:21:24,520 --> 02:21:28,440
So I'll go to add resource here, drop this down and click.

1731
02:21:29,440 --> 02:21:30,400
Or is it virtual machine?

1732
02:21:30,400 --> 02:21:30,880
Where are you?

1733
02:21:31,080 --> 02:21:31,720
There you are.

1734
02:21:32,360 --> 02:21:33,800
And I'm going to call this one WARF.

1735
02:21:34,600 --> 02:21:45,000
And then WARF and WARF, because it's not just going to create a virtual machine, it's going to create other things that I need with it as well, such as the storage account, the network interface, and the virtual network.

1736
02:21:45,480 --> 02:21:48,280
So you can see that we have a bunch of parameters here.

1737
02:21:48,280 --> 02:21:54,280
So the name, the type, the name, the admin username, the password, and the OS version.

1738
02:21:55,040 --> 02:21:55,560
and you know what?

1739
02:21:55,560 --> 02:21:57,560
I think I chose a Windows one.

1740
02:21:57,640 --> 02:21:58,920
I do not want a Windows one.

1741
02:21:58,920 --> 02:22:02,840
I want a Linux one because that is easier for me to work with here.

1742
02:22:02,840 --> 02:22:03,800
So we choose Ubuntu.

1743
02:22:03,800 --> 02:22:05,080
So I'll just fill this in again.

1744
02:22:08,360 --> 02:22:08,760
All right.

1745
02:22:09,080 --> 02:22:14,200
And so back up here, you know, we have the Ubuntu version between some versions here.

1746
02:22:14,440 --> 02:22:15,320
And then there's the type.

1747
02:22:15,320 --> 02:22:17,320
So that's for replication.

1748
02:22:17,560 --> 02:22:19,040
Then we have variables here.

1749
02:22:19,040 --> 02:22:22,440
So if we go to VM size, this is the VM it will set here.

1750
02:22:23,200 --> 02:22:32,600
Variables are either you can have string values or you can use functions to transform other parameters into other stuff that you'll reference throughout your template.

1751
02:22:32,600 --> 02:22:35,320
Then down below we have those resources here.

1752
02:22:35,640 --> 02:22:42,280
So what we'll do is actually I'm going to copy this because it's very highly likely we're going to want to make some kind of change.

1753
02:22:42,560 --> 02:22:46,040
And so I have VS Code over here on the left or right hand side.

1754
02:22:46,040 --> 02:22:47,720
I'm just going to paste that on in there.

1755
02:22:48,680 --> 02:22:53,000
And what we will do, this is a JSON file, make things a little bit easier here.

1756
02:22:53,880 --> 02:22:54,120
Great.

1757
02:22:54,520 --> 02:23:01,560
And what I'll do is just move that off screen and we'll go ahead and we will save this and we'll see if we can deploy this.

1758
02:23:03,400 --> 02:23:07,160
So I'm going to type in WARF here and we'll launch in Canada East.

1759
02:23:07,160 --> 02:23:08,280
I'll name this WARF.

1760
02:23:08,680 --> 02:23:15,480
We will name the username WARF, but lowercase, and then we'll do testing, 123456, capital on the T.

1761
02:23:15,960 --> 02:23:17,960
Notice that it is hidden there.

1762
02:23:18,640 --> 02:23:22,040
And then we will choose 14, which is defaulted here, and LRS.

1763
02:23:22,280 --> 02:23:24,440
We'll go ahead and do review and create.

1764
02:23:25,680 --> 02:23:26,680
And we'll hit create here.

1765
02:23:27,880 --> 02:23:29,320
So this is going to fail.

1766
02:23:29,320 --> 02:23:32,000
I already know because it has a misconfiguration.

1767
02:23:32,000 --> 02:23:32,920
It'll tell us how.

1768
02:23:33,160 --> 02:23:35,600
But while that's going, we'll take a look at our inputs.

1769
02:23:35,600 --> 02:23:37,320
So this is the values that were inputted.

1770
02:23:37,560 --> 02:23:40,520
These are the outputs, if we had defined any, which we have not.

1771
02:23:41,560 --> 02:23:45,880
And if we go back to our template, I just wanted to show you that we have that secure string.

1772
02:23:45,880 --> 02:23:48,280
So when we were typing our password, that's why we didn't see it.

1773
02:23:49,160 --> 02:23:51,400
So just things like that.

1774
02:23:51,400 --> 02:23:54,520
So I'll go back up here and our deploy failed.

1775
02:23:54,520 --> 02:23:54,800
Why?

1776
02:23:54,800 --> 02:23:55,560
What happened?

1777
02:23:56,440 --> 02:23:57,480
So we open it up here.

1778
02:23:57,480 --> 02:24:01,000
The requested VM size, standard D1, is not available in the current region.

1779
02:24:01,000 --> 02:24:02,920
So the template we have is not that great.

1780
02:24:03,880 --> 02:24:07,320
It needs some configuration because we can't use D1.

1781
02:24:07,320 --> 02:24:09,640
I think that doesn't exist anymore.

1782
02:24:10,000 --> 02:24:13,080
And so what we really want to use is the standard B1 LS.

1783
02:24:13,520 --> 02:24:13,960
All right.

1784
02:24:14,360 --> 02:24:17,240
Standard B1LS.

1785
02:24:17,480 --> 02:24:19,000
So I'm going to cut that.

1786
02:24:19,080 --> 02:24:22,200
And for the time being, I'm going to go back to our original template.

1787
02:24:24,160 --> 02:24:25,800
And this is 1 big template.

1788
02:24:25,800 --> 02:24:29,480
I'm going to look for those variables.

1789
02:24:29,480 --> 02:24:30,520
Oh, they're all the way to the bottom here.

1790
02:24:30,520 --> 02:24:30,840
Nice.

1791
02:24:30,840 --> 02:24:32,920
And so I'm going to just go ahead and paste that in.

1792
02:24:33,640 --> 02:24:36,600
B1LS, just double check, making sure I spelled that right.

1793
02:24:36,600 --> 02:24:37,640
Standard.

1794
02:24:39,160 --> 02:24:42,680
Standard B1 LS looks good to me.

1795
02:24:43,080 --> 02:24:45,040
So I'm going to move that off screen.

1796
02:24:45,040 --> 02:24:46,760
And the question is, what do we do?

1797
02:24:47,440 --> 02:24:49,000
What do we do when a deploy fails?

1798
02:24:49,000 --> 02:24:52,440
So let's go take a look at what has happened here.

1799
02:24:52,440 --> 02:24:54,520
So this all got deployed into a resource group.

1800
02:24:54,760 --> 02:24:57,000
And under here, this is where our deployments are.

1801
02:24:57,560 --> 02:25:01,760
So when we look at this template, we can see that it failed.

1802
02:25:01,760 --> 02:25:03,720
We can click into here, get the same information.

1803
02:25:05,200 --> 02:25:07,960
And if we click into here, it just brings us back to where we just were.

1804
02:25:08,360 --> 02:25:18,720
But if we go look at what was actually deployed under our resource group, under the overview, we'll notice that it created the virtual network, the storage account, and the network interface.

1805
02:25:18,720 --> 02:25:22,360
So when it fails, it creates what it can, but it doesn't roll back.

1806
02:25:22,800 --> 02:25:23,160
Okay?

1807
02:25:23,480 --> 02:25:26,000
So the question is, then how do you do cleanup?

1808
02:25:26,280 --> 02:25:28,200
So you might think, I'll go to deployments.

1809
02:25:28,640 --> 02:25:31,400
And what I'll do is go ahead and delete that template.

1810
02:25:31,520 --> 02:25:33,000
And we can go ahead and do that.

1811
02:25:33,360 --> 02:25:39,160
Which by the way, you can't edit this template, all you can do is all we can do here.

1812
02:25:39,160 --> 02:25:41,240
See, I just want to show you that you cannot edit it.

1813
02:25:41,960 --> 02:25:43,720
We can download it and stuff like that.

1814
02:25:44,520 --> 02:25:51,560
But so you might think, well, if I go ahead and delete that template, just making sure we're in the right place here.

1815
02:25:53,240 --> 02:25:57,080
You might think that might roll back those resources, but it doesn't, it just deletes the template.

1816
02:25:57,800 --> 02:26:04,360
So if you really want to get rid of this stuff, what you got to do is go ahead and delete all these resources manually.

1817
02:26:06,680 --> 02:26:10,760
So I wish it kind of had a rollback feature, but that's just how it is.

1818
02:26:11,320 --> 02:26:15,360
But there are some nice things that Azure does here, which we'll talk about in a moment.

1819
02:26:15,360 --> 02:26:18,680
So I think we have adjusted it to the correct value now.

1820
02:26:18,680 --> 02:26:21,960
So hopefully this is going to be all we need to make it work.

1821
02:26:22,440 --> 02:26:26,600
So what we'll do is go to our deployments here.

1822
02:26:27,360 --> 02:26:28,200
And we can't do it here.

1823
02:26:28,200 --> 02:26:30,640
But so we'll go back to the top here and type in deploy.

1824
02:26:30,640 --> 02:26:32,840
And we'll go to custom template.

1825
02:26:33,640 --> 02:26:36,920
And what we'll do is build our own template in our editor.

1826
02:26:37,320 --> 02:26:40,360
And I'm just going to copy the contents here.

1827
02:26:44,680 --> 02:26:46,360
Okay, we'll go copy.

1828
02:26:47,640 --> 02:26:50,120
And I will go paste.

1829
02:26:50,800 --> 02:26:55,400
And we'll make sure that this is all good looks fine to me, we'll go ahead and hit Save.

1830
02:26:56,160 --> 02:26:59,160
And we will choose WARF so we don't have to make a new one.

1831
02:26:59,520 --> 02:27:02,200
And we will fill in the name as WARF.

1832
02:27:02,600 --> 02:27:03,600
The username is WARF.

1833
02:27:03,600 --> 02:27:05,160
I'll call WARF 2 just in case.

1834
02:27:06,120 --> 02:27:07,800
Helps us keep track of what we're doing here.

1835
02:27:08,200 --> 02:27:11,320
Testing 123456 with a capital on the T.

1836
02:27:12,360 --> 02:27:14,120
14 LRS.

1837
02:27:15,400 --> 02:27:16,440
And we'll go ahead.

1838
02:27:16,440 --> 02:27:17,960
Oh, we have one issue here.

1839
02:27:18,760 --> 02:27:22,120
Cannot deploy resource group WARF deleting.

1840
02:27:24,560 --> 02:27:25,320
We'll go back.

1841
02:27:28,840 --> 02:27:31,000
And we will hit create here.

1842
02:27:31,800 --> 02:27:33,440
I don't think I deleted the resource group.

1843
02:27:33,440 --> 02:27:34,600
Let me just go double check.

1844
02:27:36,200 --> 02:27:39,080
I'm almost certain I deleted all the contents of it, right?

1845
02:27:41,080 --> 02:27:43,880
Oh, so there's already one here, so we're just waiting for that to delete.

1846
02:27:46,280 --> 02:27:47,800
It's going to go delete for us, please.

1847
02:27:47,800 --> 02:27:48,280
Thank you.

1848
02:27:56,440 --> 02:27:57,520
It failed to delete.

1849
02:27:57,520 --> 02:27:59,160
We'll go take a look as to why.

1850
02:28:00,680 --> 02:28:01,640
Resource is not found.

1851
02:28:09,840 --> 02:28:11,240
We'll go back to our resource groups.

1852
02:28:12,880 --> 02:28:13,880
Give us a refresh here.

1853
02:28:16,040 --> 02:28:16,840
Okay, so you know what?

1854
02:28:16,840 --> 02:28:19,160
I must have deleted the resource group, which is totally fine.

1855
02:28:19,800 --> 02:28:25,080
I could have saw I only deleted the contents of it, but we'll just call this warf regular then.

1856
02:28:25,880 --> 02:28:27,720
We'll go ahead and hit create here.

1857
02:28:28,760 --> 02:28:32,920
And so this time, I have a better feeling about this.

1858
02:28:41,420 --> 02:28:43,900
And so we'll just have to wait a little bit.

1859
02:28:44,460 --> 02:28:45,420
It won't take too long.

1860
02:28:48,060 --> 02:28:49,100
I'll see you back in a moment.

1861
02:28:49,760 --> 02:28:53,320
Okay, so after waiting a little bit here, our thing seems to be deployed.

1862
02:28:53,320 --> 02:28:57,560
So if we go to resource groups, we can see that our virtual machine is deployed.

1863
02:28:57,560 --> 02:29:00,200
So that's pretty much all there is to it.

1864
02:29:00,200 --> 02:29:06,600
One other thing I'd like to show you is that whatever you have, whatever is in your resource group, you can actually export the template.

1865
02:29:06,600 --> 02:29:16,920
So if you did configure something manually, all you'd have to do is find the resource, go up here to, it is export template, and there's your template.

1866
02:29:17,600 --> 02:29:19,640
So it just has that single resource in there.

1867
02:29:19,640 --> 02:29:26,520
I can't remember if I go into here, if I select multiples, and I go, or where is it?

1868
02:29:27,560 --> 02:29:28,520
Export template.

1869
02:29:30,000 --> 02:29:31,480
look, it's gonna include all that stuff.

1870
02:29:31,480 --> 02:29:38,040
So if you already have existing resources that you provisioned, and you want to have them, that's what you can do.

1871
02:29:38,280 --> 02:29:42,760
Notice that some things won't be included in the template when you do that, but you can just go ahead and download them.

1872
02:29:43,040 --> 02:29:44,520
And then you have them for later.

1873
02:29:44,520 --> 02:29:51,640
So yeah, that's all there really is to arm other than learning the, the nitty gritties of the actual language.

1874
02:29:51,640 --> 02:29:53,480
That's just how you work with it there.

1875
02:29:53,720 --> 02:29:56,760
So what I'm going to do is make my way over to my resource group here.

1876
02:29:57,240 --> 02:29:59,920
And I'm just going to go ahead and delete

1877
02:30:00,040 --> 02:30:00,640
this here.

1878
02:30:00,640 --> 02:30:06,320
And we're all good to go.

1879
02:30:12,960 --> 02:30:18,280
Hey, this is Andrew Brown from Exam Pro, and we are looking at Azure Resource Manager templates, also known as ARM templates.

1880
02:30:18,280 --> 02:30:20,880
So the thing we need to know is infrastructure as code.

1881
02:30:20,880 --> 02:30:31,120
This is the process of managing and provisioning computer data centers through machine-readable definition files, such as JSON files, rather than physical hardware configuration or interactive configuration tools.

1882
02:30:31,360 --> 02:30:32,800
IAC comes in two flavors.

1883
02:30:32,800 --> 02:30:37,360
We've got declarative, which is what you define is what you get, and imperative.

1884
02:30:37,360 --> 02:30:41,680
So you say generally what you want, and it will guess or fill in the blanks for you.

1885
02:30:42,240 --> 02:30:42,840
For ARM

1886
02:30:42,920 --> 02:30:43,520
templates.

1887
02:30:43,520 --> 02:30:53,360
They are JSON files, as we're suggesting above there, that once you provision Azure services, you want to configure, they are declarative, so you get exactly what you define.

1888
02:30:54,400 --> 02:30:56,800
An ARM template is made of the following JSON structure.

1889
02:30:56,960 --> 02:31:01,280
You should know the structure pretty well because you might see questions where they're showing you that code.

1890
02:31:01,280 --> 02:31:02,880
So be sure you know all these parts.

1891
02:31:03,200 --> 02:31:06,000
Schema describes the properties that are available within a template.

1892
02:31:06,240 --> 02:31:09,520
Content version, the version of the template, you can provide any value for this element.

1893
02:31:09,760 --> 02:31:14,320
API profile uses value to avoid having to specify API versions for each resource in the template.

1894
02:31:14,560 --> 02:31:17,040
Parameters, values you can pass along to your template.

1895
02:31:17,280 --> 02:31:23,040
Variables, things you can transform parameters or resource properties using functions and expressions.

1896
02:31:23,480 --> 02:31:31,320
And I didn't include them in the cheat sheet, but there is a bunch of variations on variables and functions, but I think that's practical skills you should just grab.

1897
02:31:31,320 --> 02:31:32,720
We don't want this in a cheat sheet.

1898
02:31:33,040 --> 02:31:36,080
Functions use defined functions available within the template.

1899
02:31:36,080 --> 02:31:38,000
There are so many functions, it wasn't even worth.

1900
02:31:38,480 --> 02:31:39,840
pulling them out and putting some here.

1901
02:31:40,400 --> 02:31:43,600
Resources, the Azure resources you want to deploy or update.

1902
02:31:43,840 --> 02:31:52,960
And under resources, you've got type of resource, API version, the name, the location, other properties, which can be a bunch of different stuff, so there's no consistency there.

1903
02:31:53,200 --> 02:31:57,280
And then outputs, which are values that are returned after deployment, so you can do things with them pragmatically.

1904
02:31:57,280 --> 02:31:57,920
So there you go.

1905
02:31:57,920 --> 02:32:00,240
That is the ARM templates cheat sheet.

1906
02:32:04,840 --> 02:32:14,480
Hey, this is Andrew Brown from Exam Pro, and we are looking at Azure Storage Accounts, which is used for containing all your Azure Storage data objects, such as blobs, files, queues, tables, and disks.

1907
02:32:15,080 --> 02:32:20,000
So storage accounts is one of those services where it has a bunch of different storage types within it.

1908
02:32:20,000 --> 02:32:23,040
So it's quite the multi-purpose service.

1909
02:32:23,360 --> 02:32:28,480
And with each different type of storage, it's going to have different features and their own pricing models.

1910
02:32:28,480 --> 02:32:31,600
So let's just quickly break down the type of storage we have.

1911
02:32:31,840 --> 02:32:39,840
So we have general purpose, version 1, version 2, BLOB storage, block BLOB storage, and file storage.

1912
02:32:39,880 --> 02:32:43,120
And so I just want you to know that when you are using storage accounts,

1913
02:32:44,240 --> 02:32:51,760
I'm saying storage type, but for whatever reason, the UI calls it account kind, just to be aware of that small little discrepancy there.

1914
02:32:52,640 --> 02:32:55,360
But storage accounts are going to vary based on features.

1915
02:32:55,360 --> 02:33:00,480
And so the common features we'll see across storage will be supported services.

1916
02:33:00,480 --> 02:33:02,240
So where can I put the storage account?

1917
02:33:03,080 --> 02:33:04,800
And so on the right-hand side, you can see.

1918
02:33:05,840 --> 02:33:15,200
if you make a general purpose version 2, what you have access to, such as containers, queues, tables, or fosters, those options are going to change based on what you're using.

1919
02:33:15,440 --> 02:33:16,000
All right.

1920
02:33:16,640 --> 02:33:20,960
For performance tiers, this is how fast you'll be able to do reads and writes.

1921
02:33:21,440 --> 02:33:23,360
You have standard and premium.

1922
02:33:24,000 --> 02:33:26,000
You have different kinds of access tiers.

1923
02:33:26,000 --> 02:33:29,280
So how often do I need to quick access these files?

1924
02:33:29,520 --> 02:33:30,800
And then there's replication.

1925
02:33:30,800 --> 02:33:34,320
How many redundant copies should be made and where?

1926
02:33:34,480 --> 02:33:36,000
And the last thing is deployment models.

1927
02:33:36,000 --> 02:33:39,120
So who should deploy the supported service?

1928
02:33:39,120 --> 02:33:40,400
Resource Manager Classic.

1929
02:33:40,400 --> 02:33:43,520
And in generally most cases, it's going to be Resource Manager.

1930
02:33:48,560 --> 02:33:56,320
So here I have all the storage types on the left-hand side, and we have the feature set and how it's going to vary based on a certain type.

1931
02:33:56,320 --> 02:34:00,880
So let's just quickly look through this to see where there are some standouts.

1932
02:34:01,320 --> 02:34:08,160
And you might want to actually review this at the end of this section just so you're a bit more familiar with all these types of features.

1933
02:34:08,320 --> 02:34:10,600
So it clicks a bit better, but let's just quickly go through this.

1934
02:34:10,600 --> 02:34:15,600
So you're going to notice for version one, this is the only case where you're going to have a deployment model of classic.

1935
02:34:15,760 --> 02:34:16,360
Everything else is

1936
02:34:16,440 --> 02:34:17,920
going to be the resource manager.

1937
02:34:18,160 --> 02:34:25,520
From A practical standpoint, you're not going to really notice because you're just going to be pressing buttons, but underneath, that's the only case where it varies.

1938
02:34:25,760 --> 02:34:35,360
For replication, you're going to notice that version two has the most options with replication, and if these don't make sense, don't worry, we're going to cover all the replication in an upcoming slide.

1939
02:34:35,920 --> 02:34:40,720
For BLOB block storage, you can see it's very limited, same with file storage.

1940
02:34:42,480 --> 02:34:43,320
So that's there.

1941
02:34:43,320 --> 02:34:53,360
When we're talking about access tiers, how quickly you can access files, you're going to notice that it's only available for general version 2 and BLOB storage, where we're choosing these different tiers.

1942
02:34:53,680 --> 02:35:00,960
For these ones, it doesn't really matter, because, well, especially with like a file storage, because the drive is as fast as it's going to be, right?

1943
02:35:01,960 --> 02:35:07,200
For performance tiers, you're going to notice that with version one and version two, we have standard and premium.

1944
02:35:07,400 --> 02:35:16,720
When you're using file storage and block BLOB storage, you're always using premium, and with BLOB storage, which is again a legacy format there, that's going to be using standard.

1945
02:35:17,600 --> 02:35:23,520
BLOB storage comes in three different types, and you're going to notice that, based on what you want to use, there'll be some variation there.

1946
02:35:24,840 --> 02:35:26,400
I don't know where Page is.

1947
02:35:26,400 --> 02:35:30,680
I think that they both support Page, but there are three types in there.

1948
02:35:30,680 --> 02:35:32,120
I wouldn't really worry about it too much.

1949
02:35:32,120 --> 02:35:38,920
You're going to notice that file storage only supports file types, and then you have version two, and this pretty much supports everything.

1950
02:35:38,920 --> 02:35:44,240
So you can see general-purpose version two is a really great storage to choose.

1951
02:35:49,880 --> 02:35:51,360
So we were just talking about storage types.

1952
02:35:51,360 --> 02:35:59,840
Now let's talk about the actual storage services that we can actually launch or utilize within these storage types under storage accounts.

1953
02:36:00,080 --> 02:36:02,400
And there are five core storages available to us.

1954
02:36:02,400 --> 02:36:03,680
The first is Azure Blob.

1955
02:36:03,680 --> 02:36:07,840
This is a massively scalable object store for text and binary data.

1956
02:36:08,160 --> 02:36:12,720
And it also includes big data analytics through Data Lake Storage Gen.

1957
02:36:12,720 --> 02:36:13,120
2.

1958
02:36:14,400 --> 02:36:18,640
And so Azure Blob is really great because you just don't have to think about the file system.

1959
02:36:18,640 --> 02:36:21,040
You just upload files and they're treated like objects.

1960
02:36:21,120 --> 02:36:22,080
Well, that's really nice.

1961
02:36:22,480 --> 02:36:25,120
Then you have Azure Files, and this is a file share.

1962
02:36:25,920 --> 02:36:33,920
And so the great thing about Azure Files is that if you want to have a bunch of virtual machines and have it so like they have...

1963
02:36:34,560 --> 02:36:37,840
The same file system sharing all the same files that's what you're going to use that for.

1964
02:36:38,080 --> 02:36:39,680
Then you have Azure Queues.

1965
02:36:39,920 --> 02:36:46,880
To me, this really is a database, but for whatever reason, it's under storage accounts, and it's a NoSQL store for schema-less storage of structured data.

1966
02:36:47,280 --> 02:36:51,040
This is another unusual one I don't know why Azure puts it under here, but...

1967
02:36:51,760 --> 02:36:55,680
It's a messaging store for reliable messaging between application components.

1968
02:36:56,080 --> 02:37:00,400
To me, that's like an application integration service, but Azure categorizes it as storage.

1969
02:37:00,720 --> 02:37:06,000
And the last one is Azure Disk, and this is block-level storage volumes for Azure VMs.

1970
02:37:06,240 --> 02:37:11,200
And so the idea is that when you want to do the top four, the above, you're going to be launching storage accounts.

1971
02:37:11,680 --> 02:37:14,240
And for disks, you're going to be launching disks.

1972
02:37:14,480 --> 02:37:18,960
It's a bit unusual because one of the storage accounts say that you can

1973
02:37:19,360 --> 02:37:24,800
use or store disks in, I think, general purpose version two.

1974
02:37:24,960 --> 02:37:26,640
I'm not really sure I understand that.

1975
02:37:27,200 --> 02:37:29,600
Maybe it's talking about backing them up or something like that.

1976
02:37:29,600 --> 02:37:37,120
But anyway, from a practical standpoint, and for what we need to know, is that this is the breakdown here, and we do have a full section on Azure disks.

1977
02:37:37,520 --> 02:37:38,720
So we will get into that.

1978
02:37:43,960 --> 02:37:48,400
So now let's take a look at some of the features that are available on account storage.

1979
02:37:48,400 --> 02:37:49,720
The first being performance tiers.

1980
02:37:49,720 --> 02:37:51,480
And generally, this is going to be for BLOB storage.

1981
02:37:51,480 --> 02:37:53,800
And we have two types of performance tiers.

1982
02:37:53,800 --> 02:37:55,200
We have standard and premium.

1983
02:37:55,200 --> 02:37:58,160
So it's as simple as just choosing between the two.

1984
02:37:58,520 --> 02:38:02,840
And when we're talking about performance, especially when we're talking about storage, we want to be thinking about IOPS.

1985
02:38:02,840 --> 02:38:05,360
And that stands for input output operations per second.

1986
02:38:05,600 --> 02:38:08,960
So the higher the IOPS, the faster a drive can read and write.

1987
02:38:09,120 --> 02:38:12,400
So you can definitely assume that a premium is going to have

1988
02:38:12,920 --> 02:38:14,320
a higher amount of IOPS.

1989
02:38:14,560 --> 02:38:21,840
And so when we're looking at the premium performance, these are going to be stored on solid-state drives, SSDs, which we have in the picture there.

1990
02:38:22,080 --> 02:38:24,720
It's optimized for low latency, higher throughput.

1991
02:38:24,920 --> 02:38:31,600
And the use cases here is going to be interactive workloads, analytics, AI or ML, and data transformation.

1992
02:38:31,600 --> 02:38:36,040
On the other side for standard performance, these are running on hard disk drives.

1993
02:38:36,040 --> 02:38:38,920
And you're going to have varied performance based on your access tier.

1994
02:38:38,920 --> 02:38:40,480
And we're going to talk about access tiers

1995
02:38:40,920 --> 02:38:44,800
very shortly, but the tiers would be hot, cool, and archive.

1996
02:38:45,120 --> 02:38:52,320
And this is great for backup and disaster recovery, media content, bulk data processing, and things like that.

1997
02:38:53,000 --> 02:39:03,800
And so the reason why SSDs are generally really, really good for premium performance is because they have no moving parts within them and the data is distributed randomly.

1998
02:39:03,800 --> 02:39:08,320
So if you have to do a read and write, the distance between the read and writes are going to be a lot faster.

1999
02:39:09,120 --> 02:39:13,920
And that's generally why you're going to see solid-state drives with premium performance or things with higher IOPS.

2000
02:39:14,400 --> 02:39:19,960
And then for hard disk drives, it does have moving parts.

2001
02:39:19,960 --> 02:39:25,360
So you see that it has an ARM, and that ARM needs to read and write data sequentially to the disk.

2002
02:39:25,960 --> 02:39:29,120
And so it's very good at writing or reading large amounts of data.

2003
02:39:29,640 --> 02:39:40,640
That is close together, that is sequential, but the idea is that neither format is good or bad, it's just the use case that you need, so you don't always need to go with SSDs.

2004
02:39:40,640 --> 02:39:51,560
Sometimes you want to save money, and HDDs are really good for that, so...

2005
02:39:51,560 --> 02:39:53,040
Let's take a look at access tiers.

2006
02:39:53,040 --> 02:39:55,520
And there are three types of tiers for standard storage.

2007
02:39:55,520 --> 02:39:57,120
We have cool, hot, and archive.

2008
02:39:57,520 --> 02:40:01,600
And so you're going to have this option between cool and hot and archive.

2009
02:40:01,840 --> 02:40:05,600
Archive might not show up depending on how you configure your storage account.

2010
02:40:06,160 --> 02:40:12,200
So for example, if you use a particular type of replication, that might not be available to use with archive.

2011
02:40:12,200 --> 02:40:15,520
So just be aware if that option doesn't show up, you might have to change some of your settings.

2012
02:40:15,760 --> 02:40:17,480
Let's quickly walk through the three options.

2013
02:40:17,480 --> 02:40:21,440
So hot is for data that's accessed frequently and has the highest storage costs.

2014
02:40:21,560 --> 02:40:23,000
lowest access cost.

2015
02:40:23,000 --> 02:40:31,760
So again, it's for data that's frequently accessed or inactive use, or data that's staged for processing and eventual migration to the cool access tier.

2016
02:40:32,000 --> 02:40:33,280
Then you have the cool tier.

2017
02:40:33,280 --> 02:40:39,600
This is data that's infrequently accessed and stored for at least 30 days, lower storage costs, higher access cost.

2018
02:40:40,280 --> 02:40:50,000
And the use case here is for short-term backup and disaster recovery data sets, or older media content not viewed frequently anymore, but is expected to be available immediately when accessed.

2019
02:40:50,600 --> 02:40:57,840
And I think there's actually a third use case, which is large data sets that need to be stored cost effectively while more data is being gathered for future processing.

2020
02:40:58,000 --> 02:40:59,840
Then we have the archive tier.

2021
02:41:00,000 --> 02:41:04,080
This is for data that's rarely accessed and stored for at least 180 days.

2022
02:41:04,560 --> 02:41:08,800
It's the lowest storage cost, but it also has the highest access cost.

2023
02:41:09,360 --> 02:41:18,240
And so its use case would be long-term backup, secondary backup, archival data sets, original raw data that must be preserved even after it's been processed into its usable form.

2024
02:41:18,800 --> 02:41:23,440
in compliance and archival data that needs to be stored for a long time and is hardly ever accessed.

2025
02:41:23,440 --> 02:41:29,760
So just make use or note of the cool is at the least 30 days and the archive is at least 180 days.

2026
02:41:29,960 --> 02:41:31,040
I should have highlighted those for you.

2027
02:41:31,040 --> 02:41:31,840
I don't know why I didn't.

2028
02:41:32,400 --> 02:41:34,080
And so just some other things you need to know.

2029
02:41:34,080 --> 02:41:41,840
So for account level tiering, any BLOB that doesn't have an explicitly assigned tier infers the tier from the storage account access tier settings.

2030
02:41:42,160 --> 02:41:45,680
So you can set blobs at different storage bubbles.

2031
02:41:46,320 --> 02:41:47,440
BLOB level tiering.

2032
02:41:47,680 --> 02:41:54,800
You can upload a BLOB to the tier of your choice and change the tiers, happen instantly with exception for moving out of archive.

2033
02:41:55,680 --> 02:42:01,440
The concept of rehydrating, this is when you're moving a BLOB out of archive into another tier and it can take several hours.

2034
02:42:02,160 --> 02:42:07,880
You have the BLOB lifecycle management, so you can create rule-based policies for transitioning your data to different tiers.

2035
02:42:07,880 --> 02:42:12,640
So, after 30 days, we can move it to Cool Storage, and here is just the option here.

2036
02:42:12,640 --> 02:42:13,600
You see where it says 30?

2037
02:42:13,920 --> 02:42:19,840
I think 30 is the minimum days you have to choose, but I could be wrong, and so you have the options down below.

2038
02:42:19,840 --> 02:42:23,280
So, move to Cool Storage, move to Archive Storage, delete the BLOB.

2039
02:42:24,360 --> 02:42:25,680
And just a few other things here.

2040
02:42:25,840 --> 02:42:32,400
When A BLOB is uploaded or moved to another tier, it's charged at the new tier's rate immediately upon the tier change.

2041
02:42:32,720 --> 02:42:38,720
So when you're moving to a cooler tier, the operation is billed as a write operation to the destination tier.

2042
02:42:38,960 --> 02:42:46,720
And when the write operation per 10,000 and data write per GB charges for the destination tier applies.

2043
02:42:47,240 --> 02:43:05,840
When moving to a hotter tier, the operation is billed as a read from the source tier, and where the read operation, again, in the 10K, and the data retrieval, again, in gigabytes, charges for the source tier applies, and early detection charges for any BLOB moved out of the cool or archive tier may apply as well.

2044
02:43:06,400 --> 02:43:17,080
And just lastly here, when we're talking about cool and archive early detection, any BLOB that is moved into the cool tier, so this is only for general purpose version 2 accounts, is subject to

2045
02:43:17,240 --> 02:43:28,000
To a cool early detection period of 30 days, and any BLOB that is moved into the archive tier is subject to an archive early detection of 180 days, and this charge is prorated.

2046
02:43:28,160 --> 02:43:32,960
So, you know, access tiers aren't the funnest thing to talk about, but there is all the information you need to know.

2047
02:43:37,560 --> 02:43:40,400
So let's take a look at replication and data redundancy.

2048
02:43:40,400 --> 02:43:44,000
And so when you create a storage account, you're going to have to choose a replication type.

2049
02:43:44,280 --> 02:43:50,040
And the reason why is that you're going to want to have multiple copies of your data, so you're protected from a bunch of things.

2050
02:43:50,040 --> 02:43:57,760
So maybe your data center has a planned outage, so you have to make sure you have a backup of your data if you need to access it.

2051
02:43:58,000 --> 02:44:02,720
Maybe there is a hardware failure or network or power outage or natural disaster.

2052
02:44:03,040 --> 02:44:05,360
And so that is the whole point of replication.

2053
02:44:05,360 --> 02:44:07,480
And the greater level of redundancy, the more

2054
02:44:07,560 --> 02:44:09,520
expensive the cost of replication will be.

2055
02:44:09,720 --> 02:44:12,640
And talking about cost, we can break it down into 3 categories.

2056
02:44:13,120 --> 02:44:18,560
Each of these categories have two types of replication.

2057
02:44:18,560 --> 02:44:21,920
So let's just quickly go through the list and then we'll deep dive into all of them.

2058
02:44:22,560 --> 02:44:23,880
in the upcoming slides.

2059
02:44:23,880 --> 02:44:26,720
So for the first part, we have primary region redundancy.

2060
02:44:27,040 --> 02:44:31,760
So we have local redundant storage, LRS, and zone redundant storage, ZRS.

2061
02:44:31,760 --> 02:44:34,640
And locally redundant storage is the most cost-effective tier.

2062
02:44:34,640 --> 02:44:39,520
So that's the one I'm usually going for a lot, especially when I'm using development accounts.

2063
02:44:39,520 --> 02:44:40,480
That's what I'm always setting.

2064
02:44:40,960 --> 02:44:46,160
And so the reason, and so the use for this tier is generally disaster recovery and failovers.

2065
02:44:47,360 --> 02:44:51,360
The secondary region redundancy, we have geo-redundant storage, GRS.

2066
02:44:52,120 --> 02:44:55,360
and geo-zone redundant storage, GZRS.

2067
02:44:55,360 --> 02:45:01,920
And the reason you'd want to use this tier is for also disaster recovery and failovers, but it has a higher level redundancy.

2068
02:45:02,560 --> 02:45:06,320
Then the last one here is secondary region redundancy with read access.

2069
02:45:06,960 --> 02:45:11,840
And for this case, what we're going to have is read access geo-redundant storage.

2070
02:45:11,840 --> 02:45:17,520
So that's RAGRS and read access geo-redundant storage, RAGZRS.

2071
02:45:18,040 --> 02:45:20,240
and that's going to generally be for read replicas.

2072
02:45:20,240 --> 02:45:23,520
And if you can't remember all the initialisms, don't worry, I don't either.

2073
02:45:24,320 --> 02:45:25,760
But, you know, there you go.

2074
02:45:31,000 --> 02:45:37,360
So what we're going to do is take a closer look at the replication type, starting with the primary region redundancy.

2075
02:45:37,840 --> 02:45:43,840
And so for this tier, all the data is going to be replicated at least three times in the primary region.

2076
02:45:44,040 --> 02:45:45,120
And we got two options.

2077
02:45:45,120 --> 02:45:47,120
We have LRS and ZRS.

2078
02:45:47,120 --> 02:45:49,320
And by the graphic, you can tell that they're slightly different.

2079
02:45:49,880 --> 02:45:53,840
And so for LRS, it's using synchronous

2080
02:45:54,720 --> 02:45:57,680
replication for those other pieces of data.

2081
02:45:57,680 --> 02:46:01,520
So you notice in that region there are three, there's three versions running.

2082
02:46:02,040 --> 02:46:10,160
And so when we say synchronous, we mean that if I want to read from any of those copies, they're all going to be 100% up to date.

2083
02:46:10,160 --> 02:46:11,440
So that's what synchronous means.

2084
02:46:12,400 --> 02:46:15,600
And so here we have a durability of 11 nines.

2085
02:46:15,880 --> 02:46:20,040
And this is the absolute most cheapest option when choosing storage accounts.

2086
02:46:20,040 --> 02:46:25,760
So if you're running this for developer accounts and you do not care about replication, choose LRS.

2087
02:46:26,480 --> 02:46:32,880
For ZRS, we have copies of data synchronously to three different availability zones in the primary region.

2088
02:46:33,160 --> 02:46:37,680
And this has a durability of 12, 9, so it's clearly more durable.

2089
02:46:38,480 --> 02:46:42,320
And so why would you want to choose the primary region over the LRS?

2090
02:46:42,320 --> 02:46:53,920
Well, the idea is that if an availability zone goes out, you still have your data into other regions, where in the case of LRS, if the availability zone goes out, your data is gone, okay?

2091
02:46:55,040 --> 02:46:57,200
So that is the first tier.

2092
02:47:01,440 --> 02:47:07,520
So now we're taking a look at secondary region redundancy, and the purpose of this is

2093
02:47:08,080 --> 02:47:17,760
If you have your primary region suffers a regional disaster, and so all the data centers are out in your primary region, you can rely on that secondary region.

2094
02:47:18,680 --> 02:47:23,040
And your secondary region is going to be determined based on your primary's pair region.

2095
02:47:23,040 --> 02:47:27,040
So regions are paired with another region, and so you don't get to pick your twin.

2096
02:47:27,040 --> 02:47:28,880
It's just, it is what you get.

2097
02:47:28,880 --> 02:47:29,280
Okay?

2098
02:47:30,320 --> 02:47:31,600
And so secondary regions.

2099
02:47:32,000 --> 02:47:36,080
aren't available for read and write access, except in the event of failover.

2100
02:47:36,080 --> 02:47:44,320
So basically, the redundant copy in the secondary region is just there on standby, but it's not in use.

2101
02:47:45,160 --> 02:47:49,920
And so let's just talk about GRS and GZRS.

2102
02:47:50,000 --> 02:48:00,240
And you'll notice again by the graphic, they look a bit slightly different, but you can kind of get the idea based on our previous version, or our previous primary storage tier.

2103
02:48:01,000 --> 02:48:01,440
And so

2104
02:48:02,320 --> 02:48:11,200
Data is copied synchronously within the main primary region, and then data is asynchronously copied to another region.

2105
02:48:11,200 --> 02:48:18,480
So asynchronous means that if you try to read from the second region, all the data might not be there.

2106
02:48:18,880 --> 02:48:19,440
Okay?

2107
02:48:19,800 --> 02:48:29,840
Again, synchronous means if you read from something, there's a guarantee that it's going to be the same, and asynchronous means that there's not a guarantee that the data is one-to-one to the original.

2108
02:48:30,280 --> 02:48:32,960
And the durability here is 16 nines.

2109
02:48:33,360 --> 02:48:42,000
Going over to GZRS, we have data is copied asynchronously across 3 availability zones in a physical region.

2110
02:48:42,320 --> 02:48:46,400
And then the data is copied asynchronously to another region.

2111
02:48:46,800 --> 02:48:52,400
And I believe that the data in the secondary region is not necessarily in three other AZs.

2112
02:48:52,640 --> 02:48:54,400
At least that's the graphic I made there.

2113
02:48:54,400 --> 02:48:55,600
So hopefully that is true.

2114
02:48:56,400 --> 02:48:57,360
But yeah, there you go.

2115
02:49:02,480 --> 02:49:14,160
So now we're going to take a look at redundancy in the secondary region with read access, and the whole purpose of this region is so that you can actually have a read replica in another region.

2116
02:49:14,880 --> 02:49:19,200
And so the concept of that is having your data in sync, okay?

2117
02:49:19,520 --> 02:49:38,960
And so down below we have RAGRS and RAGZRS, and it's going to look very similar to the last setup, but the key difference is that now data is synchronous in both the primary and the secondary region, because if you're going to be reading from it, you want to make sure that your data is one-to-one with your primary region's data.

2118
02:49:38,960 --> 02:49:39,760
So there you go.

2119
02:49:44,520 --> 02:49:46,800
So we keep on mentioning about Azure Blob Storage.

2120
02:49:46,800 --> 02:49:48,000
Let's actually talk about it now.

2121
02:49:48,000 --> 02:49:53,120
So Blob Storage is an object store that is optimized for storing massive amounts of unstructured data.

2122
02:49:53,640 --> 02:49:59,280
And unstructured data is data that doesn't adhere to a particular data model or definition, such as text or binary data.

2123
02:49:59,600 --> 02:50:02,200
And Azure Blobs are composed of the following components.

2124
02:50:02,200 --> 02:50:03,280
So I have this graphic here.

2125
02:50:03,280 --> 02:50:04,960
So the first thing is your storage account.

2126
02:50:05,320 --> 02:50:10,880
And I didn't mention this prior, but when you create a storage account, you actually get a fully qualified domain.

2127
02:50:11,120 --> 02:50:14,440
A lot of Azure services are like this, where you get a

2128
02:50:14,520 --> 02:50:17,160
fully qualified domain so that you can access it from everywhere.

2129
02:50:17,160 --> 02:50:25,920
And this is a really nice feature, but that means that when you're naming your storage account or other Azure services, you have to treat it like a domain name and you have to choose a unique name.

2130
02:50:27,040 --> 02:50:28,400
The next thing are containers.

2131
02:50:28,880 --> 02:50:33,200
And this is a little bit confusing because when we think of containers, we think of computing.

2132
02:50:33,520 --> 02:50:40,160
But Azure Account Storage has the concept of containers for blobs, and it's just what they call folders.

2133
02:50:40,160 --> 02:50:41,360
So just be aware of that.

2134
02:50:42,520 --> 02:50:46,400
And then you actually have the actual data being stored, and these are the blobs.

2135
02:50:51,120 --> 02:50:53,600
So there are three types of BLOB storage.

2136
02:50:53,680 --> 02:50:58,400
We have BLOB blocks, and this is what you're going to primarily be using.

2137
02:50:58,400 --> 02:51:00,800
And so this is when you store text and binary data.

2138
02:51:01,120 --> 02:51:07,920
It's made-up of blocks of data that can be managed individually, and it can store up to 4.7 terabytes of data.

2139
02:51:08,400 --> 02:51:09,840
Then you have append blocks.

2140
02:51:10,400 --> 02:51:12,800
and these are optimized for append operation.

2141
02:51:12,800 --> 02:51:19,920
So imagine that you have logs from a virtual machine and you want to write them to BLOB storage.

2142
02:51:19,920 --> 02:51:25,520
This is going to be a lot more efficient if you're using append blobs because they just append to the end of the file.

2143
02:51:26,280 --> 02:51:27,920
And the last is page blobs.

2144
02:51:28,400 --> 02:51:32,000
And these store random access files up to 8 terabytes in size.

2145
02:51:32,240 --> 02:51:36,080
And these are just for storing virtual hard drives, so VHD files.

2146
02:51:36,880 --> 02:51:39,400
and serves as disks for Azure Virtual Machines.

2147
02:51:39,400 --> 02:51:40,720
So there's the three types.

2148
02:51:45,440 --> 02:51:49,840
So let's talk about all the different ways we can get data into Azure.

2149
02:51:50,040 --> 02:51:55,680
Of course, there is the portal and the File Explorer, but let's just take a look at...

2150
02:51:56,160 --> 02:51:58,440
all the possible options because this is something you need to know.

2151
02:51:58,440 --> 02:52:03,360
And the first is azcopy, and this is something we actually do look in greater detail in this course.

2152
02:52:03,680 --> 02:52:06,480
And this is easy to use command line tool for Windows and Linux.

2153
02:52:06,720 --> 02:52:10,880
Then you have the Azure Storage Data Movement Library.

2154
02:52:11,120 --> 02:52:14,160
This is a.NET library that's just using azcopy underneath.

2155
02:52:14,480 --> 02:52:15,840
Then you have Azure Data Factory.

2156
02:52:15,840 --> 02:52:20,080
This is an ETL service by Azure, so it's a way of moving data into Azure.

2157
02:52:20,840 --> 02:52:21,200
that.

2158
02:52:21,760 --> 02:52:27,600
Then you have Blob Fuse, which is a virtual file system driver, and it accesses data through a Linux file system.

2159
02:52:27,600 --> 02:52:33,680
I believe it's called Fuse because that is the library that's being used or the compatible library in Linux.

2160
02:52:34,000 --> 02:52:35,360
Then you have Azure Data Box.

2161
02:52:35,360 --> 02:52:38,560
This is a rugged device used to physically transport data to Azure.

2162
02:52:38,920 --> 02:52:41,000
And then you have Azure Import Export Service.

2163
02:52:41,000 --> 02:52:45,280
This is a service where you ship your physical disks for data transfer onto Azure.

2164
02:52:50,400 --> 02:52:52,240
So let's take a look at Azure Files.

2165
02:52:52,240 --> 02:52:54,400
And this is a fully managed file share in the cloud.

2166
02:52:54,400 --> 02:53:00,000
And the idea behind this is that it's like a centralized server for storage that allows multiple connections.

2167
02:53:00,240 --> 02:53:06,080
Or the way I like to think about it, it's like having one big shared drive that everyone can use or work on at the same time.

2168
02:53:06,240 --> 02:53:08,880
And when I say everyone, I mean their virtual machines.

2169
02:53:09,320 --> 02:53:12,560
So here is a visual representation, but let's just talk quickly about it.

2170
02:53:13,040 --> 02:53:18,240
So the idea is that you're going to be using a network protocol in order to facilitate communication.

2171
02:53:18,440 --> 02:53:29,200
And so the two most common ones is Server Message Block, which I believe was created by Microsoft, and Network File System, NFS, which is very commonly used on Linux files or Unix-based file systems.

2172
02:53:29,600 --> 02:53:34,640
And what you're going to be doing is you'll have to establish a connection with your file shares file system.

2173
02:53:35,360 --> 02:53:42,960
And what you'll be doing is making it accessible within a specific directory, so a folder within your drive.

2174
02:53:43,200 --> 02:53:44,480
And this is called mounting.

2175
02:53:44,480 --> 02:53:48,000
So you notice there it says Z, X, and Y.

2176
02:53:48,000 --> 02:53:53,560
So on Windows, you'd actually have the option when you mount it to say, I want to mount it to Z.

2177
02:53:53,560 --> 02:54:00,000
And so anytime you access Z on your Windows server, it's actually going to be using Azure Files.

2178
02:54:04,920 --> 02:54:07,520
So let's talk about all the use cases for Azure Files.

2179
02:54:07,520 --> 02:54:18,080
Normally they have a spiffy graphic here, but because Azure Files has so much utility, all I have room for is a bunch of text, but we do need to learn it all because it is such an important service.

2180
02:54:18,960 --> 02:54:26,560
So the first use case is that it can serve as a replacement or supplement for your on-premise file, servers, network attached storage, your NAS devices.

2181
02:54:27,360 --> 02:54:33,520
If you're performing a lift and shift, a lift and shift is when you're moving data in the cloud, we'll describe it in a second here.

2182
02:54:34,560 --> 02:54:37,840
You can use Azure files for that.

2183
02:54:37,840 --> 02:54:41,600
And so we actually have two different kinds of lifts we can do that Azure defines.

2184
02:54:41,600 --> 02:54:43,680
We have a classic lift and a hybrid lift.

2185
02:54:43,680 --> 02:54:49,040
So in a lift and shift, this means when you move workloads without re-architecting.

2186
02:54:49,040 --> 02:54:55,360
So the idea is like you used to use on-premise, you want to use Azure, but you're trying to keep things as similar as you can.

2187
02:54:55,560 --> 02:55:03,200
Very commonly, lift and shifts from on-premise to the cloud will just be taking your virtual machines and then just

2188
02:55:04,000 --> 02:55:07,280
copying and then bringing them onto the cloud with nothing else, right?

2189
02:55:07,920 --> 02:55:11,000
But anyway, in the case here for storage, we have the classic lift.

2190
02:55:11,000 --> 02:55:14,240
This is where both the application and its data are moved to Azure.

2191
02:55:14,600 --> 02:55:22,560
And then in a hybrid lift, this is where the application data is moved to Azure Files and the application continues to run on premise.

2192
02:55:23,280 --> 02:55:26,080
So clearly the classic lift is bring everything over.

2193
02:55:26,080 --> 02:55:28,560
Hybrid lift is like leave the application behind.

2194
02:55:29,320 --> 02:55:33,680
Another reason you'd want to be using Azure Files is that it's going to simplify your cloud deployment.

2195
02:55:33,920 --> 02:55:40,400
So imagine you have shared application settings, so you have multiple virtual machines and workstations, and they all rely on the same configuration files.

2196
02:55:40,640 --> 02:55:43,440
You can just go ahead and mount that drive and share that information.

2197
02:55:44,160 --> 02:55:49,920
If you're doing diagnostic tests, so let's say you have a bunch of virtual machines and they're logging to those machines.

2198
02:55:51,000 --> 02:55:53,440
And you want a developer to go in and quickly debug them?

2199
02:55:53,680 --> 02:56:08,960
Maybe there's a reason why you don't want to use a third-party provider because of compliance or security reasons, but the idea is that all these VMs can just log to the file share, and so now you have centralized logs across many machines.

2200
02:56:10,080 --> 02:56:21,440
Another use case is that you need to quickly share development tools, so you could put all your tools onto the drive, and so the developer would mount it, and now they can set up a local environment a lot faster.

2201
02:56:21,640 --> 02:56:24,240
When we're talking about containerization, we have a few options here.

2202
02:56:24,240 --> 02:56:31,000
So if you are using containers, generally by default, containers are stateless, and so you need to persist volume somehow.

2203
02:56:31,000 --> 02:56:32,360
And so that's what you're going to do.

2204
02:56:32,360 --> 02:56:34,400
You're going to be using Azure files to do that.

2205
02:56:35,840 --> 02:56:43,120
And also, another question is, why would you use Azure Files instead of setting up your own file share server?

2206
02:56:43,120 --> 02:56:54,320
Because that's definitely an option that you can do, and the reason why is that shared access, so it already has the standard protocols, so you don't have to configure them it's already baked into the service, it's fully managed.

2207
02:56:54,800 --> 02:57:00,640
And this is something that I don't think should be underlooked because it's very difficult to scale a file server.

2208
02:57:00,960 --> 02:57:05,840
So they will apply patches for it and it will just automatically scale.

2209
02:57:06,080 --> 02:57:09,360
Another thing is that it already has a lot of scripting and tooling built in.

2210
02:57:09,360 --> 02:57:15,360
So if you want to use the Azure API or PowerShell, you can automate the management and creation of files and things like that.

2211
02:57:15,520 --> 02:57:18,960
And it's also extremely, extremely resilient.

2212
02:57:19,200 --> 02:57:22,400
So you can be sure that it's going to stay remain running.

2213
02:57:22,400 --> 02:57:24,680
So there's a lot of use cases there, but definitely worth it.

2214
02:57:24,760 --> 02:57:25,920
Our time, so there you go.

2215
02:57:30,560 --> 02:57:34,920
All right, so now let's talk about all the different kinds of features with Azure Files, starting with backups.

2216
02:57:34,920 --> 02:57:37,600
So, with backups, you can backup your file share.

2217
02:57:38,160 --> 02:57:42,720
With shared snapshots, and these are read-only, and they're done incrementally.

2218
02:57:42,720 --> 02:57:47,200
And the great thing about incremental backups is that it's only storing the data that is changed.

2219
02:57:47,520 --> 02:57:54,240
So let's say you have a drive or a file share and it's 100 gigabytes and you only add 1 MB.

2220
02:57:54,240 --> 02:57:56,520
Well, that snapshot is only going to add an additional 1 MB.

2221
02:57:56,520 --> 02:57:58,880
You're not going to have two snapshots that are 100.

2222
02:57:59,320 --> 02:58:00,000
Gigabytes.

2223
02:58:00,160 --> 02:58:04,400
All right, you can have up to 200 snapshots per file share.

2224
02:58:04,560 --> 02:58:09,120
You can retain backups for up to 10 years, and backups are stored within your file share.

2225
02:58:09,120 --> 02:58:12,800
So, if you end up deleting your file share, you'll end up deleting your backups.

2226
02:58:13,360 --> 02:58:16,320
And so, because of this, that's why we have soft delete.

2227
02:58:16,560 --> 02:58:20,080
And so, soft delete lets you prevent accidental deletion by turning on.

2228
02:58:20,760 --> 02:58:26,240
Turning on this feature, and your storage will be marked for deletion and retained for a period of time before the final delete occurs.

2229
02:58:26,240 --> 02:58:28,200
So, really, it's just like you want to delete.

2230
02:58:28,240 --> 02:58:33,520
Okay, great, we're going to give you a wait period, and then, if you're absolutely sure, it'll be deleted.

2231
02:58:33,960 --> 02:58:35,840
Then we have advanced threat protection.

2232
02:58:35,840 --> 02:58:36,640
So that's ATP.

2233
02:58:36,640 --> 02:58:43,920
This is an additional layer of security intelligence that provides alerts when it detects anomalous activity on your storage account.

2234
02:58:43,920 --> 02:58:51,040
I'm pretty sure in my AZ9000, I cover this a little bit more in detail there, but not so important at this level of certification.

2235
02:58:51,680 --> 02:58:52,880
Then you have your store tiers.

2236
02:58:52,880 --> 02:58:53,760
So there's premium.

2237
02:58:53,760 --> 02:58:59,920
So this is stored on SSD with single digit milliseconds for the most IO operations, as we learned earlier.

2238
02:59:01,440 --> 02:59:05,040
The higher the IOPS, the faster this is, and SSD is always great for that.

2239
02:59:05,360 --> 02:59:07,040
Then we have transaction optimized.

2240
02:59:07,040 --> 02:59:12,640
So this stores on HDD with transaction heavy workloads that don't need the latency offered by premium file shares.

2241
02:59:13,040 --> 02:59:14,640
Historically, this has been called standard.

2242
02:59:14,640 --> 02:59:17,040
Why they call it transaction optimized?

2243
02:59:17,040 --> 02:59:17,520
I don't know.

2244
02:59:17,680 --> 02:59:20,880
Maybe it just helps people understand the better usage for it.

2245
02:59:21,680 --> 02:59:22,560
Then you have hot.

2246
02:59:23,200 --> 02:59:29,520
This is optimized for general purpose file sharing scenarios, such as team shares and Azure File Sync.

2247
02:59:30,280 --> 02:59:32,400
So that one might be one you're using quite frequently.

2248
02:59:33,040 --> 02:59:33,840
Then you have cool.

2249
02:59:33,840 --> 02:59:39,680
So this is stored on HDD for cost-effective storage optimized for online archiving storage scenario.

2250
02:59:39,960 --> 02:59:41,360
And there's still more to go.

2251
02:59:41,600 --> 02:59:45,840
So we have different types of storage here that you can use with Azure Files.

2252
02:59:45,960 --> 02:59:50,000
And we saw this earlier in our comparison, but we'll go over it again.

2253
02:59:50,000 --> 02:59:54,720
So we have general purpose version 2, and these are deployed on HDD.

2254
02:59:54,880 --> 02:59:58,560
Then you have file storage, and this is deployed on SSD.

2255
02:59:59,200 --> 02:59:59,960
Then we have

2256
03:00:00,080 --> 03:00:28,000
identity. So identity is how you're going to authorize or access Azure files. So for on-premise, this can be joined with your Azure Active Directory Domain service. If you're using managed, this is where you're going to be using the Microsoft managed version of Azure Active Directory Domain service. Then you have store account key. So this is a username and password that can be used to be mounted. I kind of feel like we cover this more in later detail here.

2257
03:00:28,720 --> 03:00:53,840
But I guess we'll find out. And then so on to networking. So Azure files are accessible inside and outside your AWS account from anywhere via storage account public endpoint because we saw that storage accounts, it's not Azure files, it's storage accounts, has that fully qualified domain. And again, a lot of Azure service has that. And I really like that feature about Azure. For SMB, the port you're going to be connecting to is 445.

2258
03:00:54,600 --> 03:01:16,240
And your organization may need to unblock this port so you can mount your file share. For encryption, Azure files are encrypted at rest using Azure Storage Service Encryption, so that's SSC. And for Azure files, for encrypted in transit, it's going to be using the SMB 3.0 with encryption or it'll use HTTPS. Okay, so there you go.

2259
03:01:21,040 --> 03:01:48,800
All right, so we heard of Azure Files, but there's also another service called Azure File Sync. And so the idea behind this service is that it allows you to cache Azure file shares on an on-premise Windows Server or cloud virtual machine. And so here is the visual graphic here where you can see on-prem, Azure VMs, and your Azure backups. And so the idea here is that you can use any protocol that's available on the Windows Server to access your data locally, including SMB, NFS, and even FTP.

2260
03:01:49,920 --> 03:02:15,840
And you can have as many caches as you need across the world. So, I mean, this is kind of like having a OneDrive, right, for your file share, because it's keeping, or like any kind of cloud storage, it's just keeping your files in sync. And the nice part is like you can have files in the cloud and they're referenced on your computer, but you only need to access them when you need them, so you don't have to have all these files locally. Okay?

2261
03:02:20,560 --> 03:02:36,160
Let's talk about Azure Storage Explorer. So this is a standalone app that makes it easy to work with Azure Storage data on Windows, Mac OS, and Linux, and you can create a variety of things. So I just want to show you, and here I am running on a Mac, but on the left-hand side you can see I have my subscriptions, my storage accounts, my disks.

2262
03:02:36,560 --> 03:02:49,920
And we have some options where we can upload files, download files, open stuff, clone stuff, create some things. And so this is just an easy and convenient way to access your file or your account storage and work with them.

2263
03:02:54,960 --> 03:03:24,840
Let's take a closer look at azcopy, and this is a command line utility that you can use to copy BLOB or files to or from a storage account. So the first thing you're going to need is the executable file, and there you can see they have it for Windows, Linux, and Mac. And then once you download that file, what you're going to have to do is also make sure that you have the right level of authorization for the user account they're using with it. So you might need to, for download, you'll need Storage BLOB Data Reader. For upload, Storage BLOB

2264
03:03:24,960 --> 03:03:44,640
Data contributor and storage BLOB data owner, so just be aware that you need to have those roles available to you to your user account. I think that I have access to everything, so I don't think I even set this it just works, but if you're in a larger company and you have more permissive, least permissive roles, you just need to know about that.

2265
03:03:45,880 --> 03:04:15,600
And so you can gain access via either the Azure Active Directory or a shared access signature. So let's just take a look at that right now. So the idea here is that we'll type in az copy login, and this is going to ask us whether we want to sign into the web browser. So that should be Azure Active Directory option one. And so what you'll do is you'll enter your username and password, and you'll then have to enter the code displayed there. And so now you're ready to use the CLS.

2266
03:04:16,400 --> 03:04:36,720
And so all you have to do is type in az copy, copy, and then you have the file, and then you give it the endpoint to the storage account and the container and the location you want it to go in. If you want to download files, it's the same command. You just reverse the order. You say, this is the location of the file. I want to download it locally. All right.

2267
03:04:41,320 --> 03:05:04,240
So let's take a look at Azure Import Export Service. And this is used for moving large amounts of data to Azure Blob Storage and Azure Files by shipping disk drives directly to the Azure data center. And you got two options here. You can use your own disk drives, or you can use the Microsoft provided drives. And so that's what their drive looks like. And they'll send up five of those to you. They're solid state drives, and they call them the Azure Data Box Disks.

2268
03:05:04,840 --> 03:05:31,040
And you can ship up to 40 terabytes per order to your data center through regional carriers. So if you need beyond 40, you've got to make multiple orders. And you can quickly configure these Azure Data Box disk drives, copy the data to the disk drives using a USB 3.0 connection, and then ship it right back on to Azure. And so in order to prepare these drives, you're going to have to use the command line tool called WA Import Export Tool.

2269
03:05:31,600 --> 03:05:58,880
And so what this tool will do is it will help you prepare your disk drives that are going to be shipped for import. It's going to copy your data to the drive. It's going to encrypt the data on the drive using AE-256 BitLocker. BitLocker is a software that is applying the encryption. And then it's going to generate out a journal file that you're going to be using to import the stuff for your order. Then it's going to help identify numbers of drives needed for export jobs.

2270
03:05:59,920 --> 03:06:21,360
So there are two versions of WA Import/Export. You have version one, and this is for Azure Blob Storage, and then version two, so this is for Azure File. So neither version's good or bad, it's just what do you want to import it into. And WA Import/Export Tool is only compatible with Windows 64-bit. So if you're using Linux or Mac, you're out of luck.

2271
03:06:22,320 --> 03:06:42,720
So, once you have prepared your drives and you've generated out that journal file, you're ready to create your import job. So, the journal file stores basic information, such as the drive serial number, the encryption key, and the storage account details. So, the idea is that you're going to upload that file there, then you're going to specify a region and storage account, and so you'll provide shipping address information, and then...

2272
03:06:43,120 --> 03:07:04,720
So that is the import job, and let's talk about for exporting. So for exporting, you will only export from Azure Blob. I don't believe you can do it for Azure Files. You can ship up to 10 empty drives to Azure per job, and you will create an export job, and the data is loaded onto those drives and shipped back to you. Okay, so there you go.

2273
03:07:09,720 --> 03:07:20,400
Let's take a look at shared access signatures. This was something we saw when we were looking at a copy, as it was an option besides Active Directory to authorize, and so this is something that...

2274
03:07:21,240 --> 03:07:44,480
is a multi-step process, so I gave it extra attention here. So shared access signature, also known as SAS, is a URI that grants restricted access rights to Azure resources and the share. And so the URI is going to grant clients temporary access to a specific set of permissions. So the types of shared access signatures we have here is account level SAS.

2275
03:07:44,880 --> 03:08:13,240
And this is when you want to access resources in one or more storage services. You have service level. This is when you want to access a single storage account by using storage account keys. Then you have user delegated. And this is when you want to access storage accounts using Azure AD credentials. And this one here is only limited to Blob and containers. So if you need to use something else, you'll have to do something there. And Microsoft considers this method to be the best practice for accessing via SAS. OK.

2276
03:08:14,520 --> 03:08:43,440
So a shared access signature comes in two different formats. You have ad hoc, and this is where you have the start time, expiry time, permissions are part of the URI. And any type of SAS can be an ad hoc SAS. And then you have service SAS with stored access policy. That's when you have a stored access policy that's defined on a resource container. This is going to be limited to BLOB, container, table, queue, and file share. So the only one that's not in the mix there looks like it's disks.

2277
03:08:44,640 --> 03:09:12,080
And the stored access policy can be associated to multiple SaaS to manage constraints. So let's just take a look at what this URI looks like. Whenever I say URI, I always just think URL. And so down below, we have it there. You can see that we have the BLOB URI. So that's the storage account, the name of the container, the name of the file we want to access. And then down below, we have a bunch of query strings. And so SV stands for storage service version, which is the version of storage service to use.

2278
03:09:12,880 --> 03:09:41,920
Then you have the start time. Then you have the expiration time. Then you have the storage resource, whether it's a BLOB or a queue. So B is for BLOB. Q is for queue. I guess it's the same word. That was a bit confusing. Then you have SP, which is permissions. So what operations can be performed against the storage resources, so read or write or both. And then you have the signature. So this is used to authenticate the access via a SHA-256 algorithm.

2279
03:09:42,560 --> 03:10:03,840
And so, I mean, if you want to generate one of these shared access signatures, they're actually really easy. All you got to do is open up the portal, and under your storage account, go to shared access signature, choose what you want. So there's all the options, and then you're going to press the button, and it's going to generate that URI for you, and then you just use that URI. So that's all there is to it.

2280
03:10:08,760 --> 03:10:35,440
Hey, this is Andrew Brown from Exam Pro. And in this follow along, we're going to learn a bit more about storage accounts and how to copy content back and forth using AZ copy. So what I want you to do is go all the way to the top here and we'll type in storage accounts. And then from here, we're going to create ourselves a new storage account. And we'll make a new resource group. I'm going to call this one Fajo. Let's type in Fajo here.

2281
03:10:36,200 --> 03:10:53,360
And we can have it in any location that we so desire. We're going to stick with standard here. General Purpose 2 seems okay to me. We'll go ahead and hit Review and Create. And then we'll hit Create there. And I'll see you back here in a moment.

2282
03:10:54,200 --> 03:11:23,040
All right, so now that our storage account is ready here, we'll go in here and we'll create ourselves a container. So I'm going to call this one Kivas Fagio. We're going to leave it as private because we technically don't want anyone to have public access to it. And so there is a tool that you should definitely know how to use called AZ Copy. So if I just type that in there quickly here and we go and scroll down, here are some versions we can download. So if you're on Mac, Linux, Windows, or et cetera, we can use it. I want to try to give you

2283
03:11:23,880 --> 03:11:45,440
A consistent experience on how you can utilize it, so I'm going to just try and stumble my way through and use it via the Cloud Shell, because I think that would probably be the most consistent way for all of us to use it. So, make sure you are in Bash, and we're going to need two things: we're going to need this azcopy.tar file, and we're also going to need some kind of file to upload. Okay, so...

2284
03:11:46,200 --> 03:12:15,280
The question is, how are we going to get things into our Cloud Shell? Well, the great thing about Cloud Shell is when you launch it, asks you to create a storage account, and we should probably be able to place those files into there. So if we go back to storage accounts at the top here, and we go here, this is a storage account. So if we go in here, if there were containers, we go back, but I believe what they do is they set you actually up a file share here, right? And so in here, this is what it's doing. So what I'm going to do is upload

2285
03:12:15,720 --> 03:12:44,800
two files, so I'll just go here. And one is going to be this, which is the Kivas Faggio, which is just an image. Okay. And what we can do is I will download this Linux here. And once that is downloaded, what I'm going to do is also upload that, okay? So I just drag that onto my desktop. It's a bit easier to access. And I might just rename it so it's a bit easier to work with.

2286
03:12:45,760 --> 03:13:19,320
So I'm just going to rename the targe GZ to a copy here, if you can see. And we'll go back here and we'll just go ahead and upload that, okay? So we'll upload that as well. And it's only 11 megabytes, so it shouldn't take too long here. But what we need to do is find out where these files are. So what we'll do is make our way back to our shell. I'm going to type in LS. And I think it might be mounted here, so we'll do LS. And there's our file. So

2287
03:13:20,280 --> 03:13:48,080
What we'll have to do is untar the AZ copy so we get the binary. So I have a handy dandy command over here from... I just found one over here because I can never remember this command, the tar command. So we'll type in tar-xvzf and then the name of the tar. So I'm going to start typing AZ and I'm going to hit tab to autocomplete and that should untar it.

2288
03:13:49,000 --> 03:14:15,600
And so now we have our... Oh, we made it into a folder, so I'm going to go into that folder there. And so now we have our az copy here, okay? So just to make our lives a bit easier, I'm going to want to move that az copy back one directory. So I'm going to type in mv for move. I'm going to type in az copy, and I'm going to do period, period, backslash. So it says, or forward slash, it'll go back a directory. We cd and do an ls.

2289
03:14:16,200 --> 03:14:37,840
Just do clean again, we'll do LS, we can now see that it's a bit easier to work with. I'm going to delete the that long folder there because we don't need it. When it's a folder, you got to do a recursive. So hyphen R. And we'll also go ahead and delete the az copy dot tar file. Okay, and we'll do clear.

2290
03:14:38,680 --> 03:15:02,800
And then we'll do an LS hyphen LA. That'll list everything because what I'm trying to see is whether this file is executable. It appears that we can execute it. If we can't, it usually could happen to do chmod u plus x az copy here. And then if we run this again, yeah, it looks the same. So I think we'll be in okay shape here. But yeah, now we're all set up to go ahead and use the az copy command. So let's give it a go.

2291
03:15:04,600 --> 03:15:32,560
All right, so there's two ways we can get or authenticate with AZ copy. And if you remember from my handy dandy AZ copy slide, we have two options, which is we can use this login or use a shared access signature. We're going to give both a try, but we'll start out with AZ login. Okay, so we'll do type in AZ copy login. And what that will do is it will prompt us and ask us to sign into the browser and enter this code. So I'm just going to grab this link here and we will copy it.

2292
03:15:33,080 --> 03:15:59,680
I'll make a new tab, paste it in. And once here, we'll go ahead and enter in this code, okay? And we'll just say, yep, Andrew Brown. And so now that is now synced. So now we should be able to use the az copy command. In order to use this, again, we pull up my reference here. We have az copy, copy, the name of the file, and then the name of the path we want it to go to, okay?

2293
03:16:00,280 --> 03:16:24,880
So what we'll have to do is in our container here, it's called Kivas Vagio. So I'll have to remember that. But if we go here, we're looking for that publicly accessible URL or that fully qualified domain URL. I would have swore it was here. Oh, sorry, we're in the wrong storage account. By the way, we have to go into our actual Vagio one here just in case.

2294
03:16:25,800 --> 03:16:55,040
Just making sure we're in the right place. But let me just go find that URL. I can't remember if we have to assemble it by hand or if they just have it handy here. So just give me a moment. All right, I'm back. And I had to pull up the docs for this one, which is not a big deal. But the structure here is we're going to have HTTPS, the account, blob.core, windows.net, the name of the container, and the path to the BLOB. Okay. So that's what we're going to do here. So let's give it a go and see if we can get it to work the first time around here. So we are typing, well, before we do that, I'm going to type clear.

2295
03:16:55,720 --> 03:17:23,840
and then do ls. So we're going to type in az copy. And the command is cp. Or actually you can type in copy if you want. It looks like cp is abbreviation. And so the path to the file. And so in our case, it's going to just be local. So I just typed in K and I tabbed. And the next thing we have to type is https colon forward slash forward slash the name of the account. So it's Fajo. And then blob.core.windows.

2296
03:17:24,240 --> 03:17:49,360
dot net forward slash, and then we named the container here Kivas Fajo. And then we'll type a forward slash. And then we can name the file however we want. So I'm going to name it the same as the JPEG. Okay. And so hopefully this just works. And I mean, it looks like it worked pending. Says the file transfer might have failed here. Hold on.

2297
03:17:51,400 --> 03:18:19,200
So it says we're not performed to other, we don't have access to perform that there. So just give me a moment, okay? All right, so I figured it out. There was one key thing we forgot to do. So the reason we were getting a 403 was, as plain as it was, is we didn't have access to do it. So if we just go back to our storage account there, and this is within the container, so I'm just going to go all the way back to storage accounts.

2298
03:18:19,800 --> 03:18:48,640
We'll go into Fagio here. And so on the left-hand side, you see it says access controls, right? So if we were to go into here and we go to role assignments, we can see what role that people have. But in order to access BLOB storage, you need to, like to be able to upload and download, you either have to be the storage BLOB data owner or the storage BLOB data contributor. So if you want to do that, you just have to go up to add and do a role assignment and assign yourself this role.

2299
03:18:49,600 --> 03:19:14,480
It does take about five minutes to take effect. So even after doing at doing this, adding it to my user here, I wasn't able to do it right away. But after waiting a little bit here, I was able to go and do a test like with list. And it didn't print anything. But that means that there is no error, right? So we probably do have access. Another little thing I found out, which was nice is that if you go, let's say into a container here,

2300
03:19:16,800 --> 03:19:43,760
And then you just clear that out, we'll click into that container. And on properties here, it actually gives us the URL. So it makes our lives a little bit easier. So we don't have to type that whole thing out and try to figure it out. But let's go back and try to actually do a copy now. So that's what we've been trying to do this entire time. So what I'm going to do is type in az copy. And then we want Kivas Fagio. And then I'm going to paste in the URL that I just got from there. And I'm

2301
03:19:44,600 --> 03:20:06,240
I'm just going to put a forward slash here, I'm going to type in Kivas Fajo dot jpg. Oh, you know what, we got to put the word copy or CP in front of it. And it looks like it completed. That looks good to me. And so if we make our way back here to

2302
03:20:07,280 --> 03:20:09,240
To our container, we can see that it's uploaded, so there we go.

2303
03:20:09,240 --> 03:20:15,600
We were able to upload it with Active Directory, so now let's go give it a try with a SAS.

2304
03:20:15,600 --> 03:20:27,120
Okay, all right, so let's give this another go here, and this time what we're going to do is use an SAS, so it's as simple as attaching it to the end of the URL for the destination or the source, depending on what we want to do.

2305
03:20:28,200 --> 03:20:33,520
What I'm going to do is I'm going to go ahead and delete this file here, just because we already have it.

2306
03:20:33,840 --> 03:20:37,040
And what I'm going to do is go back to my storage account.

2307
03:20:37,360 --> 03:20:40,160
And what we need is a SAS here.

2308
03:20:40,160 --> 03:20:41,120
So I'll type it in here.

2309
03:20:41,120 --> 03:20:42,320
I wonder if we can type it.

2310
03:20:42,320 --> 03:20:43,120
Oh, yeah, we can here.

2311
03:20:43,120 --> 03:20:43,600
That's great.

2312
03:20:43,840 --> 03:20:45,760
So type it here at the shared signature access.

2313
03:20:45,760 --> 03:20:47,160
And we'll say, what do we need access to?

2314
03:20:47,200 --> 03:20:49,280
Well, we're only using Blob storage.

2315
03:20:49,280 --> 03:20:51,360
So we get rid of file queue and table.

2316
03:20:52,000 --> 03:20:55,440
Allowed resource types will be for container because that's what we're doing.

2317
03:20:56,280 --> 03:21:00,760
And we aren't deleting, we don't necessarily need the list, but we can have that there.

2318
03:21:00,760 --> 03:21:02,960
Read, write, add, create, that seems okay to me.

2319
03:21:03,400 --> 03:21:05,120
Enable deletion of versions.

2320
03:21:06,800 --> 03:21:08,560
Sure, I mean, we don't have to turn that off.

2321
03:21:09,040 --> 03:21:11,360
But we'll just leave it in place.

2322
03:21:12,080 --> 03:21:16,000
I think we will do HTTP or HTTPS, just have some flexibility here.

2323
03:21:16,480 --> 03:21:19,760
And this looks okay, we have a few different keys, we're gonna stick with key one.

2324
03:21:19,760 --> 03:21:23,680
And so I'm going to go ahead and generate out an SAS connection string.

2325
03:21:24,440 --> 03:21:26,160
And so this is the token we want.

2326
03:21:26,160 --> 03:21:27,520
See how it has a question mark?

2327
03:21:27,720 --> 03:21:31,920
It's going to allow us to put that on the end of our URL.

2328
03:21:32,400 --> 03:21:38,720
So what I will do is I will, I don't know if we can write az copy log out.

2329
03:21:38,720 --> 03:21:39,600
Let's see if we can do that.

2330
03:21:40,240 --> 03:21:40,640
Oh, we can.

2331
03:21:40,640 --> 03:21:40,960
Great.

2332
03:21:40,960 --> 03:21:43,360
So just making sure that it's not authenticating that way.

2333
03:21:44,000 --> 03:21:48,240
And so what I'll do is I'll go back up to this link here, and this should fail, right?

2334
03:21:48,240 --> 03:21:50,000
Because we don't have access, right?

2335
03:21:50,520 --> 03:21:57,120
And so what we should be able to do is just take this string and place this on the end as such, and hopefully it just works.

2336
03:21:58,080 --> 03:21:59,120
And it says done, done, done.

2337
03:21:59,120 --> 03:22:07,840
So if we go back to our storage here to see if that is working as expected, we go into that container.

2338
03:22:12,360 --> 03:22:13,880
Let's just move this down below here.

2339
03:22:13,880 --> 03:22:16,240
It gets a bit hard to see when you have that open like that.

2340
03:22:16,720 --> 03:22:17,840
Oh, we're in storage account right now.

2341
03:22:17,840 --> 03:22:24,400
Okay, so we're going to type in container, go here, click into give us vajo.

2342
03:22:24,800 --> 03:22:26,640
And we don't see the file.

2343
03:22:26,640 --> 03:22:28,400
So let me give it let me give a try here.

2344
03:22:28,400 --> 03:22:28,560
Okay.

2345
03:22:28,560 --> 03:22:30,960
All right, let's give it another go here.

2346
03:22:32,160 --> 03:22:34,080
You know, I just don't necessarily trust URL.

2347
03:22:34,080 --> 03:22:37,600
Actually, it says fail to perform copy, no SAS token or OAuth provided.

2348
03:22:38,640 --> 03:22:39,200
which is fine.

2349
03:22:39,200 --> 03:22:41,440
But in this case, we did and we saw done, done, done.

2350
03:22:41,440 --> 03:22:43,440
And so here are the values it's printing out.

2351
03:22:43,840 --> 03:22:49,840
So maybe what we should do is just regenerate this out and be a little bit more permissive.

2352
03:22:51,120 --> 03:22:54,640
And maybe that will give us an easier time because we want read.

2353
03:22:55,040 --> 03:22:56,800
This is slightly different for the container.

2354
03:22:57,440 --> 03:23:01,040
Not sure why this looks different all of a sudden, but what we'll do is we'll go back here.

2355
03:23:01,920 --> 03:23:03,160
We'll just go close a bit.

2356
03:23:03,160 --> 03:23:04,480
We'll go back into Fagio.

2357
03:23:04,960 --> 03:23:07,360
I'm going to go look for the container again.

2358
03:23:10,080 --> 03:23:11,840
And what we'll do is click into the container.

2359
03:23:11,840 --> 03:23:14,080
And then from here, we'll do shared access properties.

2360
03:23:16,080 --> 03:23:17,680
We'll do account key, which is fine.

2361
03:23:17,680 --> 03:23:22,720
So key one, I want, I'm just going to put everything on here to make our lives a bit easier.

2362
03:23:23,520 --> 03:23:25,840
The start date is fine, the end date is fine.

2363
03:23:26,720 --> 03:23:28,480
We'll allow HTTP or HTTPS.

2364
03:23:29,840 --> 03:23:31,040
And we'll generate that token.

2365
03:23:31,040 --> 03:23:32,800
So here we have it again.

2366
03:23:36,120 --> 03:23:38,320
what we'll do is we'll just grab this whole thing here.

2367
03:23:40,480 --> 03:23:42,560
Actually, we probably Yeah, we'll just grab the token.

2368
03:23:45,320 --> 03:23:50,880
And then what we'll do is make our way back to here, I'm going to hit up.

2369
03:23:52,240 --> 03:23:56,480
And what I'm going to try to do is remove the end here, give us another go.

2370
03:23:56,560 --> 03:23:56,840
Okay.

2371
03:24:00,560 --> 03:24:01,440
So paste that in.

2372
03:24:03,880 --> 03:24:09,360
I don't see the question mark on that, so this is not an easy one, okay?

2373
03:24:10,000 --> 03:24:12,720
We'll put question mark here, hit enter.

2374
03:24:14,400 --> 03:24:16,880
It just says stopped, done, done, done, done.

2375
03:24:16,880 --> 03:24:18,880
So it makes you think that it's working.

2376
03:24:19,920 --> 03:24:20,880
Clearly it's not.

2377
03:24:22,320 --> 03:24:24,960
But let's just double check the container to see what's there, okay?

2378
03:24:30,490 --> 03:24:31,250
No file still.

2379
03:24:33,410 --> 03:24:36,050
Well, what if we grab this one here?

2380
03:24:45,680 --> 03:24:48,560
Maybe it's an encoding issue, or maybe it doesn't like the way we did the link.

2381
03:24:49,280 --> 03:24:49,840
Hit enter.

2382
03:24:50,480 --> 03:24:51,600
Still says stopped.

2383
03:24:58,120 --> 03:24:58,520
I don't know.

2384
03:24:59,160 --> 03:24:59,880
All right, I'm back.

2385
03:24:59,880 --> 03:25:00,680
So, you know what?

2386
03:25:00,680 --> 03:25:06,360
I thought I was doing everything right, and so just as a sanity check, what I did was I opened up my command prompt.

2387
03:25:07,000 --> 03:25:09,440
And I installed just a different version of azcopy.

2388
03:25:09,440 --> 03:25:10,560
It's the Windows version.

2389
03:25:10,880 --> 03:25:14,160
And using the exact same command, it worked.

2390
03:25:14,160 --> 03:25:23,680
So I just want you to know, this is kind of something that I run into a lot with Azure, whereas if you try it one way, it doesn't work, but some other place, it works no problem.

2391
03:25:23,680 --> 03:25:29,920
Just because Azure tries to support all use cases, sometimes you'll be spending a lot of times second-guessing yourself.

2392
03:25:30,400 --> 03:25:32,720
But definitely the command I showed you was correct.

2393
03:25:33,520 --> 03:25:37,600
But, it could be that the AZ copy version's out of date.

2394
03:25:37,840 --> 03:25:45,120
So remember when we wrote an AZ copy here for Linux, it was suggesting to get a newer version, but I had downloaded the latest version.

2395
03:25:45,120 --> 03:25:47,520
So, you know, it could be that.

2396
03:25:47,920 --> 03:25:52,560
It's really hard to say, but I want you to know, like, that's just how you do an AZ copy.

2397
03:25:53,120 --> 03:25:56,040
And, you know, don't get frustrated if you get stuck on stuff like this, okay?

2398
03:25:56,640 --> 03:25:59,520
So we're all done here, and let's go ahead and tear down our stuff.

2399
03:26:01,120 --> 03:26:08,080
And we'll just go to Fagio here, that's the one we set up there, and we'll go ahead and delete that resource group, and we're all done here, okay?

2400
03:26:14,160 --> 03:26:18,960
Hey, this is Angie Brown from Exam Pro, and in this follow-along, I'm going to show you how to set up a file share.

2401
03:26:19,600 --> 03:26:21,680
and mount it to a virtual machine.

2402
03:26:21,680 --> 03:26:22,560
So let's get to it.

2403
03:26:22,560 --> 03:26:34,040
So the first thing we're going to do is go all the way to the top and we're going to type in storage accounts, because if you type in files or Azure files, you're just not going to get anything because it is a sub-service within a storage account.

2404
03:26:34,320 --> 03:26:35,760
So we'll go ahead and hit add.

2405
03:26:36,080 --> 03:26:40,240
And I think I will name, I'll make a new resource group as I always do.

2406
03:26:40,240 --> 03:26:42,320
I'm going to name this one as KeyVoss.

2407
03:26:43,120 --> 03:26:45,280
Okay, and then we'll name the account as such.

2408
03:26:45,720 --> 03:26:46,960
Now I want to show you something here.

2409
03:26:46,960 --> 03:26:54,240
So under the account kind, if you remember from our lecture content, you can create a file share under general purpose 2.

2410
03:26:54,880 --> 03:26:58,920
But if you go to premium 2, you'll have just a file storage type.

2411
03:26:58,920 --> 03:27:02,800
That means only this storage account is only for creating a file storage.

2412
03:27:03,080 --> 03:27:07,800
And that's if you want to use the premium tier for access.

2413
03:27:07,800 --> 03:27:09,280
And we don't today.

2414
03:27:10,000 --> 03:27:14,880
But I will show you when we get to that in a moment here, just to point that out to you.

2415
03:27:14,880 --> 03:27:17,440
So what we'll do is go ahead and hit Review Create.

2416
03:27:17,440 --> 03:27:20,800
Actually, before we do that, let's just double check if there's anything interesting here.

2417
03:27:20,800 --> 03:27:21,600
Sometimes there is.

2418
03:27:21,840 --> 03:27:24,160
So under Azure Files for large file shares.

2419
03:27:24,880 --> 03:27:27,400
provides file share support up to 100 terabytes.

2420
03:27:27,400 --> 03:27:32,880
So right now it's disabled, but if you wanted larger files, you could go ahead and enable that, but we're just going to leave it off.

2421
03:27:32,880 --> 03:27:34,960
I'm going to go ahead and hit review and create.

2422
03:27:35,200 --> 03:27:43,920
Now, as this is creating, and this goes pretty darn quick, what I'm going to do is launch a new virtual machine because we need something to mount the file share to.

2423
03:27:44,240 --> 03:27:46,160
So make your way over to virtual machines.

2424
03:27:47,200 --> 03:27:51,840
And what we're going to do is launch a Linux one just because that's a lot easier for me to do here.

2425
03:27:52,480 --> 03:27:54,160
And they're generally more inexpensive.

2426
03:27:54,760 --> 03:27:55,840
So we'll choose Kivas.

2427
03:27:56,920 --> 03:28:02,000
I'm also going to name the virtual machine Kivas, and we'll choose Ubuntu as our image.

2428
03:28:02,000 --> 03:28:06,000
So just go down here, make sure you choose 18 LTS, generation 2.

2429
03:28:06,480 --> 03:28:08,880
And under the sizes, we'll expand it.

2430
03:28:08,880 --> 03:28:12,720
Make sure you choose B1LS, because that costs around $6 a month.

2431
03:28:13,200 --> 03:28:16,640
Under your password, we will choose Azure User as the name.

2432
03:28:17,560 --> 03:28:23,240
And then for the password itself, testing123, capital on that T, so capital T, testing123456.

2433
03:28:23,240 --> 03:28:23,600
Sorry.

2434
03:28:24,000 --> 03:28:25,760
It's always 123456.

2435
03:28:25,920 --> 03:28:34,480
We should probably open up port 445, but we'll get to that when we get to the, actually we have to recreate it here.

2436
03:28:34,480 --> 03:28:36,000
So I'll hit review and create.

2437
03:28:36,800 --> 03:28:39,680
And we will go ahead and just give it a moment.

2438
03:28:42,640 --> 03:28:45,920
Just takes a little bit of time and we'll just go and create that there.

2439
03:28:47,680 --> 03:28:57,360
So, as that is creating, we'll go back to our storage account, we'll go into it, and as you notice, these are the services, the things that we can launch in our storage account.

2440
03:28:57,520 --> 03:28:59,920
What we want is a file share that's Azure Files.

2441
03:29:00,600 --> 03:29:05,040
But notice here that the capacity is set to 5 terabytes and it has a soft delete for seven days.

2442
03:29:05,040 --> 03:29:10,480
It's not configured with Azure Active Directory as of yet if we wanted to use that to authenticate.

2443
03:29:10,800 --> 03:29:13,280
But what we'll do is click on file share on the right-hand side.

2444
03:29:13,280 --> 03:29:15,920
I'm going to name our file share as Kivas.

2445
03:29:16,160 --> 03:29:19,880
I'm going to set the total to 3 gigabytes because we don't need a lot of data.

2446
03:29:19,880 --> 03:29:21,520
And remember that tier I talked about?

2447
03:29:21,520 --> 03:29:29,440
Well, here it is, it's disabled, but if we had created it a premium storage account and a file storage, we could have chosen that all right.

2448
03:29:29,760 --> 03:29:30,520
So we'll go ahead and hit

2449
03:29:30,600 --> 03:29:32,480
hit create, and this doesn't take too long.

2450
03:29:32,880 --> 03:29:35,200
As that's going, let's make our way back to our virtual machine.

2451
03:29:35,200 --> 03:29:43,760
It looks like it's deployed, so we'll go to that resource, and then on the left-hand side, we'll go to networking, because I want to open up that port 445.

2452
03:29:43,760 --> 03:29:46,720
That's what SMB communicates on.

2453
03:29:47,720 --> 03:29:59,960
And so down below, all this is fine, but if we were to go here, there isn't one for SMB, so what we'll do is just put in 445, and we'll say TCP, and I'll just write down here SMB, and we'll go ahead

2454
03:30:00,040 --> 03:30:00,600
and hit add.

2455
03:30:00,600 --> 03:30:07,920
And that only takes a moment there, we'll make our way back to our storage account, we'll click or sorry, into our files, yeah, search account in our files.

2456
03:30:08,160 --> 03:30:09,760
Notice we have connect and upload.

2457
03:30:10,000 --> 03:30:12,640
And so what we're going to do is click Connect.

2458
03:30:12,960 --> 03:30:16,000
And it's going to give us some instructions here that we can run.

2459
03:30:16,000 --> 03:30:17,520
And this is going to be the mount point.

2460
03:30:17,840 --> 03:30:19,920
So I'm going to go make my way back to here.

2461
03:30:20,240 --> 03:30:22,480
And I see that that record has been created.

2462
03:30:22,480 --> 03:30:24,960
And I'm going to open up our cloud shell.

2463
03:30:26,480 --> 03:30:31,760
And so if you've never opened up Cloud Shell before, it'll ask you to make it a storage account that is specific just for it.

2464
03:30:32,000 --> 03:30:33,880
So say yes, make sure you're in bash mode.

2465
03:30:33,880 --> 03:30:35,280
We cannot do this in PowerShell.

2466
03:30:35,600 --> 03:30:46,800
And within your virtual machine, if you're on the right tab here, you'll go to overview, and we're going to grab that public IP address, type SSH, Azure user at sign, paste in the IP address.

2467
03:30:46,800 --> 03:30:47,680
We'll hit enter.

2468
03:30:47,920 --> 03:30:53,200
Type in yes to accept the fingerprint, and then type your password, capital T, testing 123456.

2469
03:30:54,000 --> 03:30:54,480
Okay.

2470
03:30:55,480 --> 03:30:56,480
and it'll let us in.

2471
03:30:56,800 --> 03:31:03,680
And what we're going to need to do is do a sudo apt update, and I'm going to do ampersand ampersand just so we can run this in one line.

2472
03:31:03,680 --> 03:31:07,680
We're going to type in sudo apt install cifs utils.

2473
03:31:07,840 --> 03:31:13,040
This is the utility that we're going to use to do this part of the mounting, so we need to make sure that is installed.

2474
03:31:13,400 --> 03:31:14,720
And so we'll let that go.

2475
03:31:15,680 --> 03:31:19,200
Apt update can take a lot of time or a very little amount of time.

2476
03:31:19,200 --> 03:31:22,720
It just depends on how many updates there are, but it shouldn't take too long.

2477
03:31:23,600 --> 03:31:28,000
And so what we're going to do is prepare this because this is not the easiest to work with.

2478
03:31:28,440 --> 03:31:33,440
And so what we'll do, I already have it open here because I was giving this a go earlier.

2479
03:31:33,600 --> 03:31:35,680
This is the exact same thing, but I'm going to delete it out.

2480
03:31:36,560 --> 03:31:40,400
So it's one-to-one because I think it might have changed a little bit here.

2481
03:31:40,400 --> 03:31:40,720
Whoops.

2482
03:31:42,400 --> 03:31:46,720
And so I will copy this here and paste it in.

2483
03:31:46,720 --> 03:31:47,880
And we'll just give it a quick read.

2484
03:31:47,880 --> 03:31:53,040
So what it's going to do, I don't know if it would color this if I went to bash here.

2485
03:31:53,520 --> 03:31:54,160
Shell script.

2486
03:31:55,120 --> 03:31:55,480
There we go.

2487
03:31:55,480 --> 03:31:56,000
It's a bit easier.

2488
03:31:56,000 --> 03:31:59,600
So it's going to create a directory called Mount Kivas.

2489
03:32:00,400 --> 03:32:04,320
And then it's going to create another directory for the SMB credentials.

2490
03:32:04,480 --> 03:32:07,720
It's going to store the username and then the password in these credentials.

2491
03:32:07,720 --> 03:32:09,920
We're going to chamod it so we have our permissions.

2492
03:32:10,520 --> 03:32:15,200
And then we have this bash script here, which is a little bit hard to read, but

2493
03:32:15,920 --> 03:32:21,200
It is using CIFS, so it's doing some something there and setting that stuff up.

2494
03:32:21,200 --> 03:32:22,400
And then it's using CIFS.

2495
03:32:22,440 --> 03:32:23,640
It's actually mounting in this case.

2496
03:32:23,640 --> 03:32:25,600
So that's what we're going to do.

2497
03:32:25,600 --> 03:32:30,320
So just going back over here and back to this other tab.

2498
03:32:31,960 --> 03:32:36,720
What I'm going to do here is, oh, sorry, now this is ready.

2499
03:32:36,720 --> 03:32:38,000
We're going to just type in clear.

2500
03:32:38,640 --> 03:32:41,320
And I'm going to run each of these commands.

2501
03:32:41,320 --> 03:32:44,800
So I'm going to grab the make directory here and I'm going to paste that in.

2502
03:32:45,360 --> 03:32:49,760
If you paste all this in, half the time it messes up when you have multi-line like that, so it's not even worth trying.

2503
03:32:50,640 --> 03:32:52,960
So we'll do copy, we'll make that other directory here.

2504
03:32:54,240 --> 03:32:57,600
And then we have this pseudo bash line here, so we'll copy that.

2505
03:33:00,000 --> 03:33:02,960
Okay, hit enter, and then we'll grab this next line here.

2506
03:33:03,680 --> 03:33:06,080
We'll copy that, paste that in, hit enter.

2507
03:33:07,120 --> 03:33:09,040
It did not like the space in front of it, I think.

2508
03:33:10,240 --> 03:33:18,720
It's just a really long line, so what I'll do is I'll just grab that line, move it to the wall, make my life a little bit easier, and we'll paste that in like that.

2509
03:33:20,640 --> 03:33:23,040
It's saying the credentials does not exist.

2510
03:33:24,960 --> 03:33:25,840
Hold on here.

2511
03:33:27,280 --> 03:33:28,800
So we'll just write clear.

2512
03:33:29,760 --> 03:33:30,880
It's okay if it happens.

2513
03:33:31,520 --> 03:33:34,320
So this directory should exist, right?

2514
03:33:34,320 --> 03:33:38,160
So if I do pwd.

2515
03:33:40,400 --> 03:33:41,040
etc.

2516
03:33:41,120 --> 03:33:42,480
Or we should just be able to autocomplete it.

2517
03:33:42,480 --> 03:33:44,160
So it's a CD, etc.

2518
03:33:44,480 --> 03:33:47,120
I'm hitting tab to autocomplete, and then we want SMB.

2519
03:33:48,840 --> 03:33:50,400
And this says credential.

2520
03:33:51,040 --> 03:33:52,480
So it's missing the S.

2521
03:33:52,880 --> 03:33:54,480
So there's my mistake.

2522
03:33:54,480 --> 03:33:59,760
Okay, so I'm going to go ahead and remove that, because if we don't have it named right, it's just not going to work, right?

2523
03:33:59,760 --> 03:34:02,480
So we'll go ahead here and make sure we copy the entire line.

2524
03:34:02,480 --> 03:34:03,440
That was my mistake.

2525
03:34:04,000 --> 03:34:05,200
And we'll paste that in there.

2526
03:34:05,280 --> 03:34:06,640
We'll go to the next line.

2527
03:34:07,280 --> 03:34:08,800
Copy that, paste that in.

2528
03:34:10,400 --> 03:34:16,000
Copy the next line here, paste that in.

2529
03:34:18,080 --> 03:34:21,920
And what we'll do is we'll chmod the file.

2530
03:34:24,000 --> 03:34:34,960
Okay, so if we want to check to make sure it's the correct permissions, what we can do is do an LS, paste in the, or just write in the path, which is SMB credentials here.

2531
03:34:35,480 --> 03:34:36,360
And here we can see the file.

2532
03:34:36,360 --> 03:34:41,240
If we do a hyphen LA, it will show us that it has the correct permissions.

2533
03:34:41,240 --> 03:34:42,440
So it's really locked down there.

2534
03:34:42,440 --> 03:34:43,520
That's what the Chabad did.

2535
03:34:43,680 --> 03:34:53,280
If we want to see the contents of that file to make sure that those things are in there, what we can do is type in cat and just grab that whole link here.

2536
03:34:53,280 --> 03:34:54,480
We might have to give it sudo.

2537
03:34:54,560 --> 03:34:55,600
We might complain for that.

2538
03:34:56,160 --> 03:34:56,560
It does.

2539
03:34:56,560 --> 03:34:57,720
So we'll put sudo in front of that.

2540
03:34:57,720 --> 03:35:02,720
And so we just want to make sure there's one username and one password and everything looks okay there.

2541
03:35:02,960 --> 03:35:03,840
We'll type clear.

2542
03:35:04,840 --> 03:35:06,000
We'll make our way back here.

2543
03:35:06,480 --> 03:35:08,080
And so now we'll run these commands.

2544
03:35:08,160 --> 03:35:09,360
So that's the first one.

2545
03:35:12,880 --> 03:35:14,720
And then this is the second one.

2546
03:35:17,360 --> 03:35:19,040
We'll make sure that that end matches up.

2547
03:35:19,120 --> 03:35:21,280
I-N-O, yep, I-N-O, hit enter.

2548
03:35:21,720 --> 03:35:23,280
And so now it should work.

2549
03:35:23,280 --> 03:35:26,320
So if we were to upload a file, that should be in good shape.

2550
03:35:26,320 --> 03:35:29,120
But if we want to get to that directory, we'll just type in mount.

2551
03:35:29,120 --> 03:35:32,080
And if we keep on hitting tab, it'll show us there's Kivas.

2552
03:35:32,720 --> 03:35:35,640
Okay, and so this is where we're going to create some files.

2553
03:35:35,640 --> 03:35:37,480
So I actually don't have a file prepared, so give me a moment.

2554
03:35:37,480 --> 03:35:38,960
I'll be back in a moment with a file.

2555
03:35:39,360 --> 03:35:42,000
All right, I'm back and I've prepared an image for us to upload.

2556
03:35:42,000 --> 03:35:45,840
So going back to our file share in here, we have the upload button.

2557
03:35:45,840 --> 03:35:46,960
Just go ahead and click that.

2558
03:35:47,280 --> 03:35:49,840
And on the right-hand side, it's going to give you a pop-up.

2559
03:35:50,240 --> 03:35:53,840
And within that pop-up there, just go find your image.

2560
03:35:53,840 --> 03:35:55,120
I'm just off screen grabbing it.

2561
03:35:55,120 --> 03:35:55,760
So this

2562
03:35:56,160 --> 03:36:01,080
is my image, what I'm uploading, which is Kivas Faggio.

2563
03:36:01,080 --> 03:36:02,080
It's who we named it after.

2564
03:36:02,080 --> 03:36:04,560
He's the collector in Star Trek Next Generation.

2565
03:36:05,000 --> 03:36:08,800
And so what I'll do is go ahead and hit upload, right?

2566
03:36:08,840 --> 03:36:11,120
And so that file is supposedly there.

2567
03:36:11,280 --> 03:36:16,080
If we go back here and do LS, there's the file, right?

2568
03:36:16,560 --> 03:36:18,880
And so probably it should be reflective.

2569
03:36:18,880 --> 03:36:21,920
So if we were to go and delete this file,

2570
03:36:22,640 --> 03:36:31,760
So we'd say remove, or maybe if we made a new director, let's see what happens if we say, the episode's called the most toys in Star Trek.

2571
03:36:32,880 --> 03:36:35,600
Just see if it actually reflects back and forth.

2572
03:36:36,320 --> 03:36:37,200
So we do a refresh.

2573
03:36:37,200 --> 03:36:37,920
There it is.

2574
03:36:38,080 --> 03:36:38,720
Can I drag?

2575
03:36:38,720 --> 03:36:41,040
No, I can't drag, but I could probably move this file over there.

2576
03:36:41,040 --> 03:36:46,160
So we'll say move Kivas Faggio into the most toys episode.

2577
03:36:46,880 --> 03:36:49,200
And if we go back here and refresh,

2578
03:36:50,480 --> 03:36:51,520
You get the idea, right?

2579
03:36:51,920 --> 03:36:56,240
So yeah, I mean, that's as simple as it is with the file share there.

2580
03:36:56,240 --> 03:36:56,640
Okay?

2581
03:36:58,000 --> 03:37:04,000
So now that we're all done here with Azure File Share, we can't use this to make a file sync because we would have to use Windows for that.

2582
03:37:04,000 --> 03:37:05,520
So this is all pretty much done.

2583
03:37:05,840 --> 03:37:08,000
So what I want you to do is go to your resource groups.

2584
03:37:08,160 --> 03:37:10,880
We'll find Kivas and we'll go ahead and delete this.

2585
03:37:11,160 --> 03:37:15,440
And we'll call this part of our follow along 100% done here.

2586
03:37:15,440 --> 03:37:16,000
Okay?

2587
03:37:16,000 --> 03:37:17,360
So see you in the next one.

2588
03:37:22,400 --> 03:37:27,520
Hey, this is Andrew Brown from Exam Pro, and we are going to take a look at using Azure File Sync.

2589
03:37:27,680 --> 03:37:33,680
So previously we set up a file share with just Linux, but we're going to take it a bit further and set up a sync.

2590
03:37:34,000 --> 03:37:36,680
So what we're going to do is we're going to do 2 things.

2591
03:37:36,680 --> 03:37:41,200
We're going to need to set up a new storage account, and we'll also have to launch a virtual machine.

2592
03:37:41,360 --> 03:37:50,360
Since virtual machines take longer to launch than a storage account, what I want you to do, I saw the old tab here from the last file along, but what I want you to do is make your way over to virtual machines.

2593
03:37:50,560 --> 03:37:54,400
open that a new tab and we'll go ahead and launch ourself a Windows Server.

2594
03:37:55,280 --> 03:37:59,240
So up in the top left corner, hit add virtual machine.

2595
03:37:59,240 --> 03:38:00,160
We'll give it a moment.

2596
03:38:00,160 --> 03:38:01,920
I'm going to call this new one.

2597
03:38:02,560 --> 03:38:05,360
Well, we can use Kivas again, so I'm going to go ahead and do that.

2598
03:38:05,360 --> 03:38:10,000
We'll say this is Kivas and I'm going to choose this time Windows 2019 Server.

2599
03:38:10,000 --> 03:38:13,200
So we have a Windows Server and I want 2019.

2600
03:38:13,840 --> 03:38:16,880
It doesn't necessarily have to be, let me just double check here.

2601
03:38:18,680 --> 03:38:20,960
Yeah, we'll just do 2019 generation 2 here.

2602
03:38:21,600 --> 03:38:22,920
And we'll scroll on down here.

2603
03:38:22,920 --> 03:38:24,960
And I'm going to put in Azure user.

2604
03:38:25,680 --> 03:38:32,160
And then we'll do capital T, testing 123456, capital T, testing 123456.

2605
03:38:32,480 --> 03:38:33,280
Scroll on down.

2606
03:38:33,280 --> 03:38:36,720
We are definitely going to want port 3389 open.

2607
03:38:38,720 --> 03:38:40,400
We'll open up these two ports as well.

2608
03:38:40,400 --> 03:38:41,280
I think that's okay.

2609
03:38:41,600 --> 03:38:43,840
And we'll go ahead, hit review, and create.

2610
03:38:44,480 --> 03:38:47,920
actually, before we do that, I don't think I choose the right size.

2611
03:38:48,160 --> 03:38:53,600
So we'll just wait a moment here as it's complaining, and we'll change this because you can't have a B1LS.

2612
03:38:53,800 --> 03:38:58,960
We're going to have to go with DSV.

2613
03:39:00,640 --> 03:39:02,640
DSV3, okay?

2614
03:39:02,760 --> 03:39:05,120
Because it has two VCPUs at the minimum.

2615
03:39:05,120 --> 03:39:08,080
Actually, we can go with this one here because it just has to be two and four.

2616
03:39:08,320 --> 03:39:13,360
So I think we can get away with a V2, which is 50 bucks a month, which we're not going to keep that around for very long.

2617
03:39:13,600 --> 03:39:15,440
We'll go ahead and hit create.

2618
03:39:17,840 --> 03:39:24,160
We might need, actually before that, I'm just going to add another disk just in case because I really don't want to have to do this if I have to make another one.

2619
03:39:24,520 --> 03:39:28,400
And so we're just going to say an empty disk here, I suppose.

2620
03:39:29,480 --> 03:39:30,560
Yeah, that seems fine to me.

2621
03:39:30,960 --> 03:39:35,520
And I'm going to go ahead and hit, yeah, we should enable disk.

2622
03:39:35,520 --> 03:39:36,760
No, we'll do nothing there.

2623
03:39:36,760 --> 03:39:37,480
And we'll say OK.

2624
03:39:37,480 --> 03:39:39,440
And go ahead and hit review create.

2625
03:39:43,760 --> 03:39:44,840
And we'll just give it a moment.

2626
03:39:44,840 --> 03:39:45,760
It takes a little bit of time.

2627
03:39:45,760 --> 03:39:47,040
Go ahead and hit create there.

2628
03:39:47,200 --> 03:39:50,480
And while that's creating, now we'll go over and make ourselves a storage account.

2629
03:39:50,800 --> 03:39:52,080
So we'll make a new one here.

2630
03:39:52,480 --> 03:39:56,640
And we'll call it, we'll put it in our Kivas, and we'll call it Kivas.

2631
03:39:57,120 --> 03:40:00,320
We'll stick with standard general 2, that's totally fine for our use case.

2632
03:40:00,640 --> 03:40:03,440
We'll go ahead and hit create, and this will not take long.

2633
03:40:04,720 --> 03:40:06,560
It's very fast at making storage accounts.

2634
03:40:08,000 --> 03:40:10,000
Windows virtual machines, not as fast.

2635
03:40:11,920 --> 03:40:13,280
So we'll just give it a moment here.

2636
03:40:31,600 --> 03:40:52,640
And it looks like it's created, so we'll go to the resource, and then under file shares, we'll click on that. We'll create a new file share, and this will be called Kivas. And we'll set 5 gigabytes, because we really don't need a large one. We'll create it. And so this can be used for Windows or Linux. In this case, we're going to be using it for Windows. So what we can do,

2637
03:40:53,200 --> 03:41:20,080
We'll just have to wait for that to finish deploy. But we're going to have to set up Azure files. So if we go files, I think we type it in here, will it show up? No. So the thing is we need to get file sync and it's in a kind of a weird spot. So if we go to all services and then we type in files, whoops, it was a little bit too quick there. I'm just looking for it here. What if we type in sync?

2638
03:41:21,360 --> 03:41:48,080
There we go. So what I'm looking for is storage sync services. Can we type it up here sync? Yeah, so that would have been the way I would have gone gone gone and found it there. But we need to find Azure files. I'm just trying to remember how to get to there. So I could have swore we could type in file sync. Yeah, here it is. Azure file sync.

2639
03:41:49,760 --> 03:42:13,680
And so this is how we get to it. I know it's quite a, let me just double check to make sure if that's somewhat, if we can actually type that up here, file sync. No. Okay. So what we would want to do is go ahead and create this. If we want to take a look, we can check the plans. This seems okay. So we'll go ahead and hit create. And under here, we're going to put it into Kivos. And then for the provider name, it will be the storage sync service name will just be Kivos as well.

2640
03:42:14,800 --> 03:42:40,400
And I guess we'll stick with central US. I guess it just really depends on where our virtual machine storage account is. I hope everything's launching in the same place. I don't think it matters, but I'm just going to double check here. So this one is in Canada East, and then our storage account, let's just go take a look where it is. It is in Canada East. So maybe we could launch this in Canada East. It doesn't give us any grief. It doesn't, so that's great. We'll go ahead and hit create.

2641
03:42:44,640 --> 03:43:11,760
And we'll give that a little bit of time there. And if our instance is ready, we should go ahead and connect to it because there's going to be a couple things we need to install, okay? So I'm going to go over to RDP here and we're going to download the RTP file. And that's going to open up that. So we'll just double click it. We'll say connect. If you're on a Mac, you've got to download the client. If you're on Windows, it's already, it should be pre-installed. If you're on a Chromebook, you'll have to use a Bastion. But I'm going to type in Azure user.

2642
03:43:13,600 --> 03:43:43,140
and that password capital T, testing123456, we'll hit OK. I'll say yes, I'll connect. And we'll just give it a moment there to load. We are going to need two things we need to install, but just give me a moment here, I'll go fetch them. All right, so now that we have our Windows machine, we're inside of it here, what I want you to do is open up

2643
03:43:44,160 --> 03:44:07,920
PowerShell. So if you type in PowerShell, we do need to run this in administrator mode. So just type it in. It's a little bit slow when you're RDPing, which is totally fine. And what I want you to do is right click and run as an administrator. And what we're going to do is install Azure RM because we need it in order to use the Azure File Sync Agent. Okay. So type in install hyphen module and then type in name.

2644
03:44:08,400 --> 03:44:34,960
Azure RM. And then we'll say allow clobber. Don't ask me what clobber does. I have no idea. But that's what Microsoft or Azure tells us that we should whoops, did I spell it right? No, it's all correct. Okay, that we should do. This thing is pretty darn slow. So we'll just have to wait here a little while. And once that's done, we'll continue on to the next part. Okay. so after waiting a little bit, it asks us a question. So we're just gonna hit Y to everything.

2645
03:44:35,440 --> 03:45:00,800
All right, and as that's going here, it can take a little bit of time. So what I'm going to do, if I can even minimize this here, I did not mean to minimize Azure or this here. Oh, the other one already prompted. That was pretty fast, actually. It's going really fast as of today. But as that's going, what we'll do is we'll make our way back over.

2646
03:45:01,440 --> 03:45:28,240
to sync storage here or storage sync. We were waiting for this to get set up because we're going to have to go set up a sync group. So I'm going to just call this Kivos, make everything easy. We'll stick with that Azure subscription. We'll drop this down and we'll choose Kivos in here. And then for the Azure file share, we'll choose Kivos. And once that's created, we'll click into that. And what we are trying to do is we're adding a cloud endpoint here.

2647
03:45:28,800 --> 03:45:48,880
So we would choose our storage account, and we would choose this here and hit create. Okay, and so now we have a cloud endpoint, but we still have to continue on with our virtual machine here. So just wait until this is done. This will take a little bit of time, okay?

2648
03:45:51,760 --> 03:46:18,640
All right, so now that we have that installed, the PowerShell for Resource Manager, what we're going to need installed is the Azure File Sync Agent. In order to do that, we're going to have to go to the Internet. But before we do that, we really want to turn off a particular feature. So turn back on protected mode. I was fiddling with it earlier, but if we were to go, and it doesn't matter where we go, we say Azure File Sync Agent. Okay.

2649
03:46:20,400 --> 03:46:48,960
And if we were to go, see, we start getting this pop up and it drives us crazy. So what we can do, because this isn't a big deal, it's just for testing here, we're going to turn that off. So go to your local server where it says IE enhanced security configuration, click on that and just turn it off, you know, because it'll drive you crazy. And then we'll go back to Internet Explorer, completely close it, reopen it. And now what we can do is look for that Azure file sync. So we'll type in Azure file sync agent download.

2650
03:46:50,800 --> 03:47:16,720
And this is azuremicrosoft.com, maybe later for that experience. It's easier if you go to the Microsoft site. And if you go here, just give it a moment, scroll on down, click on the download button. And we want 2019 because that's the server we launched, right? And we're trying to sync with storage sync. So we'll go ahead and hit next. This is 50 megabytes, so it shouldn't take too long. And we're going to wait for it to download. If it doesn't,

2651
03:47:17,360 --> 03:47:44,320
We'll say allow once for the site here. So maybe it was trying to download. Yeah, there it goes. And we will save it. And we will always allow for Microsoft here. It's totally fine. And it's already finished downloading. So we'll go ahead and run that. And just give it a moment here. We'll hit next. We'll accept the terms. We'll install it there. That's totally fine.

2652
03:47:44,920 --> 03:48:14,560
We'll use the existing proxy configuration. Custom configure proxy. Well, we don't have any custom, so we'll leave it alone. We'll leave Microsoft updates on. It'd probably be good to checkbox that on, but I'm just going to go install next here. All right, and so we'll let the agent install. Usually doesn't take too long. Anyway, I'll see you back here in a moment.

2653
03:48:16,640 --> 03:48:44,320
All right, so now that we have our search agent set up, we'll just hit finish here. And I don't know why it opened up a bunch of windows, but that's just what it does. And so we're just going to wait for it to pop back up here. And then we'll say OK. And then what it'll want to do is connect. So it says Azure Environment. So it is Azure Cloud, right? And I'm just going to sign into my account. And I'm going to try and log in here. So let me just go grab my credentials.

2654
03:48:45,440 --> 03:49:13,840
All right, so I entered my credentials in here, so we'll go ahead and hit sign in, and we'll give it a moment there. We're going to choose our subscription. We'll choose our resource group, which is Kivas, and our storage sync there. Hit register. And I'll see you back here in a moment. All right, so it looks like our registration was successful, so that means that we should be able to create a server endpoint and go from there. Okay, so I'm going to just go ahead and hit close.

2655
03:49:14,400 --> 03:49:44,280
and I'll come back here to you in a moment. All right, so now what we're going to do is set up a folder that we're going to want to be synced, okay, because the idea is to back up or sync that directory there. So what's going to happen here is we're going to make our way down to File Explorer and from this PC, I'm just going to go to the C drive. I made that other drive because I assumed we were just going to throw it on there, but honestly, I'm just going to put it in the window or the C drive here. We'll make a new folder called Kivas. We'll make it all lowercase. And inside of here, I'm

2656
03:49:44,400 --> 03:50:11,840
I'm just going to make a new file here called hello.txt. Nothing super exciting. And so probably we need to turn on sharing. So that's just a habit of mine. So we'll go to properties here, sharing, share, and we'll just make sure that Azure user has both that. And it'll ask us to turn network discovery on. We'll say okay, Kivas, Kivas, okay. I can't remember if we have to turn that on or not, but

2657
03:50:12,880 --> 03:50:38,400
as long as we have this working, that's the most important part here. So now that we have that going, what we want to do is make our way back to Azure here. And so we had our, what was the sync? Sync storages. And what we'll need to do is go into our sync storage once it ever lets us get there. We'll click on Kivas. And we'll go into sync groups. We'll click into our Kivas sync group.

2658
03:50:39,360 --> 03:51:04,080
We have a cloud endpoint, but we'll need to create an add server endpoint. Drop down here, we have a registered server. So you know how we typed in our, we typed in, we logged in to the Azure File Sync Agent. That's how this registered server is showing up. We're going to give it a path. So this is going to be C backslash Kibos, right? So this all looks okay.

2659
03:51:05,040 --> 03:51:32,720
And what we'll do is we will say, let's just check this here. This is all okay. And we'll go ahead and hit connect. All right. And so this takes a little bit of time to provision. It's going to show up here in a moment. If I hit refresh, it's provisioning. So I'll see you back here in a bit. You know, I just remembered is that we do actually have to turn on cloud tiering or it's going to stay in pending forever. So I'm going to go to enable here and always preserve specific percentage of free space on the volume.

2660
03:51:33,440 --> 03:51:51,520
Sure, we can do 20% here. We don't need a date policy here. And this all looks okay. So we'll go ahead and hit save. Because if we don't do that, it's not going to actually, it's not going to move it to the cloud, right? So we'll give that a go. Oh, the health is good. But we'll just give it a moment here, okay?

2661
03:51:54,240 --> 03:52:17,920
So we gave it a little bit of time here. It says the endpoint failed, which I really don't believe it because I just checked and it was working totally fine. But what I want to do is show you if I go over to Microsoft Azure here, and we go over to storage accounts, and we go to Kivas, and we go into file shares, and we click into this one, we can actually see the files here. So it clearly is syncing. I'm not sure why we got that error. I've never seen that error before.

2662
03:52:19,040 --> 03:52:44,880
Cloud journey is not supported for the specified path. Well, that's fine. Okay, so if the server path didn't work, maybe it's the cloud endpoint, but generally that is the workflow to get syncing working. So you pretty much have all the working knowledge you need. But what we'll do is go ahead and tear all this stuff down because we are 100% done. So I'm going to go to our resource groups here. And what we'll do is go into Kivas.

2663
03:52:45,600 --> 03:53:00,320
And we'll just make sure that everything is there, even the storage sync service. I just wanted to make sure it was all there. And what we'll do is go ahead and write in Kivas and go ahead and delete. And that should take everything down, no problem. All right, so there you go.

2664
03:53:02,400 --> 03:53:31,360
All right, so just one more thing. I was doing that cleanup and then today I woke up the next morning and when I checked my resource groups, the Kivas was still here. So I went in here and we still had the storage sync service. So what you're going to want to do is go in here and I think what it wants you to do, actually tell us the message here if we go delete resource group, we type in Kivas. And it will complain that it still needs, you have to get rid of the resources within it. So I already know that's going to fail.

2665
03:53:32,240 --> 03:53:55,200
But what I want you to do is delete the sync group A. So if you select the sync group here and go ahead and delete that, we might also have to delete the endpoints first. Usually Azure is really great about tearing everything down, but in this case, it's not giving us a lot of help here. So we'll just say, yeah, we want to delete this endpoint too.

2666
03:54:04,720 --> 03:54:26,240
Let's delete all the server. So you got to first delete the server endpoints, to delete the cloud endpoint, to delete the group, then to delete the actual service. So it's a little bit convoluted, but you know, I guess for whatever reason, this one is not automated like the other one. So just go through those processes, make sure that you get everything deleted out okay, and then you should be in good shape, okay?

2667
03:54:31,360 --> 03:54:45,440
Hey, this is Angie Brown from Examro, and we are on to the storage accounts cheat sheet. This one is 6 pages long. I do not know why I did not break it up into more fine or fine-tuned or specific cheat sheets, but that's OK. We'll get our way through it here. It's all summarized for you here, so...

2668
03:54:46,000 --> 03:55:15,800
Starting at the top here, Azure has five core storage services. You have Azure Blob, Azure Files, Azure Queues, Azure Tables, Azure Disks. Know the difference between these five. For Blob Storage, there are two types of performance, Standard and Premium. Standard is when you're using hard disk drives. Premium is when you're using solid state drives. And you're going to get varied performance based on the access tiers. We'll see those in a moment here. Azure Storage supports three types of Blobs, Block Blobs, Append Blobs, Page Blobs. Please take the time to read these and understand

2669
03:55:15,880 --> 03:55:32,240
The difference for BLOB storage, there are three types of access tiers. For standard storage, you've got cool, hot, and archive, going into detail, hot data that is accessed frequently, cool data that's accessed infrequently, and archive data that's rarely accessed and stored for at least 180 days.

2670
03:55:32,680 --> 03:56:02,600
For the account level tiering, any BLOB that doesn't have any explicit assigned tier infers the tier from the storage account accessing tier settings. For BLOB level tiering, you can upload a BLOB to the tier of your choice. Changing the tier happens instantly, except when you are moving out of the archive. Then there's the concept of rehydration. This is when you're moving a BLOB out of an archive into another tier, and it can take several hours. For the BLOB lifecycle management, this is so you can create rule-based policies to transition data to different tiers after 30 days.

2671
03:56:02,680 --> 03:56:23,000
days it moves to cool storage. When A BLOB is uploaded or moved to another tier, it's charged at the new tier's rate immediately upon charge. When moving from a cooler tier, the operation is billed as a write operation to the destination tier. When the write operation is per 10,000 and the data writes is per gigabytes charges of the destination tier apply. When moving to a hotter tier, the operation is billed as a...

2672
03:56:23,400 --> 03:56:40,880
A read from the source tier where the read observation for at per 10,000 and data retrieval per GB charge for the source tier apply. Early detection charges for any BLOB moved out of the cool or archive tier may apply as well. Cool and archive early detection any BLOB is...

2673
03:56:41,320 --> 03:57:08,000
has moved into the cool tier. This is only for GPV2. That's general purpose, right? It is subject to a cool early detection period of 30 days. Any BLOB that is moved into the archive tier is subject to an archive early detection period of 180 days. This charge is prorated. There are multiple ways to move data into Azure Blob Storage. You've got AZ Copy, Azure Storage Data Movement Library, Azure Data Factory, Blob Fuse.

2674
03:57:08,400 --> 03:57:32,000
Azure Databox, Azure Import/Export Service. You definitely want to know how to use Azure Copy, not in the cheat sheet, but it's something you need to know in practice. Okay, when you create a storage account, you need to choose a replication type. So, primary region redundancy is, sorry, there's a bunch of different types of replication types, and we've broken these into categories. So, locally redundant storage.

2675
03:57:32,520 --> 03:57:57,360
Then you have zone redundant storage. Then you have geo redundant storage. Then you have geo zone redundant storage. And then there's the third tier of these, which is RAGRS and RAGRGZRS. I got it. Okay. And so there's a bunch of different variations here. You have to carefully look at all this and make sure you know the difference.

2676
03:57:58,320 --> 03:58:28,120
Now we're on to the third page. Azure Files is a fully managed file share in the cloud. A file share is a centralized server for storage that allows multiple connections to connect to the file share. The network protocols use either SMB or NFS. When a connection is established, the file share's file system will be accessible in a specific directory within your own directory tree. This is known as mounting. You can back up your file shares with shared snapshots, read-only, incremental up to 200 snapshots per file share, retain backups for

2677
03:58:28,320 --> 03:58:48,000
up to 10 years. Backups are stored within the file share. So if you delete your file share, you will delete your backup. Soft deletes prevent accidental deletion by turning on soft delete. It's going to be marked for deletion, retained for a period of time before it deletes. For store tiers, you've got premium, transactional, optimized, hot, cool, dead for types of storage. And this is GPV2.

2678
03:58:48,560 --> 03:59:07,280
Deployed on either HHD or file storage, it's going to be deployed on SSD. For identity, you can use on-prem or managed via the ADAS, so that's Azure Active Directory Domain Services, or using a store account key. That's where you have a username and password, the username being the storage account name, the password being the account key.

2679
03:59:07,960 --> 03:59:34,400
For Azure files, they are accessible inside or outside your AWS account from wherever or anywhere via storage account via public endpoint. SMB connects on port 445. Remember that. I highlighted it for a reason there for you. Your organization may need to unblock this port so you can mount your file share. For encryption, we have encryption at rest, which is Azure Storage Service Encryption, SSC, encrypted in transit using SMB 3.0

2680
03:59:35,000 --> 03:59:59,960
Protocol there with encryption or HTTPS. Azure File Sync is a service that allows you to cache Azure file shares on your on-premise Windows Server or Cloud VM. I don't remember seeing super detailed questions on Azure File Sync, except for the fact that you might need to know how to set it up, but not conceptually like use cases and stuff. So that's why it's so short there. I had to take a drink. It's just too much.

2681
04:00:00,080 --> 04:00:01,120
Too many slides.

2682
04:00:01,440 --> 04:00:08,640
Azure Import/Export Service is used to securely import large amounts of data to Azure Blob Storage and Files.

2683
04:00:08,800 --> 04:00:11,280
You have two options for shipping drives on import.

2684
04:00:11,440 --> 04:00:14,400
Use your own disk drives or use the Microsoft provided drives.

2685
04:00:14,720 --> 04:00:26,320
For the Microsoft provided drives, you can do 5 encrypted solid-state drives known as Azure Data Box Disks with 40 terabytes total capacity per order to your data center through a regional carrier.

2686
04:00:26,320 --> 04:00:29,960
To prepare your drive, you'll need to use the file.

2687
04:00:30,040 --> 04:00:33,200
following, use the command line, WA import export tool.

2688
04:00:33,200 --> 04:00:36,720
I put the details in here because I saw this on the exam.

2689
04:00:36,720 --> 04:00:39,440
So I just want, in case you see it, I want you to know all these steps.

2690
04:00:39,680 --> 04:00:46,800
Prepare your disk drives that are shipped for import, copying your data to the drive, encrypt the data using BitLocker and generate the data.

2691
04:00:47,080 --> 04:00:53,840
drive journal files during the import creation, help identify numbers of drives needed for the export job.

2692
04:00:53,840 --> 04:00:58,960
There are two versions of the WA Import Export, version one and version two.

2693
04:00:59,120 --> 04:01:02,240
One is for blobs, two is for Azure files.

2694
04:01:02,480 --> 04:01:08,640
The WA Import Export tool is only compatible with Windows 64 bit, so you're not using Linux here, okay?

2695
04:01:08,800 --> 04:01:12,160
For export jobs, you can only export from Azure Blob.

2696
04:01:12,160 --> 04:01:12,560
You can

2697
04:01:12,880 --> 04:01:16,800
ship up to 10 empty drives to Azure per job.

2698
04:01:16,960 --> 04:01:21,200
You can create export jobs and the data is loaded onto these drives and shipped back to you.

2699
04:01:22,560 --> 04:01:24,200
And then this might be the last page.

2700
04:01:24,200 --> 04:01:24,800
I'm not sure.

2701
04:01:24,800 --> 04:01:28,640
We'll see here in a moment, but we have shared access signatures.

2702
04:01:28,640 --> 04:01:33,280
SAS is a URI that generates restricted access rights to Azure storage resources.

2703
04:01:33,600 --> 04:01:38,480
Share the URI to the grant client temporary access to a specific set of permissions.

2704
04:01:38,480 --> 04:01:40,560
Type of shared access signatures.

2705
04:01:40,560 --> 04:01:41,560
You have account level SAS.

2706
04:01:41,560 --> 04:01:42,680
This is access to

2707
04:01:42,760 --> 04:01:45,120
resources in one or more of the storage services.

2708
04:01:45,120 --> 04:01:58,720
You have service level SaaS access to single storage account by using the storage account key, user delegated SaaS access to storage account using Azure AD credentials, limited only to BLOB or containers.

2709
04:01:58,720 --> 04:02:01,760
Microsoft considers this method best practice for accessing via SaaS.

2710
04:02:02,160 --> 04:02:04,960
A shared access signature comes in different formats.

2711
04:02:04,960 --> 04:02:06,160
You've got ad hoc SaaS.

2712
04:02:06,560 --> 04:02:10,400
you have service SAS with a stored access policy.

2713
04:02:10,680 --> 04:02:11,440
And there we go.

2714
04:02:11,440 --> 04:02:13,040
So we're all the way through there.

2715
04:02:13,280 --> 04:02:17,360
That was a lot of slides, and hopefully you can retain all that information for the exam.

2716
04:02:22,000 --> 04:02:31,440
Hey, this is Andrew Brown from Exam Prev, and we are looking at Azure Virtual Machines, which makes it easy for you to choose your own OS, compute, memory, and storage, and launch a server within minutes.

2717
04:02:31,920 --> 04:02:35,440
All right, so let's take a quick look here at VMs for Azure.

2718
04:02:35,440 --> 04:02:45,120
And this is a highly configurable server that relies on virtualization, meaning that you're running a server without having to actually buy and maintain physical hardware that runs it.

2719
04:02:45,520 --> 04:02:53,920
You will still have to manage things at the software layer, so you would have to apply your own OS system patches and installing the configuration packages.

2720
04:02:54,160 --> 04:02:56,640
But the nice thing is that you're not dealing with that hardware.

2721
04:02:56,640 --> 04:02:58,160
It's just going to work for you.

2722
04:02:58,320 --> 04:03:01,800
And some things I want you to know about Azure Virtual Machines is that the

2723
04:03:01,880 --> 04:03:10,160
Size of the virtual machine is determined by the Azure image, and so the image defines the combination of VCPUs, memory, and storage capacity.

2724
04:03:10,240 --> 04:03:13,680
The current limit on a per subscription basis is 20 VMs per region.

2725
04:03:13,840 --> 04:03:16,960
I would think that if you wanted more, you could just use another subscription.

2726
04:03:17,200 --> 04:03:20,720
I don't know if they have service limit increase for that, but that might be possible as well.

2727
04:03:20,960 --> 04:03:23,440
Azure VMs are billed at an hourly rate.

2728
04:03:23,720 --> 04:03:24,480
An instance...

2729
04:03:25,040 --> 04:03:31,440
or a single instance that you launch is going to have availability of 99.9% when you're using premium disk.

2730
04:03:31,600 --> 04:03:36,560
If you have standard disk, I have no idea what it is, but it's going to be less than that.

2731
04:03:36,800 --> 04:03:48,000
If you want to get 99.95% availability, you're going to have to launch 2 instances within an availability set, and you can attach multiple managed disks to an Azure Virtual Machine.

2732
04:03:48,600 --> 04:03:59,680
Now, just to give you like a quick visual of what's actually happening when you launch an instance, because when you do launch a virtual machine, there's going to be other networking components that are going to be created or associated with you.

2733
04:03:59,960 --> 04:04:02,240
And you definitely need to know all these components here.

2734
04:04:02,400 --> 04:04:03,680
So I have this nice diagram.

2735
04:04:03,680 --> 04:04:05,760
We're going to do a quick run through with it.

2736
04:04:06,000 --> 04:04:12,160
And I want you to just know that when you do launch a virtual machine, it actually does give you a list of all the components that it creates.

2737
04:04:12,400 --> 04:04:15,120
This is actually very common with most Azure services.

2738
04:04:15,280 --> 04:04:18,520
And sometimes what they'll do is they'll put it within a resource group for you so that

2739
04:04:18,600 --> 04:04:20,640
that they're all grouped together, which is very nice.

2740
04:04:21,840 --> 04:04:27,040
But let's just run through these common components that you need to know, such as the network security group.

2741
04:04:27,280 --> 04:04:29,480
And this is going to be attached to your network interface.

2742
04:04:29,480 --> 04:04:32,680
It acts as a virtual firewall with rules around ports and protocols.

2743
04:04:32,680 --> 04:04:35,440
So that is what's protecting our virtual machine.

2744
04:04:35,600 --> 04:04:38,720
You have the network interface that handles IP protocols.

2745
04:04:38,720 --> 04:04:42,880
So that's how the virtual machine talks to the internet or other things on the network.

2746
04:04:42,960 --> 04:04:45,600
You have the virtual machine itself or the instance.

2747
04:04:45,760 --> 04:04:47,840
That's the version or the

2748
04:04:48,800 --> 04:04:50,400
instance that is currently running.

2749
04:04:50,640 --> 04:04:53,440
It's going to get a public IP address assigned to it.

2750
04:04:53,440 --> 04:04:57,320
So that's how people from the internet can actually access the virtual machine.

2751
04:04:57,320 --> 04:05:01,600
And then you're going to have to launch it within a virtual network.

2752
04:05:02,240 --> 04:05:04,240
And so you're going to have that VNet.

2753
04:05:04,240 --> 04:05:09,640
So you'll either choose one or you'll be creating one during that wizard process.

2754
04:05:09,640 --> 04:05:10,560
So there you go.

2755
04:05:15,160 --> 04:05:21,440
So now let's take a quick look at the options for operating systems on Azure VM, and let's just define what an OS is.

2756
04:05:21,920 --> 04:05:30,240
So the OS is the program that manages all other programs in a computer, and the most commonly known operating systems are Windows, Mac OS, and Linux.

2757
04:05:30,400 --> 04:05:37,760
And when you want to launch a virtual machine, the way you determine what operating system you use is based on the image that you choose.

2758
04:05:38,080 --> 04:05:38,560
Okay?

2759
04:05:38,880 --> 04:05:42,480
And Azure has a marketplace, so they have

2760
04:05:42,960 --> 04:05:56,320
So many different kinds of operating systems you're going to have every possible option you want, and Microsoft has also partnered with specific companies to make sure that they're providing you images that are updated and optimized for the Azure runtime.

2761
04:05:56,320 --> 04:06:00,160
So, let's do a quick run-through of these supported or partnered.

2762
04:06:00,720 --> 04:06:12,080
OSes, so we have SUS, we have Red Hat, Ubuntu, Debian, FreeBSD, then you have Flatcar Container Linux, RancherOS, which is for containerization, Bitnami.

2763
04:06:12,200 --> 04:06:15,840
Bitnami is more like images that have preloaded software on them.

2764
04:06:16,080 --> 04:06:18,480
They're very popular for their Bitnami WordPress.

2765
04:06:18,800 --> 04:06:19,920
You have Mesosphere.

2766
04:06:20,560 --> 04:06:22,880
And then you have images that have Docker with it.

2767
04:06:22,880 --> 04:06:25,960
So you have a lot of options open to you there.

2768
04:06:25,960 --> 04:06:28,640
And I always forget about Jenkins, and Jenkins is on the end there.

2769
04:06:28,960 --> 04:06:32,960
Now, if you want to bring your own Linux version, you can totally do so.

2770
04:06:32,960 --> 04:06:37,360
All you have to do is package it into a virtual hard disk or a VHD.

2771
04:06:37,600 --> 04:06:48,400
If you've never heard of VHDs, these are just virtual hard disk formats that you can create using Hyper-V software, which would be on your Windows machine.

2772
04:06:48,920 --> 04:06:53,360
And just be aware that Azure doesn't support VHDX, which is a newer format.

2773
04:06:53,360 --> 04:06:55,360
It only uses VHD.

2774
04:06:55,360 --> 04:06:56,480
Okay, so there you go.

2775
04:07:01,040 --> 04:07:11,440
So let's take a quick look here at Cloud Init, and this is something that's not going to be on your exam, but it's something you absolutely should know and need to know because it's an industry standard and it's just something that you...

2776
04:07:12,640 --> 04:07:16,080
If I didn't show it to you, no one's going to show it to you, so let's just get to it.

2777
04:07:16,400 --> 04:07:31,600
And so, CloudInit is this multi-distribution method for cross-platform cloud instance initialization, and it's supported across all major public cloud providers, so Azure, AWS, GCP, provisioning systems for private cloud infrastructure.

2778
04:07:32,480 --> 04:07:34,000
and bare metal installation.

2779
04:07:34,000 --> 04:07:36,720
So what is cloud instance initialization?

2780
04:07:36,720 --> 04:07:44,160
Well, this is the process of preparing an instance with configuration data for the operating system and the runtime environment.

2781
04:07:44,520 --> 04:07:49,280
And so the idea is that you're going to have cloud instances that are initialized from a disk image.

2782
04:07:49,680 --> 04:07:50,960
and instance data, right?

2783
04:07:50,960 --> 04:07:58,520
So the image is whatever the VM image is, but you're going to have data such as metadata, user data, and vendor data.

2784
04:07:58,520 --> 04:08:00,160
And I'm not going to get into all the datas.

2785
04:08:00,160 --> 04:08:03,920
I just want you to know the one, which is the one you'll be working with, is user data.

2786
04:08:04,720 --> 04:08:09,280
And so user data is a script that you want to run when an instance first boots.

2787
04:08:09,840 --> 04:08:14,640
And so if you've ever used AWS and you launch an instance, you'll see a box

2788
04:08:14,880 --> 04:08:18,400
in the wizard that says user data, and that's what this is.

2789
04:08:18,880 --> 04:08:20,960
In Azure, I don't think they make it as clear.

2790
04:08:20,960 --> 04:08:28,720
I don't think they call it user data, but if you're pragmatically doing it with ARM templates when you're doing infrastructure as code, that is what you're doing.

2791
04:08:28,720 --> 04:08:30,880
You're using Cloud Init underneath.

2792
04:08:30,960 --> 04:08:33,280
I just wanted to make that association to you.

2793
04:08:33,440 --> 04:08:36,080
So when you see that word user data, you think Cloud Init.

2794
04:08:36,640 --> 04:08:40,320
And so Cloud Init really only works with Linux distributions.

2795
04:08:40,640 --> 04:08:46,640
So, it should work with all the Linux distributions on Azure.

2796
04:08:46,640 --> 04:08:50,480
I'm pretty sure it's not being used for Windows machines, but there you go.

2797
04:08:55,840 --> 04:09:01,360
Azure Virtual Machines come in a variety of different sizes that are optimized for specific use cases.

2798
04:09:01,360 --> 04:09:04,720
And the way Azure groups these are into types.

2799
04:09:04,960 --> 04:09:08,400
So that would be like general purpose, compute optimized, and sizes.

2800
04:09:08,960 --> 04:09:15,600
And sizes is kind of a weird word because I've seen in other places in their documentation called series or SKU family.

2801
04:09:15,840 --> 04:09:19,120
So you'll see me using those 3 terms interchangeably.

2802
04:09:19,120 --> 04:09:21,440
They definitely confused me when I was looking at it at first.

2803
04:09:22,160 --> 04:09:24,480
But let's just go quickly through some of them.

2804
04:09:24,480 --> 04:09:27,760
There's a lot of them, so they're not going to be all of them on the list here.

2805
04:09:28,400 --> 04:09:29,520
But we'll just quickly go through it.

2806
04:09:29,520 --> 04:09:30,800
So the first is general purpose.

2807
04:09:30,800 --> 04:09:37,520
These are balanced CPU to memory ratio, testing and development, small to medium databases, and low to medium traffic web servers.

2808
04:09:37,840 --> 04:09:41,760
This is pretty much what you're going to be using unless you work for a company that has a lot of money.

2809
04:09:42,000 --> 04:09:47,040
And the one you're going to see the most is called B1 because it's super, super cost effective.

2810
04:09:47,880 --> 04:09:50,360
And that's the one I'm always using when I'm launching Linux machines.

2811
04:09:50,360 --> 04:09:54,320
You'll see me using it through follow-alongs here in this course.

2812
04:09:54,600 --> 04:09:56,560
The next one here is compute optimized.

2813
04:09:56,560 --> 04:10:00,240
So that's high CPU to memory ratio.

2814
04:10:00,240 --> 04:10:05,440
Good for medium traffic web servers, network appliances, batch processes, and app servers.

2815
04:10:05,440 --> 04:10:07,680
So this just has more CPU here.

2816
04:10:08,080 --> 04:10:11,840
The most common one is the FSV2 or the F series.

2817
04:10:12,920 --> 04:10:14,600
Then you have memory optimized.

2818
04:10:14,600 --> 04:10:21,200
So high memory to CPU ratio, great for relational databases, medium to high large caches, and in-memory analytics.

2819
04:10:22,200 --> 04:10:24,480
We have a variety of SKUs there.

2820
04:10:25,680 --> 04:10:26,960
Then you have storage optimized.

2821
04:10:26,960 --> 04:10:36,960
So these are high disk throughput and IF and ideal for big data, SQL, NoSQL databases, database warehousing, and large transactional databases.

2822
04:10:37,360 --> 04:10:39,920
And we just have LSV2 for those.

2823
04:10:40,640 --> 04:10:48,400
Then you have the specialized ones for GPU, for heavy graphic rendering, video editing, model training, and interferencing with deep learning.

2824
04:10:48,400 --> 04:10:51,640
So available with single or multiple GPUs.

2825
04:10:51,640 --> 04:10:53,760
And so we have a variety of SKUs there.

2826
04:10:54,000 --> 04:10:57,520
And then you have your HPCs, your high performance compute.

2827
04:10:57,800 --> 04:11:05,520
And these are the most fast and powerful CPU virtual machines with optional high throughput network interfaces.

2828
04:11:05,520 --> 04:11:06,080
All right.

2829
04:11:06,400 --> 04:11:09,680
And I just want to point out that there are more here.

2830
04:11:10,880 --> 04:11:13,640
but I'm just showing you ones that are current.

2831
04:11:13,640 --> 04:11:18,400
So there are previous series here, like we're not showing basic A, all right?

2832
04:11:18,640 --> 04:11:20,720
Like the A series is not being shown here.

2833
04:11:21,040 --> 04:11:24,400
Now, when you want to actually go see this full list here, it's very easy.

2834
04:11:24,400 --> 04:11:28,400
You just launch up a virtual machine and you're going to be able to choose two things.

2835
04:11:28,400 --> 04:11:29,920
You're going to choose the first, the image.

2836
04:11:29,920 --> 04:11:32,400
So that's going to be what do you want to run, right?

2837
04:11:32,400 --> 04:11:35,520
So it's going to be Ubuntu or Windows machine.

2838
04:11:35,520 --> 04:11:38,160
And then you're going to choose your standard size image.

2839
04:11:38,160 --> 04:11:40,520
I believe that if you choose certain images,

2840
04:11:40,640 --> 04:11:51,200
Not all sizes will be available to you, because some images have to be optimized for those series.

2841
04:11:51,200 --> 04:11:52,800
Sorry, I'm just drinking some tea here.

2842
04:11:53,320 --> 04:12:01,600
And so there's that B1 series, and you can see in Canadian dollars it's $9.72, which is a pretty good price for me, and you can explore all the costs in Azure, which is really nice.

2843
04:12:01,840 --> 04:12:11,040
You don't have to go to a separate marketing website you can just open it up and you can just sort by the lowest cost, which is what I always do, and they have a lot of filters there, so there you go.

2844
04:12:15,880 --> 04:12:18,040
Let's quickly talk about Azure Compute Units.

2845
04:12:18,040 --> 04:12:25,960
So, Azure Compute Units, also known as ACUs, provides a way of comparing compute, so CPU performance across Azure SKUs.

2846
04:12:25,960 --> 04:12:29,600
Remember, we said SKUs is the same thing as sizes or series.

2847
04:12:30,360 --> 04:12:32,640
So you'll just see us varying the terms on that.

2848
04:12:33,200 --> 04:12:37,200
ACU is currently standardized on a small, so standard A1.

2849
04:12:37,440 --> 04:12:40,720
And you saw prior that A1 is a previous series.

2850
04:12:40,720 --> 04:12:44,720
So it's not something that you'd generally be launching, but everything's based off of that one.

2851
04:12:45,040 --> 04:12:49,000
And those are given a value of 100.

2852
04:12:49,000 --> 04:12:53,440
It's just an arbitrary number to give it a point against other machines.

2853
04:12:53,760 --> 04:12:59,960
And all other SKUs then represent approximately how much faster that SKU can run a standard benchmark.

2854
04:13:00,560 --> 04:13:09,040
I don't fully understand the math behind their stuff here, but I generally get the idea here, and I'll just show you quickly a quick comparison.

2855
04:13:09,280 --> 04:13:16,000
So here we have the A1 to A4 series against the D1-D14 series.

2856
04:13:16,000 --> 04:13:19,760
A1 is our baseline at 100 ACUs.

2857
04:13:20,240 --> 04:13:24,320
And it has a ratio 1 to 1 from vCPUs to core.

2858
04:13:24,560 --> 04:13:29,840
And so you can see that for D1 to D14, it says 160 points to 250 points.

2859
04:13:30,160 --> 04:13:41,120
And so if I did the math here right, I think I did, it's going to be basically 60% to 150% more performant than choosing an A1 to A4.

2860
04:13:41,360 --> 04:13:42,840
So that's how that works.

2861
04:13:42,840 --> 04:13:43,520
So there you go.

2862
04:13:48,200 --> 04:13:51,480
So here's a neat feature that Azure Virtual Machines allows you to do.

2863
04:13:51,480 --> 04:13:54,320
And you can actually do this with a lot of different services with Azure.

2864
04:13:54,640 --> 04:13:56,240
And it's the Azure mobile app.

2865
04:13:56,240 --> 04:14:03,120
And so what you'll notice is that when you're using virtual machines, they might have this little QR code.

2866
04:14:03,120 --> 04:14:06,040
And if you have the app installed, what you can do is scan that code.

2867
04:14:06,040 --> 04:14:07,760
But honestly, you don't even need to scan the code.

2868
04:14:07,760 --> 04:14:14,080
If you just have the app installed to connect to your account, you can log in on your phone and check out the virtual machine, how it's performing.

2869
04:14:14,080 --> 04:14:15,840
And you can take basic actions there.

2870
04:14:16,160 --> 04:14:18,120
I believe as well you can access the

2871
04:14:18,320 --> 04:14:25,440
Cloud Shell, so it's pretty darn cool, and so I just wanted you to know about that, and if you haven't, just go ahead and install it on your phone.

2872
04:14:25,840 --> 04:14:29,920
I think it's available for Android and iOS.

2873
04:14:30,320 --> 04:14:38,320
I have an Android phone, so I didn't check iOS, but yeah, go check it out.

2874
04:14:38,480 --> 04:14:44,560
So sometimes when you're launching a virtual machine, you'll have the option between generation one versus generation 2 when you're choosing images.

2875
04:14:44,800 --> 04:14:47,080
And I want you to know about this stuff here.

2876
04:14:47,080 --> 04:14:50,080
And to understand it, we need to know a little bit about Hyper-V.

2877
04:14:50,320 --> 04:14:57,360
So Hyper-V is Microsoft's hardware virtualization product, and it lets you create and run a software version of a computer called a virtual machine.

2878
04:14:57,360 --> 04:15:03,520
And each virtual machine acts like a complete computer running an operating system and programs.

2879
04:15:03,760 --> 04:15:08,240
And so if you're still kind of wondering what Hyper-V is, if you've ever heard of VirtualBox,

2880
04:15:08,480 --> 04:15:12,160
which is used for running VMs on Mac and Linux.

2881
04:15:13,200 --> 04:15:15,640
This is basically the exact same offering.

2882
04:15:15,640 --> 04:15:17,920
It's just Windows offering, okay?

2883
04:15:17,920 --> 04:15:20,640
And it already comes pre-installed on Windows 10.

2884
04:15:20,800 --> 04:15:22,160
So you might have to toggle something on it.

2885
04:15:22,160 --> 04:15:26,160
I can't remember it because it's been a long time since I've had to configure it.

2886
04:15:26,720 --> 04:15:31,200
But the point is that you have a Windows machine, you're already ready to start using Hyper-V.

2887
04:15:31,960 --> 04:15:32,800
And Hyper-V

2888
04:15:33,320 --> 04:15:35,440
has two generations of virtual machines.

2889
04:15:35,440 --> 04:15:40,560
So the first one was generation one, and this will support most guest operating systems.

2890
04:15:40,560 --> 04:15:49,440
And then generation 2 supports most 64-bit versions of Windows and more current versions of Linux and FreeBSD operating systems.

2891
04:15:49,760 --> 04:15:55,760
And there are these two here, but neither one or two is bad.

2892
04:15:55,760 --> 04:15:58,960
So they both have their own use case, so it's not like you should always use two.

2893
04:15:59,560 --> 04:16:03,120
And there's a big list online, but we're not going to get into that full list.

2894
04:16:03,840 --> 04:16:09,680
But anyway, so we see that Hyper-V has generation one and two VMs, but Azure also has them as well.

2895
04:16:10,000 --> 04:16:13,040
But they're not one-to-one the same as Hyper-V generation.

2896
04:16:13,040 --> 04:16:21,600
So if you look up Hyper-V, like the Hyper-V generation feature set, you might not have that in Azure, so I wouldn't rely on that list.

2897
04:16:22,040 --> 04:16:25,760
But what I definitely want you to know between Azure Gen.

2898
04:16:25,760 --> 04:16:26,320
1 and Gen.

2899
04:16:26,320 --> 04:16:29,760
2, that's a key difference, is that Gen.

2900
04:16:29,760 --> 04:16:32,960
1 is BIOS-based architecture, and Gen.

2901
04:16:32,960 --> 04:16:37,440
2 is UEFI-based boot architecture.

2902
04:16:37,440 --> 04:16:41,520
And if you've ever built a video gaming machine, you definitely know the difference between these two.

2903
04:16:41,760 --> 04:16:44,480
If you don't, it's just the way the machine boots up.

2904
04:16:44,480 --> 04:16:46,080
It's the first screen you see.

2905
04:16:47,200 --> 04:16:49,960
And it's going to change what kind of configuration options you have.

2906
04:16:49,960 --> 04:16:54,640
And UEFI has a lot of great features in it.

2907
04:16:54,640 --> 04:17:00,720
So for instance, it has secure boot, which verifies the bootloader is signed by a trusty authority.

2908
04:17:00,720 --> 04:17:04,880
And you can have larger boot volumes up to 64 terabytes.

2909
04:17:05,680 --> 04:17:09,600
And if you want to know more, you'll just have to look up UEFI because I'm not covering it in this course.

2910
04:17:09,600 --> 04:17:12,000
I just want you to know that's the key difference there.

2911
04:17:12,480 --> 04:17:22,080
And Hyper-V VMs are packaged into a virtual hard disk format, so that's going to be either VHD or VHDX files, OK?

2912
04:17:26,680 --> 04:17:30,600
One thing you might want to be able to do is actually get into your virtual machine.

2913
04:17:30,600 --> 04:17:33,040
And we have a lot of different options available to us.

2914
04:17:33,440 --> 04:17:36,160
In fact, we have three ways to connect to our virtual machines.

2915
04:17:36,160 --> 04:17:39,280
We have RDP, SSH, and Bastion.

2916
04:17:39,280 --> 04:17:42,160
And so if you don't know these things, we're going to walk through them right now.

2917
04:17:42,480 --> 04:17:43,880
The first is Secure Shell.

2918
04:17:43,880 --> 04:17:48,160
And this is a protocol to establish a secure connection between a client and server.

2919
04:17:48,480 --> 04:17:53,520
This is how you can remotely connect to a Azure virtual machine via a terminal.

2920
04:17:54,480 --> 04:17:57,280
SSH happens on port 22 via TCP.

2921
04:17:57,280 --> 04:18:00,240
Port 22 is something you should absolutely remember as SSH.

2922
04:18:00,960 --> 04:18:05,080
And you will generally use an RSA key pair to gain access.

2923
04:18:05,080 --> 04:18:08,480
You can also use username and password, but most people don't do that anymore.

2924
04:18:09,640 --> 04:18:14,320
Another way of getting access to your machine is by using RDP, which is Remote Desktop Protocol.

2925
04:18:14,760 --> 04:18:22,720
This is a proprietary protocol developed by Microsoft, which provides a user with a graphical interface to connect to another computer over a network connection.

2926
04:18:22,960 --> 04:18:29,760
Basically what it means is that it's going to open up a window and you're going to be able to see like another Windows desktop in it and control it remotely.

2927
04:18:30,320 --> 04:18:34,000
So this is how you can remotely connect Windows Server to a virtual desktop.

2928
04:18:34,400 --> 04:18:38,720
RDP happens on port 3389 via TCP and UDP.

2929
04:18:38,880 --> 04:18:41,840
I think there might be some other ports, but this is the port that you need to know.

2930
04:18:42,760 --> 04:18:48,240
I just remember from AWS because there was some extra ports I had to configure, but that's a different story.

2931
04:18:48,960 --> 04:18:52,800
Then you have your Bastion, which is your third option.

2932
04:18:52,800 --> 04:19:02,160
And so Azure Bastion, which is actually an Azure service, is a service that you can deploy, lets you connect to a virtual machine using your browser and Azure portal.

2933
04:19:02,800 --> 04:19:09,680
And so the reason why this is so useful is that if you have, let's say, a Chrome desktop,

2934
04:19:10,200 --> 04:19:16,640
which doesn't actually, it can't actually use SSH client or can't use the RDB client.

2935
04:19:16,880 --> 04:19:21,560
This just gives you another way of using the browser so you don't have to install those clients.

2936
04:19:21,560 --> 04:19:23,520
But we'll get into that shortly here, okay?

2937
04:19:29,040 --> 04:19:38,480
So let's take a closer look at SSH and the most common way to access your VM or to authenticate yourself so that you're allowed to get into your VM.

2938
04:19:39,080 --> 04:19:41,120
SSH is by using SSH key pair.

2939
04:19:42,480 --> 04:19:46,000
And so the idea is that you're going to have to generate out two keys.

2940
04:19:46,240 --> 04:19:47,440
That's why it's called a key pair.

2941
04:19:47,440 --> 04:19:48,160
There's 2 keys.

2942
04:19:48,160 --> 04:19:52,280
And so you'd use that command SSH hyphen keygen hyphen TRSA.

2943
04:19:52,280 --> 04:19:55,800
And that is something that is definitely extra in my memory.

2944
04:19:55,800 --> 04:19:59,680
It's definitely something you want to memorize because it'll be with you throughout your entire career.

2945
04:20:00,160 --> 04:20:03,040
And so you're going to have a private key and a public key.

2946
04:20:03,200 --> 04:20:08,920
And so the way these keys work is that the private key should remain on your local system and not be

2947
04:20:09,000 --> 04:20:12,400
share with others, and the public key is going to be stored on the VM.

2948
04:20:12,640 --> 04:20:23,600
And when you go ahead and SSH, you're going to provide your private key as part of the SSH command, and it's going to try to match it against the public key to authenticate you.

2949
04:20:23,840 --> 04:20:25,320
And so that is what you normally do.

2950
04:20:25,320 --> 04:20:28,400
You do SSH, hyphen, I provide the public key.

2951
04:20:28,400 --> 04:20:29,360
See where it says.pub?

2952
04:20:29,360 --> 04:20:30,880
That's how you know it's a public key.

2953
04:20:31,280 --> 04:20:36,400
And then there's the actual address of the server, and that's how you're going to gain access, okay?

2954
04:20:41,040 --> 04:20:44,000
So let's take a look at the process of using RDP.

2955
04:20:44,400 --> 04:20:46,960
So the first thing you'll want to do is download the RDP file.

2956
04:20:46,960 --> 04:20:52,240
So when you go and try to connect to that virtual machine, you're going to go ahead and download the RDP file.

2957
04:20:52,480 --> 04:20:57,440
That's going to download this RDP, this file that has an RDP extension.

2958
04:20:57,600 --> 04:21:02,320
You're going to double-click that file, and you're going to be prompted to fill in your username and password.

2959
04:21:02,560 --> 04:21:07,120
This username and password is what you specified when you created your virtual machine.

2960
04:21:08,000 --> 04:21:17,640
And I just want you to know that if you are on a Mac, you can install the Remote Desktop Client from the Apple Store, but if you're on Windows, you already have RDP Client installed.

2961
04:21:17,640 --> 04:21:19,600
There's nothing extra that you have to do.

2962
04:21:24,880 --> 04:21:27,680
So let's take a closer look here at Azure Bastion.

2963
04:21:27,680 --> 04:21:33,680
And this is an intermediate hardened instance that allows you to connect to your target server via SSH or RDP.

2964
04:21:33,920 --> 04:21:37,600
And it will provision a web-based RDP client or SSH terminal.

2965
04:21:38,000 --> 04:21:42,880
I'm going to tell you, honestly, I never really thought of this use case for Bastions prior to this.

2966
04:21:43,280 --> 04:21:50,720
But the reason, like Bastions are good or have still a utility these days is because some people are using a Google Chromebook.

2967
04:21:51,040 --> 04:21:54,760
They're not going to have a terminal, so they can't use SSA.

2968
04:21:55,120 --> 04:22:02,960
or if they're on Windows, they can't install the PuTTY client, or if they're on Windows, they won't have the remote desktop client.

2969
04:22:03,280 --> 04:22:07,680
And so the only way is through the web, because a Google Chromebook's all a browser.

2970
04:22:07,680 --> 04:22:10,680
And so this is one of those utilities for a bastion.

2971
04:22:10,680 --> 04:22:14,320
Now, bastions don't necessarily are just for this use case.

2972
04:22:14,480 --> 04:22:22,240
They're definitely a very good and secure way to connect to your virtual machines and having a way of auditing who has access to what.

2973
04:22:22,800 --> 04:22:24,760
But this is the use case that Azure is putting

2974
04:22:24,880 --> 04:22:26,080
forward with Bastion here.

2975
04:22:26,360 --> 04:22:33,920
And so the idea is that when you want to create a Bastion, you're going to have to add it to a subnet in your VNet, or you're going to have to make a new subnet.

2976
04:22:33,920 --> 04:22:36,480
And it has to be called Azure Bastion Subnet.

2977
04:22:36,480 --> 04:22:41,440
And it has to have at least a size of forward slash 27, so 32 addresses.

2978
04:22:41,440 --> 04:22:42,640
So that's what you're going to have to do.

2979
04:22:43,040 --> 04:22:47,120
So you'll just have to go in and add in that subnet there.

2980
04:22:47,840 --> 04:22:51,280
And then once you do, you can go ahead and launch your Bastion.

2981
04:22:51,280 --> 04:22:53,280
So let's first take a look at RDP.

2982
04:22:53,840 --> 04:22:59,040
And so RDP, we saw how to do it, but let's see what it looks like with Azure Bastion.

2983
04:22:59,040 --> 04:23:03,120
So what you do is you say connect with Azure Bastion for your Windows machine.

2984
04:23:03,120 --> 04:23:04,800
That's going to assume that you want RDP.

2985
04:23:05,040 --> 04:23:09,560
You're going to just put in your username and password as you normally would, and boom, you're in your machine.

2986
04:23:09,560 --> 04:23:10,400
That's all it takes.

2987
04:23:10,400 --> 04:23:12,640
Let's take a look at how you do it with SSH.

2988
04:23:13,040 --> 04:23:19,600
So, you know, if you're using a Linux server, it's going to obviously want to use SSH because you don't have RDP for that.

2989
04:23:20,360 --> 04:23:25,840
And so you can actually use either the SSH private key or the username and password.

2990
04:23:26,320 --> 04:23:29,600
I'd recommend using always SSH private key.

2991
04:23:29,760 --> 04:23:31,040
Let's take a look at that process.

2992
04:23:31,080 --> 04:23:36,400
So you'll enter your username in, and then you can switch over to SSH private key.

2993
04:23:36,720 --> 04:23:49,120
And then the.pem file, which is downloaded locally to your machine, which is your private key, you can just select it, and then that will upload it and use it in the comparison, and boom, you're in your machine.

2994
04:23:49,120 --> 04:23:49,520
So

2995
04:23:50,280 --> 04:23:52,560
That's just kind of a cool service that they have there.

2996
04:23:56,960 --> 04:23:59,840
Let's just do a quick comparison between Windows and Linux servers.

2997
04:23:59,840 --> 04:24:11,600
This is going to be very obvious for people that are used to running Windows workloads, but for those who grew up on Linux, I just want to make sure you understand some of the caveats of Windows that you might not be used to.

2998
04:24:11,600 --> 04:24:17,680
So obviously, Azure allows you to run both Windows and Linux instances or VMs.

2999
04:24:18,280 --> 04:24:19,680
And so let's just talk about Windows first.

3000
04:24:19,680 --> 04:24:30,880
So when you launch a Windows Server, just like your desktop computer, it needs a Windows license to run, whether it's Windows 10 or whatever Windows Server you're using.

3001
04:24:31,200 --> 04:24:38,720
But I just want you to know that when you launch your server, you don't necessarily have to have the license on hand.

3002
04:24:39,040 --> 04:24:41,680
And so if you launch a server without a license,

3003
04:24:42,680 --> 04:24:48,560
All it's going to do is say Windows is unactivated, and you're going to have to take some manual step to activate that license.

3004
04:24:48,560 --> 04:24:54,800
And I just want to tell you that so that you're not afraid of launching a Windows machine because you think you're going to get charged a license fee.

3005
04:24:55,440 --> 04:24:56,320
It's not going to happen.

3006
04:24:56,320 --> 04:24:58,080
You have to take some manual intervention to do that.

3007
04:24:58,080 --> 04:25:01,840
So do not worry about launching that Windows machine.

3008
04:25:02,400 --> 04:25:05,240
You can bring your own license via a hybrid license.

3009
04:25:05,240 --> 04:25:10,200
So some people, like enterprises, already own their licenses, and they just want to

3010
04:25:10,920 --> 04:25:16,960
They already made a deal with Microsoft, and so they just want to reuse those instead of using whatever Azure provides, because it can be cheaper.

3011
04:25:17,680 --> 04:25:23,760
You're going to set a username and password because you're using RDP to access the machine, so you're not using your SSH key pairs.

3012
04:25:25,200 --> 04:25:28,400
Windows machines require larger instances.

3013
04:25:28,520 --> 04:25:29,360
Okay, so...

3014
04:25:30,000 --> 04:25:33,040
If you're running Windows 10 or whatever, it needs a lot more memory.

3015
04:25:33,280 --> 04:25:36,880
And so you're going to have to run it on a B2, which is a lot more expensive than a B1.

3016
04:25:37,240 --> 04:25:39,400
And that's because it runs a full desktop environment.

3017
04:25:39,400 --> 04:25:40,800
All the Windows servers do this.

3018
04:25:41,440 --> 04:25:43,240
And so this is generally why I like running Linux.

3019
04:25:43,240 --> 04:25:51,120
So just be aware not to keep your Windows Server running for very long if you don't have a lot of money and you're just learning to pass the certification.

3020
04:25:51,480 --> 04:25:52,960
Let's talk about Linux really quickly here.

3021
04:25:53,200 --> 04:25:56,240
Most versions of Linux require no type of license.

3022
04:25:56,880 --> 04:25:58,720
So I think you can get Red Hat.

3023
04:25:58,960 --> 04:26:00,960
You might need a license for that if you want support.

3024
04:26:01,760 --> 04:26:04,880
You set either a username, password, or SSH key pair.

3025
04:26:05,200 --> 04:26:09,600
You can utilize smaller VM sizes because you're not running a full desktop experience.

3026
04:26:10,320 --> 04:26:12,960
Could you run like a full desktop experience?

3027
04:26:13,200 --> 04:26:14,000
Possibly.

3028
04:26:14,000 --> 04:26:16,320
I haven't ever tried to do it on cloud myself.

3029
04:26:17,360 --> 04:26:23,680
Unix and Linux-based systems traditionally are terminal-based environments, right?

3030
04:26:23,680 --> 04:26:25,840
So you're going to be SSHing into them

3031
04:26:26,400 --> 04:26:28,000
and you're not going to have something visual.

3032
04:26:28,000 --> 04:26:29,040
Okay, so there you go.

3033
04:26:33,440 --> 04:26:35,080
So let's talk about update management.

3034
04:26:35,080 --> 04:26:45,200
At the start of this section for virtual machines, I had said that there was some requirements, ongoing software patches and things that you had to perform on your virtual machines.

3035
04:26:46,080 --> 04:26:53,600
And so that is something that you have to take care of, but if you wanted to automate that process, this is where you can use update management.

3036
04:26:53,600 --> 04:26:54,280
So that's what it'll do.

3037
04:26:54,280 --> 04:26:58,240
It'll install operating system updates and patches for both Windows and Linux.

3038
04:26:58,960 --> 04:27:05,280
And not only can it do it for your virtual machines on Azure, but it can do it on-premise and even in other cloud providers.

3039
04:27:06,800 --> 04:27:14,920
And the way this is going to work is you're going to go to your operations tab where it says guest plus host updates, and you're going to click on update management.

3040
04:27:16,000 --> 04:27:21,680
Now, update management looks like its own service, but it's actually using Azure Automations underneath.

3041
04:27:22,680 --> 04:27:25,520
And so that's what is installing the agent.

3042
04:27:25,520 --> 04:27:29,120
And the agent is the Microsoft Monitoring Agent MMA.

3043
04:27:29,280 --> 04:27:30,960
So that's how it knows what to do.

3044
04:27:30,960 --> 04:27:32,480
You have to get that installed on your machine.

3045
04:27:32,960 --> 04:27:35,760
So update management will perform a scan for update compliance.

3046
04:27:36,120 --> 04:27:43,120
A compliance scan is by default performed every 12 hours on a Windows machine and every three hours on a Linux machine.

3047
04:27:43,960 --> 04:27:49,440
It can take between 30 minutes and six hours for the dashboard to display updated data from managed computers.

3048
04:27:50,240 --> 04:28:06,240
I just wanted to point out a little bit about Azure Automation, because it does more than just obviously update management, but Azure Automation, you can enable update management, change tracking, inventory, start/stop VMs during off hours, features for your servers and virtual machines.

3049
04:28:06,680 --> 04:28:15,600
And these features have a dependency on a log analytics workspace, and therefore require linking the workspace with an automation account.

3050
04:28:15,920 --> 04:28:19,600
So there is a little bit of extra that we have to have, but there you go.

3051
04:28:24,560 --> 04:28:30,160
Hey, this is Andrew Brown from Exam Pro, and we're going to be launching our own Bastion using Azure Bastion Services.

3052
04:28:30,160 --> 04:28:31,960
So there's two ways to set this up.

3053
04:28:31,960 --> 04:28:34,160
We can go to Bastions over here.

3054
04:28:34,600 --> 04:28:39,120
and create a bastion this way, or we can create one after we've created a virtual machine.

3055
04:28:39,360 --> 04:28:44,800
I prefer the latter, so let's go ahead and do that and launch ourselves a new virtual machine.

3056
04:28:45,120 --> 04:28:49,360
And so we could either launch a Windows Server or a Linux Server.

3057
04:28:49,360 --> 04:28:51,360
Today I'm going to be launching a Windows Server.

3058
04:28:52,880 --> 04:28:55,280
And what we'll do is go down here.

3059
04:28:55,280 --> 04:28:56,320
I'll make a new group.

3060
04:28:56,320 --> 04:28:57,840
We'll call it the Enterprise.

3061
04:29:00,480 --> 04:29:02,880
And as we do that, we'll just name this

3062
04:29:03,600 --> 04:29:11,040
Enterprise D, and we'll launch that in Canada central US, that's fine with me.

3063
04:29:11,480 --> 04:29:13,120
2019 data center Gen.

3064
04:29:13,120 --> 04:29:14,240
2 is totally fine.

3065
04:29:14,360 --> 04:29:19,760
If you go here, if you're trying to find it, you go, hit select, and we'll choose Gen.

3066
04:29:19,760 --> 04:29:21,040
2 data center.

3067
04:29:21,280 --> 04:29:24,480
It is expensive, but we're not going to be using this for very long.

3068
04:29:24,960 --> 04:29:27,760
For the username, I'm going to put data.

3069
04:29:28,360 --> 04:29:31,360
And for the, I'll just make it Azure user to make our lives a bit easier.

3070
04:29:31,360 --> 04:29:37,280
And then we'll put testing, capital T, 123456, testing, 123456.

3071
04:29:37,920 --> 04:29:43,840
And we will go down below, we're fine with the settings here, we're going to go next to disk, we're going to leave the disk to premium, that's fine.

3072
04:29:44,400 --> 04:29:46,720
We'll let it create a new network, that's totally fine.

3073
04:29:47,920 --> 04:29:49,200
Management is okay.

3074
04:29:49,440 --> 04:29:51,680
And we'll just actually go hit review and create.

3075
04:29:58,040 --> 04:29:59,960
And now we'll just hit Create, so that it will go ahead.

3076
04:30:00,040 --> 04:30:00,640
and do that.

3077
04:30:01,200 --> 04:30:02,880
It'll tell us that it's in progress.

3078
04:30:04,960 --> 04:30:05,960
And we'll just wait a little bit here.

3079
04:30:05,960 --> 04:30:07,040
I'll see you back in a moment.

3080
04:30:08,320 --> 04:30:09,760
Alright, so our instance is ready.

3081
04:30:09,760 --> 04:30:12,080
So let's go ahead and go to this resource here.

3082
04:30:12,400 --> 04:30:15,280
And then on the left hand side, you'll have connect.

3083
04:30:15,280 --> 04:30:21,520
And so I'm going to show you and you don't, it's not necessary for you to do this step, because you're going to show you how to connect via the bastion.

3084
04:30:21,760 --> 04:30:25,280
But I'm going to go ahead and download this file, the RDP file.

3085
04:30:25,520 --> 04:30:27,760
This will only work if you're on Windows, by the way.

3086
04:30:28,080 --> 04:30:29,960
Well, I guess it'll work on Mac, but you'd have to install

3087
04:30:30,160 --> 04:30:36,560
the the RDP service for that users with Windows there.

3088
04:30:37,000 --> 04:30:42,080
And so here, this is Azure user, we're going to type in testing with a capital T, just double check that there.

3089
04:30:42,320 --> 04:30:44,400
I'm going to log in, make sure that this works.

3090
04:30:46,240 --> 04:30:47,360
We'll do that one more time.

3091
04:30:47,680 --> 04:30:50,320
Oh, you know, it's testing 123456.

3092
04:30:53,040 --> 04:30:53,600
There we go.

3093
04:30:54,800 --> 04:30:55,680
We'll say yes.

3094
04:30:59,560 --> 04:31:03,120
And we'll just make sure that we can remote desktop into this just before anything else.

3095
04:31:03,560 --> 04:31:04,160
And there we go.

3096
04:31:04,240 --> 04:31:05,240
So that's all good to me.

3097
04:31:05,240 --> 04:31:06,320
I don't need to see any more.

3098
04:31:07,080 --> 04:31:07,840
We'll go over to Bastion.

3099
04:31:07,840 --> 04:31:08,920
We'll say use Bastion.

3100
04:31:08,920 --> 04:31:11,280
And this is going to set up a Bastion service.

3101
04:31:11,440 --> 04:31:17,440
In order to use Bastion, you need to have another address space defined for it.

3102
04:31:17,680 --> 04:31:20,000
makes it really easy to make it here.

3103
04:31:20,000 --> 04:31:25,280
So I'm just going to go 10.0.1.0 forward slash 24.

3104
04:31:26,400 --> 04:31:27,920
And we'll go ahead and hit OK.

3105
04:31:31,880 --> 04:31:34,480
And so down below, it's going to choose an address space.

3106
04:31:36,000 --> 04:31:37,840
We have a security group.

3107
04:31:38,480 --> 04:31:40,960
I'm just going to put it for none.

3108
04:31:41,760 --> 04:31:43,120
I don't think I want one on that.

3109
04:31:46,960 --> 04:31:50,000
And if we scroll on down here, we have the resource group.

3110
04:31:50,000 --> 04:31:53,520
So we're going to put it in the same resource group, and we'll go ahead and create that.

3111
04:31:55,760 --> 04:31:58,160
So now before this, they didn't have this really nice wizard.

3112
04:31:58,160 --> 04:32:02,320
You used to have to go and create all those things individually in your virtual network.

3113
04:32:02,480 --> 04:32:03,600
But this is really nice.

3114
04:32:03,840 --> 04:32:06,080
It does take a bit of time for this to provision.

3115
04:32:06,080 --> 04:32:08,080
So I'll see you back here in a bit.

3116
04:32:08,560 --> 04:32:11,760
That took a bit of time for that to create that bastion, but it is ready to go.

3117
04:32:11,760 --> 04:32:16,720
And so now that we have it, we can go ahead and utilize this connection here.

3118
04:32:17,000 --> 04:32:20,000
And so right away, I think it's setting up for RDP here.

3119
04:32:20,000 --> 04:32:23,200
So what we'll do is type in Azure user.

3120
04:32:24,080 --> 04:32:26,800
And then capital T, testing 1, 2, 3, 4, 5, 6.

3121
04:32:26,800 --> 04:32:28,000
We'll go ahead and hit connect.

3122
04:32:31,120 --> 04:32:34,320
And so notice that I didn't have to use an external application.

3123
04:32:34,320 --> 04:32:37,200
I could just run it in right here.

3124
04:32:37,920 --> 04:32:38,960
It's all in the web browser.

3125
04:32:38,960 --> 04:32:41,800
So that's pretty much how the Bastion works.

3126
04:32:41,800 --> 04:32:43,520
I can't remember the pricing on Bastion.

3127
04:32:43,520 --> 04:32:46,960
I think it's a little bit of money, so I don't want to keep this laying around here.

3128
04:32:46,960 --> 04:32:53,360
But this is great if you, let's say you're on a Chromebook, which are becoming really popular, where you can't install native applications.

3129
04:32:54,000 --> 04:32:57,120
or you're just having issues because you're on like Linux or something like that.

3130
04:32:57,120 --> 04:32:57,760
So there you go.

3131
04:32:57,760 --> 04:32:58,640
That's all there is to it.

3132
04:32:58,640 --> 04:33:00,320
We'll go ahead and clean this up.

3133
04:33:01,000 --> 04:33:06,120
And so I'm just going to go here, find the resource group, and we'll go ahead and delete.

3134
04:33:06,120 --> 04:33:08,000
I'm just making sure that bastions within there.

3135
04:33:08,160 --> 04:33:09,000
So it is good.

3136
04:33:09,000 --> 04:33:14,960
And there we go.

3137
04:33:22,400 --> 04:33:24,640
So we just launched a virtual machine for Linux.

3138
04:33:24,640 --> 04:33:27,120
Now let's go ahead and launch one for Windows.

3139
04:33:27,120 --> 04:33:30,240
So I'm going to go to the top here and type in virtual machines.

3140
04:33:30,560 --> 04:33:33,600
We'll go to the first link, I'm going to hit add, add virtual machine.

3141
04:33:35,280 --> 04:33:38,320
And what we'll do is we'll create a new group.

3142
04:33:38,320 --> 04:33:40,240
The last one I had was called Bajor.

3143
04:33:40,240 --> 04:33:43,920
I'm going to call this one Cardassia, Cardassia.

3144
04:33:48,240 --> 04:33:49,600
And I'm going to name this

3145
04:33:49,920 --> 04:33:51,880
machine, also named Cardassia.

3146
04:33:51,880 --> 04:33:57,840
And this time, what we want to do is we want to move over to a Windows Server.

3147
04:33:57,840 --> 04:34:04,360
I find the easiest one to learn with is the Windows 10 Pro Server, just because I find these ones a little bit daunting.

3148
04:34:04,360 --> 04:34:05,840
So I'm going to go Windows 10 Pro.

3149
04:34:06,800 --> 04:34:09,840
And then what we're going to do is go choose a larger size.

3150
04:34:09,840 --> 04:34:11,000
This is not going to work.

3151
04:34:11,000 --> 04:34:14,040
We cannot run a Windows Server on a B1 LS.

3152
04:34:14,040 --> 04:34:15,920
So we're going to have to go a little bit larger.

3153
04:34:16,560 --> 04:34:19,600
And we don't have to go too much larger here.

3154
04:34:19,600 --> 04:34:23,280
But the idea here is that there's going to be a more expensive spend here.

3155
04:34:23,440 --> 04:34:25,840
So we're not going to be running to keep this running for long.

3156
04:34:26,080 --> 04:34:29,520
But here we have the B2S, that is the appropriate size to run this.

3157
04:34:29,560 --> 04:34:31,520
Anything smaller, I don't think is going to work.

3158
04:34:32,640 --> 04:34:35,120
And we are going to put in a password here.

3159
04:34:35,360 --> 04:34:37,000
So I'm just going to put in Cardassia.

3160
04:34:37,000 --> 04:34:43,920
And we'll do Cardassia, one, two, three.

3161
04:34:45,840 --> 04:34:47,120
Put a capital on it, I guess.

3162
04:34:47,920 --> 04:34:48,880
We'll just do this here.

3163
04:34:52,720 --> 04:34:54,720
And I'm just going to go back and lowercase this one.

3164
04:34:57,760 --> 04:35:03,040
And we're going to allow the inbound port of 3389, because that is what RDP needs.

3165
04:35:03,280 --> 04:35:05,000
I'm going to confirm that I have a Windows license.

3166
04:35:05,000 --> 04:35:06,080
I actually don't.

3167
04:35:06,080 --> 04:35:09,680
But the thing is, you can still launch one for your test purposes.

3168
04:35:10,000 --> 04:35:12,240
It'll just complain saying you're not activated.

3169
04:35:12,640 --> 04:35:16,600
So there are some limitations, but it's good enough for us to learn, okay?

3170
04:35:16,600 --> 04:35:19,920
And so now that is all great, we'll go next to disks.

3171
04:35:20,320 --> 04:35:23,600
We're going to go with standard SSD this time.

3172
04:35:24,480 --> 04:35:27,120
We are going to go ahead and hit next and go to networking.

3173
04:35:27,120 --> 04:35:29,440
It's going to create us a new VNet, which is a great idea.

3174
04:35:29,720 --> 04:35:33,680
We're going to let it create a network security group on the NIC, just like before.

3175
04:35:34,040 --> 04:35:35,440
We'll go ahead and hit next.

3176
04:35:36,960 --> 04:35:38,480
We'll leave all these options alone.

3177
04:35:38,480 --> 04:35:39,760
This all seems fine to me.

3178
04:35:40,720 --> 04:35:43,600
And we'll hit next, review and create.

3179
04:35:46,960 --> 04:35:48,880
And we'll go ahead and create this server.

3180
04:35:55,950 --> 04:35:58,230
All right, and so that's going to go ahead and create it.

3181
04:35:58,230 --> 04:36:01,070
So I'll just see you back here in a moment when that's done deploying.

3182
04:36:01,680 --> 04:36:06,080
All right, and so after a short little while here, it looks like our Windows Server is now deployed.

3183
04:36:06,080 --> 04:36:08,160
So what we can do is go to that resource.

3184
04:36:08,160 --> 04:36:11,200
And if you wanted to see what it's deployed, it's the same stuff as always.

3185
04:36:11,520 --> 04:36:16,600
You have your network interface card, your virtual network NSG, the IP address.

3186
04:36:16,600 --> 04:36:18,240
So let's actually go to that resource now.

3187
04:36:19,120 --> 04:36:22,720
And so let's see how we can gain access to this virtual machine.

3188
04:36:22,720 --> 04:36:24,880
And so what we can do is use RDP.

3189
04:36:24,880 --> 04:36:26,880
Luckily, I am on a Windows machine.

3190
04:36:26,880 --> 04:36:31,000
And so I already have the RDB client that I can use.

3191
04:36:31,000 --> 04:36:33,360
So all you got to do is download the RDB file.

3192
04:36:34,320 --> 04:36:36,320
And then once we have that file, I can just double click it.

3193
04:36:37,200 --> 04:36:38,160
And I can open this up.

3194
04:36:38,160 --> 04:36:41,920
If you're on a Mac, you can download the app in the App Store.

3195
04:36:42,360 --> 04:36:44,240
And so I'll go ahead and type in my password.

3196
04:36:44,240 --> 04:36:46,160
So my username was Cardassia.

3197
04:36:46,880 --> 04:36:52,640
And then my password was capital CARDASSIA123.

3198
04:36:52,880 --> 04:36:53,760
We'll hit OK.

3199
04:36:54,480 --> 04:36:56,000
And then it'll give us another warning.

3200
04:36:56,000 --> 04:36:56,640
We'll say yes.

3201
04:36:57,760 --> 04:36:59,760
And now we are in our virtual machine.

3202
04:36:59,760 --> 04:37:00,640
So there you go.

3203
04:37:00,640 --> 04:37:01,520
How cool is that?

3204
04:37:02,560 --> 04:37:06,400
I'll just give it a moment to load up, but this is a full Windows 10 Pro.

3205
04:37:07,040 --> 04:37:09,960
And as I said before, we don't actually have a license.

3206
04:37:09,960 --> 04:37:16,240
So if you're afraid of spinning it up, because you're going to get charged a license fee for Windows, you do not have to worry.

3207
04:37:16,240 --> 04:37:17,040
That's not going to happen.

3208
04:37:17,040 --> 04:37:20,800
You have to do some manual intervention for that to happen.

3209
04:37:20,800 --> 04:37:23,360
So we'll just wait a little while here for this to load.

3210
04:37:23,760 --> 04:37:27,280
It is not, we're not using the most powerful machine, so it does take a little bit of time.

3211
04:37:27,680 --> 04:37:29,040
And so we just hit accept here.

3212
04:37:31,200 --> 04:37:31,840
And here we are.

3213
04:37:31,840 --> 04:37:35,440
So we are on, we have our nice Windows machine here.

3214
04:37:35,440 --> 04:37:35,840
Whoops.

3215
04:37:37,520 --> 04:37:38,680
I don't know if it has any games.

3216
04:37:38,680 --> 04:37:39,520
Let's go take a look.

3217
04:37:42,720 --> 04:37:43,840
Maybe play Minesweeper.

3218
04:37:49,600 --> 04:37:51,520
No, maybe maybe you have to download in the store.

3219
04:37:51,520 --> 04:37:53,160
I'm not that familiar with Windows machines.

3220
04:37:53,160 --> 04:37:53,440
But

3221
04:37:54,080 --> 04:37:54,720
So there you go.

3222
04:37:54,720 --> 04:37:56,000
So we'll go ahead and close that.

3223
04:37:56,160 --> 04:37:58,960
And if we were using the Bastion, it's the same process.

3224
04:37:58,960 --> 04:38:04,240
You saw how we used it with SSH, but if we had the Bastion and it's so much work to set one up, we already did that before.

3225
04:38:04,640 --> 04:38:10,240
But all you do is enter your credentials in on the page just as we did, and it's just a lot easier that way.

3226
04:38:10,600 --> 04:38:12,480
So let's go ahead and just tear down this machine.

3227
04:38:12,480 --> 04:38:13,200
We're all done with it.

3228
04:38:13,440 --> 04:38:17,040
So I'm just going to hit delete.

3229
04:38:18,320 --> 04:38:21,760
And if we find that resource group, we should be able to easily delete them all.

3230
04:38:21,760 --> 04:38:28,960
I find the easiest ways to go up here, go to all resources, and then there's the resource group there, and then hit delete resource group.

3231
04:38:29,440 --> 04:38:33,840
And then I'll type in the name of it, which is Cardassia, and I'll delete all those resources.

3232
04:38:33,840 --> 04:38:42,960
But after that's done, always just take a double check on your all resources tab and just make sure that those resources are gone because sometimes they stick around.

3233
04:38:42,960 --> 04:38:43,520
But there you go.

3234
04:38:43,520 --> 04:38:46,240
That's as simple as it was to launch a Windows machine.

3235
04:38:52,800 --> 04:38:54,560
Hey, this is Angie Brown from Exam Pro.

3236
04:38:54,640 --> 04:39:00,080
And let's take a look here at virtual machines, which I consider the backbone of most cloud service providers.

3237
04:39:00,240 --> 04:39:04,200
And Azure keeps it really simple by calling it virtual machines.

3238
04:39:04,200 --> 04:39:07,840
So we can go up here and type in virtual machine and make our way over here.

3239
04:39:08,040 --> 04:39:12,800
But right now I don't have any options because I'm using a tenant that doesn't have a subscription applied to it.

3240
04:39:13,040 --> 04:39:15,520
So what I'm going to do is go switch back to my original tenant.

3241
04:39:15,880 --> 04:39:18,400
And this one has a subscription applied to it.

3242
04:39:20,000 --> 04:39:24,160
And so what I'll do is just click back up here, and now we'll just type in virtual machines.

3243
04:39:25,200 --> 04:39:28,440
And I can now see I have options of creating virtual machines.

3244
04:39:28,440 --> 04:39:34,720
Let's go ahead and go create a Linux one first, and then we'll go ahead and create a Windows one, and then we'll see how we can connect to it.

3245
04:39:34,720 --> 04:39:39,280
All right, so first we'll go to the top here, hit Add, we'll click on Virtual Machine.

3246
04:39:41,320 --> 04:39:42,840
And we're going to be presented with a lot of options.

3247
04:39:42,840 --> 04:39:44,320
So we'll have to choose a subscription.

3248
04:39:44,320 --> 04:39:45,520
And so there is mine.

3249
04:39:45,840 --> 04:39:48,560
I want to probably create a new resource group here.

3250
04:39:48,720 --> 04:39:50,240
I'm going to call this one Bajour.

3251
04:39:52,320 --> 04:39:55,640
And we'll name this Bajour again.

3252
04:39:55,640 --> 04:39:58,560
And I'm going to launch this in US East.

3253
04:39:59,200 --> 04:40:01,760
I'll just set it to one availability zone for the time being.

3254
04:40:02,320 --> 04:40:04,960
Then here we have what we can choose as an image.

3255
04:40:04,960 --> 04:40:06,720
I can click on see all images.

3256
04:40:07,880 --> 04:40:09,360
and choose from a variety of them.

3257
04:40:09,600 --> 04:40:13,600
So if I didn't want to use Ubuntu, I could launch something else like Debian or something like that.

3258
04:40:14,080 --> 04:40:19,440
But really, I just want to stick with Ubuntu because I'm fine with that version with 18.

3259
04:40:20,080 --> 04:40:23,680
Then here's what really matters is the size because that's going to affect our cost.

3260
04:40:23,680 --> 04:40:29,320
So if we click on see all sizes, we have this nifty table where we can sort the cost.

3261
04:40:29,320 --> 04:40:30,640
It's just loading the cost here.

3262
04:40:30,640 --> 04:40:31,280
It's dynamic.

3263
04:40:31,520 --> 04:40:34,640
This is going to be based on what your base subscription is.

3264
04:40:34,640 --> 04:40:35,360
So if you're

3265
04:40:36,160 --> 04:40:40,560
In Canada, you're going to see Canadian prices, in the US, you're going to see US prices, et cetera, et cetera.

3266
04:40:41,400 --> 04:40:46,040
And I care a lot about cost here, so I'm just going to sort this by cost.

3267
04:40:46,040 --> 04:40:49,920
And here we have the B1LS, which is very cost-effective.

3268
04:40:50,880 --> 04:40:54,720
We have a RAM of 0.5 gigabytes and some other options there.

3269
04:40:55,680 --> 04:40:57,440
So we'll go ahead and select that there.

3270
04:40:58,200 --> 04:40:59,240
And we have a couple options.

3271
04:40:59,240 --> 04:41:04,000
We can use SSH public key, or we can utilize a password.

3272
04:41:04,000 --> 04:41:08,480
And so I think what we'll do is use an SSH public key, because that's pretty much the standard there.

3273
04:41:08,800 --> 04:41:11,600
We're going to name the username Bajor if it lets us.

3274
04:41:13,120 --> 04:41:15,520
Probably won't probably want some additional options there.

3275
04:41:15,920 --> 04:41:16,560
No, it's okay.

3276
04:41:16,560 --> 04:41:16,960
Oh, great.

3277
04:41:17,440 --> 04:41:19,920
And we'll go ahead and generate a new key pair.

3278
04:41:20,800 --> 04:41:22,400
And I'm just going to name that one Bajor.

3279
04:41:24,560 --> 04:41:27,840
And we have some options here for inbound rules.

3280
04:41:28,240 --> 04:41:29,440
So you could set to none.

3281
04:41:29,680 --> 04:41:32,080
This is just setting up the NSG for you.

3282
04:41:32,560 --> 04:41:38,160
But we're probably going to want to have that port open for SSH because that's how we're going to make our way back in here.

3283
04:41:38,400 --> 04:41:43,840
If we're running a like an Apache server, we'd want to have port 80 open.

3284
04:41:43,840 --> 04:41:44,960
So we can go ahead and do that.

3285
04:41:45,680 --> 04:41:47,280
We'll take a look at now disks.

3286
04:41:48,400 --> 04:41:53,600
So here we have options between premium standard and standard HHD.

3287
04:41:54,120 --> 04:41:55,440
I just want this to be cost effective.

3288
04:41:55,440 --> 04:41:57,520
So I'm just going to go with standard HDD.

3289
04:41:58,080 --> 04:42:05,360
But generally you want to have at least standard or premium SSD when you're running real web development workloads.

3290
04:42:06,000 --> 04:42:07,240
Then there's encryption here.

3291
04:42:07,240 --> 04:42:09,680
And so it's always turned on by default, which is great.

3292
04:42:09,920 --> 04:42:13,680
They also have this option of double encryption with the platform managing customer managed key.

3293
04:42:14,040 --> 04:42:15,440
We're just going to leave that as default.

3294
04:42:15,680 --> 04:42:17,200
Enable alter disk compatibility.

3295
04:42:17,200 --> 04:42:20,040
That's not something we need to do here because we are not using ultra disk.

3296
04:42:21,160 --> 04:42:23,840
And here you can see that you can attach multiple disks here.

3297
04:42:24,640 --> 04:42:27,440
So I can go and do that, but that's not something I need to do today.

3298
04:42:28,000 --> 04:42:30,640
And some other advanced options, which we do not care about.

3299
04:42:31,040 --> 04:42:32,400
We'll go over to networking.

3300
04:42:32,400 --> 04:42:35,360
And so it's going to end up creating us a new vNet for us.

3301
04:42:35,680 --> 04:42:39,520
And it will create a new subnet for us and assign it an IP address.

3302
04:42:40,800 --> 04:42:42,720
It will also set up a NICS.

3303
04:42:43,280 --> 04:42:44,200
network security group.

3304
04:42:44,200 --> 04:42:47,760
So the network security group is not going to be applied at the subnet level.

3305
04:42:47,760 --> 04:42:52,880
It's going to be applied at the NIC, which is attached to the DC2 there.

3306
04:42:53,160 --> 04:42:54,560
And so we'll just leave it to basic.

3307
04:42:54,960 --> 04:42:58,960
We're going to allow inbound ports for port 80 and 22.

3308
04:42:58,960 --> 04:43:00,880
That was carried over from earlier.

3309
04:43:01,680 --> 04:43:04,960
We can put this behind a load balancer, but I don't think we're going to do that right now.

3310
04:43:04,960 --> 04:43:07,160
We'll go over to management.

3311
04:43:07,360 --> 04:43:10,000
We have some additional options here for monitoring.

3312
04:43:10,520 --> 04:43:12,000
This is all okay here.

3313
04:43:12,240 --> 04:43:13,760
We can set it to auto shutdown.

3314
04:43:13,760 --> 04:43:14,960
Actually, I'll leave that alone.

3315
04:43:16,000 --> 04:43:17,520
You can also enable backups here.

3316
04:43:18,800 --> 04:43:19,840
We'll go advanced.

3317
04:43:20,640 --> 04:43:22,880
And now we have this option here for custom data.

3318
04:43:23,840 --> 04:43:30,800
I covered a section on cloud init, and they don't call this user data, but most other providers will call this user data.

3319
04:43:30,800 --> 04:43:35,280
So we could provide a bash script or additional information here if we wanted to.

3320
04:43:36,480 --> 04:43:39,080
Then down below, there's some host group options.

3321
04:43:39,080 --> 04:43:41,360
We're not going to worry about that in proximity placement group.

3322
04:43:41,360 --> 04:43:46,080
This is really important if you need to have instances nearby.

3323
04:43:46,480 --> 04:43:52,640
I think this is pretty common with, what's it called, high-capacity workloads, HFC.

3324
04:43:52,640 --> 04:43:56,160
I can't remember the initialism right now, but we covered it in the core content.

3325
04:43:56,560 --> 04:43:58,160
Then we can tag our resource here.

3326
04:43:58,800 --> 04:43:59,640
We'll just leave that alone.

3327
04:43:59,640 --> 04:44:01,040
I don't care about tagging too much.

3328
04:44:01,200 --> 04:44:03,520
But generally, it's good to tag in practice.

3329
04:44:04,160 --> 04:44:07,240
And then we will get to review and create our server here.

3330
04:44:07,240 --> 04:44:08,360
We'll go ahead and hit create.

3331
04:44:08,360 --> 04:44:13,200
And then we'll have to download our private key so we can utilize it later.

3332
04:44:15,000 --> 04:44:16,400
And so that's downloaded there.

3333
04:44:17,080 --> 04:44:19,480
And now we're just waiting for it to deploy this.

3334
04:44:19,480 --> 04:44:21,040
And I'll see you back here in a moment.

3335
04:44:21,760 --> 04:44:23,200
So we had to wait a little bit there.

3336
04:44:23,200 --> 04:44:25,520
And finally, our deployment is complete.

3337
04:44:26,440 --> 04:44:29,280
We can go ahead and just review all the things that it created.

3338
04:44:29,760 --> 04:44:41,440
So notice that it created the virtual machine, it created a network interface, a NIC for us, the NSG, the network security group, the virtual network, and also a public IP address.

3339
04:44:42,120 --> 04:44:45,120
When I do cleanup, a lot of things I always miss are these IP addresses.

3340
04:44:45,120 --> 04:44:53,920
And I know that Azure gave me a warning that said, hey, you're about to spend $700 yearly on IP addresses because you weren't releasing them.

3341
04:44:54,480 --> 04:44:59,360
So when we do the cleanup step, I'll definitely emphasize about deleting those IP addresses and how to go about that.

3342
04:45:00,000 --> 04:45:01,920
Let's go take a look at the actual resource now.

3343
04:45:03,600 --> 04:45:08,400
So here we are, and you can see we have a lot of options on the left-hand side, such as the disk.

3344
04:45:09,360 --> 04:45:13,280
So we can see the disk options there, and there's additional security options.

3345
04:45:14,240 --> 04:45:17,280
Let's go take a look at how we can go ahead and connect to the server.

3346
04:45:18,000 --> 04:45:20,480
And so there's different options here.

3347
04:45:20,480 --> 04:45:23,280
So we have RDP, SSH, and Bastion.

3348
04:45:23,280 --> 04:45:26,480
Since we are using a Linux machine, we're not going to be using RDP.

3349
04:45:26,480 --> 04:45:27,680
That's really for Windows.

3350
04:45:29,440 --> 04:45:37,000
But the trick here is that I would need to have a client on my computer to connect like, I think it's called Putty.

3351
04:45:37,000 --> 04:45:39,280
If you're on a Linux-based machine, it's a lot easier.

3352
04:45:40,080 --> 04:45:45,360
And certainly I have the Linux subsystem installed, so I could probably connect that way.

3353
04:45:46,720 --> 04:45:51,280
But I figured let's just go ahead and connect via bastion because I think this is a pretty darn cool feature.

3354
04:45:51,600 --> 04:45:54,080
So let's go ahead and create ourselves a bastion.

3355
04:45:55,920 --> 04:45:57,520
And this will take a little bit of time here.

3356
04:45:58,720 --> 04:46:00,360
But we'll go ahead here and just set up subnets.

3357
04:46:00,360 --> 04:46:05,480
So to associate a virtual network to a bastion, it must contain a subnet with the Azure bastion subnet.

3358
04:46:05,480 --> 04:46:07,200
So they actually have a special subnet for it.

3359
04:46:08,160 --> 04:46:14,320
So what we'll do is we'll just go back to our our server here, which we called Bajor.

3360
04:46:15,360 --> 04:46:17,200
And I think we can find a subnet through here.

3361
04:46:17,760 --> 04:46:21,440
So on the left-hand side, if we go to networking, we probably could find it that way.

3362
04:46:21,600 --> 04:46:27,120
So I'm just looking for that security group in there.

3363
04:46:28,480 --> 04:46:31,600
It should be, maybe it's not there.

3364
04:46:31,600 --> 04:46:37,440
If it's not there, well, you know, we could just go over, make our way over to subnets.

3365
04:46:37,440 --> 04:46:38,080
It's not a big deal.

3366
04:46:39,840 --> 04:46:40,880
Because it's called Bajor.

3367
04:46:40,880 --> 04:46:42,880
It's pretty darn easy to find to begin with.

3368
04:46:43,440 --> 04:46:48,000
And so under subnets here, what we need to do is add a special one here.

3369
04:46:48,640 --> 04:46:51,120
And I just got to remember how this works.

3370
04:46:52,240 --> 04:46:56,960
So you need to create a subnet called Azure Bastion Subnet with a prefix of at least 27.

3371
04:46:57,760 --> 04:46:59,680
So we'll go ahead and add a new subnet.

3372
04:47:00,480 --> 04:47:01,440
And we'll call it that.

3373
04:47:02,880 --> 04:47:04,080
We'll take out the space there.

3374
04:47:05,600 --> 04:47:08,440
And the range is 10, 0, 1, 0, etc.

3375
04:47:08,440 --> 04:47:11,280
So we'll just do it on 2, 0.

3376
04:47:12,800 --> 04:47:15,680
2.0 forward slash 27.

3377
04:47:18,640 --> 04:47:20,840
10 002 is not contained.

3378
04:47:24,160 --> 04:47:25,000
Yeah, it overlaps.

3379
04:47:25,000 --> 04:47:28,800
So we'll do to not contain the virtual network address space.

3380
04:47:28,800 --> 04:47:30,880
Oh, right, so we have to add the address space first.

3381
04:47:32,480 --> 04:47:34,000
Oops, we'll just cancel here.

3382
04:47:35,680 --> 04:47:38,320
That's okay, we'll discard that we'll make our way over to address space.

3383
04:47:38,320 --> 04:47:40,560
And we'll go ahead and add 10.0 dot

3384
04:47:41,200 --> 04:47:43,520
2.0 forward slash 24.

3385
04:47:44,000 --> 04:47:46,720
They'll give us a pretty darn large range there.

3386
04:47:48,600 --> 04:47:51,280
And so now what we'll do is go back to our subnet.

3387
04:47:53,200 --> 04:47:55,040
And we'll go ahead and create that there.

3388
04:47:57,840 --> 04:47:59,240
And it said only needed 27.

3389
04:47:59,240 --> 04:48:00,440
So we'll just give it only 27.

3390
04:48:00,440 --> 04:48:01,840
We don't need to go bigger than we need.

3391
04:48:02,800 --> 04:48:05,840
And that should be okay, we'll go ahead and hit save.

3392
04:48:08,960 --> 04:48:10,000
And it shouldn't take too long.

3393
04:48:10,080 --> 04:48:12,000
So now that we have that we can go back here.

3394
04:48:12,640 --> 04:48:14,480
And we'll give give this another go here.

3395
04:48:21,510 --> 04:48:23,510
It's there, so it shouldn't be complaining.

3396
04:48:24,230 --> 04:48:27,430
Maybe what we'll do is just start from the start here again.

3397
04:48:33,360 --> 04:48:34,080
Yeah, there you go.

3398
04:48:34,160 --> 04:48:39,520
The Azure portal is like that a lot where you'll have something set up and it has the old state of it.

3399
04:48:39,880 --> 04:48:43,960
And so you just have to trust yourself that you know what you're doing and you have to go back.

3400
04:48:43,960 --> 04:48:47,760
But if you don't have a lot of confidence, a lot of times you'll get stuck and you'll think, okay, I don't have it right.

3401
04:48:47,760 --> 04:48:52,720
But always just try again and hit refresh because the Azure portal is very inconsistent.

3402
04:48:53,200 --> 04:48:54,800
So we're just going to have to wait for this to create.

3403
04:48:54,800 --> 04:48:58,320
This does take a little while to create, so I'll see you back in a moment.

3404
04:48:59,280 --> 04:49:01,960
So after waiting 5 minutes, our bastion is now created.

3405
04:49:01,960 --> 04:49:10,320
And so what we can do is without even using a PuTTY client or having to use Linux directly, we can just connect via the bastion.

3406
04:49:10,800 --> 04:49:13,360
So here we'll see we have some options here.

3407
04:49:13,360 --> 04:49:16,960
So we want to do SSH private key from local file.

3408
04:49:17,920 --> 04:49:18,200
Okay.

3409
04:49:18,200 --> 04:49:21,760
And what we can do is go ahead and select our Bajour key.

3410
04:49:22,320 --> 04:49:24,320
And then I'll just scroll down here and hit connect.

3411
04:49:25,360 --> 04:49:28,320
Oh, and I think we made the username Bajour.

3412
04:49:30,040 --> 04:49:31,280
And we'll go ahead and connect now.

3413
04:49:33,280 --> 04:49:38,960
And it's complaining about a pop-up here, so we'll go up here and say, always allow.

3414
04:49:40,320 --> 04:49:41,360
And we'll try that again.

3415
04:49:44,800 --> 04:49:46,240
And then we'll say allow again.

3416
04:49:48,920 --> 04:49:54,800
And so now that we're into our server here, let's go ahead and try to install Apache and see if we can get at least the default page running.

3417
04:49:55,280 --> 04:49:56,800
So this is using Ubuntu.

3418
04:49:56,800 --> 04:50:00,880
If my memory serves me correctly, it should be apt-get install apache2.

3419
04:50:02,560 --> 04:50:04,080
And we'll just hit Y for continue.

3420
04:50:07,680 --> 04:50:08,920
And we'll just wait for this to install.

3421
04:50:08,920 --> 04:50:10,160
It doesn't take too darn long.

3422
04:50:15,040 --> 04:50:18,080
And after a short little wait there, it finally did install.

3423
04:50:18,080 --> 04:50:21,280
Also, if you notice this little icon here, we have a little clipboard here.

3424
04:50:22,080 --> 04:50:24,480
I don't seem to ever use that there, so that's fine.

3425
04:50:25,040 --> 04:50:29,600
Now, when you install Apache, we might have to go ahead and start it up.

3426
04:50:30,560 --> 04:50:34,560
So let's just take a look to see if it actually is in the running directory here.

3427
04:50:34,960 --> 04:50:37,040
So we'll go to cd var www.

3428
04:50:37,320 --> 04:50:40,240
And so that's where the default directory is, right?

3429
04:50:41,640 --> 04:50:44,800
But we can just check to see if it's running by doing a ps aux.

3430
04:50:45,680 --> 04:50:47,040
I think it's htpd.

3431
04:50:47,840 --> 04:50:49,920
Or we can say Apache here.

3432
04:50:50,840 --> 04:50:54,400
And so it looks like it's already running, so that's pretty great for us.

3433
04:50:54,720 --> 04:51:01,520
And since it's running on port 80 and we've opened up port 80, we should probably be able to access that here.

3434
04:51:01,520 --> 04:51:03,680
So let's go back to our actual virtual machine.

3435
04:51:04,160 --> 04:51:05,520
So we'll go to virtual machines.

3436
04:51:09,600 --> 04:51:11,840
And we have that virtual machine running.

3437
04:51:11,840 --> 04:51:15,440
I'm just going to click into it because I just want to find out its public IP address.

3438
04:51:17,360 --> 04:51:18,560
So here it is there.

3439
04:51:18,880 --> 04:51:20,160
And if we're lucky, this will just work.

3440
04:51:20,160 --> 04:51:21,840
Just a copy to clipboard button right there.

3441
04:51:24,080 --> 04:51:24,560
And look at that.

3442
04:51:24,560 --> 04:51:25,640
We have the default page.

3443
04:51:25,640 --> 04:51:26,240
Isn't that cool?

3444
04:51:27,040 --> 04:51:28,320
So that's all there really is to it.

3445
04:51:28,400 --> 04:51:30,080
And I could even update this page.

3446
04:51:30,080 --> 04:51:32,000
You don't have to do it, but I'm just going to update it for fun.

3447
04:51:32,760 --> 04:51:35,520
Actually, I probably have to restart the server, so maybe I won't do that.

3448
04:51:36,240 --> 04:51:38,160
But yeah, so we connected through the Bastion.

3449
04:51:38,160 --> 04:51:39,200
So that was pretty darn easy.

3450
04:51:39,920 --> 04:51:43,520
We probably could have also used the Cloud Shell to connect.

3451
04:51:45,440 --> 04:51:47,680
But maybe we could give that a go as well.

3452
04:51:50,640 --> 04:51:53,120
Since we're all done here, let's go ahead and do some cleanup.

3453
04:51:53,120 --> 04:51:57,920
The first thing I want to do is, the easiest way is actually to go to all resources here on the left-hand side.

3454
04:51:58,560 --> 04:52:01,040
And this really gives you an idea of everything that's running in your account.

3455
04:52:01,040 --> 04:52:03,680
So I actually have other stuff in here that's not relevant.

3456
04:52:04,320 --> 04:52:07,920
But the idea is that all of our stuff is running within a resource group.

3457
04:52:08,920 --> 04:52:10,880
And so I'm just taking a look there.

3458
04:52:10,880 --> 04:52:12,640
I'm not seeing this is all resources here.

3459
04:52:13,520 --> 04:52:15,600
Let's see if we see resource group here.

3460
04:52:16,360 --> 04:52:17,600
Yeah, they're all there right there.

3461
04:52:17,600 --> 04:52:18,880
So I can go ahead and click that.

3462
04:52:19,840 --> 04:52:22,640
And so everything more or less should be self-contained within here.

3463
04:52:22,640 --> 04:52:23,360
See all that stuff?

3464
04:52:24,400 --> 04:52:26,720
You can even see the VNet is part of it as well.

3465
04:52:27,160 --> 04:52:32,240
And so if I go ahead and delete this resource group, it should delete all this stuff.

3466
04:52:32,240 --> 04:52:34,160
So I'm just going to type Bajor to confirm.

3467
04:52:35,440 --> 04:52:36,560
And we'll go ahead and delete.

3468
04:52:37,600 --> 04:52:40,880
And that should do a good job of cleaning up all those files.

3469
04:52:42,640 --> 04:52:44,120
I'm not sure if it will delete the IP.

3470
04:52:44,120 --> 04:52:53,840
It should right there, but if it doesn't, what I recommend is after everything is deleted, just go back here to all resources and just double check to make sure they all vanish.

3471
04:52:54,640 --> 04:52:57,840
Because when this is done, they're all going to start to vanish from this list.

3472
04:52:57,840 --> 04:53:00,800
And if there's anything remaining, you'll know because it's still here, right?

3473
04:53:01,440 --> 04:53:02,840
So just be careful about that.

3474
04:53:02,840 --> 04:53:03,760
That's all I want you to know.

3475
04:53:04,560 --> 04:53:06,240
And so that's the Linux part.

3476
04:53:06,240 --> 04:53:09,360
And so let's go ahead and actually now set up a Windows Server.

3477
04:53:14,560 --> 04:53:23,840
Hey, this is Andrew Brown from Exam Pro, and it's really important that we know how to monitor our virtual machines so we can kind of check their performance or do some diagnostics on them.

3478
04:53:24,200 --> 04:53:33,280
And so a couple of things we're going to look into, we're going to set up some virtual machines, and we're going to look into automation accounts, log analytics, and metrics and alerts, okay?

3479
04:53:34,160 --> 04:53:40,320
So the first thing we'll need to do before we do anything else is make sure that we have particular resource providers enabled.

3480
04:53:40,320 --> 04:53:43,280
So go to the top here, and as always, go to your subscriptions.

3481
04:53:43,680 --> 04:53:48,800
And we will click into our subscription, go all the way down to the bottom, click on resource providers.

3482
04:53:49,080 --> 04:53:51,360
And there's two in particular we're looking for.

3483
04:53:51,520 --> 04:53:53,840
One is for alerts, so it's alerts management.

3484
04:53:53,840 --> 04:53:55,200
So make sure that is registered.

3485
04:53:55,200 --> 04:53:56,560
If it's not, press that button.

3486
04:53:57,040 --> 04:53:58,560
And then we want insights.

3487
04:53:58,800 --> 04:54:01,440
So make sure insights is enabled as well.

3488
04:54:01,680 --> 04:54:05,840
This should be by default, but just in case they're not, you should go ahead and do that.

3489
04:54:06,320 --> 04:54:08,240
So we are going to need some virtual machines.

3490
04:54:08,240 --> 04:54:09,600
I'm going to set up three.

3491
04:54:09,600 --> 04:54:15,280
And the reason I want to do that is just to show you that there's many different ways in Azure to do the exact same thing.

3492
04:54:15,600 --> 04:54:19,440
And sometimes when you do something, it just works, and sometimes it just doesn't.

3493
04:54:19,680 --> 04:54:22,000
And it can work again and not again.

3494
04:54:22,000 --> 04:54:24,720
So I want to give you a few different options available to you.

3495
04:54:25,040 --> 04:54:26,920
So the first thing we're going to spin up is a

3496
04:54:27,000 --> 04:54:28,000
a virtual machine.

3497
04:54:29,120 --> 04:54:31,760
And this one in particular, we'll make a new group.

3498
04:54:31,760 --> 04:54:33,040
We're going to call it DAX.

3499
04:54:33,440 --> 04:54:37,440
And so we're going to choose for this one an Ubuntu Linux.

3500
04:54:37,440 --> 04:54:38,400
I'm going to switch it over.

3501
04:54:38,400 --> 04:54:40,000
I'm going to choose a minimal install.

3502
04:54:40,320 --> 04:54:43,760
So we'll choose this one over here, which is the Ubuntu server minimal.

3503
04:54:44,480 --> 04:54:47,200
And what I'll do is name this.

3504
04:54:47,360 --> 04:54:49,360
And there's a bunch of different DAXs in Star Trek.

3505
04:54:49,360 --> 04:54:51,520
So we're going to go with curs on DAX here.

3506
04:54:52,520 --> 04:54:55,160
And we'll put all this in East US.

3507
04:54:55,160 --> 04:54:56,560
So wherever it defaults here.

3508
04:54:56,560 --> 04:54:58,640
So if that's where it wants to go, that's where it's going to be.

3509
04:54:58,640 --> 04:55:00,400
But let's pay attention to where that is.

3510
04:55:00,400 --> 04:55:00,800
Okay.

3511
04:55:01,680 --> 04:55:04,160
Let's make sure that we're using a very inexpensive instance.

3512
04:55:04,960 --> 04:55:06,160
We'll give it a second to load.

3513
04:55:06,160 --> 04:55:08,880
If you do not see the cost, just drag these over until you do.

3514
04:55:08,880 --> 04:55:10,560
It just depends on your screen, right?

3515
04:55:11,600 --> 04:55:15,920
So once this loads, it will tell us that this is probably the cheapest.

3516
04:55:16,000 --> 04:55:18,480
I think that is the cheapest because something's going to go lower than

3517
04:55:18,800 --> 04:55:20,640
at 500 megabytes of RAM.

3518
04:55:20,640 --> 04:55:21,960
So I think we're already set to it.

3519
04:55:21,960 --> 04:55:23,400
I'm not going to wait for it to load.

3520
04:55:23,400 --> 04:55:24,160
It'll take forever.

3521
04:55:24,320 --> 04:55:25,360
Notice the red line.

3522
04:55:25,360 --> 04:55:26,480
There is no error.

3523
04:55:26,560 --> 04:55:27,920
That's just what it shows.

3524
04:55:28,480 --> 04:55:31,040
And so I'm going to go for password authentication here.

3525
04:55:31,040 --> 04:55:45,560
And what I'm going to do for this account is I'm going to type in DAX is the username and then testing with a capital T-E-S-T-I-G, 123456 because it wants an uppercase, a lowercase, some numbers, and a certain length.

3526
04:55:45,560 --> 04:55:46,960
And that's what works for me.

3527
04:55:47,840 --> 04:55:51,160
So now that I have those filled in, SSH, we're going to keep that open.

3528
04:55:51,160 --> 04:55:52,400
We're going to go to disk.

3529
04:55:52,640 --> 04:55:54,000
You can leave it on premium if you want.

3530
04:55:54,000 --> 04:55:54,920
I'm going to go to standard.

3531
04:55:54,920 --> 04:55:58,080
I want to save some money just in case I forget to turn this machine off.

3532
04:55:58,320 --> 04:56:01,200
It's going to set up some networking for us, which is totally fine.

3533
04:56:01,440 --> 04:56:02,800
We're going to go to management.

3534
04:56:03,840 --> 04:56:08,960
And I believe, so there should be guest OS install here.

3535
04:56:09,040 --> 04:56:10,480
It is not here.

3536
04:56:10,480 --> 04:56:12,960
It's the next step, I believe.

3537
04:56:14,880 --> 04:56:15,840
Where is it?

3538
04:56:16,000 --> 04:56:17,200
I know you're in here.

3539
04:56:17,840 --> 04:56:19,200
Let's go back one step here.

3540
04:56:19,200 --> 04:56:25,360
I have a feeling it's on this page, because you can install the guest OS metrics right away.

3541
04:56:27,120 --> 04:56:30,320
So I'm just seeing here, I cannot seem to remember where it is.

3542
04:56:31,280 --> 04:56:33,600
I might have skipped over it because I'm going so quick here.

3543
04:56:36,400 --> 04:56:39,520
Oh, maybe it's not set here.

3544
04:56:39,520 --> 04:56:43,120
So when we go to do the other virtual machine, we'll see if it's actually there.

3545
04:56:43,120 --> 04:56:44,960
But for this one, we'll just launch it without it.

3546
04:56:45,400 --> 04:56:46,160
which is totally fine.

3547
04:56:46,160 --> 04:56:47,760
I was going to do one that way anyway.

3548
04:56:49,920 --> 04:56:54,000
And so we'll go ahead there and create that virtual machine.

3549
04:56:54,080 --> 04:56:59,360
Okay, now while that is going, and by the way, if you think you call that number, that's not me.

3550
04:56:59,360 --> 04:57:03,120
So you know, you can call if you want, but it won't go to me.

3551
04:57:04,320 --> 04:57:06,000
So that's going to go ahead and deploy that.

3552
04:57:06,240 --> 04:57:10,400
What I'm going to do now is go and launch another virtual machine in the same

3553
04:57:11,360 --> 04:57:12,400
in the same environment.

3554
04:57:12,400 --> 04:57:17,120
So this one this time around is going to be again, it's going to be Linux, we're gonna choose DAX here.

3555
04:57:18,560 --> 04:57:22,640
And this one is going to be Jed Zia DAX.

3556
04:57:24,400 --> 04:57:30,960
And we this time around, we're going to choose Ubuntu server LTS.

3557
04:57:30,960 --> 04:57:32,600
So this one's a minimal install.

3558
04:57:32,600 --> 04:57:36,000
And this one here has a bit more to it, we're going to choose Gen.

3559
04:57:36,000 --> 04:57:36,400
two.

3560
04:57:37,360 --> 04:57:40,160
This is now $4.86, which is strange.

3561
04:57:40,160 --> 04:57:41,560
It looks like it was the same one before.

3562
04:57:41,560 --> 04:57:43,280
I don't know why the other one was still more expensive.

3563
04:57:43,680 --> 04:57:45,840
Because I swore it said $40, but maybe I was mistaken.

3564
04:57:46,000 --> 04:57:48,000
The red means nothing as per usual.

3565
04:57:48,000 --> 04:57:49,640
It's just Azure tricking us.

3566
04:57:49,640 --> 04:57:53,680
We're going to call the username here DAX testing with a capital TESTING.

3567
04:57:54,320 --> 04:57:56,720
You know what I'm trying to say here.

3568
04:57:57,280 --> 04:58:00,960
And I'm going to do testing 1, 2, 3, 4, 5, 6.

3569
04:58:02,320 --> 04:58:04,560
And we will go next to disks.

3570
04:58:04,800 --> 04:58:06,200
We'll stick with premium for this time.

3571
04:58:06,200 --> 04:58:07,360
It doesn't really matter.

3572
04:58:07,600 --> 04:58:10,800
If we go to advanced here, there's no interesting options there.

3573
04:58:12,480 --> 04:58:14,240
This is all fine.

3574
04:58:14,240 --> 04:58:15,200
This looks good.

3575
04:58:16,720 --> 04:58:17,520
We go to management.

3576
04:58:17,520 --> 04:58:22,240
So now notice here, so we didn't have it for the minimal install, but for this one, we do.

3577
04:58:22,240 --> 04:58:24,240
We can actually put in the guest OS.

3578
04:58:24,640 --> 04:58:34,400
diagnostics, and what it will do is it will have to create itself a storage account, so that will be in Azure Storage to store our diagnostic data.

3579
04:58:34,880 --> 04:58:37,200
And so that seems like a good idea to me.

3580
04:58:38,160 --> 04:58:47,280
So what we'll do is we're going to go to next, but notice we didn't have it for the minimal install, probably because it doesn't have the agent, what's called the WAG agent installed.

3581
04:58:47,920 --> 04:58:49,440
for it to do that by default.

3582
04:58:49,440 --> 04:58:51,520
So just notice that it varies on some machines.

3583
04:58:51,760 --> 04:58:54,800
We're going to go to Next, we're going to hit Review and Create.

3584
04:58:58,320 --> 04:58:59,160
And we're not done yet.

3585
04:58:59,160 --> 04:59:00,720
We're going to create one more virtual machine.

3586
04:59:00,720 --> 04:59:02,160
And this time it's going to be a Windows.

3587
04:59:02,160 --> 04:59:11,680
Once I hit the Create button here, we're going to go back to virtual machines.

3588
04:59:11,680 --> 04:59:14,040
And this time I'm going to launch a Windows machine.

3589
04:59:14,040 --> 04:59:19,040
And I'm going to use, we're going to put in the same group here, I'm going to call this one

3590
04:59:19,760 --> 04:59:22,560
Tobin or let's call it Lila DAX here.

3591
04:59:23,840 --> 04:59:26,440
And this time I'm going to choose a Windows Server.

3592
04:59:26,440 --> 04:59:27,840
So I'm going to go to Windows Server here.

3593
04:59:27,840 --> 04:59:29,040
We have a lot of options.

3594
04:59:29,200 --> 04:59:30,720
I'm not that great with Windows servers.

3595
04:59:30,720 --> 04:59:33,200
I'm going to choose a Gen.

3596
04:59:33,200 --> 04:59:35,680
2 Windows Server here.

3597
04:59:35,680 --> 04:59:38,080
It's not going to let us get away with this B1L.

3598
04:59:38,080 --> 04:59:39,200
It's not big enough.

3599
04:59:39,520 --> 04:59:41,280
You need a lot more compute and memory.

3600
04:59:41,280 --> 04:59:46,880
I think it's like 2 and 4, but I just remember to always choose DS2V2.

3601
04:59:47,640 --> 04:59:48,800
which is pretty hefty.

3602
04:59:48,800 --> 04:59:49,760
It's pretty expensive.

3603
04:59:49,760 --> 04:59:53,120
Maybe I could choose something cheaper, like the DS1.

3604
04:59:54,160 --> 04:59:56,640
No, I need to, I need to CPUs.

3605
04:59:56,640 --> 04:59:59,920
So DS2v3, that's when you're launching a Windows Server.

3606
05:00:00,120 --> 05:00:01,520
If you don't do that, they'll complain.

3607
05:00:02,200 --> 05:00:07,280
And that'll probably be pretty darn expensive, but we got to make sure that we just shut this off and get through this as quick as possible.

3608
05:00:07,800 --> 05:00:09,280
I'm going to choose the same thing as always.

3609
05:00:09,280 --> 05:00:10,880
So I'm going to put in DAX.

3610
05:00:11,240 --> 05:00:21,840
And then for the password, I'm going to do testing, 123, capital on that T, 456, testing, 123456, because it wants 12 characters.

3611
05:00:21,840 --> 05:00:23,520
We're going to let it do on the RDP.

3612
05:00:23,520 --> 05:00:24,560
That's totally fine.

3613
05:00:25,360 --> 05:00:26,560
Sure, premium SSD.

3614
05:00:26,560 --> 05:00:28,480
We're not going to keep this around for very long.

3615
05:00:29,160 --> 05:00:31,360
We're going to scroll on down, go to management.

3616
05:00:31,880 --> 05:00:34,640
And notice that you can enable OS diagnostics here.

3617
05:00:34,640 --> 05:00:35,920
I'm not going to do that here.

3618
05:00:36,080 --> 05:00:39,520
Just so I can show you show you it in the other variation.

3619
05:00:39,840 --> 05:00:42,800
We're going to go to next, we're going to go hit review and create.

3620
05:00:42,800 --> 05:00:47,520
And we're going to go ahead and create this instance whenever it lets us do it.

3621
05:00:48,160 --> 05:00:48,800
There we go.

3622
05:00:49,480 --> 05:00:50,400
Okay, we'll hit create.

3623
05:00:52,320 --> 05:00:53,920
And now it's deploying.

3624
05:00:53,920 --> 05:00:57,520
So we have these three virtual machines we're creating.

3625
05:00:57,800 --> 05:01:00,880
And so what I'm going to do is make my way back to virtual machines here.

3626
05:01:01,480 --> 05:01:02,560
And so I have the two there.

3627
05:01:02,560 --> 05:01:05,120
I'm going to give it a refresh, make sure I can see the third one creating.

3628
05:01:05,760 --> 05:01:07,920
We don't see it just yet, but these ones are running.

3629
05:01:08,320 --> 05:01:11,040
So what I'm going to do is open up Curzon.

3630
05:01:11,040 --> 05:01:12,320
I'm going to open up Jedzia.

3631
05:01:12,800 --> 05:01:17,960
And one has the guest, the guest or the.

3632
05:01:19,000 --> 05:01:19,600
what's it called?

3633
05:01:19,680 --> 05:01:20,680
Diagnostic settings.

3634
05:01:20,680 --> 05:01:23,280
It's the guest metrics installed, and the other one does not.

3635
05:01:23,280 --> 05:01:29,680
So if I scroll down here, so I just want to show you, there's a lot of variation, and sometimes, you know, you do it one way, it works, another way, it doesn't.

3636
05:01:29,840 --> 05:01:31,960
So for Jedzia, it was installed on default.

3637
05:01:31,960 --> 05:01:34,800
So that's the one that is using Ubuntu standard.

3638
05:01:35,560 --> 05:01:40,320
And then this is the minimal install, where it's saying, hey, do you want to install the metrics?

3639
05:01:40,320 --> 05:01:41,560
And you have to pick a storage account.

3640
05:01:41,560 --> 05:01:44,000
If you didn't, then you would have the option to create one.

3641
05:01:44,320 --> 05:01:45,840
Here it's called DAX.

3642
05:01:46,320 --> 05:01:46,520
DIAG.

3643
05:01:46,520 --> 05:01:53,120
So I just want to show you, we're going to go ahead and enable those guest level monitoring metrics.

3644
05:01:53,280 --> 05:01:53,600
Okay.

3645
05:01:55,200 --> 05:01:59,120
So we have a storage account and that's where the data is going to go.

3646
05:02:00,400 --> 05:02:04,440
And this will probably fail because I don't think it has the necessary things installed.

3647
05:02:04,440 --> 05:02:06,240
I just wanted to show you could do it that way.

3648
05:02:07,040 --> 05:02:13,840
But what the other thing we're going to need is we're going to need a log analytics workspace.

3649
05:02:15,360 --> 05:02:19,360
So all a log analytics workspace is a place to store your logs.

3650
05:02:19,440 --> 05:02:22,480
It is essentially a data lake for a lot of different resources.

3651
05:02:22,480 --> 05:02:24,480
So you can put all sorts of resources under here.

3652
05:02:24,840 --> 05:02:27,760
And that way you can search across them, see how this failed.

3653
05:02:28,360 --> 05:02:37,840
If you ever have a failure like this, the way you'd investigate this as you go in here, and even though it says a SAS token for the storage account couldn't generate, it's kind of a misleading thing here.

3654
05:02:38,080 --> 05:02:42,320
Because if I actually click in up into my notifications, we go to our activity log.

3655
05:02:42,880 --> 05:02:45,440
we can see kind of what something has happened here.

3656
05:02:45,440 --> 05:02:47,360
So I know this failed.

3657
05:02:49,680 --> 05:02:50,960
It might not show up here yet.

3658
05:02:51,200 --> 05:02:52,480
Sometimes it takes time to show up.

3659
05:02:53,600 --> 05:02:57,600
So we'll revisit this later, but it would show red errors here.

3660
05:02:58,000 --> 05:03:02,480
And if we looked into there, it would tell us that Python's not installed on that machine because it's a minimal Linux install.

3661
05:03:02,480 --> 05:03:04,480
So if you run into those problems, that's the reason why.

3662
05:03:04,800 --> 05:03:07,200
Some VMs are a bit easier to work with than others.

3663
05:03:07,440 --> 05:03:08,960
But we're looking at log analytics.

3664
05:03:08,960 --> 05:03:10,640
And again, it's just a place to collect your logs.

3665
05:03:10,640 --> 05:03:11,680
But I want to see

3666
05:03:12,640 --> 05:03:17,280
because I think JetZ is the one that actually is the one that is working properly.

3667
05:03:17,600 --> 05:03:29,240
But if we go down to metrics or logs, it's going to say, hey, if you want to use logs, you're going to have to go ahead and create, you have to enable it.

3668
05:03:29,240 --> 05:03:32,200
But what it's really doing is it's creating a log analytics workspace.

3669
05:03:32,200 --> 05:03:35,920
So if I click this here, what it's going to tell me is say, hey, you don't have one.

3670
05:03:35,920 --> 05:03:37,680
We'll create a default one for you.

3671
05:03:38,640 --> 05:03:39,560
I don't want to do it that way.

3672
05:03:39,560 --> 05:03:41,600
What I want to do is create one myself.

3673
05:03:42,080 --> 05:03:43,360
and then link it through there.

3674
05:03:43,360 --> 05:03:45,520
Or what I could do is make it through automation.

3675
05:03:45,760 --> 05:03:50,880
So what I'm going to do is, I think what I'm going to do is I'm going to do through automation.

3676
05:03:51,520 --> 05:03:54,160
So there's another service called automation accounts.

3677
05:03:54,160 --> 05:03:57,920
And this particular service is for configuration management, update management.

3678
05:03:58,240 --> 05:04:01,040
And it's a way for us to keep our VMs up to date.

3679
05:04:01,640 --> 05:04:03,440
And so this one's going to be called DAX.

3680
05:04:04,080 --> 05:04:06,240
Oh, it's too short, doesn't like that DAX automation.

3681
05:04:08,080 --> 05:04:10,960
And I'm going to choose the resource group DAX, it's ES,

3682
05:04:11,600 --> 05:04:15,360
East US, and here it's going to say Azure run as account.

3683
05:04:15,360 --> 05:04:22,960
So this is going to give it more permission so that it can run as a contributor role, and that way it will have access to resources to do what it wants to do.

3684
05:04:23,360 --> 05:04:25,000
So we'll go ahead and deploy that.

3685
05:04:25,000 --> 05:04:34,720
And then once this is deployed, we'll create our workspace through this, because I found an issue where if I made this and tried to link it, just didn't link, and I don't want to have those problems.

3686
05:04:35,560 --> 05:04:38,480
So I'm just going to make my life a little bit easier by making it through here.

3687
05:04:38,880 --> 05:04:49,680
So under here, if we go to update management, it's going to say, hey, you need a workspace in order to use update management, if you want to update management is it keeps your VMs up to date by applying patches.

3688
05:04:50,240 --> 05:04:53,560
So if we drop down here, we're just going to go ahead and create a new workspace.

3689
05:04:53,560 --> 05:04:58,160
And I'm going to do it that way, because it'll be automatically associated with that workspace on creation.

3690
05:05:02,400 --> 05:05:04,960
And we'll let that go there for a bit.

3691
05:05:04,960 --> 05:05:17,200
But while that's setting up a new workspace for us, if you go over to runbooks, this is the power of, well, I'm not, I'm not, it wants to make that thing there.

3692
05:05:17,200 --> 05:05:18,360
So I'm just going to click OK there.

3693
05:05:18,360 --> 05:05:19,440
Don't worry about that discard.

3694
05:05:19,920 --> 05:05:23,840
But the whole power of this is that it can apply patches.

3695
05:05:23,840 --> 05:05:26,160
It can manage the state of your VMs.

3696
05:05:26,720 --> 05:05:28,160
But if you need to do something,

3697
05:05:29,440 --> 05:05:32,480
like run something, like a series of run commands.

3698
05:05:33,280 --> 05:05:35,760
They have a bunch of different runbooks here.

3699
05:05:36,560 --> 05:05:39,920
So there's a variety of different kinds, and I think we can click into them.

3700
05:05:39,920 --> 05:05:44,800
There was something about SQL that sounded kind of how to use an SQL command on an automation runbook.

3701
05:05:45,680 --> 05:05:48,160
So yeah, it's just a runbook.

3702
05:05:48,160 --> 05:05:53,040
So runbook just means like a series of run commands, something that you're automating on your server, and you do it through here.

3703
05:05:54,080 --> 05:05:56,800
So update management looks like it is now working.

3704
05:05:57,520 --> 05:05:59,040
We didn't press that enable button.

3705
05:05:59,520 --> 05:06:01,040
initially, but it worked there.

3706
05:06:01,440 --> 05:06:05,760
But if we wanted to have VMs under here, we'd have to go ahead and add them manually.

3707
05:06:06,600 --> 05:06:09,040
And so we're just going to wait for those to show up.

3708
05:06:10,080 --> 05:06:18,800
Alternatively, if we go back to our server, or sorry, one of our VMs, we should be able to add it this way, or it'll just tell us to go that way anyway.

3709
05:06:19,360 --> 05:06:21,760
So there should be like update management or something in here.

3710
05:06:22,640 --> 05:06:24,160
Could be configuration management.

3711
05:06:28,640 --> 05:06:30,520
that still would be through something, right?

3712
05:06:30,520 --> 05:06:32,400
So it'd probably be still through automation.

3713
05:06:33,520 --> 05:06:36,400
But I could have swore there was, maybe it's guest and host updates.

3714
05:06:37,200 --> 05:06:39,680
Yeah, so here it's just saying go to Azure Automation.

3715
05:06:39,680 --> 05:06:41,680
So you don't really set it through here.

3716
05:06:41,680 --> 05:06:45,040
You have to associate it through Azure Automation.

3717
05:06:45,520 --> 05:06:47,120
And so these are ready to enable.

3718
05:06:47,120 --> 05:06:49,120
So I'm going to say go ahead and enable those.

3719
05:06:49,280 --> 05:06:50,800
I don't know where our Windows server is.

3720
05:06:50,800 --> 05:06:52,000
We definitely spun one up.

3721
05:06:52,240 --> 05:06:53,520
It's not a big deal if we don't have it.

3722
05:06:53,520 --> 05:06:56,880
It's not really crucial to this tutorial, but it would have been nice to show

3723
05:06:57,760 --> 05:06:58,640
the Windows 10.

3724
05:06:58,640 --> 05:07:01,520
There, I'm gonna go see what happened to our Windows Server.

3725
05:07:01,520 --> 05:07:02,000
Oh, it is there.

3726
05:07:02,000 --> 05:07:02,880
Okay, Lila's there.

3727
05:07:03,840 --> 05:07:05,600
So we'll take a look at that in a second.

3728
05:07:06,240 --> 05:07:10,960
But we're just adding those there, we're not going to really apply any passes, I just want to show you how to associate them there.

3729
05:07:11,240 --> 05:07:14,560
And just to highlight the fact that there are runbooks, which are pretty cool.

3730
05:07:14,920 --> 05:07:22,880
And you can also do other things like if you need to, like install Python packages or stuff like that, to do stuff, you could do that as well.

3731
05:07:24,160 --> 05:07:29,760
So there's a bunch of interesting things in there, but it's kind of like a side dish to the follow along here.

3732
05:07:29,760 --> 05:07:32,040
So this would have created our workspace.

3733
05:07:32,040 --> 05:07:33,840
So now let's go over to our workspaces.

3734
05:07:36,400 --> 05:07:37,200
And we have one here.

3735
05:07:37,200 --> 05:07:40,640
And if you're just curious what it looks like if we go here, there's nothing super exciting.

3736
05:07:40,640 --> 05:07:43,680
You just put the name and region in and it has the default pay as you go.

3737
05:07:44,080 --> 05:07:48,080
So you're not really missing out on creating one by hand there.

3738
05:07:48,720 --> 05:07:49,760
But underneath here,

3739
05:07:50,440 --> 05:07:55,000
What we can do is see if our virtual machines are actually associated with this here.

3740
05:07:55,000 --> 05:08:02,200
So if we go under virtual machine, you're going to see that these ones are connecting, which is interesting because I didn't do anything to connect them.

3741
05:08:02,200 --> 05:08:05,120
I'm not sure why that's happening, but I'm going to hit connect here.

3742
05:08:06,200 --> 05:08:07,000
And that will connect that.

3743
05:08:07,000 --> 05:08:09,280
A lot of times I'll come in here, I have to manually connect them.

3744
05:08:09,280 --> 05:08:15,040
I don't know if it's because we put them in the, what do you call it, within the automation there.

3745
05:08:15,040 --> 05:08:18,600
If we go back to automation, which ones did I choose?

3746
05:08:18,600 --> 05:08:19,280
I already forgot.

3747
05:08:20,320 --> 05:08:21,200
Update management.

3748
05:08:21,200 --> 05:08:27,760
They're not showing up here now, but I know they're there.

3749
05:08:30,240 --> 05:08:31,760
Maybe we triggered it when we were doing there.

3750
05:08:31,760 --> 05:08:41,360
But anyway, the point is that you have to make sure that those are configured so that it's actually sending data over to the workspaces so that we can then use the logs and things like that.

3751
05:08:42,800 --> 05:08:48,000
So if we go back to our virtual machines over here, you can see they're connecting.

3752
05:08:48,000 --> 05:08:49,600
This takes forever.

3753
05:08:50,200 --> 05:08:53,440
While this is going, let's go take a look at storage accounts.

3754
05:08:54,080 --> 05:08:57,920
And actually a better way would just be to go look at the virtual machine individually here.

3755
05:08:59,280 --> 05:09:02,080
So we'll just go back to my virtual machines and I go to the resource group.

3756
05:09:02,800 --> 05:09:06,320
We scroll on down here, we should see a storage account within here.

3757
05:09:07,360 --> 05:09:08,720
Let's just type in storage.

3758
05:09:10,240 --> 05:09:10,800
There it is.

3759
05:09:11,360 --> 05:09:11,680
Whoops.

3760
05:09:13,440 --> 05:09:17,120
And the thing is, that we can actually view some of the data in here.

3761
05:09:17,120 --> 05:09:19,800
So if you go to Open Explorer, you'd have to install this.

3762
05:09:19,800 --> 05:09:20,640
It's for Windows.

3763
05:09:20,640 --> 05:09:22,400
I don't, I think it's for Mac as well.

3764
05:09:22,880 --> 05:09:26,880
But once you have the Storage Explorer open, you can just click Open here.

3765
05:09:28,240 --> 05:09:31,120
And it'll open up once it's installed on your computer, of course.

3766
05:09:32,160 --> 05:09:41,840
And what I can do, if we have any data, it might not be collecting any data yet, but if we go down to our storage accounts here, oh, here it is down below.

3767
05:09:42,480 --> 05:09:44,240
and expand it under tables.

3768
05:09:44,480 --> 05:09:50,680
So he has this WAD, that is the name of the agent that is collecting data.

3769
05:09:50,680 --> 05:09:52,880
And here you can see that it's already collecting stuff.

3770
05:09:53,440 --> 05:09:53,840
All right.

3771
05:09:55,080 --> 05:09:56,880
And it's collecting for Jetzia DAX.

3772
05:09:58,000 --> 05:10:02,000
And so I'm just kind of looking at the data that it's collecting, nothing super interesting.

3773
05:10:02,320 --> 05:10:07,440
But the thing is, is that we're going to make our way over to logs because by default,

3774
05:10:09,280 --> 05:10:19,520
Azure collects host metrics, so things about the instance like CPU usage, but there's things that it doesn't collect, like memory and other things like that.

3775
05:10:19,920 --> 05:10:27,360
So that's why we need to turn on this setting here, the diagnostic settings, so we can collect those metrics.

3776
05:10:27,360 --> 05:10:28,680
These are called guest metrics.

3777
05:10:28,680 --> 05:10:32,160
So we have memory, network, file disk, disk, and storage.

3778
05:10:32,160 --> 05:10:33,280
So if you wanted to know

3779
05:10:33,680 --> 05:10:43,040
how much storage was left on the actual disk with the virtual machine or how much memory was being used, you'd need that set up here.

3780
05:10:43,840 --> 05:10:50,160
Once this is enabled, you can send data over into Azure Monitor and other places.

3781
05:10:50,400 --> 05:10:57,200
It's not showing app analytics, I think that's for, or log insight, whatever the name of the service is, it's for

3782
05:10:58,000 --> 05:11:00,560
That one, I think, is for the Windows one, so we'll see that when we go over there.

3783
05:11:00,560 --> 05:11:07,680
But syncs just means we're going to send data from here to Azure Monitor, right?

3784
05:11:08,480 --> 05:11:10,160
But we'd have to have preview to see that.

3785
05:11:11,120 --> 05:11:12,720
Nothing that interesting here.

3786
05:11:13,120 --> 05:11:17,360
But if we go over to logs now, this should not be showing up here anymore.

3787
05:11:17,840 --> 05:11:21,280
So if this is still showing an enable screen, then we've got to go back to

3788
05:11:22,080 --> 05:11:27,600
our log analytics, we'll click into here, we'll go down to virtual machines, and we'll see if it's connected yet.

3789
05:11:27,600 --> 05:11:29,040
So it still says it's connecting, right?

3790
05:11:29,760 --> 05:11:30,720
This one's ready, though.

3791
05:11:31,840 --> 05:11:33,440
And I haven't even done anything with that one yet.

3792
05:11:33,440 --> 05:11:44,400
So what we'll do while we're waiting for these Linux ones to spin up, we'll go back over here to our virtual machines, and we'll go find that Windows machine, which I don't know why it's not showing up here.

3793
05:11:45,280 --> 05:11:45,840
There it is.

3794
05:11:46,560 --> 05:11:48,800
And what we'll do is we'll go ahead and connect to it.

3795
05:11:49,680 --> 05:11:50,800
So I am on a...

3796
05:11:52,080 --> 05:11:52,800
Windows machine.

3797
05:11:52,800 --> 05:11:56,080
So I'm going to shape here, and I'm going to click on RDP.

3798
05:11:57,600 --> 05:11:58,880
And I'm going to download that file.

3799
05:12:00,000 --> 05:12:02,080
I'm going to double click this file on my Windows machine.

3800
05:12:02,960 --> 05:12:04,960
And I'll be able to open this up instantly.

3801
05:12:04,960 --> 05:12:11,360
It was called DAX testing 123, whoops, testing 123456.

3802
05:12:13,200 --> 05:12:13,760
Looks good to me.

3803
05:12:13,760 --> 05:12:14,480
We'll hit OK.

3804
05:12:15,040 --> 05:12:15,840
We'll say yes.

3805
05:12:17,120 --> 05:12:19,280
Because if you want to collect

3806
05:12:22,080 --> 05:12:28,640
particular metrics, the guest metrics, you have to enable, like when you're on Windows Server, you have to enable it to send performance counters.

3807
05:12:30,480 --> 05:12:31,560
So I'll give it a moment here.

3808
05:12:31,560 --> 05:12:32,640
It doesn't take too long.

3809
05:12:38,760 --> 05:12:47,120
While that's going, we should look to see if we actually have the settings set up here, the diagnostic settings.

3810
05:12:47,480 --> 05:12:50,320
And so this is what I'm talking about, the enable guest level monitoring.

3811
05:12:50,800 --> 05:12:52,840
So we want CPU utilization, disk, and network.

3812
05:12:52,840 --> 05:12:54,240
So we'll go ahead and click that there.

3813
05:12:57,120 --> 05:13:01,280
And while that's going to go back here, and so this has now started up.

3814
05:13:02,080 --> 05:13:09,840
I don't know much about Windows servers, but I do know how to turn on, at least the last time I did, I know how to turn on the performance counter.

3815
05:13:09,840 --> 05:13:12,720
So see here it says online performance counters are not started.

3816
05:13:12,960 --> 05:13:17,560
So I can right click this and then just say start performance counters.

3817
05:13:17,560 --> 05:13:21,120
And that will have it start sending data over to our storage accounts.

3818
05:13:21,600 --> 05:13:23,600
assuming that this is enabled here.

3819
05:13:23,600 --> 05:13:30,000
So this is going to go ahead and install WAG into the Windows Server so it can send back metrics.

3820
05:13:32,320 --> 05:13:35,760
And so we've got a lot of things going on here, but let's go back to JetZia.

3821
05:13:37,040 --> 05:13:42,000
And I want to see now if I have any, if I can use logs now.

3822
05:13:43,840 --> 05:13:44,320
There we go.

3823
05:13:44,320 --> 05:13:47,600
So it's now connected to the workspace, so it knows where to send that data.

3824
05:13:48,160 --> 05:13:52,480
And you can pull up, when you go to logs, it'll show different types of default queries.

3825
05:13:52,720 --> 05:13:58,800
If you're in the actual group here, you'll have the same screen, but it'll show you across all possible resources.

3826
05:13:58,800 --> 05:14:04,880
So it's a little bit easier to figure out like useful queries for virtual machines when you do it through here.

3827
05:14:05,520 --> 05:14:08,080
And there's some ones, there's some that we can run right away.

3828
05:14:08,080 --> 05:14:13,840
So if we go over to the diagnostics,

3829
05:14:14,640 --> 05:14:16,400
We could or actually availability is a good example.

3830
05:14:16,400 --> 05:14:20,160
So heartbeats will tell you if the server is live.

3831
05:14:20,160 --> 05:14:21,600
So a server will have heartbeats.

3832
05:14:21,600 --> 05:14:25,920
So every whatever second or minute, it's going to say, hey, I'm still alive.

3833
05:14:25,920 --> 05:14:27,040
That's what a heartbeat is.

3834
05:14:27,520 --> 05:14:28,880
So we'll go ahead and run that.

3835
05:14:31,680 --> 05:14:32,880
And we'll give it a moment here.

3836
05:14:32,880 --> 05:14:33,840
I'm not sure why it's crying.

3837
05:14:38,560 --> 05:14:39,120
That doesn't work.

3838
05:14:39,120 --> 05:14:40,640
I'll just click off and try that again.

3839
05:14:42,240 --> 05:14:43,680
So go back to availability.

3840
05:14:43,680 --> 05:14:44,480
We'll hit run.

3841
05:14:51,150 --> 05:14:52,270
And it has the right scope.

3842
05:14:52,270 --> 05:14:55,150
If you're wondering how it knows what to check, that's all based on scope there.

3843
05:14:56,230 --> 05:14:59,230
And for whatever reason, it just decides that it doesn't really want to run right now.

3844
05:15:00,990 --> 05:15:02,030
That's a bit frustrating.

3845
05:15:02,350 --> 05:15:06,030
But if it's not working for this one, we can always check our other one, which is curzon.

3846
05:15:06,830 --> 05:15:08,590
And we can go see if this one works.

3847
05:15:08,670 --> 05:15:12,190
That's why I made multiple servers, because I knew one of these might not work right away.

3848
05:15:12,910 --> 05:15:14,590
So we'll go ahead and run this one here.

3849
05:15:20,880 --> 05:15:22,400
It says no logs are configured.

3850
05:15:22,400 --> 05:15:28,880
So that makes me think that our workspace here, if we go back over to here and we go down to virtual machines, that they're actually not linked.

3851
05:15:29,600 --> 05:15:30,800
Oh, they still are connecting.

3852
05:15:30,800 --> 05:15:31,280
There you go.

3853
05:15:31,280 --> 05:15:32,640
So it's a bit misleading.

3854
05:15:32,960 --> 05:15:34,960
It looked like we could query, but we still can't.

3855
05:15:36,080 --> 05:15:40,320
Let's go take a look at this virtual machine here, our Lila one still.

3856
05:15:42,040 --> 05:15:43,520
Now let's see if we can do anything with it yet.

3857
05:15:46,480 --> 05:15:48,080
So if we go down to

3858
05:15:50,240 --> 05:15:51,360
Diagnostic settings.

3859
05:15:52,720 --> 05:15:53,960
It looks like it's installed.

3860
05:15:53,960 --> 05:15:57,760
And so if we go to performance counters, these are the counters that it should be collecting data on.

3861
05:15:58,000 --> 05:16:02,640
You could do custom if you want and change those values, but we're just going to leave it basic for the time being.

3862
05:16:03,520 --> 05:16:04,400
Go ahead and save that.

3863
05:16:05,440 --> 05:16:07,920
And I believe we can do logs over here on this one.

3864
05:16:08,000 --> 05:16:09,520
So we'll go over to availability.

3865
05:16:09,520 --> 05:16:12,080
I'm going to load that into the editor this time instead of hitting run.

3866
05:16:12,400 --> 05:16:13,280
I can hit run.

3867
05:16:13,680 --> 05:16:16,240
And it will return and says that it has a count of seven.

3868
05:16:16,240 --> 05:16:18,240
So 7 heartbeats, that's good.

3869
05:16:19,520 --> 05:16:22,400
If you want to create rules, you could easily do that.

3870
05:16:22,400 --> 05:16:24,120
There's actually some nice ones here.

3871
05:16:24,120 --> 05:16:32,560
If we go into here, this won't work unless our metrics are working, our guess metrics.

3872
05:16:33,600 --> 05:16:35,680
But there's a bunch down below here.

3873
05:16:35,680 --> 05:16:39,120
I'm just trying to see one that might be interesting for us to set.

3874
05:16:40,960 --> 05:16:43,360
So you might go here and

3875
05:16:45,680 --> 05:16:46,720
I don't think I like that one.

3876
05:16:50,160 --> 05:16:52,400
Say this one here, I'm just gonna clear this all the way out.

3877
05:16:54,560 --> 05:16:54,960
Oops.

3878
05:16:56,240 --> 05:16:59,520
So here, they even say to create this alert, just hit the plus new button here.

3879
05:16:59,520 --> 05:17:00,160
So we go here.

3880
05:17:01,600 --> 05:17:05,920
And sometimes it does this, it doesn't actually bring it over, which is weird.

3881
05:17:05,920 --> 05:17:06,960
So you have to go back.

3882
05:17:08,720 --> 05:17:12,400
I told you like this, the UI for Azure is super, super buggy.

3883
05:17:13,120 --> 05:17:16,960
So if you don't have any confidence, don't worry, it happens to all of us.

3884
05:17:19,440 --> 05:17:24,680
So we'll go back to our alerts, and I'm going to load that into the editor.

3885
05:17:24,680 --> 05:17:26,480
And what I'm going to do is just copy it.

3886
05:17:30,160 --> 05:17:37,120
And we're going to go ahead and hit run.

3887
05:17:39,520 --> 05:17:42,320
And so here we're getting some data back.

3888
05:17:42,320 --> 05:17:44,400
I think it's going to complain about the time generated.

3889
05:17:44,400 --> 05:17:50,480
But if we go and create a new alert, oh, man, it just does not want to copy anything over.

3890
05:17:51,200 --> 05:17:55,280
And so it's like I can't even paste.

3891
05:17:56,560 --> 05:17:57,600
We'll go back to here.

3892
05:17:57,600 --> 05:18:00,400
I'm going to copy this.

3893
05:18:00,800 --> 05:18:02,240
I noticed it was because I had it double clicked.

3894
05:18:02,240 --> 05:18:04,960
Maybe it just creates one that you have selected.

3895
05:18:06,040 --> 05:18:08,560
And so it should complain about this, but it's not.

3896
05:18:08,560 --> 05:18:09,280
So that's great.

3897
05:18:09,720 --> 05:18:13,120
And so we can go here and we can put a threshold to five.

3898
05:18:13,680 --> 05:18:16,720
Just put in any value here and that gives you a monthly cost for that alert.

3899
05:18:16,720 --> 05:18:18,000
So you hit review and create.

3900
05:18:20,560 --> 05:18:22,240
Please correct the following details.

3901
05:18:23,520 --> 05:18:24,000
Where?

3902
05:18:28,160 --> 05:18:28,960
Oh, the alert name.

3903
05:18:28,960 --> 05:18:30,560
Okay, my alert.

3904
05:18:33,000 --> 05:18:34,480
And we will hit review and create.

3905
05:18:35,040 --> 05:18:35,760
We'll hit create.

3906
05:18:38,360 --> 05:18:39,520
And so there we can create an alert.

3907
05:18:39,520 --> 05:18:44,400
So we can create an alert like our memory is running out of stuff, and those are kind of useful things to do.

3908
05:18:45,520 --> 05:18:49,760
So talking about metrics, we're going to make our way over here.

3909
05:18:50,160 --> 05:18:52,440
And notice we have host metrics and guest metrics.

3910
05:18:52,440 --> 05:18:58,080
So host metrics are general ones that are available to us, and guest metrics are memory and stuff like that.

3911
05:18:58,960 --> 05:18:59,840
So if we have that,

3912
05:19:00,120 --> 05:19:02,880
You're going to notice now we have disk and memory and things like that.

3913
05:19:02,880 --> 05:19:06,240
If we didn't have that installed, we wouldn't be able to access this information.

3914
05:19:06,880 --> 05:19:09,600
So what I can do is go ahead here and try disk time.

3915
05:19:09,760 --> 05:19:13,600
I don't know if it'll show us anything right now because it might have not collected enough information.

3916
05:19:13,920 --> 05:19:15,360
Go over to a virtual host.

3917
05:19:16,240 --> 05:19:17,680
We'll have different metrics here.

3918
05:19:17,920 --> 05:19:20,080
So a standard one would be like CPU usage.

3919
05:19:21,400 --> 05:19:24,560
Okay, so that one is displaying there.

3920
05:19:25,000 --> 05:19:27,600
The poor performance metrics always take a little bit more time to collect.

3921
05:19:27,600 --> 05:19:29,920
So I'm not sure if I'll stick around to show you that.

3922
05:19:29,920 --> 05:19:37,080
But if we go over to availability, sometimes when you need to go debug performance, like you can hit run.

3923
05:19:37,080 --> 05:19:39,560
And this will tell you if it's actually collecting information.

3924
05:19:39,560 --> 05:19:41,360
So see right now, it shows me nothing.

3925
05:19:41,360 --> 05:19:45,120
So it hasn't collected anything for process, memory, or processor.

3926
05:19:45,520 --> 05:19:49,120
But if it did, then we could go and use these other ones down below here.

3927
05:19:49,120 --> 05:19:51,400
So we have free disk space.

3928
05:19:51,400 --> 05:19:54,560
So that's a really useful one to have, which we can't get metrics on that right now.

3929
05:19:55,320 --> 05:19:57,600
But that's what we've been trying to do is collect that information.

3930
05:19:57,600 --> 05:20:00,480
So let's go back to our workspace.

3931
05:20:01,760 --> 05:20:07,520
And what I'm going to do is take a look at our virtual machines that are connected.

3932
05:20:08,200 --> 05:20:09,520
And this one has an error.

3933
05:20:10,320 --> 05:20:11,600
And that's Kurzon.

3934
05:20:11,680 --> 05:20:18,960
And I'm not surprised because, again, it's a minimal Windows Linux instance, so probably couldn't install the agent.

3935
05:20:18,960 --> 05:20:20,320
So that's expected.

3936
05:20:20,400 --> 05:20:22,080
But I just wanted to show you that edge case.

3937
05:20:22,640 --> 05:20:33,560
If we go into the JetZero one, which is the one we were waiting for this entire time, we should hopefully be able to see some metrics.

3938
05:20:33,560 --> 05:20:44,560
So if we go down here and we choose guess metrics, I want something with memory here, like percentage.

3939
05:20:45,840 --> 05:20:48,240
Okay, so it's still not showing me anything, and that's fine.

3940
05:20:48,480 --> 05:20:55,440
If we're not getting any metrics, what we can do is we can go log into this instance and give it some data so that it does something, all right?

3941
05:20:55,920 --> 05:21:00,480
So what I'll do is go all the way up to the top here into my overview.

3942
05:21:00,880 --> 05:21:03,560
I'm going to copy this public IP address.

3943
05:21:03,560 --> 05:21:07,520
We're going to open up our cloud shell and make sure that it's in Bash, all right?

3944
05:21:09,360 --> 05:21:14,640
And we're going to type in SSH, DAX,

3945
05:21:15,200 --> 05:21:17,760
And then we're going to paste the IP address in.

3946
05:21:17,760 --> 05:21:18,480
We'll hit enter.

3947
05:21:18,880 --> 05:21:19,680
We'll say yes.

3948
05:21:20,320 --> 05:21:24,160
And the password is testing123456 with a capital T.

3949
05:21:27,760 --> 05:21:31,720
And what we can do here is we can install a tool called StressNG.

3950
05:21:32,040 --> 05:21:36,520
What that tool does is it will help us do stress testing.

3951
05:21:36,520 --> 05:21:39,280
And so that allows us to make some metrics.

3952
05:21:42,320 --> 05:21:44,240
So we'll go ahead and install that via Snap.

3953
05:21:45,040 --> 05:21:48,440
Snap is the new package manager for Ubuntu.

3954
05:21:48,440 --> 05:21:50,160
It used to be apt-get or apt.

3955
05:21:51,360 --> 05:21:53,040
And it doesn't take too long to install.

3956
05:22:02,790 --> 05:22:10,470
And while it's installing, I actually have a pre-made line here to check the memory or to fill up the memory.

3957
05:22:10,470 --> 05:22:13,670
I'm just going to go ahead and paste this line in.

3958
05:22:14,070 --> 05:22:21,030
So this is stress-ng VM bytes and it uses awk and it's going to do memory availability and it's going to fill it up to 90%.

3959
05:22:21,360 --> 05:22:23,200
So we want to have 90% memory usage.

3960
05:22:23,200 --> 05:22:24,400
I'm going to go hit enter.

3961
05:22:24,560 --> 05:22:25,840
I'm just going to let that run.

3962
05:22:26,080 --> 05:22:28,480
Now it's not outputting anything, but it definitely is running.

3963
05:22:28,480 --> 05:22:29,120
There we go.

3964
05:22:29,440 --> 05:22:31,000
And so we're just going to leave it there.

3965
05:22:31,000 --> 05:22:34,080
And so soon enough we should have some information.

3966
05:22:35,200 --> 05:22:36,800
And I think if I go there, yeah, it's still there.

3967
05:22:36,800 --> 05:22:37,360
So it's fine.

3968
05:22:38,640 --> 05:22:50,080
So now if we go over to down to our logs and we go back to

3969
05:22:50,520 --> 05:22:55,280
performance, and we just choose this one here.

3970
05:22:57,360 --> 05:22:58,480
We might see something now.

3971
05:22:59,760 --> 05:23:00,640
Again, it takes time.

3972
05:23:00,640 --> 05:23:02,960
See, now it looks in the 15-minute window here.

3973
05:23:04,560 --> 05:23:06,400
But I just want to see that it's collecting anything.

3974
05:23:06,560 --> 05:23:09,520
For me, it doesn't matter what it collects, just collects something for me, you know?

3975
05:23:10,240 --> 05:23:12,160
So I think it'll just take a little bit of time.

3976
05:23:12,360 --> 05:23:18,480
While we're doing that, we should make our way back over to our workspace because there's some other settings that are kind of interesting that I noticed.

3977
05:23:18,880 --> 05:23:24,240
If you go over to agent configuration, you can collect additional information over here.

3978
05:23:24,240 --> 05:23:27,360
So we have performance counters for Windows and Linux.

3979
05:23:27,600 --> 05:23:30,880
I think we have to set the memory one here if we want it to actually appear here.

3980
05:23:31,440 --> 05:23:37,480
So I don't know if there's a way to set all of them, but I'm going to just choose some here.

3981
05:23:37,480 --> 05:23:38,880
So I'm going to do memory used.

3982
05:23:44,320 --> 05:23:46,560
We'll do logical use space here.

3983
05:23:47,720 --> 05:23:49,520
We'll go here and do free space.

3984
05:23:49,520 --> 05:23:51,760
I think that might be the reason why it's not showing up for us.

3985
05:23:52,480 --> 05:23:53,840
Maybe process time here.

3986
05:23:56,800 --> 05:24:00,800
We did use memory, percentage of use space.

3987
05:24:01,800 --> 05:24:08,800
We will do reads and writes.

3988
05:24:10,240 --> 05:24:12,240
So here we have some for our Linux.

3989
05:24:14,800 --> 05:24:17,840
So I think if we set that, then we should be able to see some information.

3990
05:24:18,720 --> 05:24:21,160
Syslogs is just a type of logs that you can collect.

3991
05:24:21,160 --> 05:24:23,040
We're not going to look into those today.

3992
05:24:24,400 --> 05:24:26,880
But yeah, that's the management there.

3993
05:24:29,520 --> 05:24:31,960
We could also try setting some here, maybe one for memory.

3994
05:24:31,960 --> 05:24:35,760
I can't remember what the one for memory is called here because they do all of this kind of stuff.

3995
05:24:36,400 --> 05:24:38,800
Like Windows has so much stuff, I can't make sense of it.

3996
05:24:43,120 --> 05:24:46,000
I think we might want paged owls.

3997
05:24:47,280 --> 05:24:50,800
And page.

3998
05:24:52,560 --> 05:25:00,320
So when called there, bytes.

3999
05:25:00,320 --> 05:25:01,120
We'll give that a go.

4000
05:25:03,400 --> 05:25:05,920
And we'll see if that starts collecting information.

4001
05:25:07,520 --> 05:25:10,320
I'm going to go back over to here.

4002
05:25:11,600 --> 05:25:12,960
And oh, this is Kurzon.

4003
05:25:12,960 --> 05:25:14,160
That's the Windows machine.

4004
05:25:14,160 --> 05:25:16,480
We're going to go to the Linux machine here.

4005
05:25:16,840 --> 05:25:18,000
And we'll give it another go.

4006
05:25:18,960 --> 05:25:20,640
So we get anything this time around.

4007
05:25:23,360 --> 05:25:26,160
So we'll go back to performance.

4008
05:25:27,240 --> 05:25:28,880
We'll say what is being collected run.

4009
05:25:31,360 --> 05:25:31,600
Okay.

4010
05:25:31,640 --> 05:25:34,640
And so I think we're just going to have to wait a little bit.

4011
05:25:34,640 --> 05:25:38,200
So I'm just going to stop the video here and I'll see you back in maybe 1520 minutes.

4012
05:25:38,200 --> 05:25:38,400
Okay.

4013
05:25:39,520 --> 05:25:50,160
All right, so I'm still waiting here and I don't seem to be seeing any data, but that's okay because there's another way we can kind of approximate this and we don't have to wait forever, especially if you don't have a lot of time like me.

4014
05:25:50,960 --> 05:25:59,040
The thing is that Azure has a log analytics tutorial and within here, they have a demo environment that I'm very familiar with.

4015
05:25:59,440 --> 05:26:02,560
And so this can approximate exactly what I'm trying to show you here.

4016
05:26:02,560 --> 05:26:08,400
If you notice at the top here, it says Microsoft Azure Monitoring Logs Demo Log Blade.

4017
05:26:09,040 --> 05:26:15,840
So if we go to queries and we go down to virtual machines and we look at what data is being collected, we can hit run here.

4018
05:26:16,920 --> 05:26:20,200
And this is the kind of information we are trying to see, right?

4019
05:26:20,200 --> 05:26:22,320
This is what we want to see what it's actually collecting.

4020
05:26:23,400 --> 05:26:24,080
And that's okay.

4021
05:26:24,080 --> 05:26:25,760
We're not doing remote desktop anymore here.

4022
05:26:26,080 --> 05:26:31,280
And if we go to virtual memory available, we'll just clear that out there and run that.

4023
05:26:33,280 --> 05:26:35,520
This is kind of the information we're trying to find.

4024
05:26:35,520 --> 05:26:35,840
All right.

4025
05:26:35,840 --> 05:26:40,800
So I just wanted to show you that when you collect those metrics that you can run these queries.

4026
05:26:40,800 --> 05:26:43,040
And this is that language up there with Kusto.

4027
05:26:44,000 --> 05:26:45,080
And that's pretty much it.

4028
05:26:45,080 --> 05:26:46,240
That's all I really wanted to show you.

4029
05:26:46,240 --> 05:26:49,280
So let's go ahead and tear down all our stuff.

4030
05:26:49,600 --> 05:26:51,680
It's all self-contained within a resource group.

4031
05:26:51,680 --> 05:26:55,760
So what we can do is go to all resources in the top left corner there.

4032
05:26:56,080 --> 05:26:57,920
And we called it DAX.

4033
05:26:58,000 --> 05:27:02,240
So we can search for DAX here.

4034
05:27:02,240 --> 05:27:02,640
Whoops.

4035
05:27:04,400 --> 05:27:06,960
Actually, it's all over the place, we just click here into the name.

4036
05:27:08,320 --> 05:27:09,920
And we'll hit Delete resource group.

4037
05:27:11,760 --> 05:27:15,040
Type in DAX, have a lot of resources created for this one.

4038
05:27:15,040 --> 05:27:16,560
And there you go.

4039
05:27:16,560 --> 05:27:27,280
So yeah, hopefully that helps you understand those relationships between automation accounts where we can run runbooks, do patching, you know, stuff like that, install Python stuff.

4040
05:27:28,000 --> 05:27:29,120
You know, the fact that

4041
05:27:30,080 --> 05:27:48,480
Log analytics is basically a data lake for all your data, that you can create alerts, that you have metrics, you have guest OS metrics which collect those three values, the memory, the network, and the additional CPU information or disk space, and just the variance there so you don't get stuck.

4042
05:27:48,480 --> 05:27:49,120
So there you go.

4043
05:27:54,160 --> 05:27:58,400
Hey, this is Andrew Brown from Exam Pro, and we are looking at virtual machines for Azure Cheat Sheets.

4044
05:27:58,400 --> 05:27:59,360
So let's jump into it.

4045
05:27:59,360 --> 05:28:03,520
So Azure Virtual Machines allows you to create Linux and Windows virtual machines.

4046
05:28:03,520 --> 05:28:05,920
The size of the virtual machine is determined by the image.

4047
05:28:06,160 --> 05:28:09,760
The image defines the combination of VPCUs, memory, storage capacity.

4048
05:28:09,920 --> 05:28:12,720
The current limit on a prescription is 20 VMs per region.

4049
05:28:12,960 --> 05:28:14,720
VMs are billed at an hourly rate.

4050
05:28:14,960 --> 05:28:20,000
A single instance VM has an availability of 99.9% when all storage disks are premium.

4051
05:28:20,240 --> 05:28:23,160
Two instances deployed into availability set will give you 99.9%

4052
05:28:24,400 --> 05:28:25,600
availability.

4053
05:28:26,240 --> 05:28:28,640
You can attach multiple managed disks to an Azure VM.

4054
05:28:29,040 --> 05:28:39,760
When you launch an Azure Virtual Machine, other networking components will be either created or associated to your virtual machine, such as NSGs, interface cards, IPs, and VNet.

4055
05:28:40,000 --> 05:28:43,600
You can bring your own Linux by creating your own virtual hard disk.

4056
05:28:44,320 --> 05:28:54,320
Azure VM comes with a variety of sizes that are also optimized for specific use cases, and there's a lot of different ones here, so it's not super important, but I mean you should know the broad categories here.

4057
05:28:54,880 --> 05:29:05,840
Azure Compute Unit (ACU) provides a way of comparing CPU performance across Azure SKUs, and the standard one they're all benchmarked against is Standard A1.

4058
05:29:06,240 --> 05:29:07,360
All other SKUs.

4059
05:29:07,840 --> 05:29:14,160
then represent approximately how fast, faster the SKU can run on the standard benchmark.

4060
05:29:14,320 --> 05:29:17,920
You can install the Azure mobile app so you can monitor your VMs on the go.

4061
05:29:18,400 --> 05:29:21,920
Hyper-V is Microsoft's hardware virtualization product.

4062
05:29:21,920 --> 05:29:25,800
It lets you create and run software versions of a computer called virtual machines.

4063
05:29:25,800 --> 05:29:26,720
That's how it all works.

4064
05:29:26,880 --> 05:29:29,680
There are two types, or two generations of Hyper-VM.

4065
05:29:29,680 --> 05:29:36,800
You got generation one, which works with most operating systems, and generation 2 that supports most 64-bit versions of Windows and current.

4066
05:29:37,320 --> 05:29:56,800
Versions of Linux and FreeBSC operating systems, Hyper-V VMs are packaged into virtual hard disk formats such as VHD, VHDX files, not on the exam, but just understand that Hyper-VM generations are different from the Azure Hyper-VM generation, so it doesn't have all the features of Hyper-VM.

4067
05:29:56,800 --> 05:29:59,920
Okay, there are three ways to connect to virtual machines.

4068
05:30:00,040 --> 05:30:02,240
versus via secure shell.

4069
05:30:02,560 --> 05:30:05,520
It's not sure shell, it's secure shell.

4070
05:30:06,080 --> 05:30:08,720
But yeah, so that'll have to get fixed at some point.

4071
05:30:09,080 --> 05:30:15,840
SSH happens on port 22, and RSA key pairs are commonly used for authorized access.

4072
05:30:16,000 --> 05:30:21,040
Then you have RDP, which is a graphical interface to connect to another computer over the network connection.

4073
05:30:21,200 --> 05:30:24,800
This is how you can remotely connect to the Windows Server via virtual desktop.

4074
05:30:25,040 --> 05:30:28,560
This happens on port 3389 on TCP and UDP.

4075
05:30:28,560 --> 05:30:29,960
Now, I mark these

4076
05:30:30,080 --> 05:30:33,280
red because I want you to remember these two, so make sure them, okay?

4077
05:30:34,080 --> 05:30:37,600
Azure Bastions, and we'll clear that because now it's getting a bit of a mess here.

4078
05:30:38,640 --> 05:30:39,360
There we go.

4079
05:30:39,520 --> 05:30:54,400
So Azure Bastion, a service you can deploy, lets you connect to a virtual machine using your browser and Azure portal, supports both SSH and RDP, useful when you only have a browser like a Chromebook or do not have permission to configure or install software.

4080
05:30:54,640 --> 05:30:55,840
Then you have update management.

4081
05:30:55,840 --> 05:30:59,960
This allows you to manage and install operating system updates and patches for both Windows and Linux

4082
05:31:00,040 --> 05:31:04,000
Virtual machines that are deployed in Azure on-premise or in other cloud providers.

4083
05:31:04,160 --> 05:31:06,880
Update management will perform a scan or update compliance.

4084
05:31:07,160 --> 05:31:17,760
A compliance scan by default is performed every 12 hours on a Windows and three hours on a Linux machine that can take between 30 minutes and six hours for the dashboard to display updated data from the managed computer.

4085
05:31:17,760 --> 05:31:20,240
So there you go, that is the Virtual Machines Cheat Sheet.

4086
05:31:24,480 --> 05:31:29,840
Hey, this is Andrew Brown from ExamPro, and welcome to Azure Disks, a virtual hard drive in the cloud.

4087
05:31:30,320 --> 05:31:33,920
So, it's block-level storage volumes for SSD or HDD.

4088
05:31:35,360 --> 05:31:41,280
So, Azure Managed Disks, also known as just Azure Disks, are block-level storage volumes that are managed by Azure and used.

4089
05:31:41,840 --> 05:31:52,960
By Azure VMs, and these disks are just like physical disks, but they're virtualized, and all you have to do is choose the size, type, and configuration, and you don't have to worry about any of the underlying hardware.

4090
05:31:53,200 --> 05:31:57,920
So, managed disks are designed for 99.999% availability.

4091
05:31:58,560 --> 05:32:02,480
Azure creates 3 replicas of your data, allowing for high durability.

4092
05:32:02,640 --> 05:32:14,880
You can create up to 50 VM disks in a single subscription per region, allowing you to create up to 1,000 virtual machines in a scale set using the marketplace image.

4093
05:32:15,120 --> 05:32:20,160
And honestly, the max amount that you can have in a scale set is 1,000 image, so I think that's a good number.

4094
05:32:20,640 --> 05:32:23,040
Managed disks are integrated with availability sets.

4095
05:32:23,520 --> 05:32:26,160
Managed disks support availability zones.

4096
05:32:26,320 --> 05:32:32,000
Azure Backup can be used to create backup jobs with time-based backups and backup retention policies.

4097
05:32:32,200 --> 05:32:39,360
And you can use RBAC to assign specific permissions for a managed disk for one or more users.

4098
05:32:39,840 --> 05:32:44,240
You can directly import your VHDs into Azure disks.

4099
05:32:44,840 --> 05:32:51,120
And you can use the Azure private links to ensure traffic between your disks and your VMs stay within the Microsoft network.

4100
05:32:55,680 --> 05:32:59,840
Now taking a look at encryption for our disks, we have two types of encryptions.

4101
05:32:59,840 --> 05:33:03,040
We have server-side encryption and Azure Disk Encryption.

4102
05:33:03,560 --> 05:33:14,560
And so for server-side encryption, SSE, this provides encryption at rest and safeguards your data to meet your organizational security compliance commitments and enabled by default for all managed disk snapshots and images.

4103
05:33:14,960 --> 05:33:20,960
But just so you know, temporary disks are not encrypted by server-side encryption unless you enable encryption at the host

4104
05:33:21,520 --> 05:33:30,240
Layer keys can be managed in two ways: so you have platform-managed keys, these are managed by Azure, or customer-managed keys, where you are managing the keys.

4105
05:33:30,800 --> 05:33:42,240
So now, for the second type of encryption, we have Azure Disk Encryption (ADE), and this allows you to encrypt the OS and data disks used by IaaS virtual machines.

4106
05:33:42,680 --> 05:33:44,080
It's weird than they do that in the documentation.

4107
05:33:44,080 --> 05:33:46,880
They just mean virtual machines that are running on Azure.

4108
05:33:47,040 --> 05:33:49,280
They have it prefixed with IaaS there.

4109
05:33:49,840 --> 05:33:52,960
For Windows encryption, it's done with BitLocker.

4110
05:33:52,960 --> 05:33:55,760
For Linux encryption, it's done with DMcrypt.

4111
05:34:01,040 --> 05:34:03,880
So let's take a look at disk roles, and there are three types for Azure.

4112
05:34:03,880 --> 05:34:17,040
We have data disk, OS disk, and temporary disk, and it's possible to see all these roles if you were to spin up a Windows 10 Pro server, went into remote access, and looked at the disk management, and so that is our drives that are attached to this.

4113
05:34:17,440 --> 05:34:21,280
Virtual machine, and we have the OS disk, the temporary disk, and the data disk.

4114
05:34:21,360 --> 05:34:24,240
If you're wondering what those three things are, that's what we're going to talk about now.

4115
05:34:24,560 --> 05:34:30,640
So, the data disk is a managed disk that's attached to the virtual machine to store application data and other data you need to keep.

4116
05:34:30,880 --> 05:34:33,200
It's registered as an SCSI drive.

4117
05:34:33,680 --> 05:34:44,320
I think that's pronounced SCSI, and are labeled with a letter that you choose, has a maximum capacity of 32 gigabytes, and the size of the VM determines how many data disks you can attach and the type of storage you can use.

4118
05:34:44,640 --> 05:34:48,960
Moving on to OS disk, every virtual machine has one attached operating system disk.

4119
05:34:49,280 --> 05:34:54,320
The OS disk has pre-installed OS, which was selected with the VM that was created.

4120
05:34:54,400 --> 05:34:55,920
The disk contains the boot volume.

4121
05:34:55,920 --> 05:34:58,240
The disk has a maximum capacity of 4 gigabytes.

4122
05:34:58,480 --> 05:35:00,160
Then onto our temporary disk.

4123
05:35:00,400 --> 05:35:03,280
This is the most VMs contain a temporary disk, which is not a

4124
05:35:03,480 --> 05:35:10,240
Managed disk provides short-term storage for applications and processing, and is intended to store data such as page or swap files.

4125
05:35:10,560 --> 05:35:15,040
Data on the temporary disk may be lost during a maintenance event or when redeployed to a VM.

4126
05:35:15,280 --> 05:35:19,200
During successful standard reboot of the VM, data on the temporary disk will persist.

4127
05:35:19,440 --> 05:35:26,160
The temporary disk is typically mounted on dev SBD on Linux, and on Windows, the temporary disk is generally

4128
05:35:27,200 --> 05:35:36,400
Assigned to the D drive, and for these disks, they're not encrypted with SE, unless you enable encryption at the host level.

4129
05:35:41,000 --> 05:35:45,120
Let's take a look at managed disk snapshots and manage custom images, which are very similar.

4130
05:35:45,440 --> 05:35:53,680
So a managed disk snapshot is a read-only, crash-consistent full copy of a managed disk that is stored as a standard disk by default.

4131
05:35:53,920 --> 05:35:55,760
Snapshots are point-in-time recovery.

4132
05:35:55,760 --> 05:35:59,920
Snapshots exist independent of the source disk and can be used to create a managed disk.

4133
05:36:00,160 --> 05:36:02,360
Snapshots are billed based on the used size.

4134
05:36:02,360 --> 05:36:06,640
So if you have 24 gigabytes and you only use 10, you're only going to be billed for those 10 gigabytes.

4135
05:36:06,880 --> 05:36:10,920
You can see the used size of your snapshot by looking in the Azure user report.

4136
05:36:11,000 --> 05:36:11,440
ports.

4137
05:36:11,680 --> 05:36:17,360
And then we have managed custom images, which seem very similar, but have a very distinct difference.

4138
05:36:17,600 --> 05:36:21,360
They allow you to create an image of your disk from your VM.

4139
05:36:22,080 --> 05:36:29,920
And this image contains all the managed disks associated with a VM, including the OS and disk data disks.

4140
05:36:30,160 --> 05:36:36,160
So just comparing it to a snapshot, it isn't aware of any disk except the one it contains.

4141
05:36:36,560 --> 05:36:38,960
And this makes it problematic in the use

4142
05:36:39,400 --> 05:36:42,880
or the scenario that requires coordination of multiple disks such as striping.

4143
05:36:43,120 --> 05:36:46,960
So snapshots would need to be able to coordinate with each other, and this is currently not supported.

4144
05:36:47,280 --> 05:36:49,920
So that's where you want to use a managed custom image.

4145
05:36:49,920 --> 05:36:57,920
So if you're looking to just make a copy of one of your disks, like let's say your data disk, then go ahead with snapshots.

4146
05:36:57,920 --> 05:37:01,360
If you need to have all of them, then you're going to be using a managed custom image.

4147
05:37:06,040 --> 05:37:10,400
So when you create an Azure disk, you're going to actually have to choose from one of the four tiers of your disk.

4148
05:37:10,400 --> 05:37:13,600
And depending on what you choose, one's going to be more expensive or one's going to be faster.

4149
05:37:13,600 --> 05:37:15,440
So let's go take a look at the four tiers.

4150
05:37:15,760 --> 05:37:17,120
So the first being Ultra Disk.

4151
05:37:17,120 --> 05:37:22,000
So these deliver high throughput, high IOPS, and consistently low latency disk storage for Azure VMs.

4152
05:37:22,560 --> 05:37:25,680
They dynamically change the performance of the disk without the need to restart your VM.

4153
05:37:25,680 --> 05:37:32,320
A really great feature suited for data intensive workloads such as SAP HANA, top tier databases, and transaction heavy workloads.

4154
05:37:32,560 --> 05:37:34,160
Can only be used as data disks.

4155
05:37:34,720 --> 05:37:43,120
So generally when you're using Ultra Disk, it's recommended that you use a premium SSD as the OS disk, only supported with very specific VM series.

4156
05:37:43,440 --> 05:37:47,760
So you're going to have to look at your virtual machine to see if you're allowed to use that disk.

4157
05:37:48,720 --> 05:38:02,560
For premium SSDs, they're high performance, low latency disk support for Azure VMs, for input output intensive workloads, suitable for mission critical workload applications, only to be used with the VM series that are premium storage compatible, guaranteed IOPS,

4158
05:38:02,880 --> 05:38:08,200
And throughput of that disk, so the standard tiers don't have a guarantee of IOPS.

4159
05:38:08,200 --> 05:38:22,800
If you need a guarantee of IOPS, you're using premium SSD designed to provide low single-digit millisecond latency and target IOPS throughput described in the preceding table, and so I have a diagram coming up on that, but the point is that premium SSD is generally what...

4160
05:38:23,040 --> 05:38:28,160
Azure is going to recommend to you, but in practice, you're probably going to be using standard SSD.

4161
05:38:28,400 --> 05:38:39,200
So cost-effective storage option optimized for workloads that need consistent performance and lower IOPS levels compared to standard HDDs and standard SSDs delivers better availability, consistency, reliability, and latency.

4162
05:38:39,520 --> 05:38:52,240
Suitable for web servers, low IOPS application servers, lightly used enterprise applications, dev test workloads, designed to provide single-digit millisecond latencies and the IOPS and throughputs up to the limits described in the preceding table.

4163
05:38:52,480 --> 05:38:52,920
That table

4164
05:38:53,040 --> 05:38:53,520
coming up.

4165
05:38:53,760 --> 05:39:00,000
IOPS and throughput may vary sometimes depending on the traffic patterns available for all Azure VMs.

4166
05:39:00,240 --> 05:39:01,600
Then you have standard HDD.

4167
05:39:01,600 --> 05:39:12,080
This is the lowest cost tier here, and it's still reliable, but it's for running latency insensitive workloads available for all VMs.

4168
05:39:12,320 --> 05:39:18,640
So latency IOPS throughput of standard HDD is going to vary, and that's the whole point we're trading costs for.

4169
05:39:20,320 --> 05:39:21,200
variability here.

4170
05:39:21,480 --> 05:39:26,560
Designed to deliver write latency under 10 milliseconds and read latency is under 20 seconds for most IOP operations.

4171
05:39:26,880 --> 05:39:31,680
Available in all Azure regions and can be used with all Azure VMs.

4172
05:39:31,840 --> 05:39:33,760
And so here is that diagram.

4173
05:39:33,760 --> 05:39:37,280
And just taking a look here, you can notice, look at the IOPS.

4174
05:39:37,520 --> 05:39:41,680
So here it's 2,000, 6,000, 20,000, 160,000.

4175
05:39:41,840 --> 05:39:43,400
This is the one I generally want you to remember.

4176
05:39:43,400 --> 05:39:47,120
If you're going to remember any IOPS, just remember premium SSD starts at 20K.

4177
05:39:48,040 --> 05:39:55,680
And then the maximum throughput, we got 500 megabytes per second, 750, 900, and 2000, which is pretty darn fast.

4178
05:39:55,920 --> 05:39:58,040
Notice the K here, that stands for thousands.

4179
05:39:58,040 --> 05:40:07,920
So you can have a max disk size of 32,700 something gigabytes, and it's across the board the same.

4180
05:40:08,080 --> 05:40:09,840
This one's at 65,000.

4181
05:40:10,680 --> 05:40:39,680
And then just from a feature standard here, we have backup, non-critical, infrequent access, light use, dev and test. If you're a small startup, this is what you're going to be using. Heavy use, production, guarantee, IOPS. If you're a very well-established company, this is what you're going to be using. IO intensive, top-tier databases, heavy workloads. This is for very special use cases. So there you go. Let's talk about bursting. And this is a concept for both virtual machines and storage.

4182
05:40:40,040 --> 05:41:09,960
And so it all has to do with performance. Okay? So disk bursting is going to boost the disk storage for IOPS and megabytes per second for a period of time for your disks. And then bursting for VMs are going to boost the performance of CPU utilization and what have you there. Bursting allows you to handle unexpected disk traffic. This allows you to get more out of your disk and avoid permanently upgrading to a more performant disk. Okay? And bursting on disks and VMs are independent from one another. So if you have a bursting disk, you don't necessarily need

4183
05:41:10,040 --> 05:41:34,000
a bursting VM, but you might want to pair them together based on what your use case is. For burstable VMs, you have to use particular types of VMs that support it, so the VSV2 series, the DS3 series, and the ESV3 series. And just so you know, if you do spin up a virtual machine that has bursting, it's enabled by default, and it's what you want. Then for burstable disks,

4184
05:41:34,320 --> 05:41:42,240
For premium SSDs, for disk sizes of P20 and smaller, it's for all regions. And bursting is enabled by default for disks that support it. So there you go.

4185
05:41:47,400 --> 05:42:14,720
Hey, this is Andrew Brown from ExamPrev. And in this follow along, we're going to learn a bit more about Azure disks. So I think it'd be a good idea for us to actually go manually attach one and do a few things with the disk there. So what I want you to do is make your way all the way over the top here. And we're going to launch ourselves a new virtual machine. So go ahead and add a virtual machine here. And for this one, I'm going to name the resource group. If I don't have one, we'll say, I'll call it, not fax, we'll call it DAX. And I'll name the machine DAX as well.

4186
05:42:15,400 --> 05:42:42,160
And down below, we're going to want to launch an Ubuntu server. So make sure you choose the 18 LTS generation 2. And then for sizes, let's make sure we have B1 LS, because that will be cost effective at $5.83 if you forget to turn off that machine. For the username, we'll do Azure user. And for the password, we'll do capital T testing 123456, capital T testing 123456. And we don't need any ports open except for

4187
05:42:42,920 --> 05:43:09,760
22 because we will be SSH into this machine today. Now we can attach a disk here, but I want to attach one after the fact. And we're going to stick with premium SSD because that seems okay to me. And we'll go ahead and go to review and create and we'll go and create this virtual machine. And we'll give it a second here. So we hit the Create button. And I'll see you back here once this is finished creating. So I'll see you back here in a bit. Okay.

4188
05:43:10,720 --> 05:43:36,760
So now that our deploy has succeeded here, I'm going to go ahead and go to that resource. And on the left-hand side, we'll go to disks. And we'll go attach ourselves a new disk. I want just some kind of additional disk here. So my second disk. And here, I'm going to just use a standard SSD. We don't need premium there. It's not a big deal. And when we're happy with that, we're going to go ahead and hit save. I'm going to wait for that disk to create. And once that's done, we'll go ahead and SSH into

4189
05:43:37,720 --> 05:43:58,000
This here looks like it actually is already done. It's updating the virtual machine, so what I'm going to do is make my way back to it. I'm going to go, oops, we don't want to discard any changes there, but we'll go and hit. I don't think it will, but I'll go make a new tab here just because I don't trust it, and we will go back to DAX to the virtual machine here.

4190
05:43:59,200 --> 05:44:28,960
And we will need to go ahead and grab that public IP address and then get into this machine. So I'll go ahead and open up my cloud shell. It might ask you to create storage depending on, you know, if it's the first time you've done this before. But now that we're in here, I'm going to type in SSH and we're going to type in Azure user at sign and we will paste in that IP address, the public IP address there. And we'll go ahead and hit enter. We'll say yes. And then capital T testing 123456. And then we should get into our machine here. And we are in.

4191
05:44:29,160 --> 05:44:57,360
typing clear to clear my screen. And so what we'll want to do is partition that disk. Just because the disk is there doesn't mean we necessarily can use it until it's partitioned. So what we're going to do is use the parted command. So there's man parted. That's one command we're going to be using today. That's going to be for partitioning. And the other one will be man mount. That will be actually mounting it so we can use it. And if you go into man, you type that, just hit Q to get out. I guess I didn't tell you that.

4192
05:44:58,040 --> 05:45:27,840
But in order to partition it, we're going to be typing sudo parted and then the name of the disk we want, so SDC. So if you're wondering what this is, so the thing is that this is a standard naming convention for the mount point or the mounting name or whatever we call this thing here. But dev stands for device, and then SD stands for, it used to stand for SCSI, but now it's just, that's what you always put when you're naming it. And then this is followed by a letter, so it could be A, B, C, D, and that is the order of it.

4193
05:45:28,080 --> 05:45:55,920
It will have a number afterwards sometimes, so like one, two, three for partitions, I believe. So what we'll do is go ahead here and then type in hyphen, hyphen script, MK label. And this is not important for you to remember. It's just that we need to go through these motions here because honestly, every time I do this, I look it up. And actually off screen, I have this here. So don't think I have this memorized because I definitely don't. But what it's going to say is partition this entire, like allocate the entire drive for partitioning.

4194
05:45:56,520 --> 05:46:24,800
And so I'm just going to double check to make sure I spelled this all right. So I don't feel embarrassed if I hit enter and it doesn't work here. So just double checking. And it looks all pretty good to me. And we can't use B because B is reserved. Something's already using it. So we'll go ahead and hit enter. And so now that's been parted there. And we'll have to run a couple more commands here to be able to write to the file system. So we'll type in sudo mkfs xfs dev forward slash sdc1. Okay.

4195
05:46:25,720 --> 05:46:49,120
And we'll hit Enter. And so that is all now good. And we'll do the same thing. I'm hitting up, and then we're gonna have to do a part probe on it. Again, not a big deal to know these things off the top of your head. But if you're curious, I think you could type in man on that as part probe. And so it'll tell you what the info informed the OS partition, the tables have changed. So there's that. And then for the other one, which is MKFS.

4196
05:46:50,840 --> 05:47:18,800
right? Build a Linux file system. So we've made a partition, we built a Linux file system, and then we informed the OS of the change table updates. Okay. So once that is done, now we need to mount it. So we're going to type in sudo make directory, MKDIR, which means make directory. We can type... This is a very basic Linux command. It's making a folder basically. And we can name this whatever we want. So since this is DAX, I'm going to go forward slash DAX for fun.

4197
05:47:19,240 --> 05:47:44,320
And then I'm going to do ampersand ampersand. Now we could use, and I know I typed facts by accident, we could do semicolon, but it's better to use double ampersand because it means that both of these commands need to succeed to proceed. Or sorry, the second command will not proceed unless the first one happens, where if you use a semicolon, it won't do that in Linux, if you didn't know that. So we're going to type in sudo dev. I'm going to type in forward slash dev here, sdc1.

4198
05:47:44,840 --> 05:47:59,360
And then we'll type in DAX, and so that should mount it. Whoops, so there was a bug there. This is supposed to be pseudo. That should mount it to there, and so if we go to our next command here...

4199
05:47:59,760 --> 05:48:17,200
So, we want to use df just to do some reading here, so report a file system disk usage space. This is a great way to see if our disk is there, so we'll do -h grep, and we're going to look for sd, right, because that's what they're all basically named, okay?

4200
05:48:18,360 --> 05:48:36,720
And so there we can see our drive and we can see how much is actually being used. So that is a good way there. And I think if we just type in DAX, we can actually just start writing stuff here. So I can say touch. That just means make an empty file. So touch hello.txt, right? We don't have permission. So if I type maybe sudo.

4201
05:48:37,520 --> 05:49:06,480
we do PWD, and then maybe LS. So I've just written to that disk there. Now, just because we've created a mount disk, if we restarted the machine doesn't mean it would mount again. So there's a little bit of work, we need to do that. So what we can do is use, I think we have to add something to etc. F stab. And so we're gonna have to get a bit of information about the disk, like such as the UID. So what I want you to do is type in sudo hyphen I. Okay. And

4202
05:49:07,400 --> 05:49:36,240
I will type in, I stands for interactive, by the way. If we type in ML, again, I keep on showing you man if you ever want to find out what these things are. But if you type, this is locate print block device attributes. And you can read this if you want to see more information. I'm hitting up and down. I want to leave this at Q. But what we can do is enter interactive mode for you via pseudo. That's the I stands for BLKID. And so we're looking for the output of our SDC1. OK, so

4203
05:49:37,440 --> 05:50:01,600
For SDC1, it's down here. So what I'm going to do is copy the whole line. We probably don't need the whole thing. I'm going to copy it. And I have off-screen Visual Studio Code, so I'm just pasting that in there. So you just have to paste it somewhere in a text editor so we do not lose that. And what we'll do is proceed to update the fstab file. I'm going to type in sudo, etc. fstab here.

4204
05:50:03,080 --> 05:50:29,200
And I haven't had one of these in a long time, so hopefully I get this right. Oh, sorry. So we want a VI in between there. You can use Nano. I really don't like Nano. I prefer VI. But if with VI you have to, or Vim, you have to be very careful. So with Vim, the idea is H, J, K, L, or map to your movements. But if we just hit I, then the keyboard works normal, okay? And see, it says insert down below. And so notice that we have these other values. Whoops, I got to be really careful here.

4205
05:50:29,840 --> 05:50:56,080
But notice, I wasn't using the arrows, but notice we have some other things here. So what we want to do is go ahead and add our own here. So we'll hit, oops, I want to go below here, hit enter. And so we want the UUID of the one we have. So I'm going to do UUID equals. And what I'm going to do, hold on just a moment. File, new. I just want to show you the actual thing I copied out here.

4206
05:50:59,600 --> 05:51:33,650
Okay, just a moment. So here's mine, right? So I'm just going to have to copy that on over. So I'm just going to maybe park it halfway on the screen here so we can see what we're doing. And so I need this value here. I'm just looking at what's already there, right, to match it. And we'll go copy. And I should be able to do paste here. And then just double check to make sure nothing's cut off. So 4, 4, good, 00. So that looks good to me.

4207
05:51:36,960 --> 05:51:59,760
So there's that. And then we need to put the, I think, the mount point. So yeah, because it says, yeah, I'm pretty sure that's what it is. So we'll type in forward slash, we called ours DAX, and then we're going to put XFS, oops, XFS. And then we need a space, and we're going to type defaults, comma,

4208
05:52:01,000 --> 05:52:24,800
no fail one and two. All right. And so now that we have that all set up, I think we're all good to go. So I'm just going to go and save this. So see how it says insert, I'm going to hit Escape key, that brings me back into normal mode. And then I type the I'm going to type a colon, notice it comes down here into the command, I'm gonna type W and Q and quit. All right. So

4209
05:52:26,560 --> 05:52:54,080
that's pretty much it. So now our drive is mounted and we can write to it however we like. And so, that's good here. So what we'll do is just go ahead and close Cloud Shell and maybe what we'll do is, I don't know, maybe like back up this disk here. Okay, yeah, so let's go ahead and actually do a backup. So on the left-hand side, we'll go to disks. And if you're just confused where we are, what we can do is even go to disks, I think, ourselves, and we'll see our disks. And I can go to my second one here.

4210
05:52:54,600 --> 05:53:21,200
And then from in here, I can go ahead and create myself a snapshot. So we'll go ahead and hit a snapshot. And we'll just say my disk backup. And we have two options here. We can create a full, a read-only copy of the selected disk, or we can do incremental, which will save us space. I don't think we need to do incremental today. We can do a full disk for fun. And we'll hit review. Oh, we missed some basic information here.

4211
05:53:21,640 --> 05:53:37,360
Storage type, we will put it into standard HHD, and we'll go ahead and go back and hit review and go create, and that's going into our DAX there, and so we'll just wait until that's done.

4212
05:53:38,360 --> 05:54:04,240
Great. So now that we learned how to create a snapshot, how about we go ahead and actually attach a disk to a Windows machine? Because the process is slightly different. It doesn't hurt to go through the process twice here, so you can experience the differences. So we'll go ahead and create a new virtual machine here, put it in our DAX. We'll call this DAX Windows. And we'll choose a different image here. And probably a Windows server is probably ideal. So we'll go drop this down.

4213
05:54:05,040 --> 05:54:31,520
I think I will go with the 2019 generation 2. B1LS is not sufficient, I believe. I can't remember. I think that we need a B2S because 2 and 4. I think that will be enough. If it doesn't like it, will tell us. And so we need to create administrator users. I'm going to type in Azure user. And then for the password, capital T, testing123456. Capital T, testing123456.

4214
05:54:32,760 --> 05:54:56,560
And we won't allow RDP there. We'll go next to disks. We're not going to attach one right off the bat. We're going to stick with premium and we'll hit review and create. And so we'll go ahead and create this Windows machine. And I know it's a bit more expensive than Linux machine, but do not worry, we will not keep it around for too long. And we'll just wait here for just a moment to make sure that it's in progress. And I'll see you back here in a moment.

4215
05:54:57,720 --> 05:55:13,920
All right, so now that our Windows Server has been created, let's go to that resource, make our way over to disks, and we're going to be doing the same story here, so I think that we can kind of attach any kind of drive we want here. I don't think it matters, so I'm going to say, My Windows Disk, and...

4216
05:55:14,680 --> 05:55:40,640
Yeah, I'll have a premium this time. Who cares? Why not? And so we'll just wait for that to create. And then it shouldn't take too long. It's going to update the virtual machine. And then what we'll want to do is RDP into this instance. So on the left-hand side, I never trusted if I cancel that. I feel like it's going to mess up my settings there, but I don't think so. We'll go to data, DAX Windows, and on the left-hand side, go to Connect, and we will do RDP, download the file. If you

4217
05:55:41,200 --> 05:56:05,600
don't have the client, you'll have to install it for Mac. On Windows, it generally is, I think, pre-installed, unless you need Windows Professional. I'm not sure. But we'll type in Azure User, capital T, testing, 123456. Okay. Oops, I actually don't know if I typed that right. Let's reveal that if we can. It's not showing me the icon now, so I'll have to type it all over again. Capital T, 123456. We'll hit OK. And we'll say yes.

4218
05:56:08,680 --> 05:56:32,080
And so we'll just wait a moment here for this to start up, and I'll see you back here in a second. All right, so now that our Windows machine is ready here, what we'll do is make our way over to PowerShell. So just type in PowerShell, and we'll go here. I don't know if it matters. It's x68. Let's just go to the first one here. I don't use PowerShell too much, but I can make our way through it here no problem. And so what we're going to do is go ahead and partition it.

4219
05:56:33,080 --> 05:56:59,040
And luckily, I have the command off screen here, so you'll just have to follow along with me as soon as this ever decides to load, unless I can start typing. There we go. Okay, just give it a moment. There we go. And so we'll type in get-disk. I made the poor choice of hitting Tab. Don't hit Tab when you're in RDP. It just makes your life a lot harder. See, because then it autocompletes today.

4220
05:56:59,880 --> 05:57:29,120
So I was trying to autocomplete it to say disk so I don't make any spelling mistakes. And then we'll put, we'll make a pipe. We'll say partition style. And then we'll say if it equals, again, you don't have to have this memorized. It's just important that you go through the motions here with me. So you can say, yeah, I did this one time. And then we want initialize disk. I'm so tempted to hit hyphen to autocomplete, but I just do not trust it here. So I'm going to type it all each individually by hand. Then we need, we have partition.

4221
05:57:30,960 --> 05:57:58,400
partition style, so MBR, and we're going to say pass through. Okay, and then we'll put pipe again. We'll say new partition. I was hoping that it would wrap there. Okay, and we'll say assign drive letter, because we want it to have a letter, right? And then we'll say use maximum size, pipe format,

4222
05:58:00,080 --> 05:58:27,040
volume. We'll say file system, we probably could have done this in multiple commands. But I'm just making it easy and just following what we got here that I know works because I ran it earlier. And then we'll name it whatever we want. So you know, my new disk. And then we'll put in hyphen, confirm, false. Okay, so there's a lot there. And I already see a mistake. I think that's a mistake.

4223
05:58:28,040 --> 05:58:53,680
for initialize disk because it should be that. There we go. At least it colors it so we know. And so I think that looks all okay, I'm gonna go hit hit enter. And we will just wait here a little bit. Cannot be found that matches the file system label, there's clearly a spelling mistake. So we'll go here, label.

4224
05:58:55,800 --> 05:59:24,960
I'll probably give you the code, so you can just copy and paste it. And we're still having a bit of problems here. So I think what I'll do, I'm going to see if I can just copy and paste it in here. Oh, there we go. Okay. Yeah, so that's what I recommend you do as well. And so we'll verify if that disk is actually ready there. So I think we can write if we type in dot VM storage.

4225
05:59:26,720 --> 05:59:53,680
profile.data disks. Hit enter. We didn't get any output. So we should have got output there, and we didn't. So just give me a moment here, okay? All right, so I'm not sure why VM's not working. Normally, if you type in even dollar sign VM, it would give you an output, but there's another way that we could check. There's another way we could check if the drive's there. We just go up to the folder here. I just, it was a smart idea I had here.

4226
05:59:54,200 --> 05:59:59,960
And under the PC, it should just show up, right? So here we have a disk. I guess the disk is still not.

4227
06:00:00,040 --> 06:00:00,560
formatted.

4228
06:00:00,640 --> 06:00:02,880
So I guess we'll just format it this way.

4229
06:00:03,440 --> 06:00:05,360
Like this is just another way to format it, right?

4230
06:00:05,360 --> 06:00:06,400
So we'll go here.

4231
06:00:06,800 --> 06:00:08,000
We'll say quick format.

4232
06:00:08,000 --> 06:00:08,560
Okay.

4233
06:00:11,280 --> 06:00:11,600
Great.

4234
06:00:14,720 --> 06:00:19,440
And oops, yep, there we go.

4235
06:00:19,440 --> 06:00:20,160
So that's all done.

4236
06:00:23,840 --> 06:00:27,840
You know, but you know, sometimes I just find it easier to just use

4237
06:00:28,800 --> 06:00:31,920
This stuff we could have also done it through if we went to disk here, right?

4238
06:00:31,920 --> 06:00:33,040
We could have done it through here.

4239
06:00:33,920 --> 06:00:36,240
We could have we could have also partitioned it this way.

4240
06:00:36,240 --> 06:00:39,120
But I mean, this worked just as easily.

4241
06:00:39,120 --> 06:00:42,560
But you know, sometimes it's helpful to practice some PowerShell there.

4242
06:00:43,760 --> 06:00:48,240
So yeah, I think we're pretty much done here because now we've formatted both.

4243
06:00:49,040 --> 06:00:53,040
But yeah, let me just decide here if I want to try and doing a backup.

4244
06:01:01,360 --> 06:01:05,040
You know what, I decided maybe the backup should be a separate follow along here.

4245
06:01:05,040 --> 06:01:06,240
So we're all done here.

4246
06:01:06,240 --> 06:01:10,640
So we'll go ahead and close that RDP, and then make your way over to your resource groups here.

4247
06:01:10,640 --> 06:01:19,440
And what we'll do is make sure actually, it's easier if we just go to, I went to all resources, but we'll go here, and just go ahead and delete whatever you need to delete.

4248
06:01:19,440 --> 06:01:26,640
So if we go to DAX, and we say delete resource group, they'll delete all that stuff.

4249
06:01:27,400 --> 06:01:30,160
And I think that's good enough for disks, so there we go.

4250
06:01:34,880 --> 06:01:39,920
Hey, this is Angie Brown from Exam Pro, and we're looking at Azure Disks Cheat Sheet, and this one's a long one.

4251
06:01:39,920 --> 06:01:42,000
We've got 3 pages, so let's jump into it.

4252
06:01:42,400 --> 06:01:47,600
Azure Managed Disks are block-level storage volumes that are managed by Azure and used within Azure VMs.

4253
06:01:47,600 --> 06:01:49,600
Managed Disks are designed for ninety-nine.

4254
06:01:50,240 --> 06:01:52,400
999 availability, that's three nines.

4255
06:01:52,720 --> 06:01:56,160
Azure creates 3 replicas of your data, allowing for high durability.

4256
06:01:56,160 --> 06:02:04,240
You can create up to 50,000 VM disks of a type of subscription per region, allowing you to create up to 1,000 VMs in a virtual machine set using the marketplace image.

4257
06:02:04,480 --> 06:02:08,880
Managed disks are integrated with availability sets, and it also supports availability zones.

4258
06:02:08,880 --> 06:02:14,000
Azure Backup can be used to create a backup job with time-based backups and backup retention policies.

4259
06:02:14,320 --> 06:02:17,680
You can use role-based access controls to assign.

4260
06:02:18,320 --> 06:02:21,040
specific permissions for a managed disk to one or more users.

4261
06:02:21,360 --> 06:02:24,800
You can directly import your virtual hard disk drives into Azure disks.

4262
06:02:25,440 --> 06:02:28,720
You can use Azure Private Links to ensure traffic between Azure disks.

4263
06:02:29,040 --> 06:02:31,200
and VMs stay within the Microsoft network.

4264
06:02:31,360 --> 06:02:33,520
Azure managed disks support two types of encryption.

4265
06:02:33,520 --> 06:02:39,360
You got SSE by default and temporary disks are not encrypted by server-side encryption unless you enable encryption host.

4266
06:02:39,360 --> 06:02:45,520
So remember that exception, there are two types of keys that you can be managed, platform managed keys and customer managed keys.

4267
06:02:45,760 --> 06:02:52,880
Then you have Azure disk encryption, allows you to encrypt both the OS and data disks using an Azure virtual machine.

4268
06:02:52,880 --> 06:02:55,360
For Windows, you're going to be using BitLocker.

4269
06:02:55,520 --> 06:02:58,560
For Linux encryption, you're going to be using DMcrypt.

4270
06:02:59,000 --> 06:03:00,800
to our second slide here.

4271
06:03:01,040 --> 06:03:06,720
There are three main disks roles in Azure, the data disk, the OS disk, the temporary disks.

4272
06:03:06,960 --> 06:03:13,440
The data disk is a managed disk as attached to a virtual machine to store application data or other data you need to keep.

4273
06:03:13,760 --> 06:03:19,360
Registered SCSI drives are labeled with a letter that you choose, has a maximum of 32 gigabytes.

4274
06:03:19,440 --> 06:03:23,440
The size of the VM determines how many data disks you can attach and the type of storage you can use.

4275
06:03:23,680 --> 06:03:27,120
For the OS disk, every virtual machine has one attached operating system disk.

4276
06:03:27,360 --> 06:03:28,840
The OS disk has a pre-installed OS with

4277
06:03:29,200 --> 06:03:31,760
which was selected when the VM was created.

4278
06:03:31,920 --> 06:03:33,360
The disk contains the boot volume.

4279
06:03:33,520 --> 06:03:36,040
The disk has a maximum capacity of 4 gigabytes.

4280
06:03:36,040 --> 06:03:39,880
For temporary disks, most VMs contain a temporary disk, which is not a managed disk.

4281
06:03:40,120 --> 06:03:47,440
Provide short-term storage of applications and processes and intended to only store data such as page or swap files.

4282
06:03:47,680 --> 06:03:51,680
Data on the temporary disk may be lost during a maintenance event or when you deploy a VM.

4283
06:03:51,920 --> 06:03:55,680
During a successful standard reboot of the VM, data on the temporary disk will persist.

4284
06:03:55,920 --> 06:03:58,880
The temporary disk is typically forward slash dev forward slash

4285
06:03:59,080 --> 06:04:00,720
SDB on Linux.

4286
06:04:00,720 --> 06:04:01,520
And you know what?

4287
06:04:01,680 --> 06:04:05,400
I tried fixing this, and this is my second go on it, but I still got a spelling mistake.

4288
06:04:05,400 --> 06:04:06,560
We'll have to fix that, okay?

4289
06:04:07,360 --> 06:04:08,640
Just erase that off the board there.

4290
06:04:09,280 --> 06:04:11,040
And Windows VMs.

4291
06:04:12,160 --> 06:04:15,680
Windows VMs, the temporary disk is D by default.

4292
06:04:15,920 --> 06:04:19,040
Not encrypted by SSC unless you enable encryption at the host.

4293
06:04:19,320 --> 06:04:27,040
Going on to managed disk snapshots is a read-only, crash-consistent full copy of a managed disk that is stored as a standard managed disk by default.

4294
06:04:27,520 --> 06:04:29,520
Snapshots are point-in-time recovery.

4295
06:04:29,520 --> 06:04:34,400
Snapshots exist independent of the source disk and can be used to create new managed disks.

4296
06:04:34,560 --> 06:04:37,360
Snapshots are billed based on used size.

4297
06:04:37,600 --> 06:04:42,240
If you have a 64 GB drive and only 10 gigabytes, you're only billed to 10 gigabytes.

4298
06:04:42,760 --> 06:04:49,360
You can use size of your snapshot by looking you can see the size of your snapshot by looking within the Azure Usage Report.

4299
06:04:49,600 --> 06:05:00,520
Onto the last page here, for Azure Disks, a managed custom image can create an image of your disk from your VM, contains all managed disks associated with the VM, OS, and data disk.

4300
06:05:00,520 --> 06:05:01,680
Does all three, okay?

4301
06:05:02,720 --> 06:05:07,920
And so, oops, a snapshot doesn't have awareness of any disk except the one it contains.

4302
06:05:08,080 --> 06:05:12,320
For a single disk, and you definitely need to know this, for a single disk, managed disk snapshots.

4303
06:05:12,320 --> 06:05:15,360
For multiple disks, it's going to be managed custom disks.

4304
06:05:15,360 --> 06:05:18,400
Know the difference for your exam, okay?

4305
06:05:20,160 --> 06:05:21,600
Azure offers 4 tiers of disk.

4306
06:05:21,600 --> 06:05:25,760
We got ultra, premium SSD, standard SSD, and standard HDD.

4307
06:05:25,760 --> 06:05:31,480
For ultra disks, delivers high throughput, high IOPS, consistent low latency and disk storage in Azure VMs.

4308
06:05:31,480 --> 06:05:33,040
We have a bunch of details in between.

4309
06:05:33,040 --> 06:05:33,840
Read if you like.

4310
06:05:34,080 --> 06:05:39,760
Premium SSD, high performance and low latency disk support for Azure VMs with input output intensive workloads.

4311
06:05:40,120 --> 06:05:42,080
Again, some additional information there.

4312
06:05:42,240 --> 06:05:49,800
Standard SSD, cost-effective storage, optimized, option optimized for workloads that needs consistent performance at lower IOPS levels.

4313
06:05:49,880 --> 06:05:53,280
levels, and then that has a bit of details there.

4314
06:05:53,600 --> 06:06:02,880
And then we have standard HHD, reliable low-cost disk support for VMs running a latency insensitive workload, so available all VMs, et cetera, et cetera.

4315
06:06:03,120 --> 06:06:04,000
And there you go.

4316
06:06:04,000 --> 06:06:08,800
But just know the key concepts here that you want to know what these disks are for, okay?

4317
06:06:08,800 --> 06:06:10,720
So the main line there, all right?

4318
06:06:11,040 --> 06:06:13,680
So we're at the end there, and yeah, there you go.

4319
06:06:19,240 --> 06:06:28,400
So, Azure has a few different kinds of load balancers, and one in particular is the Application Gateway, and this is for application-level routing and load balancing service.

4320
06:06:28,720 --> 06:06:40,720
So, Application Gateway operates at the OSI Layer 7, which is also known as the Application Layer, and the idea here is that when you're working about applications, you're working with http://requests.

4321
06:06:40,720 --> 06:06:41,440
That's what it is.

4322
06:06:42,000 --> 06:06:47,680
And so the idea is that it can look at the contents of the HP request and do some interesting things.

4323
06:06:47,720 --> 06:06:55,920
So maybe it's looking at the path and saying, okay, if you have a path and it's payments, go to the VM that has our payment system.

4324
06:06:55,920 --> 06:07:00,240
And then if it's forward slash admin, go to the VM that does that.

4325
06:07:00,640 --> 06:07:07,560
Maybe it has to do something with cookies or maybe you want to apply a WAF policy to it.

4326
06:07:07,560 --> 06:07:09,280
And so you can look at those.

4327
06:07:09,800 --> 06:07:13,200
HTTP requests and determine if it is malicious traffic and filter it out.

4328
06:07:13,760 --> 06:07:17,600
So yeah, it's all about the application, which has to do with HTTP requests.

4329
06:07:18,240 --> 06:07:23,120
To configure this thing, you need to set up a front end, routing rules, and back end pools.

4330
06:07:23,360 --> 06:07:25,720
And there are two configurations for the front end.

4331
06:07:25,720 --> 06:07:33,680
You can either have it with a private IP, which makes it now an internal load balancer, or a public IP, which makes it either we would call a public or external load balancer.

4332
06:07:34,120 --> 06:07:34,880
And there's both.

4333
06:07:34,920 --> 06:07:36,560
I've never used that option before.

4334
06:07:37,400 --> 06:07:39,760
But I mean, you just really need to know the public and private.

4335
06:07:40,480 --> 06:07:42,840
For the backends, you create backend pools.

4336
06:07:42,840 --> 06:07:47,360
And A backend pool is just a collection of resources to which your application gateway sends traffic.

4337
06:07:48,040 --> 06:07:54,320
And so a backend pool can contain virtual machines, virtual machine scale sets, IP addresses, domain names, app service.

4338
06:07:56,240 --> 06:07:58,240
And I think you can also send it to like on-prem.

4339
06:07:58,800 --> 06:08:02,480
So let's just talk about routing rules, which connects the frontend and the backend together.

4340
06:08:02,880 --> 06:08:05,440
And so here is a more complex example.

4341
06:08:05,440 --> 06:08:09,600
It gives you a better idea of the service at full.

4342
06:08:10,240 --> 06:08:12,960
And so the idea is that you have your application gateway.

4343
06:08:13,120 --> 06:08:17,440
It's going to send traffic, or sorry, like your DNS is going to send it to application gateway.

4344
06:08:17,440 --> 06:08:21,160
And then you have these listeners, and they listen for incoming traffic.

4345
06:08:21,160 --> 06:08:24,960
And then what it will do, it will pass on that to a rule.

4346
06:08:25,280 --> 06:08:28,880
And a rule just really says, who should we pass the data to?

4347
06:08:29,600 --> 06:08:36,480
And then, if you are defining A back-end pool, then you need to have an HTTP setting that says, How do we handle the HTTP requests?

4348
06:08:36,960 --> 06:08:41,880
Okay, and so now we'll just look at more granular detail about requests or routing rules.

4349
06:08:45,960 --> 06:08:47,760
Let's take a closer look at routing rules.

4350
06:08:47,760 --> 06:08:49,080
This is where all the magic happens.

4351
06:08:49,080 --> 06:08:54,800
So A listener listens on a specified port and IP address for traffic that uses a specified protocol.

4352
06:08:54,800 --> 06:08:58,680
If the listener criteria are met, the application gateway will apply the routing rule.

4353
06:08:58,680 --> 06:09:00,160
And these come in two flavors.

4354
06:09:00,320 --> 06:09:08,320
We got basic, which forwards all requests for any domain to backend pools, and multi-site forward requests to different backend pools based on host header and host name.

4355
06:09:08,640 --> 06:09:13,440
So the thing is that you can have multiple listeners and you can have an order of them.

4356
06:09:13,640 --> 06:09:15,880
And the idea is that you really want the basic to be a

4357
06:09:16,000 --> 06:09:22,000
on the last in priority because if it's a first, it's going to capture everything because that's its job.

4358
06:09:22,000 --> 06:09:22,880
It's like a catch-all.

4359
06:09:23,360 --> 06:09:27,280
So just make sure that if you're using multiple listeners, you put basic last.

4360
06:09:28,160 --> 06:09:29,440
So that's just something you need to know.

4361
06:09:29,760 --> 06:09:33,760
Then for those back-end targets, this is where we either define a back-end pool or redirection.

4362
06:09:33,920 --> 06:09:37,760
Redirection is just an HTTP redirection like 403 or whatever.

4363
06:09:38,000 --> 06:09:40,640
You have their temporary or permanent, very simple.

4364
06:09:41,120 --> 06:09:43,840
But for back-end pools, you have to create HTTP settings.

4365
06:09:44,200 --> 06:09:51,080
And this tells us a little bit more about how we want to handle HTTP, cookies, connection training, port requests, et cetera.

4366
06:09:51,080 --> 06:09:52,480
Let's talk about it a little bit more.

4367
06:09:52,480 --> 06:09:56,080
So here are the actual options that we can configure for HTTP settings.

4368
06:09:56,800 --> 06:09:57,920
So you have your backend port.

4369
06:09:58,720 --> 06:10:01,680
So generally, it's either port 80 or 443.

4370
06:10:01,920 --> 06:10:05,760
It just depends on where you're doing your SSL termination.

4371
06:10:06,320 --> 06:10:10,720
But generally, if you need end-to-end encryption, it'll be 443 or...

4372
06:10:11,280 --> 06:10:15,840
And then if you're doing SSL termination at the load balancer, then it's 80.

4373
06:10:17,120 --> 06:10:18,440
Then you have cookie-based affinity.

4374
06:10:18,440 --> 06:10:21,360
This allows you to keep a user session on the same server.

4375
06:10:21,360 --> 06:10:25,120
So if you need to persist cookies and use them for authentication, you'll want to enable that.

4376
06:10:25,440 --> 06:10:26,480
You've got connection draining.

4377
06:10:26,480 --> 06:10:30,240
This gracefully removes back-end pool members during planned service updates.

4378
06:10:30,560 --> 06:10:35,120
So the idea is that when there is an update, it's not just going to abruptly cut over.

4379
06:10:35,120 --> 06:10:38,800
It's going to wait until a connection disconnects from a server before

4380
06:10:39,680 --> 06:10:44,480
no longer sending more requests there, because you don't want a connection dropping in the middle of an update.

4381
06:10:44,480 --> 06:10:45,600
It's not great for a user.

4382
06:10:46,080 --> 06:10:47,200
Then you have request timeouts.

4383
06:10:47,200 --> 06:10:54,160
This is the number of seconds the application gateway will wait to receive a response from the backend pool before it returns a connection timeout error message.

4384
06:10:54,160 --> 06:10:58,240
And last, oh, sorry, we still have override backend path.

4385
06:10:58,480 --> 06:11:03,200
These allow you to override the path in the URL, so the request for a specific path can be routed to another path.

4386
06:11:03,520 --> 06:11:07,520
The idea is, imagine you want to send it to bananas,

4387
06:11:07,880 --> 06:11:10,480
And you want bananas to actually internally route to oranges?

4388
06:11:10,480 --> 06:11:13,760
I don't know why you want to do that, or maybe to plantains that would make a lot more sense.

4389
06:11:14,000 --> 06:11:17,120
So, something you can do, and the last one is the override the host name.

4390
06:11:17,120 --> 06:11:24,160
So, Application Gateway normally leaves the host name alone, but if you're using multi-tenant services like apps.

4391
06:11:24,560 --> 06:11:32,880
Like App Service or API Management, it needs very specific host header set, so this is where you can override them and change them for those services.

4392
06:11:32,880 --> 06:11:37,680
So, hopefully, that really gives you a good picture of Application Gateway, but I feel that that's all you really need to know.

4393
06:11:42,280 --> 06:11:46,640
Hey, this is Andrew Brown from Exam Pro, and we're looking at the Azure Application Gateway Cheat Sheet.

4394
06:11:46,640 --> 06:11:55,360
So Azure Application Gateway is an application-level routing and load balancing service, and it operates on the OSI Layer 7, also known as the application layer.

4395
06:11:56,080 --> 06:12:00,040
You can attach a WAF, and so that will give you additional security.

4396
06:12:00,040 --> 06:12:03,920
An application gateway is composed of a front-end, routing rules, and back-ends.

4397
06:12:04,240 --> 06:12:06,000
So front-ends, you'll choose an address type.

4398
06:12:06,000 --> 06:12:09,120
So you either want it to be a private IP or a public IP.

4399
06:12:09,760 --> 06:12:19,200
For backends, you'll create backend pools, and a backend pool can be a variety of different things, but a backend pool is a collection of resources to which your application gateway can send traffic, and there's that list.

4400
06:12:19,200 --> 06:12:24,400
You can make it a VM, VM scale set, IP address, domain name, or app service.

4401
06:12:24,760 --> 06:12:28,280
For routing rules, they're composed of listeners, back-end targets, and HTTP settings.

4402
06:12:28,280 --> 06:12:33,120
So A listener listens on a specific port and IP address for traffic that uses a specific protocol.

4403
06:12:33,120 --> 06:12:37,440
If the listener criteria is met, the application gateway will apply the routing rule.

4404
06:12:37,440 --> 06:12:40,320
There are two types of listeners, basic and multi-site.

4405
06:12:40,800 --> 06:12:46,080
Probably mostly likely going to be using basic, but if you do use multi-site, that's cool.

4406
06:12:46,400 --> 06:12:50,400
Requests are matched according to the order of the rules and the types of listeners.

4407
06:12:50,640 --> 06:12:54,240
Add your basic listeners last, otherwise it will capture all requests.

4408
06:12:54,720 --> 06:12:59,760
For back-end targets, choose where a route should either go to a back-end pool or a redirection.

4409
06:12:59,920 --> 06:13:05,120
To create a rule for back-end pool, you need to create the HTTP setting or settings.

4410
06:13:05,120 --> 06:13:06,320
The S is missing on there.

4411
06:13:06,560 --> 06:13:12,440
To find how we want to handle cookies, connections, draining, port requests, timeout, and more.

4412
06:13:12,440 --> 06:13:13,680
That's for the HTTP settings.

4413
06:13:13,680 --> 06:13:14,560
So there you go.

4414
06:13:18,920 --> 06:13:21,040
So let's take a look here at Azure scale sets.

4415
06:13:21,040 --> 06:13:25,280
And these are used to automatically increase or decrease your virtual machine capacity.

4416
06:13:25,520 --> 06:13:31,840
So imagine you have a web application behind an application load balancer, and you have an increase in traffic.

4417
06:13:31,840 --> 06:13:37,680
You want to be able to quickly add more capacity by adding another identical virtual machine.

4418
06:13:38,240 --> 06:13:42,240
Or when there's a decrease in traffic, remove it to save costs.

4419
06:13:42,240 --> 06:13:44,000
And that is what Azure scale sets do.

4420
06:13:44,800 --> 06:13:50,240
So you're creating scale policies to automatically add or remove based on host metrics.

4421
06:13:50,400 --> 06:13:54,160
Host metrics could be like CPU utilization or network in.

4422
06:13:54,960 --> 06:13:56,320
You're going to create health checks.

4423
06:13:56,640 --> 06:14:01,120
And you can also set a repair policy to replace unhealthy instances.

4424
06:14:01,360 --> 06:14:07,120
You can associate a load balancer to distribute virtual machines across availability zones.

4425
06:14:07,440 --> 06:14:11,920
And you can scale to 100 or even 1,000 VMs using scale sets.

4426
06:14:16,480 --> 06:14:20,240
So one thing you're going to probably want to do with your scale set is associate with a load balancer.

4427
06:14:20,480 --> 06:14:28,960
And in honesty, I don't run any kind of application workload unless it is in a scale set and behind a load balancer because it's just good practice to do that.

4428
06:14:29,200 --> 06:14:35,200
And the reason why you're going to want a load balancer is that it's going to help you evenly distribute your VMs across multiple availability zones.

4429
06:14:35,440 --> 06:14:39,840
And that's going to give you high availability because you definitely want to try to run

4430
06:14:40,640 --> 06:14:44,320
3 VMs across 3 AZs to get that high availability.

4431
06:14:44,960 --> 06:14:50,960
You can also use a load balancer probe checks, and these are more robust health checks than what skill set provides you.

4432
06:14:51,600 --> 06:14:53,920
So that is just an added benefit there.

4433
06:14:54,480 --> 06:14:58,560
And when we're talking about load balancers, we have two different choices here.

4434
06:14:58,720 --> 06:15:04,800
We have the application gateway, and so this is for HTTP, HTTPS, web traffic load balancer.

4435
06:15:05,440 --> 06:15:12,240
And then you also have Azure Load Balancer, and this is going to support TCP and UDP network traffic and things like that.

4436
06:15:12,240 --> 06:15:18,480
So, depending on what OSI layer you need to operate on, it's going to determine what kind of load balancer you need to use.

4437
06:15:22,640 --> 06:15:29,440
So, let's take a look at scaling policies, and these determine when a virtual machine should be added or removed to meet the current requirements, and you have this.

4438
06:15:30,240 --> 06:15:36,880
little wizard here, this is what the wizard you see or form you see when you're creating a scale set initially with very simple features.

4439
06:15:37,120 --> 06:15:39,840
But let's just focus on two things, scaling out and scaling in.

4440
06:15:39,840 --> 06:15:43,760
So scaling out is when an instance should be added to a scale set to increase capacity.

4441
06:15:44,080 --> 06:15:48,720
So you choose your metric, which is hard coded in this case, to CPU threshold.

4442
06:15:48,720 --> 06:15:52,080
So you choose your metric, the duration, how many VMs you want to add.

4443
06:15:52,320 --> 06:15:53,800
And then the scale in is the opposite.

4444
06:15:53,800 --> 06:15:55,120
That's when you're removing.

4445
06:15:56,560 --> 06:15:58,880
something from the scale set to decrease your capacity.

4446
06:15:59,200 --> 06:16:01,520
And again, that interface is very simple.

4447
06:16:01,760 --> 06:16:07,400
When you actually go ahead and create a scale set, after you go and update it, you're going to end up with a lot more options.

4448
06:16:07,400 --> 06:16:08,880
And here are the options.

4449
06:16:08,880 --> 06:16:10,960
You can see they're extremely robust.

4450
06:16:11,440 --> 06:16:17,440
And so you have the option to choose one of the built-in host metrics that are already being collected on your virtual machine.

4451
06:16:17,760 --> 06:16:20,960
So the most popular here, and there's more than this, but

4452
06:16:21,400 --> 06:16:25,040
The most popular here is CPU, network in, network out, disk read, and write.

4453
06:16:25,440 --> 06:16:33,720
Then you have your aggregates, so you can decide how you want to group or collect that data before you apply your final operations on it.

4454
06:16:34,080 --> 06:16:38,640
Then you have your operators, so you can say greater than or greater than or equal to.

4455
06:16:38,960 --> 06:16:39,880
Then you have your actions.

4456
06:16:39,880 --> 06:16:46,800
You can say increase the count, so add X amount of servers, or you can say increase by percentage.

4457
06:16:46,800 --> 06:16:47,840
So imagine you had

4458
06:16:49,720 --> 06:16:54,080
10 servers and you want to increase the load by 30%, that would add three additional servers.

4459
06:16:54,240 --> 06:17:00,160
If you want more metrics than just the built-in host metrics, you can absolutely get more, but you're going to have to install a couple things.

4460
06:17:00,640 --> 06:17:21,680
For app, if you want more app-specific metrics like page performance or page load performance and session scout, you would install a small instrumentation package for App Insights, and if you want to have more detailed host metrics, so you might have host metrics, but you want them in more detail or more available host metrics, you'd install the Azure Diagnostic Extension within your VM.

4461
06:17:22,640 --> 06:17:30,080
There are a few other scaling policy options that are, well, they're not exactly in that form, but they are around or are associated with them.

4462
06:17:30,320 --> 06:17:33,920
One is the scale-in policy, not to be confused with the scale-in option.

4463
06:17:35,280 --> 06:17:39,280
And this determines what virtual machine should be removed when you decrease capacity.

4464
06:17:39,280 --> 06:17:42,200
So it's just a simple drop-down, and you have a few different options.

4465
06:17:42,200 --> 06:17:43,200
So there's the default option.

4466
06:17:43,200 --> 06:17:51,680
This is where it deletes the VM with the highest instance ID, and it's going to do that, taking consideration the balancing across AZs and ADs.

4467
06:17:52,160 --> 06:17:54,880
Or it can delete the newest virtual machine, so delete the newest VM.

4468
06:17:55,520 --> 06:18:01,200
Again, this one's only across availability zones, or delete the oldest VM.

4469
06:18:01,600 --> 06:18:05,760
This is going to delete the oldest VM and balance across availability zones.

4470
06:18:06,080 --> 06:18:07,920
Then you have an update policy.

4471
06:18:08,680 --> 06:18:14,080
And this determines how VM instances are brought up to date with the latest scale set model.

4472
06:18:14,080 --> 06:18:17,360
So again, it's another drop down and you have a few options here.

4473
06:18:17,360 --> 06:18:23,840
So you have automatic, so increasing the start upgrade immediately in random over order or manual.

4474
06:18:23,840 --> 06:18:28,480
So existing instances must be manually upgraded or rolling.

4475
06:18:28,880 --> 06:18:31,640
And so this update upgrades roll out in.

4476
06:18:31,720 --> 06:18:33,600
in batches with optional pause.

4477
06:18:33,960 --> 06:18:44,320
And just one other note here is that if you want to do automatic OS upgrades, you can enable this to help ease update management by safely and automatically upgrading the OS disk for all instances.

4478
06:18:44,320 --> 06:18:45,120
So there you go.

4479
06:18:49,840 --> 06:18:53,760
Health monitoring is a feature with skill sets you're absolutely going to want to turn on.

4480
06:18:54,400 --> 06:18:59,200
And what it does is it determines whether your instance, your virtual machine instance, is healthy or unhealthy.

4481
06:18:59,200 --> 06:19:01,600
So you have that option to disable or enable it.

4482
06:19:02,240 --> 06:19:03,680
comes in two different modes.

4483
06:19:03,680 --> 06:19:08,160
We're going to have the application health extension, which is what we're seeing on the right-hand side here.

4484
06:19:08,400 --> 06:19:12,880
And this is where you ping an HTTP or HTTPS request with a specific path.

4485
06:19:13,600 --> 06:19:16,960
and expect back a specific status.

4486
06:19:17,120 --> 06:19:19,040
So the status here would be 200.

4487
06:19:19,200 --> 06:19:24,360
So the idea is that you could say ping the home page, and if the home page appears, then therefore the server must be healthy.

4488
06:19:24,360 --> 06:19:26,880
Or you can make it your own custom page.

4489
06:19:26,880 --> 06:19:27,760
That's what I like to do.

4490
06:19:27,760 --> 06:19:29,040
I have like a health check page.

4491
06:19:29,440 --> 06:19:31,440
The other mode is load balancer probe.

4492
06:19:31,680 --> 06:19:34,640
This is only going to work if you have an associated load balancer.

4493
06:19:34,960 --> 06:19:39,840
And here you can check based on TCP, UDP, HTTP requests.

4494
06:19:39,840 --> 06:19:41,440
So this is a little bit more robust.

4495
06:19:42,800 --> 06:19:53,040
So I generally would recommend using this mode over the first mode, because generally when you have a scale set, you're going to also want to have a load balancer.

4496
06:19:53,680 --> 06:19:58,160
Now, if you want to replace unhealthy instances, they have an automatic repair policy.

4497
06:19:58,160 --> 06:19:59,360
So this isn't automatic.

4498
06:19:59,600 --> 06:20:04,480
I mean, like it's not turned on by default, so you have to explicitly say you want to turn it on.

4499
06:20:04,480 --> 06:20:10,560
And what that will do is that if it finds an instance that is unhealthy, it's just going to terminate it and then launch a new instance.

4500
06:20:10,880 --> 06:20:11,920
All right, and so there you go.

4501
06:20:16,840 --> 06:20:20,720
So here we just have a few remaining features I want to talk about with scale sets.

4502
06:20:20,720 --> 06:20:22,880
And these are more advanced features, but they're good to know.

4503
06:20:23,200 --> 06:20:25,080
So let's talk about an allocation policy.

4504
06:20:25,080 --> 06:20:30,640
And by default, your scaling sets are limited to 100 instances, but they can go beyond 100 up to 1000 instances.

4505
06:20:30,920 --> 06:20:33,360
And this is where an allocation policy comes into play.

4506
06:20:33,600 --> 06:20:38,320
So if you turn that on, now you have to worry about placement, which is not a big deal.

4507
06:20:38,880 --> 06:20:41,680
But I mean, that's how you're going to go beyond that 100.

4508
06:20:42,000 --> 06:20:44,280
And then there's the option of proximity placement groups.

4509
06:20:44,280 --> 06:20:48,240
And this allows you to group Azure resources physically closer together in the same region.

4510
06:20:48,480 --> 06:20:55,680
This is definitely something you want to do if performance like latency and performance of physical distance of virtual machines is very important.

4511
06:20:56,000 --> 06:21:01,600
When you're running like HPC workloads, this is something people have to think about as literally the physical placement of your VMs.

4512
06:21:01,840 --> 06:21:05,680
By default, a scale set has a single placement that can hold up to 100 VMs.

4513
06:21:06,480 --> 06:21:16,160
And if you set the scale set property to single placement group to false, then the scale set can be composed of multiple placement groups and have a range of 0 to 1000 VMs, so that's it.

4514
06:21:21,000 --> 06:21:25,760
Hey, this is Andrew Brown from Exam Pro, and we are on to the scale set cheat sheet, so let's jump into it.

4515
06:21:25,840 --> 06:21:29,280
Azure scale sets allow you to automatically increase or decrease your VM capacity.

4516
06:21:29,280 --> 06:21:39,440
A load balancer can be associated with a scale set evenly, and the purpose of that would be to evenly distribute your VMs across multiple AZs to make your application highly available.

4517
06:21:39,680 --> 06:21:43,040
Use load balancers to probe checks for robust health checks.

4518
06:21:43,040 --> 06:21:44,240
You have two options here.

4519
06:21:44,800 --> 06:21:49,840
You can use an application gateway with your scale set, or you can use an Azure load balancer.

4520
06:21:50,240 --> 06:21:50,920
A scaling policy

4521
06:21:51,000 --> 06:21:54,560
The policy determines when a VM should be added or removed to meet the current requirements.

4522
06:21:54,800 --> 06:21:57,600
You have your scale out operation and your scale in operation.

4523
06:21:57,600 --> 06:22:01,760
Remember, scale out means to add and scale in means to remove.

4524
06:22:02,000 --> 06:22:08,640
Then for scale in policies, this is going to help you determine what the VM, like how it's going to remove VMs, all right?

4525
06:22:09,320 --> 06:22:12,160
And you have default, newest VM, oldest VM.

4526
06:22:12,480 --> 06:22:18,320
For the update policy, determines your VM instances are brought up to date with the latest scale set model.

4527
06:22:19,160 --> 06:22:21,760
We have automatic and manual and rolling.

4528
06:22:22,720 --> 06:22:27,680
For health monitoring, this can be enabled to determine if your server is healthy or unhealthy.

4529
06:22:27,680 --> 06:22:30,240
There are two modes of health monitoring.

4530
06:22:30,240 --> 06:22:32,040
So we have application health extension.

4531
06:22:32,040 --> 06:22:37,280
This is where it pings an HTTP request to a specific path and expects.

4532
06:22:37,440 --> 06:22:39,440
So it's accept, but it should say expects.

4533
06:22:40,080 --> 06:22:41,600
We'll just mark that there quickly there.

4534
06:22:42,000 --> 06:22:44,160
Expects a status of 200.

4535
06:22:44,400 --> 06:22:48,720
Load balancer probe allows you to check based on the TCP, UDP, HTTP requests.

4536
06:22:48,920 --> 06:22:51,520
And the last thing here I just want to mention is automatic repair policy.

4537
06:22:51,520 --> 06:22:57,480
If an instance is found to be unhealthy, then it should delete and launch a new instance.

4538
06:22:57,480 --> 06:22:59,760
I'll go correct those two things for you, but there you go.

4539
06:23:04,520 --> 06:23:16,000
Hey, this is Andrew Brown from Exam Pro, and we're looking at Azure App Services, which allows you to quickly deploy and manage web apps on Azure without worrying about the underlying infrastructure, and specifically, this is known as a Platform as a Service.

4540
06:23:16,760 --> 06:23:23,680
So Azure App Service is an HTTP-based service for hosting web applications, REST APIs, and mobile backends.

4541
06:23:23,920 --> 06:23:28,080
And you can choose your programming language, and it can either be Windows or Linux environment.

4542
06:23:28,400 --> 06:23:30,160
And it's a platform as a service.

4543
06:23:30,320 --> 06:23:34,480
So if you've ever used Heroku, it is basically the Heroku of Azure.

4544
06:23:34,840 --> 06:23:38,560
And so Azure App Service takes care of a lot of the underlying infrastructure for you.

4545
06:23:38,560 --> 06:23:42,960
So it can do security patches of the OS and languages, load balancing, auto scaling.

4546
06:23:43,520 --> 06:23:55,040
Automated Manager, and then there's a lot of things that you can implement, and so for integrations such as Azure DevOps, GitHub Integrations, Docker Hub.

4547
06:23:55,960 --> 06:24:02,640
package management, easy to set up staging environments, custom domains, attaching SSL certificates.

4548
06:24:02,880 --> 06:24:10,880
So you can see that it just basically takes care of everything for you if it's really hard for you or time consuming for you to do all this on your own in Azure.

4549
06:24:11,160 --> 06:24:15,040
And the way it works is you pay based on an Azure app service plan.

4550
06:24:15,520 --> 06:24:17,760
Honestly, I find these really confusing.

4551
06:24:18,400 --> 06:24:22,560
I really like how AWS does Elastic Beanstalk because you're just paying for the underlying services.

4552
06:24:22,880 --> 06:24:24,320
But Azure has all these crazy

4553
06:24:24,960 --> 06:24:30,320
tiers here, but you have shared tier, which is free and shared, doesn't support Linux.

4554
06:24:30,320 --> 06:24:37,120
You have the dedicated tier, which is basic standard premium, premium version two and three, and the isolated tier.

4555
06:24:37,120 --> 06:24:44,480
And so another thing I need to note is that Azure App Service is not just for traditional VMs for monoliths.

4556
06:24:44,480 --> 06:24:47,760
You can also run Docker, single or multi containers.

4557
06:24:48,240 --> 06:24:52,640
And when you set up a project, you're going to choose your domain name on the azurewebsites.net.

4558
06:24:52,640 --> 06:24:54,760
Obviously, you can override that with your custom domain name.

4559
06:24:54,840 --> 06:24:55,840
But there you go.

4560
06:25:00,560 --> 06:25:03,280
Let's talk about Azure App Services runtimes.

4561
06:25:03,320 --> 06:25:05,040
And so let's define what a runtime is.

4562
06:25:05,280 --> 06:25:10,240
A runtime is software instructions that are executed while your program is running.

4563
06:25:10,400 --> 06:25:14,960
And so runtime generally means what programming language, libraries, and frameworks you're going to be using.

4564
06:25:15,400 --> 06:25:27,760
And so runtimes for Azure app services are predefined containers that has your programming languages and probably some commonly used libraries for those languages installed and probably commonly used languages for web frameworks.

4565
06:25:29,000 --> 06:25:32,000
And so the idea is that you're going to choose your runtime.

4566
06:25:32,720 --> 06:25:41,920
It could be.NET,.NET Core, Java, Ruby, which I'm very disappointed in Azure because as of shooting this video, they do not support

4567
06:25:42,560 --> 06:25:52,960
Ruby for Application Insights, but yet they have it here in Azure App Services, Node.js, PHP, Python, and there's all the logos, if you like seeing the logos.

4568
06:25:53,280 --> 06:25:56,200
And so Azure App Services generally has multiple versions.

4569
06:25:56,200 --> 06:25:59,040
So they have like Ruby 2.6, 2.7.

4570
06:25:59,280 --> 06:26:01,120
For PHP, they have a lot of versions.

4571
06:26:01,120 --> 06:26:02,800
For Node.js, they have a lot of versions.

4572
06:26:03,280 --> 06:26:10,640
But I just want to point out that it's pretty common for cloud providers to stop or to retire the old ones at some point to stop supporting them.

4573
06:26:12,080 --> 06:26:14,080
just because they want to keep things modern.

4574
06:26:14,520 --> 06:26:25,040
And the other thing is it also helps you keep with your best security practices, because really you should always be trying to upgrade to the latest version for those security patches and things like that.

4575
06:26:25,040 --> 06:26:25,760
So there you go.

4576
06:26:30,240 --> 06:26:38,640
Now let's say you wanted to use a language that wasn't supported on Azure App Services, like you wanted to use a

4577
06:26:39,400 --> 06:26:40,080
Elixir.

4578
06:26:40,320 --> 06:26:43,680
What you could do is create your own custom container, either for Windows or Linux.

4579
06:26:44,520 --> 06:26:49,240
And so you just go ahead and create your own Docker container in your local environment.

4580
06:26:49,440 --> 06:26:51,840
You can push it to an Azure Container Registry.

4581
06:26:52,240 --> 06:26:55,480
And then the idea is you can deploy your container image to your app service.

4582
06:26:55,480 --> 06:27:08,000
So I just wanted you to know that you could do that if there's some languages or other things, or maybe you're using a language, but you need some bundle or packages that are just baked into the container.

4583
06:27:08,360 --> 06:27:08,800
So there you go.

4584
06:27:12,880 --> 06:27:14,200
Let's talk about deployment slots.

4585
06:27:14,200 --> 06:27:19,120
So deployment slots allow you to create different environments for your web application and associate a different host name.

4586
06:27:19,440 --> 06:27:26,000
This is useful when you need a staging or a quality assurance environment, or maybe you need just like a developer environment, any kind of environment you want.

4587
06:27:26,240 --> 06:27:29,680
So think of it as a way to quickly clone your production environment for other uses.

4588
06:27:29,680 --> 06:27:33,560
And so down below here, you'd have your deployment slots, and there's your slots.

4589
06:27:33,560 --> 06:27:37,600
So maybe you have app staging beta, so that's the different host names there.

4590
06:27:38,240 --> 06:27:42,440
And so the idea is that not only do you have other environments, but there's also this thing called swapping.

4591
06:27:42,440 --> 06:27:58,920
And the idea is like, imagine you decide, like you make a clone of your production environment, and then you deploy the latest version to it, and then when you decide that it's good, it's in good shape, then what you can do is swap it out with your current production environment, and then just retire your old one.

4592
06:27:58,920 --> 06:28:00,640
This is called blue-green deployment.

4593
06:28:01,600 --> 06:28:05,760
And so that is a great way to do deployments, and I just wanted you to be aware of that.

4594
06:28:10,000 --> 06:28:21,280
So I wanted to talk about App Service Environment because I just wanted to show you how Azure App Service is not just for little toy apps or your small startup, but they can be really useful for larger enterprises.

4595
06:28:21,600 --> 06:28:32,000
So App Service Environment is an Azure App Service feature that provides a fully isolated and dedicated environment for securely running App Service at high scale.

4596
06:28:32,120 --> 06:28:38,040
And so this is going to allow you to host web or Windows web apps, Linux web apps, Docker containers, mobile apps, and

4597
06:28:38,120 --> 06:28:54,640
Functions and app service environments are appropriate for application workloads that require very high scale isolation and secure network access, high memory utilization, and again, when you think of platform as a service, you don't think at this kind of scale, so it's really impressive that Azure does this.

4598
06:28:55,080 --> 06:29:08,400
Customers can create multiple ASEs within a single Azure region or across multiple Azure regions, making ASEs ideal for horizontal scaling stateless application tiers in support of high request per second RPS workloads.

4599
06:29:08,680 --> 06:29:12,160
An ASE comes with its own pricing tier, and that's the isolated tier.

4600
06:29:12,720 --> 06:29:15,680
An ASE can be used to configure security architecture.

4601
06:29:15,840 --> 06:29:24,400
Apps running ASE can have their access gated by upstream devices, such as a web application firewall, also known as a WAF.

4602
06:29:27,200 --> 06:29:31,800
ASEs can be deployed into availability zones using zone pinning.

4603
06:29:31,800 --> 06:29:34,400
I don't know what that is, a zone pinning, but that sounds good to me.

4604
06:29:35,040 --> 06:29:38,560
And there are two deployment types for ASE.

4605
06:29:38,560 --> 06:29:41,880
We have external ASE and ILB ASE.

4606
06:29:41,880 --> 06:29:43,520
Let's go take a quick look at what those look like.

4607
06:29:43,760 --> 06:29:45,200
So here's a big diagram.

4608
06:29:45,960 --> 06:29:50,480
And look in the middle there, that's where our Azure service environment is.

4609
06:29:50,720 --> 06:29:52,480
It's in our own VNet and a subnet.

4610
06:29:52,760 --> 06:29:59,960
And the idea is that the reason it's called an external ASE is because it exposes the ASE hosted app on an internet.

4611
06:30:00,080 --> 06:30:01,760
accessible IP address.

4612
06:30:02,080 --> 06:30:14,400
And then down below, if you wanted to connect this, this is generally what people are probably using it for, but what you want to do is you can connect it to your on-premise via a site-to-site or express route VPN.

4613
06:30:15,320 --> 06:30:16,400
So that's something you can do with it.

4614
06:30:16,880 --> 06:30:25,440
And the other part is like you can, because the ESC is within the same VNet, it also has access to resources within the VNet without any additional configuration.

4615
06:30:25,440 --> 06:30:26,160
So that's really nice.

4616
06:30:26,440 --> 06:30:27,280
And then the second

4617
06:30:28,320 --> 06:30:34,880
a second one here, it looks, it's exactly identical, but there's one key difference, and it has this ILB there.

4618
06:30:35,160 --> 06:30:40,240
And an ILB stands for Internal Load Balancer, and that is basically the only difference.

4619
06:30:40,640 --> 06:30:42,080
So there you go.

4620
06:30:46,920 --> 06:30:51,560
All right, let's take a look here at deployment for Azure App Services, and let's just first define deployment.

4621
06:30:51,560 --> 06:31:08,720
So that's the action of pushing changes or updates from a local environment or repository into a remote environment, and Azure App Services has a lot of options for us, and that, to me, is the most powerful thing about Azure App Services, because it's easy to deploy a web app to a virtual machine backed by a database, but...

4622
06:31:09,080 --> 06:31:16,160
Figuring out deployment is a very time-consuming and tricky thing, and Azure App Services gives us so many options, unbelievable amount of options.

4623
06:31:16,160 --> 06:31:19,000
It is so great of them to do that for us.

4624
06:31:19,000 --> 06:31:35,680
So we can run from a package, deploy Zip or a RAR, deploy via FTP, deploy via Cloud Sync, deploy continuously from like GitHub, or use Azure Pipelines, deploy using custom containers, using Docker Hub, Azure Container Registry, deploy from a local Git repo.

4625
06:31:36,480 --> 06:31:42,000
deploy using GitHub Actions, deploy using GitHub Action containers, or deploy with an ARM template.

4626
06:31:42,000 --> 06:31:48,880
So we're not going to look at all of these, how they work, but let's look at a few of them so we just have an idea how robust of these options are.

4627
06:31:48,880 --> 06:31:51,360
The first one we're going to look at is running from a package.

4628
06:31:51,360 --> 06:31:56,040
And this is when files in the package are not copied to the www.root directory.

4629
06:31:56,040 --> 06:31:59,840
Instead, the zip package itself gets mounted directly as a read-only

4630
06:32:00,320 --> 06:32:02,640
www.route.directory.

4631
06:32:02,640 --> 06:32:07,920
So basically all other deployment methods in App Service have to deploy to the following directory.

4632
06:32:07,920 --> 06:32:10,680
If you're on a Windows machine, it's going to be home site www.root.

4633
06:32:10,720 --> 06:32:13,480
If you're on Linux, it's going to be home site www.root.

4634
06:32:13,640 --> 06:32:22,000
And so since the same directory is used by your app at runtime, it's possible for deployment to fail because of file lock conflicts.

4635
06:32:22,560 --> 06:32:28,960
And for that reason, the app might behave unpredictably because some of the files are not yet updated.

4636
06:32:29,120 --> 06:32:30,200
So this is the reason why you might

4637
06:32:30,280 --> 06:32:31,200
Want to create a package?

4638
06:32:32,320 --> 06:32:37,040
It's just because it circumvents the issue of just replacing files in the folder.

4639
06:32:38,440 --> 06:32:40,680
Another method is the zip and RAR deployment.

4640
06:32:40,680 --> 06:32:54,240
This uses the Kudu service that powers continuous integration-based deployments, and Kudu is used for a lot of things, but it's an engine behind Git deployments and Azure App Services, and it's an open-source project that can also run outside of Azure.

4641
06:32:55,080 --> 06:33:13,760
And so, CUDA supports the following functionality for zip file deployments, and it supports a lot more than just zips, but it does deletion of files leftover from a previous deployment, option to turn on the default build process, which includes package restore, deployment customization, including run deployment scripts, deployment logs, a file size of...

4642
06:33:15,400 --> 06:33:15,720
What is it?

4643
06:33:15,720 --> 06:33:16,080
Two gigs?

4644
06:33:16,080 --> 06:33:16,640
Two gigs.

4645
06:33:16,960 --> 06:33:22,560
And you can use it with the CLI, the API, via REST with curl, or the Azure portal.

4646
06:33:23,280 --> 06:33:29,600
So, by the way, that's you uploading a zip, but you're essentially using Kudu underneath, okay?

4647
06:33:31,080 --> 06:33:35,440
And so let's go take a look at another deployment method, which is File Transfer Protocol.

4648
06:33:36,160 --> 06:33:42,800
FTP has been around for forever, and this is pretty much how people thought you were supposed to deploy your apps in the late 90s and early 2000s.

4649
06:33:43,320 --> 06:33:50,240
I don't think it's a really great way to deploy, but the point is that if you want to do it this way or you have a use case that makes sense, you can do it.

4650
06:33:50,560 --> 06:34:01,360
So the idea is that in the deployment center, you would say, I want to use FTP, and you get an FTP endpoint, your username and password, and that's your credentials, and you use your FTP client to connect.

4651
06:34:02,080 --> 06:34:05,040
Very old school, but it's an option for you, which is really nice.

4652
06:34:05,040 --> 06:34:12,720
Another way, which to me is a bit bizarre, but it's cool that you can do it, is you can use Dropbox or OneDrive to deploy using Cloud Sync.

4653
06:34:12,720 --> 06:34:14,560
So the idea is that you have Dropbox.

4654
06:34:14,560 --> 06:34:16,960
It's a third-party cloud storage service.

4655
06:34:17,360 --> 06:34:18,400
OneDrive is the same thing.

4656
06:34:18,400 --> 06:34:20,000
It's just Microsoft's thing.

4657
06:34:20,680 --> 06:34:25,360
And so you go to the deployment center, configure Dropbox or OneDrive, and when you turn it on, it will just sync

4658
06:34:25,840 --> 06:34:29,680
or you'll just create a folder in your Dropbox drive, and that will get synced.

4659
06:34:29,680 --> 06:34:34,800
So that's the one for OneDrive, that's the one for Dropbox, and this is going to sync to that www.root there.

4660
06:34:35,440 --> 06:34:43,120
I would have loved to take in some screenshots, but I couldn't find how to turn the service on, but I know it exists, and I thought it was so bizarre.

4661
06:34:43,440 --> 06:34:44,320
But yeah, there you go.

4662
06:34:44,320 --> 06:34:46,320
That is the deployment methods there.

4663
06:34:51,080 --> 06:35:00,080
So the way you pay when you use Azure App Service is you need an Azure App Service plan, and that's going to determine how much you pay and what's going to be available to you.

4664
06:35:00,320 --> 06:35:04,960
You got 3 tiers, which we're going to go through here shortly, and we did mention them earlier.

4665
06:35:05,200 --> 06:35:07,440
I honestly do not like this whatsoever.

4666
06:35:07,440 --> 06:35:12,160
This tells you this is a Microsoft product because it has these wonky pricing tiers.

4667
06:35:12,320 --> 06:35:15,440
I hope in the future they'll change it, but that's just what it is.

4668
06:35:15,720 --> 06:35:16,800
And so let's go learn it.

4669
06:35:16,800 --> 06:35:20,080
So basically what you do is you have like this big wizard.

4670
06:35:20,640 --> 06:35:22,560
that tells you all the stuff that you can have.

4671
06:35:22,560 --> 06:35:24,320
It tells you what's included and stuff like that.

4672
06:35:25,040 --> 06:35:26,320
But let's work our way through it.

4673
06:35:26,320 --> 06:35:27,840
So the first thing is the shared tier.

4674
06:35:27,960 --> 06:35:28,800
And there's two types here.

4675
06:35:28,800 --> 06:35:29,920
We got free and shared.

4676
06:35:30,120 --> 06:35:32,120
And so there's the free tier, that red one there.

4677
06:35:32,120 --> 06:35:32,880
It's called F1.

4678
06:35:33,200 --> 06:35:39,520
It gives you 1 GB of disk space, up to 10 apps on a single shared instance, no SLA for availability.

4679
06:35:39,840 --> 06:35:43,360
And each app has a compute quota of 60 minutes per day.

4680
06:35:43,600 --> 06:35:44,000
So there you go.

4681
06:35:44,000 --> 06:35:45,520
You get some free tier there.

4682
06:35:45,520 --> 06:35:46,560
Then there's the shared tier.

4683
06:35:46,880 --> 06:35:50,520
This provides up to 100 apps on a single shared instance, no SLA availability.

4684
06:35:50,640 --> 06:35:53,120
Each app has a compute quota of 240 minutes per day.

4685
06:35:54,000 --> 06:35:56,640
And the thing is, that I didn't know where the button is for that.

4686
06:35:56,640 --> 06:35:59,440
So like the next thing right beside it is the dedicated tier.

4687
06:35:59,840 --> 06:36:03,520
And I thought that's what it would be because it says 100 total ACUs.

4688
06:36:04,000 --> 06:36:05,680
So is it?

4689
06:36:05,840 --> 06:36:06,560
I'm not sure.

4690
06:36:06,560 --> 06:36:08,520
But anyway, the point is there is a shared tier.

4691
06:36:08,520 --> 06:36:09,600
Where it is, I don't know.

4692
06:36:10,160 --> 06:36:13,840
And you can't use the shared tier on Linux-based systems.

4693
06:36:13,840 --> 06:36:14,800
So you're using Windows.

4694
06:36:14,800 --> 06:36:17,560
If you're using Windows, you've got to use bigger instances anyway, which I don't know.

4695
06:36:17,560 --> 06:36:18,480
I don't like that too much.

4696
06:36:18,880 --> 06:36:20,000
But that's what it is.

4697
06:36:21,040 --> 06:36:24,200
Moving on over, we're now into the dedicated tiers.

4698
06:36:24,200 --> 06:36:26,720
And look, it's right beside the free tier.

4699
06:36:26,720 --> 06:36:27,320
That's the green one.

4700
06:36:27,320 --> 06:36:28,160
It says B1.

4701
06:36:28,640 --> 06:36:31,200
And if you expand it, actually has a couple other tiers there.

4702
06:36:31,200 --> 06:36:34,160
So I just wanted to show you that there was three there.

4703
06:36:34,480 --> 06:36:39,200
And so for dedicated tiers, we've got basic, standard, premium, premium version 2, premium version 3.

4704
06:36:39,440 --> 06:36:40,400
And we're looking at basic.

4705
06:36:40,400 --> 06:36:41,280
That's what that is.

4706
06:36:41,440 --> 06:36:46,960
More disk space, unlimited apps, 3 levels in this tier that offer varying amount of compute power, memory, disk usage.

4707
06:36:47,280 --> 06:36:48,960
It must be B1, B2, B3.

4708
06:36:49,840 --> 06:36:52,960
And then the next thing over is the standard.

4709
06:36:53,040 --> 06:36:55,680
And we had to switch tabs there onto the production tab.

4710
06:36:55,680 --> 06:36:58,080
Notice the terminologies don't really match the tiers.

4711
06:36:58,880 --> 06:37:12,000
And so with standard, you can scale out to three dedicated instances, has an SLA of 99.95% availability, and three levels in this tier that are offering varying amounts of compute, power, memory, and storage disk.

4712
06:37:12,760 --> 06:37:13,440
And so then

4713
06:37:14,200 --> 06:37:15,200
So that's that tier there.

4714
06:37:15,200 --> 06:37:18,160
And we're on to our last tier, which is the premium tier.

4715
06:37:18,560 --> 06:37:21,360
And this scales to 10 dedicated instances.

4716
06:37:21,520 --> 06:37:27,600
It has availability of SLA of 99.95% and multiple levels of hardware.

4717
06:37:27,600 --> 06:37:29,040
So that's the dedicated tiers.

4718
06:37:29,440 --> 06:37:31,720
Then we're on to the last thing, which is isolated.

4719
06:37:31,720 --> 06:37:34,000
And this is really only going to be used, I think, for ASC.

4720
06:37:34,400 --> 06:37:43,320
So the isolated tier has dedicated Azure virtual networks, full network compute isolation, scales out to 100 instances, availability SLA of 99.95%.

4721
06:37:43,320 --> 06:37:46,880
And again, I think it's just for those ASEs.

4722
06:37:47,920 --> 06:37:48,640
But there you go.

4723
06:37:48,640 --> 06:37:50,240
That is all the tiers.

4724
06:37:50,240 --> 06:37:51,760
And hopefully it makes sense to you.

4725
06:37:52,080 --> 06:37:56,680
But it is a little bit tricky to figure out what to choose, but you don't really get to pick at a granular level.

4726
06:37:56,680 --> 06:37:57,600
That's what I don't like.

4727
06:37:58,720 --> 06:38:02,240
But it is a really great service, Azure App Service.

4728
06:38:02,240 --> 06:38:04,960
It does figure everything out for you, so maybe it's okay for you.

4729
06:38:09,360 --> 06:38:12,240
So let's say you're using Azure App Services to host...

4730
06:38:12,800 --> 06:38:15,440
one of your applications and you need to run a random script.

4731
06:38:15,440 --> 06:38:16,560
How are you going to do that?

4732
06:38:16,800 --> 06:38:18,960
That's where WebJobs comes into play.

4733
06:38:19,200 --> 06:38:21,160
So it comes at no additional cost.

4734
06:38:21,160 --> 06:38:27,800
And WebJobs is not yet supported for Linux, which is of no surprise here because Microsoft is all about Windows.

4735
06:38:27,800 --> 06:38:29,520
But I hope one day they will support it.

4736
06:38:29,920 --> 06:38:34,400
The following types they support as of today are command files, bat files, executables.

4737
06:38:34,640 --> 06:38:40,560
We've got PowerShell files, bash files, PHP files, Python files, JavaScript files, and Java files.

4738
06:38:40,800 --> 06:38:42,520
When you go ahead and create your job, you're going to

4739
06:38:42,600 --> 06:38:43,800
to have between two types.

4740
06:38:43,800 --> 06:38:45,280
So you got continuous and triggered.

4741
06:38:45,760 --> 06:38:48,880
Continuous means that it's going to run continually until stopped, which is pretty clear.

4742
06:38:49,440 --> 06:38:51,800
And this particular mode supports debugging.

4743
06:38:51,800 --> 06:38:54,080
So if you need debugging, that's the mode you're going to be using.

4744
06:38:54,320 --> 06:38:57,200
For triggered, this only runs when a trigger occurs.

4745
06:38:57,440 --> 06:38:59,440
And you have different kinds of triggered here.

4746
06:38:59,440 --> 06:39:02,240
So you notice we have scheduled and we can enter a cron job in.

4747
06:39:02,480 --> 06:39:07,120
And this will also expose a webhook that can be called to enable scenarios like scheduling.

4748
06:39:07,120 --> 06:39:08,880
I think that would be like manual triggers.

4749
06:39:09,440 --> 06:39:10,960
It doesn't support debugging though.

4750
06:39:11,120 --> 06:39:18,040
So looking at web job scales, and this is for continuous only, we have multi instance and single instance.

4751
06:39:18,040 --> 06:39:23,840
So multi will scale your web jobs across all instances for your app service plan.

4752
06:39:24,240 --> 06:39:30,080
And single instance will only keep a single copy of your web job running regardless of the Azure app plan instance count.

4753
06:39:30,160 --> 06:39:30,880
So there you go.

4754
06:39:35,480 --> 06:39:40,880
Hey, this is Andrew Brown from Exam Pro, and we are going to be learning about Azure App Services in this follow-along.

4755
06:39:41,360 --> 06:39:47,920
And it's a service that's supposed to make it easy for you to deploy web applications, I say supposed to, because it really depends on your stack.

4756
06:39:48,240 --> 06:39:51,600
Azure has more synergies with other stacks than others.

4757
06:39:51,600 --> 06:39:56,720
So like if you're like me and you like Ruby on Rails, you're going to find a lot of friction with Rails and Linux.

4758
06:39:56,880 --> 06:40:02,560
But if you're using something like Windows servers or Python or.NET, you're going to have a much easier time.

4759
06:40:02,800 --> 06:40:05,400
Still really great service, just wish they'd make it a bit more broad there.

4760
06:40:05,480 --> 06:40:05,600
there.

4761
06:40:05,760 --> 06:40:06,960
But let's hop into it.

4762
06:40:06,960 --> 06:40:10,640
So before we can go use that service, let's make sure that it's activated.

4763
06:40:11,120 --> 06:40:12,560
And so we'll go over here.

4764
06:40:13,680 --> 06:40:15,280
And we'll go to Azure subscription.

4765
06:40:15,600 --> 06:40:18,000
And then down below, we're going to go to resource provider.

4766
06:40:18,000 --> 06:40:21,840
Now you'd think what you could do is just type in app services.

4767
06:40:22,560 --> 06:40:26,560
And you'd be wrong because the service is under a particular provider.

4768
06:40:26,760 --> 06:40:31,920
So if you want to figure out what provider it is, we can go Azure resource providers.

4769
06:40:34,040 --> 06:40:36,400
And they have a page on documentation here that lists them all.

4770
06:40:37,200 --> 06:40:43,680
So if I search for Azure App Services, it's under web and domain registration.

4771
06:40:43,680 --> 06:40:45,440
So we're going to make sure this is registered.

4772
06:40:45,440 --> 06:40:50,400
If we're using a custom domain, which we are not today, we need this one activated.

4773
06:40:50,400 --> 06:40:54,680
So going back here, I will type in web and you can see it's registered.

4774
06:40:54,680 --> 06:40:57,520
So if yours is not registered, go ahead and hit that.

4775
06:40:57,520 --> 06:41:02,120
I believe this by default is generally registered with new Azure accounts.

4776
06:41:02,120 --> 06:41:03,960
So I don't think that is an issue for you.

4777
06:41:04,400 --> 06:41:10,320
But we'll go back up here, close these additional tabs, and we will type in Azure App Services.

4778
06:41:11,040 --> 06:41:12,840
And we will look for that service.

4779
06:41:12,840 --> 06:41:13,760
So here it is.

4780
06:41:13,760 --> 06:41:15,360
And we'll go ahead and hit Add.

4781
06:41:17,880 --> 06:41:19,360
And so I'm going to give it a new name.

4782
06:41:19,360 --> 06:41:23,280
I just made it a moment ago, but I'm going to try again and try to use the same name.

4783
06:41:23,280 --> 06:41:25,040
So we're going to call this Voyager.

4784
06:41:27,200 --> 06:41:27,520
Great.

4785
06:41:27,600 --> 06:41:30,000
And then I'm going to go ahead and name this Voyager.

4786
06:41:30,000 --> 06:41:33,360
And I already know that is taken, so I'm going to type in Delta Flyer.

4787
06:41:35,040 --> 06:41:37,520
And these are fully qualified domains, so they are unique.

4788
06:41:37,520 --> 06:41:40,480
With Azure App Services, you can run a Docker container.

4789
06:41:40,480 --> 06:41:42,000
We're doing code this time around.

4790
06:41:42,400 --> 06:41:44,400
And what I like to use is Ruby.

4791
06:41:45,120 --> 06:41:51,600
But again, if I want to use the CICD, I'm not going to be able to use the deployment center with Ruby, so that is not possible.

4792
06:41:52,240 --> 06:41:55,640
And so we're going to go with Python and run either a Flask or a Django app.

4793
06:41:55,640 --> 06:41:56,640
I haven't decided yet.

4794
06:41:56,960 --> 06:41:59,840
I am in Canada, so let's go to Canada East.

4795
06:42:00,400 --> 06:42:03,200
And down below here, we have the plans.

4796
06:42:03,920 --> 06:42:06,080
Generally, the plans will tell you the cost underneath.

4797
06:42:06,560 --> 06:42:11,360
You'll notice that it's loading, but I just want to show you that there are some discrepancies in terms of pricing.

4798
06:42:11,360 --> 06:42:20,160
So if I was to go to Azure App Services pricing, and we were to pull this up here, we can kind of see the pricing here.

4799
06:42:21,920 --> 06:42:22,240
Okay.

4800
06:42:22,640 --> 06:42:26,160
And if we scroll on down, right now we're looking at a premium V2.

4801
06:42:26,960 --> 06:42:28,360
And oh no, I don't need help.

4802
06:42:28,480 --> 06:42:28,960
I'm okay.

4803
06:42:29,480 --> 06:42:31,440
You'll notice that it's 20 cents per hour.

4804
06:42:31,440 --> 06:42:38,640
So if I go here and do that times 730, because there's 730 hours in a year, that's $146.

4805
06:42:38,640 --> 06:42:41,120
I believe this is showing me in USD dollars.

4806
06:42:41,120 --> 06:42:41,440
Yeah.

4807
06:42:42,000 --> 06:42:47,200
And here it's showing me 103 Canadian, which is lower.

4808
06:42:47,840 --> 06:42:52,280
So it could be that because I'm running in a Canada East region, it's the

4809
06:42:52,280 --> 06:42:53,440
the price is different.

4810
06:42:53,600 --> 06:43:06,280
But you could imagine that if I had this at this cost at, what did we say here, at 146 USD to CAD, I'd actually be paying $182.

4811
06:43:06,400 --> 06:43:08,560
So you got to watch out for that kind of stuff.

4812
06:43:08,560 --> 06:43:10,920
But I'm pretty sure this is what the cost is.

4813
06:43:10,920 --> 06:43:14,960
So just be aware that if you look stuff up in here, it's not necessarily reflective.

4814
06:43:14,960 --> 06:43:17,280
So you got to do a little bit more work to figure that out.

4815
06:43:17,800 --> 06:43:21,680
If we wanted to go here, we cannot choose the free tier when we're using Linux.

4816
06:43:21,680 --> 06:43:23,680
If we're using Windows, I believe we can use it.

4817
06:43:24,080 --> 06:43:26,480
We're working with Linux today, so that's just how it's going to be.

4818
06:43:27,280 --> 06:43:31,760
For the B1, this is totally fine, but we want to utilize deployment slots.

4819
06:43:31,760 --> 06:43:37,760
Deployment slots is an advanced feature of the production version, and that's the only way we're going to be able to use it here.

4820
06:43:37,760 --> 06:43:47,640
This is $0.20 per hour again, so I don't want to be doing this for too long, but I think what we'll do is before we do that, we can just do an upgrade to dev to prod so we can experience

4821
06:43:47,720 --> 06:43:49,840
I'm going to go and just choose B1.

4822
06:43:49,840 --> 06:43:52,560
Okay, so go next.

4823
06:43:53,840 --> 06:43:58,800
We do not need any application insights for the time being, and it will not let us, so it's okay.

4824
06:43:59,120 --> 06:44:07,840
We'll go next, review and create, and we'll go ahead and create this resource here, and I will see you back when this is done.

4825
06:44:08,680 --> 06:44:11,440
So our resource is now set up.

4826
06:44:11,440 --> 06:44:12,880
We'll go to resource.

4827
06:44:12,880 --> 06:44:20,080
And now that we're in here, you'll notice if we hit browse, we're not going to see anything because we do not have anything deployed, which makes sense, right?

4828
06:44:20,800 --> 06:44:23,040
So we're going to actually have to go ahead and deploy something.

4829
06:44:23,040 --> 06:44:25,840
So we are going to make our way over to the deployment center.

4830
06:44:26,960 --> 06:44:31,000
And it's just going to tell us that we have yet to configure anything, and that's totally fine.

4831
06:44:31,000 --> 06:44:32,480
We're going to go to settings.

4832
06:44:33,880 --> 06:44:34,960
It'll give it a moment.

4833
06:44:35,400 --> 06:44:38,480
And so the thing is that we're going to need something to deploy.

4834
06:44:39,360 --> 06:44:45,680
I did not create an app, but the great thing is in the Azure documentation, they have a bunch of quick starts here.

4835
06:44:46,080 --> 06:44:50,640
All right, and apparently they have one for Ruby as well, but today we are looking at Python.

4836
06:44:51,280 --> 06:44:56,720
And so they actually have an example repository for us here, which is GitHub.

4837
06:44:57,280 --> 06:45:00,160
.com/azuresamples/python/docs/helloworld.

4838
06:45:00,480 --> 06:45:05,440
And I mean, I could go make a repo for you, but we might as well just use the one that is already provided to us.

4839
06:45:05,840 --> 06:45:08,160
So I'm just going to pull this up to show you what's in it.

4840
06:45:08,160 --> 06:45:10,080
It's a very, very simple application.

4841
06:45:10,240 --> 06:45:14,800
Even if you don't know anything about building web apps, I'm going to walk you through it really easily here, okay?

4842
06:45:15,040 --> 06:45:16,800
So we're going to open up app.py.

4843
06:45:16,800 --> 06:45:18,560
So we are using Flask.

4844
06:45:18,560 --> 06:45:23,680
If you've never heard of Flask, it is a very minimal Python framework for creating web apps.

4845
06:45:24,440 --> 06:45:28,560
very uninspiring homepage here, but it gets the job done.

4846
06:45:28,800 --> 06:45:32,480
It's going to create a default route for us, which we have there.

4847
06:45:32,720 --> 06:45:34,640
We're going to call hello here.

4848
06:45:34,800 --> 06:45:36,120
And we're going to have hello world.

4849
06:45:36,120 --> 06:45:37,760
So that's all that's going on here.

4850
06:45:38,520 --> 06:45:39,520
Very, very simple.

4851
06:45:39,840 --> 06:45:41,400
And we have a requirements.

4852
06:45:41,400 --> 06:45:42,840
This is our package manager.

4853
06:45:42,840 --> 06:45:44,720
I don't know why Python uses txt files.

4854
06:45:44,720 --> 06:45:46,560
It's very outdated to me, but that's what they use.

4855
06:45:46,960 --> 06:45:48,640
And here we have flask.

4856
06:45:49,760 --> 06:45:50,080
All right.

4857
06:45:50,960 --> 06:45:52,160
So we're going to use that repo.

4858
06:45:52,520 --> 06:45:55,880
It's a public repo, so it should be very easy for us to connect.

4859
06:45:55,880 --> 06:46:02,560
So we'll drop down, go to GitHub, and the next thing we need to do is authorize GitHub.

4860
06:46:03,360 --> 06:46:09,200
All right, so I ran into a bit of trouble there because I could not authenticate my GitHub account, but you know what?

4861
06:46:09,200 --> 06:46:12,400
I just made another GitHub account, so that made it a lot easier.

4862
06:46:12,400 --> 06:46:15,840
I'm going to go ahead here, hit GitHub, and we're going to try to authorize it.

4863
06:46:16,240 --> 06:46:19,520
And so now I'm logged into this new one called ExamProDev.

4864
06:46:19,960 --> 06:46:23,760
And we'll go ahead and authorize this application, and we're now in good shape.

4865
06:46:24,720 --> 06:46:36,680
This repository doesn't have anything in it, so if I want to clone something, I guess I'll probably have to fork that repo, so we'll give it a moment to authorize, and while that's going, I think that's what I'm going to do.

4866
06:46:36,680 --> 06:46:40,080
I'm going to go and fork the example repo.

4867
06:46:40,080 --> 06:46:49,480
If I can find the link again here myself, I believe it...

4868
06:46:49,560 --> 06:46:50,560
It is.

4869
06:46:51,520 --> 06:46:52,840
That's still authorizing over there.

4870
06:46:52,840 --> 06:46:53,840
I'm still looking for it.

4871
06:46:53,840 --> 06:46:57,120
So it was like examples or something.

4872
06:46:57,120 --> 06:46:58,480
Samples or examples.

4873
06:47:00,480 --> 06:47:02,000
All right, so I found a way around the problem.

4874
06:47:02,000 --> 06:47:04,160
I just made a new GitHub account.

4875
06:47:04,160 --> 06:47:05,440
So that's all I had to do.

4876
06:47:06,280 --> 06:47:09,280
And I just won't be using my primary account until I get my phone back.

4877
06:47:10,000 --> 06:47:11,600
So what we'll do is go hit connect.

4878
06:47:11,600 --> 06:47:12,880
I'll hit authorize.

4879
06:47:13,440 --> 06:47:17,520
And it didn't prompt me because it already connected to this new one called Exam Pro Dev.

4880
06:47:17,520 --> 06:47:19,200
You might have to put your credentials in here.

4881
06:47:19,560 --> 06:47:21,200
And it's going to ask me to select some things.

4882
06:47:21,440 --> 06:47:27,200
It's a new account, so there are no organizations, there are no repositories, there are no branches, totally brand new.

4883
06:47:27,600 --> 06:47:30,400
So what I'm going to need to do is get a repo in there.

4884
06:47:30,400 --> 06:47:33,520
So we'll just go ahead and fork the Azure samples one.

4885
06:47:33,920 --> 06:47:40,240
So that is Azure samples, Python, docs, hello world.

4886
06:47:41,960 --> 06:47:43,360
And if I type that right, we're in good shape.

4887
06:47:43,360 --> 06:47:45,680
I'm going to go ahead and fork this repository.

4888
06:47:47,440 --> 06:47:48,160
I'll say got it.

4889
06:47:48,160 --> 06:47:51,200
And then I'll move this off screen here.

4890
06:47:51,600 --> 06:47:52,600
This is now cloned.

4891
06:47:52,600 --> 06:47:53,680
You should see it cloned here.

4892
06:47:54,720 --> 06:47:56,160
And we'll go back here.

4893
06:47:56,320 --> 06:47:58,320
And this probably isn't live.

4894
06:47:58,320 --> 06:48:00,560
So there's no refresh button here.

4895
06:48:00,800 --> 06:48:02,160
So we'll have to hit discard.

4896
06:48:02,720 --> 06:48:04,400
And we will give this another go here.

4897
06:48:05,680 --> 06:48:08,240
And we will select our organization, which is our name.

4898
06:48:08,240 --> 06:48:09,760
There's the repository.

4899
06:48:10,560 --> 06:48:11,760
should be main branch.

4900
06:48:11,760 --> 06:48:12,760
It's kind of outdated.

4901
06:48:12,760 --> 06:48:14,400
I'm sorry, but it's called master.

4902
06:48:14,400 --> 06:48:15,280
That's what it is.

4903
06:48:15,760 --> 06:48:16,480
Not my fault.

4904
06:48:16,480 --> 06:48:17,920
That's Azure's fault.

4905
06:48:17,920 --> 06:48:18,240
Okay.

4906
06:48:19,520 --> 06:48:21,760
And I think that's it.

4907
06:48:22,160 --> 06:48:24,800
I don't know if we need a workflow configuration file.

4908
06:48:24,800 --> 06:48:26,800
I don't think so.

4909
06:48:26,800 --> 06:48:29,040
I'm just going to double check here.

4910
06:48:29,040 --> 06:48:30,240
No, I don't think so.

4911
06:48:30,560 --> 06:48:33,440
And what we'll do is we'll just go ahead and save that.

4912
06:48:38,890 --> 06:48:41,090
And so now we are set up for deployment.

4913
06:48:50,880 --> 06:48:55,560
All right, so now that that's all hooked up, if we were to go to browse, we're actually still seeing the default page.

4914
06:48:55,560 --> 06:49:01,080
A deployment hasn't been triggered just yet, so the way it works is it's using GitHub Actions.

4915
06:49:01,080 --> 06:49:05,040
So if we click into our, I'm going to call it main branch, I know they got the wrong name, but...

4916
06:49:05,480 --> 06:49:07,400
We're going to click into our GitHub workflows.

4917
06:49:07,400 --> 06:49:10,320
And then below here, we can see we have a YAML file.

4918
06:49:10,920 --> 06:49:13,240
And this is for GitHub Actions integration here.

4919
06:49:13,240 --> 06:49:18,320
And so what it's doing is it's specifying the branch, how it's going to build.

4920
06:49:18,320 --> 06:49:20,080
It's going to run on Ubuntu latest.

4921
06:49:20,320 --> 06:49:22,160
The steps it's going to do, it's going to check it out.

4922
06:49:22,160 --> 06:49:24,160
It's going to set up the Python version.

4923
06:49:24,160 --> 06:49:25,280
It's going to build it.

4924
06:49:25,280 --> 06:49:26,720
It's going to do that stuff.

4925
06:49:27,120 --> 06:49:34,320
And so in order for this to take action, we'd actually have to go ahead and make some kind of manual change.

4926
06:49:34,800 --> 06:49:35,680
we have yet to do so.

4927
06:49:36,480 --> 06:49:39,840
So what we'll do is we'll go back to our main here.

4928
06:49:41,440 --> 06:49:45,840
And it should be as simple as just changing something here.

4929
06:49:46,240 --> 06:49:50,120
So it's not, I'm not sure how it's supposed to know that it's supposed to be doing the hello.

4930
06:49:50,160 --> 06:49:51,520
Oh, I guess, yeah, sorry.

4931
06:49:51,680 --> 06:49:53,840
So this means it's going to route over to here.

4932
06:49:54,120 --> 06:49:56,400
So I'm just going to make any kind of change here.

4933
06:49:56,480 --> 06:49:58,800
Doesn't matter what it is, just one space.

4934
06:49:59,360 --> 06:50:00,720
We'll go ahead and give it a commit.

4935
06:50:01,840 --> 06:50:03,120
And it

4936
06:50:04,000 --> 06:50:06,960
If I go back to my latest commits, we should see that I made that change.

4937
06:50:06,960 --> 06:50:07,760
There it is.

4938
06:50:08,120 --> 06:50:09,520
We'll go back over here.

4939
06:50:09,840 --> 06:50:11,680
And this should be deploying.

4940
06:50:14,640 --> 06:50:18,400
So if we go over to logs, here, you can see one's in progress right now.

4941
06:50:18,400 --> 06:50:18,800
Okay.

4942
06:50:19,160 --> 06:50:24,560
And so that's what we're waiting, we're just going to see that finished there, we probably open the logs and get some more information there.

4943
06:50:25,080 --> 06:50:27,400
And so it just brings you back over to GitHub Actions.

4944
06:50:27,400 --> 06:50:30,400
And so here's GitHub Actions, and it's performing the stuff here.

4945
06:50:30,800 --> 06:50:33,760
So we're just going to give it time here, and I'll see you back in a moment.

4946
06:50:34,480 --> 06:50:35,600
So we didn't have to wait too long.

4947
06:50:35,600 --> 06:50:37,920
It only took one minute and 29 seconds.

4948
06:50:37,920 --> 06:50:39,440
If we go back over here.

4949
06:50:40,360 --> 06:50:41,600
we might need to do a refresh.

4950
06:50:41,600 --> 06:50:44,560
And so we can see this is reflected over here.

4951
06:50:45,000 --> 06:50:50,880
And so if we go back to, it doesn't really matter if we go to settings or logs here, but I'm going to hit browse and see if my page is deployed.

4952
06:50:50,880 --> 06:50:52,000
It still is not.

4953
06:50:52,320 --> 06:50:58,560
So we do have a small little problem here, and it's really going to just have to do with how the app is served, so that's what we need to figure out next.

4954
06:50:59,400 --> 06:51:03,360
All right, so our app is not currently working, and there's a few approaches we can take.

4955
06:51:03,360 --> 06:51:06,960
And the thing I can think right away is we should go and SSH into that instance.

4956
06:51:07,280 --> 06:51:14,800
If you scroll on down here from developer tools, you can go to SSH and click this button, and that's going to SSH you right into that machine right away.

4957
06:51:15,040 --> 06:51:20,840
You can also access SSH via the CLI command.

4958
06:51:20,840 --> 06:51:25,760
So I believe it's like, it's like AZ web app.

4959
06:51:28,680 --> 06:51:29,280
SSH.

4960
06:51:30,000 --> 06:51:31,200
It'll do the exact same thing.

4961
06:51:31,200 --> 06:51:33,680
You do that from the Cloud Shell, but that's not what we're doing today.

4962
06:51:33,680 --> 06:51:38,080
If I give this an LS in here, and we're in Linux, we can see we have our app here.

4963
06:51:38,080 --> 06:51:40,880
And what I would do is I would see what's running.

4964
06:51:40,880 --> 06:51:47,560
So I would do a Puma, or sorry, not Puma, PS aux grep Python.

4965
06:51:47,560 --> 06:51:51,200
And you can notice that we have GUnicorn that's running.

4966
06:51:51,200 --> 06:51:54,240
So that is where our Python instances are running.

4967
06:51:54,240 --> 06:51:56,640
So you're not looking for Flask, you're looking for Python here.

4968
06:51:57,440 --> 06:52:02,000
And if we wanted to make sure that was working, we just type in curl local host.

4969
06:52:04,840 --> 06:52:07,440
And so that is going to return a port 80.

4970
06:52:07,440 --> 06:52:11,840
So that tells me that, because like curl just means like, let's go look at that page.

4971
06:52:11,840 --> 06:52:14,960
It should return some HTML, like print out the HTML to us.

4972
06:52:15,360 --> 06:52:16,960
So that means the app is not running.

4973
06:52:17,360 --> 06:52:24,000
So what you could do is run Flask run, and it's going to start on port 5000.

4974
06:52:24,800 --> 06:52:25,200
Right?

4975
06:52:25,200 --> 06:52:26,400
So what I can do.

4976
06:52:28,160 --> 06:52:31,560
is I can go up back to my deployment center here.

4977
06:52:31,560 --> 06:52:34,640
And I'm going to go get that link here.

4978
06:52:36,520 --> 06:52:38,160
And just ignore the fact that it's working.

4979
06:52:38,560 --> 06:52:39,640
It's not working right now.

4980
06:52:39,640 --> 06:52:40,800
I know for certain it's not.

4981
06:52:41,440 --> 06:52:45,600
But if we do 5,000, that won't resolve because port 5,000 isn't open.

4982
06:52:45,600 --> 06:52:48,960
So we can't really just put 5,000 in there.

4983
06:52:48,960 --> 06:52:51,360
And the default server here would be 5,000.

4984
06:52:51,600 --> 06:52:54,880
So if I stop this and I specify port 80,

4985
06:52:58,320 --> 06:53:00,320
Then this will start up the app on port 80.

4986
06:53:00,320 --> 06:53:04,480
And so now when you go here, okay, it will work.

4987
06:53:04,880 --> 06:53:10,480
This is not a great way because, of course, as soon as you kill it here, technically the site should stop running.

4988
06:53:10,840 --> 06:53:12,640
And so you'll run into that step.

4989
06:53:13,120 --> 06:53:18,560
So what we need to do is provide a configuration to Gunicorn, which is a Python thing.

4990
06:53:18,720 --> 06:53:26,960
Again, it's not so important that you know what these things are, but the idea is that you understand as an administrator, you want to make sure you have an app that runs after you do a deploy.

4991
06:53:27,320 --> 06:53:30,480
And so in this particular one, we need a startup.txt.

4992
06:53:31,040 --> 06:53:36,400
And interestingly enough, there is a example code by the same author of the other one we were looking at here.

4993
06:53:36,720 --> 06:53:38,080
I believe it's the same person.

4994
06:53:39,240 --> 06:53:42,640
or it might not be, but they have a startup.txt, right?

4995
06:53:43,240 --> 06:53:48,240
And so in here, you can see that it binds on port 000, it starts up for workers, starts up the app.

4996
06:53:48,800 --> 06:53:49,280
All right.

4997
06:53:49,760 --> 06:53:52,080
And so that's something that we can go ahead and do.

4998
06:53:53,120 --> 06:54:01,760
So what I will do is I will go back to my GitHub repository that we have here.

4999
06:54:03,040 --> 06:54:04,880
And I can just go ahead and add a new file.

5000
06:54:04,960 --> 06:54:06,160
So I'm going to say

5001
06:54:08,520 --> 06:54:10,720
Add a file, create a new file here.

5002
06:54:11,440 --> 06:54:13,840
We'll call it startup.txt.

5003
06:54:15,120 --> 06:54:18,080
I'm going to copy this command here and paste it in there.

5004
06:54:18,320 --> 06:54:22,160
So GUnicorn will bind the workers and start up on the app.

5005
06:54:23,120 --> 06:54:26,080
Startup app is being ran by something here.

5006
06:54:26,080 --> 06:54:28,560
So if I go back here, I think they have a startup pie here.

5007
06:54:29,520 --> 06:54:31,200
And that's all that it is doing.

5008
06:54:33,080 --> 06:54:34,720
I think I want to...

5009
06:54:36,280 --> 06:54:37,760
I could do it this way, I suppose.

5010
06:54:37,760 --> 06:54:38,800
Let me just see here.

5011
06:54:39,680 --> 06:54:41,280
There's just a slightly different name.

5012
06:54:41,680 --> 06:54:43,760
So they actually have like a full app going on here.

5013
06:54:45,160 --> 06:54:47,120
And I just want a very simple Flask app.

5014
06:54:47,360 --> 06:54:51,440
So I think what I can do is put Flask run here.

5015
06:54:55,440 --> 06:54:56,160
Port 80.

5016
06:54:58,080 --> 06:54:59,680
And that should start up the app there.

5017
06:54:59,680 --> 06:55:01,200
I'm going to go ahead and commit that file.

5018
06:55:02,600 --> 06:55:02,880
Okay.

5019
06:55:03,280 --> 06:55:08,400
And as soon as I commit that, if I go back to my actions, it created that startup file there.

5020
06:55:08,400 --> 06:55:10,400
So it should trigger a build.

5021
06:55:12,080 --> 06:55:12,800
It's queued up.

5022
06:55:14,480 --> 06:55:16,240
And I'll just put this tab up here.

5023
06:55:16,720 --> 06:55:17,920
So we'll be back here in two seconds.

5024
06:55:17,920 --> 06:55:22,360
And if I give this a nice refresh, yeah, you can see it deploys in progress.

5025
06:55:22,360 --> 06:55:24,480
So this doesn't take too long.

5026
06:55:24,480 --> 06:55:26,160
We'll just wait, close that there.

5027
06:55:26,160 --> 06:55:27,440
We'll just wait a few minutes.

5028
06:55:27,440 --> 06:55:30,800
We click logs, it just opens it back up here and we'll see how that goes.

5029
06:55:31,480 --> 06:55:39,840
All right, so your deploy may have finished there, but the thing is that we're not going to really know if a change has taken effect unless we actually go ahead and update our code.

5030
06:55:40,160 --> 06:55:48,000
So what I want you to do is go to your code tab, go to your app.py, we'll hit edit, and I'm going to go ahead and change this to Vulkan.

5031
06:55:49,320 --> 06:55:52,000
And then we'll scroll on down, hit commit changes.

5032
06:55:52,360 --> 06:55:54,880
And we'll make our way back over to our deployment center.

5033
06:55:55,280 --> 06:55:56,720
And we'll give it a refresh here.

5034
06:55:57,000 --> 06:55:59,520
And we're just going to wait until this one is complete.

5035
06:55:59,600 --> 06:56:01,720
And we will double check to make sure that is changed.

5036
06:56:01,720 --> 06:56:04,000
If it is not, we will take action to fix that.

5037
06:56:04,000 --> 06:56:04,320
Okay.

5038
06:56:05,520 --> 06:56:05,920
All right.

5039
06:56:05,920 --> 06:56:08,880
So we just waited a little while there for that deploy to happen.

5040
06:56:08,880 --> 06:56:12,960
And if we go to our website here, it is taking effect.

5041
06:56:12,960 --> 06:56:14,400
So that's all we had to do to get it working.

5042
06:56:14,400 --> 06:56:15,280
So that's pretty good.

5043
06:56:16,160 --> 06:56:18,000
So that is deployment.

5044
06:56:22,040 --> 06:56:23,920
So let's talk about deployment slots.

5045
06:56:24,160 --> 06:56:31,000
In order to utilize this feature, we're going to actually have to upgrade our account because we cannot utilize them at the basic plan here.

5046
06:56:31,000 --> 06:56:32,880
We've got to go to standard or premium.

5047
06:56:33,040 --> 06:56:35,040
So let's go ahead and give that an upgrade.

5048
06:56:36,080 --> 06:56:37,240
So here's the B1.

5049
06:56:37,240 --> 06:56:38,880
We're going to go to production here.

5050
06:56:40,720 --> 06:56:45,200
And I think, yeah, we're going to have to choose this one here.

5051
06:56:45,840 --> 06:56:46,800
Very expensive.

5052
06:56:46,800 --> 06:56:50,800
So the thing is we're going to just upgrade it temporarily, unless there's more options down below.

5053
06:56:51,480 --> 06:56:52,720
that are cheaper.

5054
06:56:53,440 --> 06:56:55,200
Yeah, these are the standard tiers.

5055
06:56:55,840 --> 06:56:58,520
Let's go with this one here because it's only $80.

5056
06:56:58,520 --> 06:57:04,080
Again, we're not going to be doing this for long, but I want to show you how to do staging slots and auto scaling, okay?

5057
06:57:04,400 --> 06:57:06,480
So we'll go ahead and apply that there.

5058
06:57:07,960 --> 06:57:09,600
And now it says that it's applied.

5059
06:57:09,600 --> 06:57:14,960
So if I go back to our app here and we click on deployment slots, sometimes it doesn't show up right away.

5060
06:57:15,240 --> 06:57:16,480
If it doesn't, that's not a big deal.

5061
06:57:16,480 --> 06:57:19,200
You just wait a bit, but today it's super fast.

5062
06:57:19,520 --> 06:57:27,840
So we're going to go ahead and add a new slot, we're going to call it staging, we're going to deploy from our production branch here, and I'm going to go ahead and create that there.

5063
06:57:33,040 --> 06:57:34,320
And we'll just wait until that's done.

5064
06:57:34,320 --> 06:57:34,560
Okay.

5065
06:57:36,400 --> 06:57:36,640
Great.

5066
06:57:36,640 --> 06:57:40,320
So we waited a little bit there, and our slot is created.

5067
06:57:40,320 --> 06:57:42,080
So I'm going to just hit close there.

5068
06:57:43,040 --> 06:57:46,880
And so now let's go take a look and see if we can actually see the application here.

5069
06:57:46,880 --> 06:57:49,920
So I just clicked into it, I clicked Browse, and we're getting the default page.

5070
06:57:49,920 --> 06:57:52,240
So nothing is actually really deployed to it.

5071
06:57:52,800 --> 06:57:54,320
So how are we going to do that?

5072
06:57:54,320 --> 06:57:56,080
That's the main question here.

5073
06:57:56,800 --> 06:58:01,520
So what I'm going to do is I'm going to make my way over to the deployment center.

5074
06:58:04,400 --> 06:58:07,600
And you can see that it's not configured for the slot.

5075
06:58:07,600 --> 06:58:09,080
So we're

5076
06:58:09,080 --> 06:58:12,600
We are going to have to set it up all over again, even though it copied over configuration settings.

5077
06:58:12,600 --> 06:58:13,840
It didn't copy over the code.

5078
06:58:14,320 --> 06:58:15,280
So we go to GitHub.

5079
06:58:16,160 --> 06:58:17,680
We'll choose our organization again.

5080
06:58:18,000 --> 06:58:19,440
I'm going to choose the repository.

5081
06:58:19,440 --> 06:58:22,280
We're going to choose that main branch again there.

5082
06:58:22,280 --> 06:58:24,000
We're going to let it add a workflow.

5083
06:58:24,000 --> 06:58:28,720
And notice that this time it's going to call it staging.yaml, so there'll be a separate workflow that gets created.

5084
06:58:29,120 --> 06:58:31,440
We're going to go ahead and save that there.

5085
06:58:36,440 --> 06:58:39,840
And what we can do is, again, click onto our branch name there.

5086
06:58:40,640 --> 06:58:44,960
And if we click into our workflows, we'll now notice that we have a staging example.

5087
06:58:44,960 --> 06:58:49,120
It's the same thing, but it should be able to now deploy.

5088
06:58:49,120 --> 06:59:02,480
So the whole purpose of these deployment branches is that it helps us, we can deploy different versions of our apps, but it also, it's just a place where we can view things before we actually roll them out.

5089
06:59:02,480 --> 06:59:05,200
So we want to make sure 100% that they are working correctly.

5090
06:59:05,960 --> 06:59:07,680
I don't think this will automatically push out.

5091
06:59:07,680 --> 06:59:10,240
Let me just go to my actions to see if this is deploying.

5092
06:59:10,560 --> 06:59:12,000
Notice that we have two workflows now.

5093
06:59:12,000 --> 06:59:12,960
We have staging here.

5094
06:59:13,960 --> 06:59:16,960
And yeah, it looks like it's going to deploy here, so we'll just wait a little bit.

5095
06:59:16,960 --> 06:59:23,040
But maybe what we can do is try to have a slightly different version for each one here, okay?

5096
06:59:23,520 --> 06:59:25,840
But we'll just let that finish, and I'll see you back in a moment.

5097
06:59:30,080 --> 06:59:31,600
All right, so our deploy finished there.

5098
06:59:31,600 --> 06:59:34,560
So now if we go back to our website here, we go browse.

5099
06:59:35,080 --> 06:59:36,600
we should see that application.

5100
06:59:36,600 --> 06:59:37,600
It says, Hello, Vulcan.

5101
06:59:37,920 --> 06:59:40,560
And if we go and take out this, we still have Hello, Vulcan.

5102
06:59:40,560 --> 06:59:44,800
So how can we have a variant of this so that we can push out to that?

5103
06:59:45,120 --> 06:59:47,680
So what I'm going to do is I'm going to go back to my application here.

5104
06:59:47,680 --> 06:59:50,960
I'm going to go to code, and I'm just going to make a minor change.

5105
06:59:52,240 --> 06:59:53,040
I don't say I also...

5106
06:59:53,760 --> 06:59:54,560
Does that spell right?

5107
06:59:54,560 --> 06:59:55,120
Startup?

5108
06:59:56,560 --> 06:59:57,680
Doesn't look correct to me.

5109
06:59:58,880 --> 06:59:59,960
So maybe I'll go ahead and adjust.

5110
07:00:00,080 --> 07:00:04,080
that file, but it doesn't seem to be affecting anything, which is I'm a bit surprised there.

5111
07:00:04,080 --> 07:00:10,720
So what I'll do is I'm going to go and edit that file and give it the proper name.

5112
07:00:10,720 --> 07:00:11,760
Can I rename this file?

5113
07:00:12,880 --> 07:00:13,520
Yes, I can.

5114
07:00:13,520 --> 07:00:14,960
So we'll call that startup file.

5115
07:00:16,720 --> 07:00:17,840
I thought we need that for deploying.

5116
07:00:17,840 --> 07:00:19,360
I guess it just works without it, which is nice.

5117
07:00:19,920 --> 07:00:25,920
If we go back here, I'm going to go and I actually just want to edit my app here again.

5118
07:00:26,640 --> 07:00:28,160
And I'm going to go and edit this.

5119
07:00:29,080 --> 07:00:32,880
And we'll say, Hello, Andoria.

5120
07:00:35,200 --> 07:00:36,720
Or Hello, Andorians maybe.

5121
07:00:39,560 --> 07:00:42,000
And so if I go back to my actions, the question, what is it deploying?

5122
07:00:42,000 --> 07:00:44,640
Is it going to deploy the production or the staging?

5123
07:00:46,080 --> 07:00:50,960
And it looks like it's going to do both.

5124
07:00:52,240 --> 07:00:53,520
Looks like it's doing both here.

5125
07:00:53,800 --> 07:00:56,160
But one way we could tell is we can go to our logs here.

5126
07:00:56,600 --> 07:00:59,320
And we can see that, so we did 2 deploys.

5127
07:00:59,320 --> 07:01:00,640
So there's one change here.

5128
07:01:01,440 --> 07:01:12,640
If we go back to our main application and our deployment center here, and we go over to our logs, you can see that they're both deploying.

5129
07:01:12,640 --> 07:01:16,120
So it doesn't seem like it's a great thing that that's how it works.

5130
07:01:16,120 --> 07:01:21,040
So the question is then how would we facilitate that deploy, right?

5131
07:01:21,040 --> 07:01:22,000
How could we do that?

5132
07:01:22,240 --> 07:01:25,520
I suppose what we could do is just make a separate staging branch.

5133
07:01:26,400 --> 07:01:32,880
So if I go over to code here, I don't think we can just make branches through here.

5134
07:01:32,880 --> 07:01:36,960
So what I'm going to have to do is go ahead and oh, I can create a branch right here.

5135
07:01:36,960 --> 07:01:40,720
So we'll just type in staging and we'll go create ourselves a new branch.

5136
07:01:43,280 --> 07:01:44,680
And now we are in this branch.

5137
07:01:44,680 --> 07:01:53,520
And what I'm going to do is go ahead and modify this and we're just going to call this Hello Klingons.

5138
07:01:55,680 --> 07:01:57,840
Okay, we'll go ahead and update that.

5139
07:01:58,040 --> 07:01:59,320
And so this should be a separate branch.

5140
07:01:59,320 --> 07:02:04,240
So you'd think what we could do is go in and just change our settings so that it deploys from that one.

5141
07:02:05,040 --> 07:02:06,880
We'll go back to our deployment slots.

5142
07:02:07,520 --> 07:02:08,960
We'll click into staging here.

5143
07:02:10,880 --> 07:02:14,160
And we need to change our configuration settings.

5144
07:02:15,840 --> 07:02:19,840
I think we could just do it from here.

5145
07:02:19,840 --> 07:02:20,480
Hold on here.

5146
07:02:20,640 --> 07:02:22,320
I could have swore it specified the branch.

5147
07:02:22,320 --> 07:02:23,760
If we go to deployment center here,

5148
07:02:24,240 --> 07:02:26,800
I think it's set up on that other branch there.

5149
07:02:27,840 --> 07:02:29,040
I think we just adjusted here.

5150
07:02:29,040 --> 07:02:33,040
So yeah, I think we could just adjust the settings.

5151
07:02:35,440 --> 07:02:37,280
We can't discard them.

5152
07:02:38,000 --> 07:02:42,640
But maybe what we can do is just go in and modify that file.

5153
07:02:43,040 --> 07:02:45,760
So we will go into our code here.

5154
07:02:47,200 --> 07:02:50,880
And we will go ahead and click into here.

5155
07:02:51,360 --> 07:02:54,080
go into staging and we'll just change what the branch is called.

5156
07:02:55,440 --> 07:02:56,360
So we'll just say staging.

5157
07:02:56,360 --> 07:03:04,170
And we'll hit start commit and we will save that.

5158
07:03:05,690 --> 07:03:07,770
And we'll see if it actually reflects those changes there.

5159
07:03:07,770 --> 07:03:10,730
So we will go here and hit refresh.

5160
07:03:14,730 --> 07:03:16,810
We'll see if it picks up staging now if we go to settings.

5161
07:03:18,490 --> 07:03:19,290
It's not picking it up.

5162
07:03:19,290 --> 07:03:20,010
So

5163
07:03:20,800 --> 07:03:25,200
I'm not sure, I don't think, from a redeploy operation, we don't want to redeploy.

5164
07:03:25,520 --> 07:03:30,160
So maybe what we'll do is just, we'll have to do a disconnect here because it has the wrong one here.

5165
07:03:30,160 --> 07:03:31,440
So save workflow file.

5166
07:03:35,040 --> 07:03:36,480
Okay, we'll just go ahead and delete it.

5167
07:03:36,480 --> 07:03:37,120
It's not a big deal.

5168
07:03:37,120 --> 07:03:38,400
We'll just have to make a new one here.

5169
07:03:39,880 --> 07:03:40,720
We'll go to GitHub.

5170
07:03:41,600 --> 07:03:47,120
We'll choose our organization again, our repository, our staging branch this time around.

5171
07:03:47,680 --> 07:03:48,720
We'll let it add one.

5172
07:03:48,720 --> 07:03:52,320
See, it says we could use an available workflow, so we could have kept it there and added it there.

5173
07:03:53,600 --> 07:03:55,120
And we'll go ahead and save that.

5174
07:03:56,000 --> 07:04:03,320
So now we'll have two separate branches there, and we'll give that some time to deploy, because that will now trigger a deploy off the bat.

5175
07:04:03,320 --> 07:04:04,520
And so I'll see you back here in a moment.

5176
07:04:05,560 --> 07:04:08,720
Alright, so after a short little wait here, it looks like our app is done deploying.

5177
07:04:08,720 --> 07:04:12,120
So we'll go over here, we'll make sure that this is our staging server is good.

5178
07:04:12,240 --> 07:04:14,480
And we want to see that our production is different.

5179
07:04:14,480 --> 07:04:15,040
Perfect.

5180
07:04:15,040 --> 07:04:17,760
So we now have a way to deploy to each one.

5181
07:04:17,760 --> 07:04:20,160
But imagine that we want to swap our traffic.

5182
07:04:20,160 --> 07:04:24,160
So we're happy with our staging server, and we want to roll that out to production.

5183
07:04:24,520 --> 07:04:26,520
And that's where we can do some swapping.

5184
07:04:26,520 --> 07:04:28,480
So what we'll do is click the swap button.

5185
07:04:28,960 --> 07:04:32,440
And we're going to say the source is the staging, and this is our target production.

5186
07:04:32,440 --> 07:04:33,920
And we're going to perform that swap

5187
07:04:34,800 --> 07:04:39,040
right now, we can't do a preview because we don't have a particular setting set.

5188
07:04:39,040 --> 07:04:39,680
That's okay.

5189
07:04:40,160 --> 07:04:42,080
And it's kind of showing if there are any changes.

5190
07:04:42,240 --> 07:04:44,880
So set of configuration changes, we don't have any.

5191
07:04:44,880 --> 07:04:46,080
So that's totally fine as well.

5192
07:04:46,400 --> 07:04:47,760
We'll go ahead and hit swap.

5193
07:04:49,760 --> 07:04:53,360
And that's going to swap those two, I believe it's has has zero downtime.

5194
07:04:53,360 --> 07:04:55,360
So we'll be in good shape if that happens there.

5195
07:04:58,760 --> 07:05:00,240
And we'll just give it a moment to do that.

5196
07:05:03,320 --> 07:05:03,520
Great.

5197
07:05:03,520 --> 07:05:06,880
And so after a short little wait there, the swap is complete.

5198
07:05:06,880 --> 07:05:11,320
And so if we remember clearly, this was our production, right?

5199
07:05:11,320 --> 07:05:14,400
And so if I was to hit refresh, it should now say Klingons.

5200
07:05:14,400 --> 07:05:17,520
And if I go to my staging server, it should be the other way around, right?

5201
07:05:19,440 --> 07:05:19,840
Good.

5202
07:05:20,000 --> 07:05:22,560
So now imagine that I want to just split the traffic.

5203
07:05:22,680 --> 07:05:23,920
That's something else that we can do.

5204
07:05:24,480 --> 07:05:26,800
So notice over here we have these percentages here.

5205
07:05:27,680 --> 07:05:30,000
I'm not sure why it won't let me change those.

5206
07:05:31,360 --> 07:05:33,120
So maybe I'll have to look into that.

5207
07:05:33,120 --> 07:05:33,800
So I'll be back into...

5208
07:05:34,160 --> 07:05:42,080
So I'm not sure why it's not showing us that traffic slot there, but what I'm going to do is just maybe try to trigger a deploy back into our staging, and maybe that's what it wants to see.

5209
07:05:42,960 --> 07:05:44,960
So what I'm going to do is go back to my code here.

5210
07:05:45,280 --> 07:05:46,640
We'll be in our staging branch here.

5211
07:05:46,640 --> 07:05:50,000
I'm going to go ahead and edit this file here.

5212
07:05:50,720 --> 07:05:53,440
And we will just change this to Bajorans.

5213
07:05:57,360 --> 07:05:58,960
And we will hit update.

5214
07:06:01,120 --> 07:06:03,160
And we will let that go ahead and deploy.

5215
07:06:03,160 --> 07:06:06,000
So if we go to actions here, we can see that it is deploying.

5216
07:06:07,200 --> 07:06:08,440
And we'll just give it some time.

5217
07:06:08,440 --> 07:06:08,600
Okay.

5218
07:06:08,600 --> 07:06:10,400
So we'll see you back here in a bit.

5219
07:06:10,640 --> 07:06:13,320
I mean, the other reason could be that we're just not at the main level.

5220
07:06:13,320 --> 07:06:14,000
Hold on here.

5221
07:06:16,880 --> 07:06:18,880
If we go back here to deployment slots.

5222
07:06:20,080 --> 07:06:20,480
You know what?

5223
07:06:20,480 --> 07:06:25,440
I think it's just because I was clicked into here and then I was clicked into deployment slots that they're both grayed out.

5224
07:06:26,240 --> 07:06:26,720
Yeah, it is.

5225
07:06:26,720 --> 07:06:28,400
So we can actually do it that top level there.

5226
07:06:28,600 --> 07:06:30,000
It doesn't hurt to do another deploy, though.

5227
07:06:30,000 --> 07:06:33,120
So we'll just wait for I'll wait for that deploy to finish.

5228
07:06:33,480 --> 07:06:35,920
And then we'll come here and adjust that there.

5229
07:06:35,920 --> 07:06:36,240
Okay.

5230
07:06:37,280 --> 07:06:37,600
All right.

5231
07:06:37,600 --> 07:06:40,400
So let's take a look at doing some traffic switching here.

5232
07:06:40,400 --> 07:06:44,400
So right now, if we were to go to our production, we have Klingons.

5233
07:06:44,720 --> 07:06:47,120
And if we were to go to our staging,

5234
07:06:52,000 --> 07:06:52,800
We have Bajoran.

5235
07:06:52,800 --> 07:06:56,160
So imagine that we only want 50% of that traffic to show up.

5236
07:06:56,160 --> 07:06:58,360
So what we can do is put in 50%.

5237
07:06:58,960 --> 07:07:04,880
And what I'm going to do is, do I hit enter here or, oh, sorry, save up here.

5238
07:07:04,880 --> 07:07:05,360
There we go.

5239
07:07:06,720 --> 07:07:10,480
And so what's going to happen is this should take effect, I think, right away.

5240
07:07:10,800 --> 07:07:11,120
Yep.

5241
07:07:11,880 --> 07:07:15,680
And so now we have a 50% chance of getting something else here.

5242
07:07:15,680 --> 07:07:18,400
So I'm just going to keep on hitting enter here.

5243
07:07:18,400 --> 07:07:20,880
If that doesn't work, we can try an incognito tab.

5244
07:07:22,080 --> 07:07:23,480
And there we go, we got the opposite there.

5245
07:07:23,480 --> 07:07:25,680
And so this is serving up staging, right?

5246
07:07:26,880 --> 07:07:30,480
And this is serving up production, but they're both on the production URL.

5247
07:07:30,480 --> 07:07:33,280
So that's a way you can split the traffic.

5248
07:07:33,280 --> 07:07:36,360
So that's pretty much all I wanted to show you for deployment slots.

5249
07:07:36,360 --> 07:07:37,680
Let's now talk about scaling.

5250
07:07:42,400 --> 07:07:46,960
All right, so let's take a look into how we can do some scaling with our app service.

5251
07:07:46,960 --> 07:07:52,480
This is only available if you have Beyond Standard and Beyond, so Standard and Premium and et cetera.

5252
07:07:52,880 --> 07:07:55,680
So if we just search for scale, we have two options here.

5253
07:07:55,680 --> 07:07:57,440
We have scale up and scale out.

5254
07:07:57,440 --> 07:07:59,000
So scale up is pretty straightforward.

5255
07:07:59,000 --> 07:08:02,040
That just means to make our instance larger.

5256
07:08:02,040 --> 07:08:05,520
And so we already did that when we upgraded from our standard, our...

5257
07:08:05,600 --> 07:08:08,320
our B1 over to our S1 here, right?

5258
07:08:08,320 --> 07:08:15,440
So if I was to go here, I'm not going to do that, but if I was to do that and upgrade, that would be scaling up, right?

5259
07:08:16,000 --> 07:08:17,680
And notice that we're talking about scaling.

5260
07:08:17,680 --> 07:08:20,080
So right now we're limited to 10 instances, which is totally fine.

5261
07:08:21,200 --> 07:08:22,880
But now let's take a look at scaling out.

5262
07:08:23,120 --> 07:08:29,680
So if we go to scale out here and go to custom auto scale, what we can do is we can scale based on a metric.

5263
07:08:29,680 --> 07:08:30,000
So

5264
07:08:30,800 --> 07:08:40,560
We can add or remove servers based on the demand of the current web applications traffic, so we're only paying for servers when we need them, and so we have a minimum of 1, a maximum of two.

5265
07:08:40,560 --> 07:08:48,720
That seems fine to me, but we're going to add a rule here, and I want to scale this on the maximum time we're going to do on CPU percentage.

5266
07:08:48,960 --> 07:08:53,520
I just want to have a very easy way to trigger this so we can see a scaling event in action.

5267
07:08:53,920 --> 07:08:55,800
Here it has a maximum of 16%.

5268
07:08:56,400 --> 07:08:58,560
I might just lower that down even further.

5269
07:08:58,960 --> 07:08:59,840
Well, let me type in there.

5270
07:08:59,840 --> 07:09:00,400
New.

5271
07:09:00,400 --> 07:09:02,640
So 16% is what it's going to have to be.

5272
07:09:02,640 --> 07:09:03,440
It's not a big deal.

5273
07:09:03,680 --> 07:09:07,440
But I am going to reduce it down to, actually, I think, sorry, I don't know why I was going here.

5274
07:09:07,840 --> 07:09:11,520
The metric threshold to scale an action, I'm going to put it at 10%.

5275
07:09:11,520 --> 07:09:12,240
Sorry.

5276
07:09:13,800 --> 07:09:13,960
Okay.

5277
07:09:15,360 --> 07:09:16,360
So here's that line.

5278
07:09:16,360 --> 07:09:23,040
And so we have a, and I like how you can drag it, but you kind of have an idea that we have a high chance of having this triggered.

5279
07:09:23,080 --> 07:09:25,720
I just want to do this so that we have a good chance.

5280
07:09:25,720 --> 07:09:31,760
So if I was to put it here, you can notice that it's very easy for us to spike our traffic and cause a scaling event.

5281
07:09:31,760 --> 07:09:36,880
Now I'm going to set the duration to one minute, so we have a much higher chance of triggering that there.

5282
07:09:37,400 --> 07:09:37,680
Okay.

5283
07:09:38,560 --> 07:09:42,240
Set A duration less than 5 minutes may generate transient spikes.

5284
07:09:42,560 --> 07:09:43,200
Yeah, that's fair.

5285
07:09:43,200 --> 07:09:46,320
But I mean, I just want to show you a trigger happen.

5286
07:09:46,800 --> 07:09:48,960
And we need a cool down time probably.

5287
07:09:49,400 --> 07:09:50,560
And it's set to 5 minutes.

5288
07:09:50,560 --> 07:09:51,120
That's totally fine.

5289
07:09:51,120 --> 07:09:52,000
We're going to add one.

5290
07:09:52,560 --> 07:09:54,320
And that looks fine to me.

5291
07:09:54,320 --> 07:09:55,600
I'm going to set this to maximum.

5292
07:09:56,080 --> 07:09:56,360
Okay.

5293
07:09:56,360 --> 07:09:58,560
And so now we're very likely to trigger that there.

5294
07:09:58,720 --> 07:10:02,000
We'll go ahead and hit add that instance there.

5295
07:10:02,400 --> 07:10:04,880
And so now that we have that, we're going to go ahead and save that.

5296
07:10:16,640 --> 07:10:21,640
And so now that that's there, what we want to do is actually trigger a scaling event.

5297
07:10:21,640 --> 07:10:25,920
And so where we're going to see that is under the monitoring tab.

5298
07:10:29,600 --> 07:10:39,520
So if we go to monitoring, and what we're going to do is go over to, it should be in

5299
07:10:40,160 --> 07:10:40,960
Sorry, I forgot.

5300
07:10:40,960 --> 07:10:44,000
The place where we need to go take a look here is actually in the run history here.

5301
07:10:44,000 --> 07:10:47,760
So if we go here and check one hour, we can see how many instances are running.

5302
07:10:48,440 --> 07:10:51,840
And I think if I dial it back here, it should show me over time as it changes.

5303
07:10:52,160 --> 07:10:56,720
We do have a scale up event that has happened, which happened, I guess, 4 minutes ago.

5304
07:10:57,600 --> 07:11:02,240
So I guess it gives you kind of an idea of how many instances are running, which right now are two.

5305
07:11:03,040 --> 07:11:04,160
So maybe our...

5306
07:11:05,280 --> 07:11:09,920
Maybe our scaling event is not in the best use case there because it's happening too frequently.

5307
07:11:09,920 --> 07:11:14,080
So what I'm going to do is go ahead and modify that scaling rule.

5308
07:11:14,840 --> 07:11:16,800
And so I'm just going to go back and click here.

5309
07:11:17,200 --> 07:11:20,080
And maybe we'll just make it so it is less aggressive.

5310
07:11:20,080 --> 07:11:24,320
So what I'm going to do is just change it so it's over the duration of 5 minutes.

5311
07:11:25,120 --> 07:11:28,800
And I'm going to just put it right above here so that it goes back to one.

5312
07:11:30,040 --> 07:11:30,200
Okay.

5313
07:11:30,200 --> 07:11:33,120
And we'll go ahead and save that.

5314
07:11:36,760 --> 07:11:45,440
And so now if we go back to our run history here, it still shows that it has two, as you can see here, but I want to see this drop back down to one.

5315
07:11:45,920 --> 07:11:49,880
So it's going to check every 5 minutes or within the span of 5 minutes.

5316
07:11:49,880 --> 07:11:56,560
So what I'm going to do is just wait here and I'll see you back in a bit until we see a scaling action happens here, okay?

5317
07:11:57,800 --> 07:12:00,440
Yeah, I'm just sitting here waiting for it to scale down and I don't see it going.

5318
07:12:00,480 --> 07:12:04,640
So it makes me think that I need to go ahead and set a scale scale down action.

5319
07:12:04,960 --> 07:12:06,960
Let's take a look at the one that we currently have.

5320
07:12:07,520 --> 07:12:09,040
So this one is set.

5321
07:12:09,120 --> 07:12:10,720
Oh, you can see it's still spiked.

5322
07:12:10,720 --> 07:12:12,120
We don't even have anything going on here.

5323
07:12:12,120 --> 07:12:14,240
But what I'm going to do is just be really aggressive here.

5324
07:12:14,800 --> 07:12:19,560
I'm going to say when it's 50%.

5325
07:12:19,920 --> 07:12:20,240
OK.

5326
07:12:23,360 --> 07:12:24,800
And so here.

5327
07:12:26,040 --> 07:12:28,400
We'll go back here and I'll save that.

5328
07:12:28,640 --> 07:12:30,560
And I just wanted to see if it scales down.

5329
07:12:30,560 --> 07:12:32,160
I shouldn't have to set a scale down action.

5330
07:12:32,160 --> 07:12:33,040
It should just go.

5331
07:12:34,640 --> 07:12:37,120
And what I'm actually going to do is be a little bit more aggressive.

5332
07:12:37,120 --> 07:12:43,600
I know I'm setting a lot of stuff here, but I'm going to just set it to duration of 1 minutes so we can see this a lot sooner.

5333
07:12:45,520 --> 07:12:50,960
And we will go back to our run history here and we'll see if we observe a scale down.

5334
07:12:51,920 --> 07:12:56,720
Alright, so it's not scaling down here, but I think it's probably because I need a scale out action.

5335
07:12:56,720 --> 07:12:59,200
So what we'll do is go ahead and add a new rule.

5336
07:12:59,920 --> 07:13:12,080
This thing, if we go here, and we just look at it, it's not going to decrease it unless we have a scale out action.

5337
07:13:12,800 --> 07:13:16,880
So I don't think it's necessary for us to set one here, I think you get the idea.

5338
07:13:17,760 --> 07:13:18,720
But that's for scaling.

5339
07:13:18,720 --> 07:13:20,960
So we're all done here with Azure App Services.

5340
07:13:20,960 --> 07:13:23,440
All we got to do is go ahead and go ahead and delete it.

5341
07:13:23,760 --> 07:13:26,160
So let's go ahead and delete our app here.

5342
07:13:26,360 --> 07:13:26,640
Okay.

5343
07:13:28,480 --> 07:13:30,000
So there's a few different ways we can do it.

5344
07:13:30,000 --> 07:13:31,680
I'm going to do it via resource groups.

5345
07:13:32,720 --> 07:13:35,360
I believe we called it Voyager here.

5346
07:13:35,840 --> 07:13:36,800
So click into that.

5347
07:13:37,920 --> 07:13:39,920
And I'm going to go ahead and delete the resource group.

5348
07:13:41,400 --> 07:13:43,680
And here is all the related services.

5349
07:13:44,440 --> 07:13:46,000
And so I will type in Voyager.

5350
07:13:47,480 --> 07:13:48,160
And there we go.

5351
07:13:53,920 --> 07:13:54,200
Great.

5352
07:13:54,200 --> 07:13:55,440
And so, there we go.

5353
07:14:01,040 --> 07:14:05,120
Hey, this is Andrew Brown from Exam Pro, and we're looking at Azure App Services Cheat Sheet.

5354
07:14:05,120 --> 07:14:07,120
This is a two-pager, so let's jump into it.

5355
07:14:07,120 --> 07:14:12,800
Azure App Services is an HTTP-based service for hosting web applications, REST APIs, and mobile backends.

5356
07:14:13,040 --> 07:14:16,160
You can choose a programming language in either a Windows or Linux environment.

5357
07:14:16,320 --> 07:14:22,240
It's platform as a service, so it's the Heroku or AWS Elastic Beanstalk equivalent of Azure if that helps you remember what it is.

5358
07:14:22,560 --> 07:14:26,720
Azure App Services makes it easy to implement common features.

5359
07:14:27,440 --> 07:14:41,600
So for integrations and features such as Azure DevOps, GitHub integrations, Docker Hub integrations, package management, easy to set up staging environments, custom domains, attaching TLS and SSL certificates.

5360
07:14:41,760 --> 07:14:44,240
You pay based on the Azure app service plan.

5361
07:14:44,240 --> 07:14:47,360
So you've got a standard tier, a dedicated tier, and an isolated tier.

5362
07:14:47,600 --> 07:14:51,440
Notice that this tier does not support Linux, okay?

5363
07:14:52,720 --> 07:15:00,080
Azure App Services supports the following runtime, so.NET,.NET Core, Java, Ruby, Node.js, PHP, and Python.

5364
07:15:00,400 --> 07:15:05,600
Azure App Services can also run Docker as a single Docker container or multi-containers.

5365
07:15:05,840 --> 07:15:10,000
You can also upload your own custom container, so you'd upload it, or I guess deploy it.

5366
07:15:10,320 --> 07:15:13,840
So you'd create it, upload it to Azure Container Registry, and then deploy.

5367
07:15:14,480 --> 07:15:15,440
You have deployment slots.

5368
07:15:15,440 --> 07:15:18,000
This allows you to create different environments for your web application.

5369
07:15:18,000 --> 07:15:19,200
You can swap environments.

5370
07:15:19,280 --> 07:15:22,400
This could be how you perform a blue-green deployment onto the second

5371
07:15:22,720 --> 07:15:32,160
Slide here: App Service Environment (ASE) is an Azure App Service feature that provides a fully isolated and dedicated environment for securing or securely running.

5372
07:15:32,880 --> 07:15:34,400
service apps at high scale.

5373
07:15:34,640 --> 07:15:47,280
Customers can create multiple ASCs within a single Azure region or across multiple Azure regions, making ASC ideal for horizontal scaling, stateless application tiers, or high request per second RPS workloads.

5374
07:15:47,440 --> 07:15:50,400
ASC comes with some pricing tier, which is isolated tier.

5375
07:15:50,720 --> 07:15:54,400
ASC can be used to configure security architecture.

5376
07:15:54,800 --> 07:15:57,200
Apps running on ASC can have their access

5377
07:15:58,080 --> 07:16:05,280
this should say granted, not graded by upstream devices such as a web application firewall, a WAF.

5378
07:16:07,040 --> 07:16:11,600
And app service ASCs can be deployed into an AZ using a zone pinning.

5379
07:16:11,600 --> 07:16:13,920
There are two deployment types for ASC.

5380
07:16:13,920 --> 07:16:18,000
You have external ASC and ILB ASC.

5381
07:16:18,000 --> 07:16:20,800
ILB would be internal load balancer, okay?

5382
07:16:21,520 --> 07:16:34,640
Azure App Services provides many ways to deploy your applications, and there's so many I'm not going to list it here, but I probably would recommend that you go review the actual content for that, because it would have made a whole cheat sheet here.

5383
07:16:35,440 --> 07:16:42,880
Then, last thing here, WebJobs is a feature of Azure App Services that enables you to run a program or script in the same instance as the web app API mobile app.

5384
07:16:43,360 --> 07:16:46,160
There's no additional cost to WebJobs, so there you go.

5385
07:16:51,240 --> 07:16:52,920
Hey, this is Andy Brown from ExamPro.

5386
07:16:52,920 --> 07:16:58,080
And in this follow-along, we're going to learn all about imaging or managed images in the shared image gallery.

5387
07:16:58,240 --> 07:17:04,240
This is kind of a precursor for our availability follow-along because we need an image for that follow-along.

5388
07:17:04,240 --> 07:17:06,800
So I figured we'll just spend some time here learning about images.

5389
07:17:06,960 --> 07:17:10,720
So what I want you to do is go all the way to the top and type in virtual machines.

5390
07:17:11,360 --> 07:17:18,240
And we are going to launch ourselves a new Linux instance running Apache 2, just a default page, so that we can

5391
07:17:18,840 --> 07:17:21,600
to see some kind of website there.

5392
07:17:21,600 --> 07:17:25,360
I'm naming my resource group and the virtual machine as Wolf and Wolf.

5393
07:17:25,600 --> 07:17:31,440
We'll drop this down for images here and make sure that we choose Ubuntu LTS 18.04.

5394
07:17:31,680 --> 07:17:33,440
I'm choosing generation 2.

5395
07:17:33,680 --> 07:17:39,440
For our size, just expand that there and choose B1 LS because that's the most cost effective one.

5396
07:17:39,440 --> 07:17:41,120
So it's $5.83.

5397
07:17:41,400 --> 07:17:44,000
We'll go over to password, choose Azure user.

5398
07:17:45,320 --> 07:17:51,120
And we'll do testing 1, 2, 3, 4, 5, 6, capital on the T, testing 1, 2, 3, 4, 5, 6, capital on that T.

5399
07:17:51,680 --> 07:17:55,360
For ports, we're going to want port 80 and port 22.

5400
07:17:55,360 --> 07:17:56,240
We'll go next.

5401
07:17:56,400 --> 07:17:58,240
We'll skip all the way over to advance.

5402
07:17:58,240 --> 07:18:00,000
And here we're going to put in some custom data.

5403
07:18:00,000 --> 07:18:02,240
Now I wanted to install Apache by default.

5404
07:18:02,480 --> 07:18:03,600
So we'll make a shebang.

5405
07:18:03,600 --> 07:18:06,400
That is the exclamation with the hash together.

5406
07:18:06,720 --> 07:18:09,840
And we'll type in, oops, bin forward slash SH.

5407
07:18:10,080 --> 07:18:11,640
Make sure I spell that all right there.

5408
07:18:11,640 --> 07:18:14,480
We'll type in sudo apt install Apache.

5409
07:18:16,240 --> 07:18:17,280
two hyphen y.

5410
07:18:17,280 --> 07:18:18,880
So this is a bash script.

5411
07:18:18,880 --> 07:18:27,760
And the way cloud and it works is that you can give it a YAML file, you can give it a bash script, it's just going to look at the first line to determine what it is that you're passing in.

5412
07:18:27,760 --> 07:18:30,000
And then then it will work appropriately.

5413
07:18:30,160 --> 07:18:32,160
This is the easiest way to get Apache installed.

5414
07:18:32,640 --> 07:18:34,880
So we'll go ahead and go review and create.

5415
07:18:37,160 --> 07:18:41,760
And we'll wait for our review screen to populate here, and it does our calculation.

5416
07:18:42,000 --> 07:18:48,480
We'll scroll all the way down, hit create, and I will see you back here in a bit once this is done deploying, okay?

5417
07:18:49,960 --> 07:18:52,840
All right, so after a short wait there, it looks like our server is ready.

5418
07:18:52,840 --> 07:18:55,360
So we'll go to resources and make sure that it works.

5419
07:18:55,600 --> 07:18:58,960
Now it is complaining, so I'm going to go all the way top to virtual machines here.

5420
07:18:58,960 --> 07:19:03,520
It's because I had a virtual, I had a resource group earlier called Wolf, and so it's getting confused.

5421
07:19:03,760 --> 07:19:10,480
But I'm going to click in here into Wolf, and what we'll do is grab the public IP address and just make sure that works, and we're all in good shape.

5422
07:19:10,480 --> 07:19:15,440
So now that we have that, we want to make a snapshot of this page, and so that's the goal here.

5423
07:19:15,440 --> 07:19:16,160
Okay, so

5424
07:19:16,920 --> 07:19:19,600
here, when it's open, we're going to click on capture.

5425
07:19:20,640 --> 07:19:23,040
And we're going to create a new image.

5426
07:19:23,280 --> 07:19:25,000
So we'll have it in wolf here.

5427
07:19:25,000 --> 07:19:28,520
And so we have the option to have it in the shared image gallery, or neither.

5428
07:19:28,520 --> 07:19:32,400
And so what I want to do is make it not in the shared image gallery and also in the shared image gallery.

5429
07:19:32,400 --> 07:19:33,360
So we can see the difference.

5430
07:19:33,360 --> 07:19:35,080
Okay, so say no.

5431
07:19:36,480 --> 07:19:40,240
And we will have it in that, that there, it's going to give it a name.

5432
07:19:40,960 --> 07:19:42,240
Notice here says zone resilience.

5433
07:19:42,240 --> 07:19:45,440
So if you want to be able to launch this in any availability zone, you're gonna have to turn this on.

5434
07:19:46,280 --> 07:19:47,680
which we absolutely want to do.

5435
07:19:48,000 --> 07:19:52,480
We do not want to automatically delete our virtual machine because we're going to take more than one snapshot of it, okay?

5436
07:19:52,960 --> 07:19:54,720
So we'll hit here, we'll hit create.

5437
07:19:56,440 --> 07:20:01,680
And so that's going to stop the virtual machine, and we're going to get an image here soon, okay?

5438
07:20:02,160 --> 07:20:04,160
So I guess we'll just wait until this is done.

5439
07:20:05,520 --> 07:20:09,440
So after a short little wait here, we now actually have our managed image.

5440
07:20:09,440 --> 07:20:14,400
So what I'm going to do is open a new tab here, and I want to make my way back over to virtual machines.

5441
07:20:14,680 --> 07:20:16,960
Just because I want to show you the state of the virtual machine.

5442
07:20:16,960 --> 07:20:25,520
So, in order to create that image, it had to stop our virtual machine, which is pretty normal because you don't want your virtual machine to be in a strange state when you're creating an image.

5443
07:20:26,240 --> 07:20:29,760
But what we'll do is we'll make our way over now to images.

5444
07:20:29,760 --> 07:20:31,240
So, if we type in images here and...

5445
07:20:31,960 --> 07:20:39,720
And now you can create images directly here, but I always find this part a little bit hard because you kind of run out of options, then you have to add data disk.

5446
07:20:39,720 --> 07:20:40,800
It gets too complicated.

5447
07:20:41,120 --> 07:20:44,960
So a better way is just to always launch the VM and create it that way.

5448
07:20:45,600 --> 07:20:47,560
And do they have a backup button?

5449
07:20:47,560 --> 07:20:48,320
There it is.

5450
07:20:48,320 --> 07:20:48,600
Okay.

5451
07:20:49,120 --> 07:20:50,200
So here is our image.

5452
07:20:50,200 --> 07:20:53,760
And if we wanted to create a VM from it, we just hit create VM.

5453
07:20:55,480 --> 07:20:57,840
And what it's going to do is just pre-populate it here.

5454
07:20:58,080 --> 07:20:59,680
Okay, so it's as simple as that.

5455
07:21:00,320 --> 07:21:01,920
It's really not that complicated.

5456
07:21:02,800 --> 07:21:06,360
And so what we'll do is we'll go back to our virtual machine.

5457
07:21:06,360 --> 07:21:09,160
So I'm going to click here and just go type in virtual machine.

5458
07:21:09,160 --> 07:21:12,640
And now let's go create an image the other way, which is via the shared gallery.

5459
07:21:12,640 --> 07:21:13,840
So I'll hit capture again.

5460
07:21:14,400 --> 07:21:21,000
And this time I'm going to let it create in the gallery and automatically do the virtual machine after creating this image.

5461
07:21:21,000 --> 07:21:21,600
Absolutely.

5462
07:21:21,600 --> 07:21:24,400
We don't really need it after we do this here.

5463
07:21:25,040 --> 07:21:28,560
And so we have the option between general and specialized.

5464
07:21:28,560 --> 07:21:31,840
So general is for VMs created with its image, requires a host name, et cetera.

5465
07:21:32,000 --> 07:21:34,320
Specialized does not contain all that data there.

5466
07:21:35,040 --> 07:21:36,880
For an image definition, we'll have to create a new one.

5467
07:21:36,880 --> 07:21:39,040
So we'll say my definition.

5468
07:21:41,360 --> 07:21:43,040
And here we'll have to have a version number.

5469
07:21:43,040 --> 07:21:44,960
So I'm going to go 0.0.1.

5470
07:21:47,040 --> 07:21:48,880
And we have some information about replication.

5471
07:21:48,880 --> 07:21:49,680
That's all fine.

5472
07:21:49,680 --> 07:21:51,040
We'll hit review, create.

5473
07:21:52,040 --> 07:21:55,120
this sometimes is faster, or it can be very, very slow.

5474
07:21:55,120 --> 07:21:57,120
So I'm not sure how fast it will be here.

5475
07:21:57,120 --> 07:21:59,440
But I'll see you back here a moment when this is all done.

5476
07:22:00,400 --> 07:22:02,960
Okay, so I've been waiting here quite a long time.

5477
07:22:02,960 --> 07:22:10,240
But I think that it's actually already created, which is confusing, because it still says in progress, but I just want to go through the motions and show you what's here.

5478
07:22:10,560 --> 07:22:14,960
So if we go all the way to the or sorry, if we were just open my gallery here.

5479
07:22:16,760 --> 07:22:19,920
And by the way, if we want to get to shared galleries, we just type in shared gallery.

5480
07:22:20,960 --> 07:22:21,200
Right?

5481
07:22:23,360 --> 07:22:24,960
Here underneath, we have our definition.

5482
07:22:26,080 --> 07:22:27,920
And within that, we have our versioning.

5483
07:22:28,720 --> 07:22:30,560
And from here, we can create our VM.

5484
07:22:30,560 --> 07:22:33,680
So if we were to create our VM from here, you're going to notice the same box.

5485
07:22:33,680 --> 07:22:35,640
But now it's here.

5486
07:22:35,640 --> 07:22:46,000
And so the thing is, that shared image gallery is the preferred way of creating virtual machines just because of all the versioning and additional layers that you have in place.

5487
07:22:46,560 --> 07:22:49,680
But it's really up to you on which one you want to use.

5488
07:22:50,120 --> 07:22:53,040
But I believe that this is the preferred method.

5489
07:22:53,680 --> 07:23:06,960
But now that we have two images, that's pretty much all there really is to this, I'm going to keep the resources around here, probably not the virtual machine, if I make my way over to the VM, if it still has not been deleted, I'll just go delete that myself.

5490
07:23:08,360 --> 07:23:12,640
Okay, that might be the reason why it still says in progress is trying to delete the VM.

5491
07:23:13,760 --> 07:23:18,960
And so now we can proceed on to our next section or next following, which will be all about

5492
07:23:19,640 --> 07:23:20,400
Availability.

5493
07:23:25,040 --> 07:23:29,160
Hey, this is Andrew Brown from Exam Pro, and we are on to our availability follow-alongs.

5494
07:23:29,160 --> 07:23:32,240
And one thing we should understand is availability sets.

5495
07:23:32,240 --> 07:23:33,360
Now, this is basic knowledge.

5496
07:23:33,360 --> 07:23:42,320
I share this in the AZ-900, but if you're doing something like the administrator or a lot of the other exams, you need to know how to utilize this, so we're just going to cover it again.

5497
07:23:43,000 --> 07:23:45,240
and mostly in the context of also scale sets.

5498
07:23:45,240 --> 07:23:47,680
So I just want to pull up one page for you.

5499
07:23:47,680 --> 07:23:57,920
This is a very important page that you should know for SLAs for virtual machines because it describes the different kinds of combinations of things to meet certain requirements.

5500
07:23:57,920 --> 07:24:06,760
And especially on the administrator, you're definitely going to see questions saying, you know, if you have X, Y, Z, how do you achieve 99.5% availability?

5501
07:24:06,760 --> 07:24:09,440
And you need to know whether you can use a scale set or availability set.

5502
07:24:10,200 --> 07:24:11,600
Combination of things, okay?

5503
07:24:12,000 --> 07:24:26,880
So that is something that is really important, but just to do a review of availability sets, what I'm going to do is pull up the documentation, because they have a nice graphic here, and the idea is that you have fault domains and updated domains, so this is like a stack of computers, a rack of computers, and...

5504
07:24:27,360 --> 07:24:34,720
And the idea is that there are some machines that are going to be scheduled for updates, and then some have a potential of failure, right?

5505
07:24:34,960 --> 07:24:42,160
So if everything is in this fault domain, then if all this fails, then the server, the redundant server over here will remain running.

5506
07:24:42,400 --> 07:24:47,280
And then within the rack, if an update occurs on just this one, then these other ones will remain fine.

5507
07:24:47,600 --> 07:24:50,880
So that is something we can specify when we create our virtual machine.

5508
07:24:50,880 --> 07:24:52,520
So I'm going to go through the motions here.

5509
07:24:52,520 --> 07:24:57,240
We're not going to go and actually launch the virtual machine because there's not a lot to look at here, but I want you

5510
07:24:57,320 --> 07:24:58,920
you to know about these settings.

5511
07:24:58,920 --> 07:25:02,040
So under availability options, notice here it says availability zones.

5512
07:25:02,040 --> 07:25:04,880
So physically separate your resources within an Azure region.

5513
07:25:05,160 --> 07:25:11,240
And then down below, they have automatically distribute your VMs across multiple fault domains.

5514
07:25:11,240 --> 07:25:13,760
So it's a bit odd that they don't have scale set here.

5515
07:25:13,760 --> 07:25:15,760
It's in preview, because it's definitely something you can use.

5516
07:25:16,840 --> 07:25:20,120
but I guess they're just going to add it as convenience, but these are your availability settings.

5517
07:25:20,120 --> 07:25:27,920
So if I go to availability set, you'd have to create a new one, and here you're just specifying the amount of fault domains and update domains, all right?

5518
07:25:28,840 --> 07:25:37,840
And so I believe when you create a scale set, it has five and five by default, and then here when you're creating availability set, there's a bit of flexibility, but the difference between scale sets and...

5519
07:25:38,520 --> 07:25:40,400
Availability sets is an availability set.

5520
07:25:41,120 --> 07:25:45,760
The VM, they're all the same, so you're not going to have a variety of different kinds.

5521
07:25:45,760 --> 07:25:48,720
It also has automatic scaling, and it's defaulted to five to five.

5522
07:25:48,960 --> 07:25:54,800
So I just want to be sure that you know how to create an availability set, and you just launch the instance so it'll all look like normal.

5523
07:25:54,800 --> 07:25:55,680
So there we go.

5524
07:26:00,760 --> 07:26:05,400
So carrying on learning more about availability, let's take a look at scale sets.

5525
07:26:05,400 --> 07:26:09,280
So we could make our way over to virtual scale sets and create them here.

5526
07:26:09,520 --> 07:26:13,600
But I find it a lot easier to actually launch them when you have an existing image.

5527
07:26:14,240 --> 07:26:18,560
So what I'm going to do is actually make my way over to our shared image gallery here.

5528
07:26:19,040 --> 07:26:27,120
And I'm going to go into our name, into our version, I'm going to go ahead and create a virtual machine scale set.

5529
07:26:28,000 --> 07:26:32,400
And that'll just automatically select it here so we don't have to go through images and try to find it that way.

5530
07:26:32,960 --> 07:26:36,080
And so we'll name it Wolf Scale Set.

5531
07:26:39,600 --> 07:26:45,120
And we will choose three availability zones because that's the general rule is that you always want to have three.

5532
07:26:46,040 --> 07:26:48,560
And like especially for enterprise, it's always going to be 3, okay?

5533
07:26:50,080 --> 07:26:56,240
Then if we scroll on down here, I'm going to set it as password and we'll say Azure User.

5534
07:26:56,760 --> 07:27:03,280
And we'll do testing, capital T, 1, 2, 3, 4, 5, 6, testing, 1, 2, 3, 4, 5, 6, capital on the T.

5535
07:27:03,520 --> 07:27:04,440
We'll go to next.

5536
07:27:04,560 --> 07:27:06,240
Oh, I don't know if it'd like that.

5537
07:27:07,600 --> 07:27:08,800
Make sure that is correct.

5538
07:27:10,560 --> 07:27:11,200
There we go.

5539
07:27:11,520 --> 07:27:12,640
And we'll go to next to this.

5540
07:27:12,640 --> 07:27:14,400
We'll leave with premium SSD.

5541
07:27:14,640 --> 07:27:16,640
We'll go to next for networking.

5542
07:27:17,400 --> 07:27:19,760
And everything looks fine here.

5543
07:27:19,760 --> 07:27:21,280
We'll go to next.

5544
07:27:21,280 --> 07:27:29,920
Now notice we could create a load balancer here, but I'm going to want to create that separately because I just want to show you all the options where here it's going to set up a bunch of stuff for us by default.

5545
07:27:29,920 --> 07:27:31,760
I don't want you to lose that experience.

5546
07:27:32,120 --> 07:27:34,320
And so we can see the initial count.

5547
07:27:34,320 --> 07:27:36,960
I'm going to set it to three because I have 3 availability zones.

5548
07:27:37,280 --> 07:27:39,840
We can set up a scaling policy.

5549
07:27:39,840 --> 07:27:43,040
I'm going to go manual for the time being right now.

5550
07:27:43,360 --> 07:27:45,360
We can set also a scale in policy.

5551
07:27:46,160 --> 07:27:48,800
So we'll go next to management.

5552
07:27:51,040 --> 07:27:58,240
And actually, you know what, for scaling, I'm going to set it to one, just because I want to probably set up a scaling policy instance, see it scale up.

5553
07:27:59,200 --> 07:28:02,640
This is all okay, we'll go to next for health.

5554
07:28:03,040 --> 07:28:05,440
We're not going to monitor health right now.

5555
07:28:06,560 --> 07:28:09,200
And this all looks okay, as well.

5556
07:28:09,200 --> 07:28:10,960
We'll go hit review and create.

5557
07:28:11,600 --> 07:28:13,600
And we will launch this scale set.

5558
07:28:14,240 --> 07:28:14,560
Okay.

5559
07:28:21,840 --> 07:28:26,240
All right, so after waiting a little while here, it looks like our skill set is ready.

5560
07:28:26,240 --> 07:28:28,320
So I'm going to go to resource here.

5561
07:28:28,800 --> 07:28:32,480
Actually, probably an easier way, just if you get lost, you can type scale set in the top here.

5562
07:28:33,760 --> 07:28:35,680
And we'll click into our scale set here.

5563
07:28:36,200 --> 07:28:37,760
And we can see how many instances we have.

5564
07:28:37,760 --> 07:28:39,360
We have a single one running right now.

5565
07:28:39,360 --> 07:28:41,840
But let's say we wanted to launch three there.

5566
07:28:41,840 --> 07:28:42,960
We go to scaling.

5567
07:28:43,400 --> 07:28:47,440
And we could scale up to go a bit crazy there, scale up to three.

5568
07:28:47,840 --> 07:28:50,320
But we could also set a custom auto scaling group.

5569
07:28:50,320 --> 07:28:55,120
So if we were to go here, what we could do is scale based on a metric.

5570
07:28:55,520 --> 07:28:56,880
And then we would add a rule.

5571
07:28:57,560 --> 07:29:07,920
And we could choose a bunch of different options like average percentage of CPU, and when it exceeds a certain amount, then it will cap and here you can adjust the values here.

5572
07:29:08,160 --> 07:29:12,240
Now, I do this in the app Azure services section, we spent a lot of time

5573
07:29:12,760 --> 07:29:16,240
There with that, and there's not a lot to learn here it's pretty straightforward.

5574
07:29:16,560 --> 07:29:19,080
So, what I'm going to do is actually do a manual scaling.

5575
07:29:19,080 --> 07:29:26,480
So, I'm going to go over here, and we're just going to increase this up to three here, and then we'll just go ahead and hit save.

5576
07:29:26,920 --> 07:29:31,600
And so, what that will do is increase the amount of instances, okay?

5577
07:29:37,800 --> 07:29:40,960
Another thing we should take a look here is actually health and repair.

5578
07:29:40,960 --> 07:29:44,640
So this way we can say whether we're going to have a health monitoring here.

5579
07:29:44,920 --> 07:29:49,040
And we are running on port 80, and we do have a website there.

5580
07:29:49,040 --> 07:29:50,480
So that's something we can definitely turn on.

5581
07:29:50,640 --> 07:29:52,640
But notice down below we have automatic repairs.

5582
07:29:52,960 --> 07:29:56,200
And so it's saying that if an instance is unhealthy, it will replace that instance.

5583
07:29:56,200 --> 07:29:59,440
So we'll turn that on for a grace period, we could say of 10 minutes.

5584
07:29:59,440 --> 07:30:00,000
So I'll go ahead and

5585
07:30:00,040 --> 07:30:00,800
and save that.

5586
07:30:05,120 --> 07:30:06,880
And yeah, we'll just wait until that's done.

5587
07:30:08,320 --> 07:30:11,920
Alright, so it looks like our health check is turned on here now.

5588
07:30:11,920 --> 07:30:18,720
So some other things I might want to point out here is like the upgrade policy, you could change this to change when it should or how it should update.

5589
07:30:19,440 --> 07:30:23,520
If instances are replaced under configuration, notice that over provisioning is turned on.

5590
07:30:23,520 --> 07:30:27,440
So we do not have unexpected billing, say, let's say someone tried launching 100.

5591
07:30:27,840 --> 07:30:28,240
You can

5592
07:30:28,960 --> 07:30:30,800
change instance termination.

5593
07:30:30,800 --> 07:30:36,320
I'm not sure how that would affect it if you had the replacement for unhealthy instances.

5594
07:30:36,320 --> 07:30:40,800
I'd hope that it would replace an unhealthy instance or terminate it, but I'm not sure about that case there.

5595
07:30:41,040 --> 07:30:43,520
If we go to sizes, we can resize our VMs.

5596
07:30:44,640 --> 07:30:49,040
You know, it's not super exciting here, but we can see we have 3 instances running.

5597
07:30:49,040 --> 07:30:50,240
We have a healthy health check.

5598
07:30:50,240 --> 07:30:51,680
It will show a green box

5599
07:30:52,320 --> 07:30:53,200
over here.

5600
07:30:53,360 --> 07:30:59,440
But now that we have a scale set, we're going to make our way back to our homepage and we'll start on to the next section, which is setting up a load balancer.

5601
07:31:04,480 --> 07:31:10,720
All right, so now that we have our scale set, we're going to continue on learning more about availability by creating an application gateway.

5602
07:31:10,720 --> 07:31:14,000
So this is actually a type of load balancer, even though it has gateway in the name.

5603
07:31:14,240 --> 07:31:20,880
Then there's Azure load balancers, and the difference between these two is this one's layer 7 for the applications, and this is layer 4.

5604
07:31:21,280 --> 07:31:23,760
So TCP, UDP, like at a lower layer.

5605
07:31:23,760 --> 07:31:24,160
So

5606
07:31:25,120 --> 07:31:31,120
since we have a web application, which is a simple Apache page, we're going to want to serve it up via the Application Gateway.

5607
07:31:31,120 --> 07:31:39,600
All right, so make your way over to the top here and we'll click on Application Gateway or just type that in and we'll go ahead and add ourselves a new Application Gateway.

5608
07:31:39,840 --> 07:31:40,920
We'll choose Wolf here.

5609
07:31:40,920 --> 07:31:45,440
I'm going to name this Wolf Application AGW.

5610
07:31:46,320 --> 07:31:50,600
And then we do not, we don't need any auto scaling right now.

5611
07:31:50,600 --> 07:31:51,360
So we'll just leave that alone.

5612
07:31:51,360 --> 07:31:52,560
I'm going to set that to one.

5613
07:31:52,720 --> 07:31:55,880
We're going to choose two, one, and three, because the rule of three counts here.

5614
07:31:55,880 --> 07:31:56,800
We always want three.

5615
07:31:57,000 --> 07:31:59,600
And then down below, make sure you choose the correct virtual network.

5616
07:31:59,600 --> 07:32:06,080
If you're not confident, make sure you go over to your skill set and just double check to make sure where it resides.

5617
07:32:06,080 --> 07:32:12,480
So if I go over here into my skill set and check, it's in WolfVNet 499.

5618
07:32:13,280 --> 07:32:14,320
I ended up with more than one.

5619
07:32:14,320 --> 07:32:14,720
I don't know.

5620
07:32:14,720 --> 07:32:15,760
I just had a tutorial.

5621
07:32:15,760 --> 07:32:18,240
I've done this a few revisions, so I've ended up with an additional one there.

5622
07:32:18,560 --> 07:32:23,920
Notice it's complaining because it's trying to put this in the default, but it needs its own subnet.

5623
07:32:23,920 --> 07:32:28,480
So here under subnets, we're going to create one just for the VGW, so VGW.

5624
07:32:29,120 --> 07:32:30,560
And we're going to need a range first.

5625
07:32:30,560 --> 07:32:35,400
So go over to address space ranges, and we'll pick out the next number.

5626
07:32:35,400 --> 07:32:39,120
So 10.0.2.0 forward slash 24.

5627
07:32:39,440 --> 07:32:40,400
We'll hit save.

5628
07:32:41,720 --> 07:32:44,640
And once that has created, we'll make our way over to the subnet.

5629
07:32:44,640 --> 07:32:47,680
And when we hit subnet, it will automatically select the next one for us.

5630
07:32:47,680 --> 07:32:49,680
I'm going to put VGW in here.

5631
07:32:49,680 --> 07:32:50,560
We'll hit save.

5632
07:32:51,880 --> 07:32:54,160
And then once that's saved, we'll make our way back to the wizard.

5633
07:32:54,160 --> 07:32:55,840
Notice up here, the breadcrumbs.

5634
07:32:55,840 --> 07:33:01,960
If we click one back, we can make our way back to where we are and then choose that VGW subnet.

5635
07:33:01,960 --> 07:33:04,640
We'll go to the front to the front end section here.

5636
07:33:04,640 --> 07:33:06,080
We got public, private, or both.

5637
07:33:06,240 --> 07:33:09,040
We want public today, and we will need a new IP address.

5638
07:33:09,040 --> 07:33:11,360
So I'm going to call this Wolf.

5639
07:33:11,920 --> 07:33:12,800
VGW.

5640
07:33:14,160 --> 07:33:15,520
We'll go ahead and hit OK.

5641
07:33:15,880 --> 07:33:18,240
We'll go to backends here, add a backend pool.

5642
07:33:18,280 --> 07:33:23,600
I'm just going to call this backend, and we'll drop down and choose a virtual machine scale set.

5643
07:33:23,600 --> 07:33:26,720
If you do not see it here, it's because they're not in the same VNet.

5644
07:33:26,720 --> 07:33:27,920
Make sure that's the case.

5645
07:33:28,240 --> 07:33:29,760
And then we'll go to configuration.

5646
07:33:29,760 --> 07:33:31,000
So we've got a frontend, a backend.

5647
07:33:31,000 --> 07:33:33,200
Now we've got to glue them together with routing rules.

5648
07:33:33,480 --> 07:33:34,880
We'll just say my rules.

5649
07:33:35,680 --> 07:33:37,400
We have listeners and backend targets.

5650
07:33:37,400 --> 07:33:39,440
So we'll name our listener name my listener.

5651
07:33:40,080 --> 07:33:42,240
If you can spell it, that's a hard one for me.

5652
07:33:42,240 --> 07:33:45,680
So I'm just going to copy paste that in, take out the space there.

5653
07:33:46,880 --> 07:33:48,880
The front end IP is going to be public.

5654
07:33:48,920 --> 07:33:50,640
We're going to have HTTP on port 80.

5655
07:33:51,120 --> 07:33:52,960
We'll have basic if we had multi-site.

5656
07:33:53,760 --> 07:33:56,400
So if you have more than one destination, but we do not.

5657
07:33:57,320 --> 07:34:01,040
We'll go to backend targets, and we will choose the backend pool that we created.

5658
07:34:01,040 --> 07:34:04,640
And then we have to choose or add HTTP settings.

5659
07:34:04,640 --> 07:34:06,160
This is all kind of crammed together.

5660
07:34:06,160 --> 07:34:07,440
It doesn't really line up very well.

5661
07:34:07,440 --> 07:34:08,720
So I get a bit confused here.

5662
07:34:08,720 --> 07:34:11,440
So I think what we want to do is hit add new here.

5663
07:34:11,880 --> 07:34:14,080
And then we'll say my HTTP settings.

5664
07:34:15,040 --> 07:34:16,320
Port 80 is good.

5665
07:34:16,320 --> 07:34:17,720
We do not have cookies.

5666
07:34:17,720 --> 07:34:19,360
We do not care about connection draining.

5667
07:34:19,600 --> 07:34:23,600
All these options are not important to us for our very simple application.

5668
07:34:24,160 --> 07:34:26,800
But if you were creating a real web application that

5669
07:34:27,360 --> 07:34:30,160
that has a session, you probably would want to turn these both on, okay?

5670
07:34:30,440 --> 07:34:31,680
We'll go ahead and hit add.

5671
07:34:32,240 --> 07:34:36,960
And we do have path-based routing, but this is not something we need to worry about right now.

5672
07:34:36,960 --> 07:34:39,720
This is where you could say, you could have multiple targets.

5673
07:34:39,720 --> 07:34:45,440
So you could say, okay, anytime it is a cookie, then go to this virtual machine.

5674
07:34:45,440 --> 07:34:48,880
And then if it's another one, you could say go somewhere else or even do a redirect.

5675
07:34:49,120 --> 07:34:53,120
That's a great way of attaching things to your virtual machine there.

5676
07:34:53,120 --> 07:34:54,400
We'll go ahead and hit add.

5677
07:34:54,400 --> 07:34:56,560
And so now we have all of our information.

5678
07:34:57,040 --> 07:35:03,200
We'll hit tags, and we will go hit create, and I'll see you back here when this is done deploying, okay?

5679
07:35:04,800 --> 07:35:10,640
All right, so I've been waiting a while here for this to complete, but it looks like that we're still having a bit of trouble.

5680
07:35:11,120 --> 07:35:19,480
So what I'm going to do is make my way over to the actual load balancer here, because I just remembered, and this happens, because I don't normally make a scale set separately.

5681
07:35:19,480 --> 07:35:20,960
I usually make it with the load balancer.

5682
07:35:21,280 --> 07:35:26,920
But if we make our way over to the backend pool and we're to click into here, it actually has a thing that says down here, virtual

5683
07:35:27,000 --> 07:35:32,400
machine skill set was added to this backend pool, upgrade all instances of wolf skill set for this change to work.

5684
07:35:32,400 --> 07:35:36,080
So the scale set needs to get updated is the problem here.

5685
07:35:36,080 --> 07:35:38,960
So what I'm going to do is make my way over to the scale set.

5686
07:35:40,720 --> 07:35:43,600
And we'll see if we can do an upgrade here.

5687
07:35:43,600 --> 07:35:46,640
So if we just checkbox I'm all on there, I'm going to go hit upgrade.

5688
07:35:47,600 --> 07:35:50,080
And then this will perform an upgrade on the instances.

5689
07:35:51,440 --> 07:35:53,840
And we'll just give that some time and I'll see you back here in a moment.

5690
07:35:55,680 --> 07:35:57,640
Okay, so that didn't take too long for the upgrade.

5691
07:35:57,640 --> 07:36:00,680
And if you just hit the refresh here, you're going to wait for the status quos running.

5692
07:36:00,680 --> 07:36:02,080
And now they're all healthy.

5693
07:36:02,080 --> 07:36:07,280
So if we make our way back to our load balancer tab here, if you still have something open, just go to backend pools.

5694
07:36:07,520 --> 07:36:09,440
You should see three targets.

5695
07:36:09,600 --> 07:36:14,080
If we go up to our overview over here, we'll go grab, whoops, our IP address.

5696
07:36:14,240 --> 07:36:16,720
Now why they copy the text there?

5697
07:36:16,720 --> 07:36:17,560
I have no idea.

5698
07:36:17,560 --> 07:36:21,520
But if we go paste that up into here and take that out, we get our page.

5699
07:36:21,520 --> 07:36:22,480
So there you go.

5700
07:36:22,480 --> 07:36:24,640
That's all it took to get the availability

5701
07:36:25,560 --> 07:36:26,880
for the actual server running.

5702
07:36:28,240 --> 07:36:33,560
If we go on the left-hand side and we go over to health probes, this is interesting to look at.

5703
07:36:33,560 --> 07:36:40,280
We're not going to set it up, but I just want to show you that you'd write in your health check here, and then you could specify a different path.

5704
07:36:40,280 --> 07:36:44,880
So if you had like a page called, and this is pretty common for a lot of places, they'll have a page called health check.

5705
07:36:45,160 --> 07:36:53,520
And so that's just kind of like a way to configure a custom health check for your instances, but this is all I really wanted to accomplish here today.

5706
07:36:54,240 --> 07:36:57,360
I don't think there's really much of anything else that I'd like to do here.

5707
07:36:57,920 --> 07:37:02,320
So what we'll do is we'll go and make our way back to all of our resources.

5708
07:37:02,640 --> 07:37:09,280
And we'll try to find our original resource group here, if we can find, it's probably easier if we just go to resource groups.

5709
07:37:16,250 --> 07:37:20,330
Great, I'll just go ahead and delete this one here.

5710
07:37:24,730 --> 07:37:27,170
There we go, it's gonna delete a whole lot of stuff.

5711
07:37:27,280 --> 07:37:28,240
But yeah, there we go.

5712
07:37:32,640 --> 07:37:35,320
So Azure Monitor is quite a beefy service.

5713
07:37:35,320 --> 07:37:36,560
There's a lot going on in it.

5714
07:37:36,560 --> 07:37:42,760
And so it's a comprehensive solution for collecting, analyzing, acting on telemetry data from your cloud and on-premise environments.

5715
07:37:42,760 --> 07:37:46,880
So here's an example of one of the things it can do, which is provide you a visual dashboard.

5716
07:37:47,040 --> 07:37:52,240
But it can create smart alerts, automate actions, log monitoring, and a lot of different things.

5717
07:37:52,440 --> 07:37:57,160
And many Azure services by default are already sending their data to Azure Monitor, so you can use it.

5718
07:37:57,280 --> 07:37:58,000
It right away.

5719
07:38:02,160 --> 07:38:05,680
Now, I just want to introduce you to the concept of the pillars of observability.

5720
07:38:05,680 --> 07:38:15,680
This isn't a thing specific to Azure, but it's something that in DevOps that you need to understand, and it's just going to help you contextualize the offerings of Azure Monitor and other cloud service providers.

5721
07:38:16,000 --> 07:38:17,520
So, what is observability?

5722
07:38:17,520 --> 07:38:27,160
That is the ability to measure and understand how internal systems work in order to answer questions regarding performance, tolerance, security, and faults with a system and application, and in order to...

5723
07:38:27,520 --> 07:38:29,400
obtain observability, you need three things.

5724
07:38:29,400 --> 07:38:33,040
You need metrics, logs, and traces, and you have to use them together.

5725
07:38:33,040 --> 07:38:36,320
Using them in isolate does not gain you observability.

5726
07:38:36,320 --> 07:38:37,680
So let's go define those three things.

5727
07:38:37,680 --> 07:38:38,880
The first thing is metrics.

5728
07:38:39,240 --> 07:38:41,680
And that is a number that is measured over a period of time.

5729
07:38:41,680 --> 07:38:47,280
If we measure the CPU usage and aggregated it over a period of time, then we would have the average CPU metric.

5730
07:38:47,600 --> 07:38:48,560
Then you have logs.

5731
07:38:48,560 --> 07:38:53,280
These are text files where each line contains event data about what happened at a certain time.

5732
07:38:53,600 --> 07:38:55,600
And then you have traces.

5733
07:38:55,600 --> 07:38:58,240
And this is a history of requests that

5734
07:38:59,120 --> 07:39:04,240
is that travels through multiple apps and services, so we can pinpoint performance or failures.

5735
07:39:04,560 --> 07:39:10,000
And I like to make the joke that it looks kind of like the Triforce observability once you've constructed it there at the end.

5736
07:39:14,720 --> 07:39:19,200
Let's look at the anatomy of Azure Monitor, which is a little bit complex, but I'm sure we can work our way through it.

5737
07:39:19,200 --> 07:39:22,560
So the first thing is that we need sources of data.

5738
07:39:22,560 --> 07:39:26,000
So this is what data can be sent into Azure.

5739
07:39:26,320 --> 07:39:36,800
So you probably want application data, operating system data, data from Azure resources at your subscription level, your tenant level, which is going to be associated with Active Directory and custom sources.

5740
07:39:36,800 --> 07:39:39,880
And once you get those into Azure Monitor, you have to store them somewhere.

5741
07:39:39,880 --> 07:39:42,240
And you're going to put them in logs and monitors.

5742
07:39:42,680 --> 07:39:46,560
And these are just data stores that are within Azure Monitor that you're going to be able to work with.

5743
07:39:47,280 --> 07:39:51,680
And once you have that data in there, you're going to be able to leverage different services to do different things.

5744
07:39:52,080 --> 07:39:53,920
And so we will call these functions.

5745
07:39:54,640 --> 07:40:01,120
So you can perform insights, visualizations, analysis, response, and integration.

5746
07:40:01,440 --> 07:40:03,280
So we'd look at insights.

5747
07:40:03,840 --> 07:40:07,680
We're getting insights into our virtual machines, our containers, our applications.

5748
07:40:08,160 --> 07:40:13,200
For visualization, you might be making dashboards, you could be using Power BI or creating workbooks.

5749
07:40:13,440 --> 07:40:17,840
For analysis, you might be using the log analysis or the metric analysis tools.

5750
07:40:18,080 --> 07:40:22,080
For responses, you might want to create alerts or start auto-scaling.

5751
07:40:22,080 --> 07:40:27,200
And for integrations, you might want to use logic apps or export APIs to connect things up.

5752
07:40:27,200 --> 07:40:28,000
So there you go.

5753
07:40:32,560 --> 07:40:39,600
So now let's take a closer look at all the different sources, because this is going to really help us understand the utility at each level.

5754
07:40:40,320 --> 07:40:42,720
And I think that makes everything very crystal clear.

5755
07:40:42,720 --> 07:40:45,840
So remember that list of sources where we went to application to custom sources?

5756
07:40:45,840 --> 07:40:52,320
We're going to start at the top of that list and look at application code, which is all about performance and functionality of your application and code.

5757
07:40:52,640 --> 07:40:57,200
So that's like collecting traces, application logs, and user telemetry.

5758
07:40:57,760 --> 07:40:59,880
And so here is the visual representation.

5759
07:40:59,880 --> 07:41:02,920
And so on the left-hand side, we have our sources.

5760
07:41:02,920 --> 07:41:04,200
In the middle, we have our storage.

5761
07:41:04,200 --> 07:41:09,680
On the right-hand side, we have our services that we're going to be doing things with that data.

5762
07:41:10,080 --> 07:41:15,560
So looking on the left, in your application, you'll probably want to go ahead and install the instrumentation package.

5763
07:41:15,560 --> 07:41:18,480
This is going to allow us to collect data into Application Insights.

5764
07:41:18,720 --> 07:41:23,840
And Application Insights is an application for getting rich data about our applications.

5765
07:41:24,240 --> 07:41:25,600
Then you have availability tests.

5766
07:41:25,600 --> 07:41:30,480
This tests the responsiveness of your application from different locations on the public internet.

5767
07:41:31,160 --> 07:41:43,840
And that's really useful if you're saying, like, if you have your application, you're running it in the east of Canada and the west of the US, and you want to make sure that the response times are the same or lower, that's going to help you get there.

5768
07:41:44,640 --> 07:41:48,720
For your metrics, this is going to be describing performance and operations

5769
07:41:49,440 --> 07:41:51,280
and custom metrics of your application.

5770
07:41:51,600 --> 07:41:58,240
For your logs, you're going to be storing operational data about your application, such as page views, application requests, exceptions, and traces.

5771
07:41:58,560 --> 07:42:04,960
And then the things you're going to be putting in storage is you're going to send the application data to your Azure storage for archiving.

5772
07:42:04,960 --> 07:42:10,080
Or what you'll do is you'll store your availability tests if you need to go and analyze them further.

5773
07:42:10,800 --> 07:42:17,120
Or you could create a debug snapshot of your data so that you can then go debug that at a later point.

5774
07:42:17,520 --> 07:42:17,720
OK.

5775
07:42:22,720 --> 07:42:25,600
So let's take a look at how we're going to monitor our operating systems.

5776
07:42:25,600 --> 07:42:28,880
And this is for the guest operating system, not the host operating system.

5777
07:42:29,760 --> 07:42:38,400
So when you're dealing with virtualization, the VM has its own OS, but the actual underlying hardware has its own OS, and that's the host one.

5778
07:42:38,400 --> 07:42:39,600
And that's not what we're looking at.

5779
07:42:40,160 --> 07:42:41,440
You don't need to monitor that one.

5780
07:42:41,440 --> 07:42:43,760
That's up to Azure to do or your cloud provider.

5781
07:42:44,080 --> 07:42:46,960
We're looking at the guest one, the one we actually can control.

5782
07:42:47,600 --> 07:42:51,520
So the operating system is going to need a couple of tools installed, so our agents.

5783
07:42:51,680 --> 07:42:55,280
So we'll want to install the log analytics agent so we can use that with log analytics.

5784
07:42:55,520 --> 07:42:57,520
We'll probably want to install the dependency agent.

5785
07:42:57,520 --> 07:43:00,160
That allows us to monitor processes on the machine.

5786
07:43:00,320 --> 07:43:02,080
So those are the programs that are running.

5787
07:43:02,080 --> 07:43:06,880
So like, you know, let's say MySQL, Redis, maybe you have a Rails app, whatever.

5788
07:43:08,000 --> 07:43:08,880
And so that's that.

5789
07:43:09,680 --> 07:43:12,480
And I just want you to know that these agents can be installed anywhere.

5790
07:43:12,480 --> 07:43:16,880
So it can be installed on Azure, on-premise, or even on other cloud providers like AWS.

5791
07:43:17,440 --> 07:43:22,240
If you want performance counters, you're going to have to install the diagnostic extension, which is, I think, a good thing to do.

5792
07:43:23,120 --> 07:43:29,360
And just to make note, the log analytics agent is going to store that data into logs, then you can use that log analytics later.

5793
07:43:30,240 --> 07:43:40,080
If you want to have the, or store the health state information, then you're going to be using the Azure diagnostic extension, and then they're going to put that in Azure storage.

5794
07:43:41,600 --> 07:43:47,760
And if you want to use Azure Event Hub, so Event Hub is a way of connecting your app to other destinations.

5795
07:43:48,760 --> 07:43:51,600
You're going to stream it, but you're going to need the diagnostic extension for that.

5796
07:43:51,920 --> 07:43:52,320
All right.

5797
07:43:56,880 --> 07:44:00,240
Let's take a look at Azure resources and how we're going to monitor those.

5798
07:44:00,240 --> 07:44:05,760
So you're going to have resource logs, and these provide insights to internal operations for Azure resources.

5799
07:44:06,280 --> 07:44:13,600
And these logs are automatically created for you, but you will have to set diagnostic settings to specify destination for them to be collected for each resource.

5800
07:44:14,320 --> 07:44:17,280
For metrics, you're going to get those automatically.

5801
07:44:17,280 --> 07:44:19,400
You don't have to do any additional work to configure them.

5802
07:44:19,400 --> 07:44:22,240
And you're going to be able to analyze those in Metrics Explorer.

5803
07:44:23,200 --> 07:44:27,840
For your log data, you're going to use log analytics to look for trends and other analyses.

5804
07:44:28,640 --> 07:44:31,840
You can also copy your platform metrics to logs for analysis.

5805
07:44:32,400 --> 07:44:35,760
And your resource logs are going to be archived

5806
07:44:36,080 --> 07:44:38,160
It's Azure Storage for long-term backup.

5807
07:44:39,440 --> 07:44:47,440
If you want to use or trigger or send your data to other destinations, you can use Event Hubs.

5808
07:44:47,440 --> 07:44:48,880
That's generally what Event Hubs is for.

5809
07:44:48,880 --> 07:44:49,440
So there you go.

5810
07:44:53,520 --> 07:44:56,800
Taking a very quick look at how we monitor our Azure subscription.

5811
07:44:56,800 --> 07:45:06,560
This is going to be for the service health of different resources that you're using, like are they okay, are they running, and things about Azure Active Directory.

5812
07:45:06,560 --> 07:45:07,440
So that's about it.

5813
07:45:12,320 --> 07:45:16,000
Take a look at our Azure tenant and how we would monitor that.

5814
07:45:16,000 --> 07:45:19,840
And if you remember our Azure AD section, that's where we define tenant because tenant is

5815
07:45:20,240 --> 07:45:22,400
highly coupled to Active Directory.

5816
07:45:22,720 --> 07:45:33,280
And so this is going to be for tenant-wide services, such as Active Directory, so reporting that contains history of sign-in activity, audit trails of changes made within a particular tenant, things like that.

5817
07:45:33,280 --> 07:45:33,920
So there you go.

5818
07:45:38,320 --> 07:45:40,400
So last on our list here is custom sources.

5819
07:45:40,400 --> 07:45:49,760
And basically, if none of the other previous categories fit where you want to collect data, this is where you can just collect data using the Azure Monitor API.

5820
07:45:49,760 --> 07:45:57,200
And so basically, you're using a REST client, and then it's going to store it in analytics at log analytics or Azure Monitor.

5821
07:45:57,200 --> 07:45:59,600
So it's just really custom data, custom storage.

5822
07:46:03,920 --> 07:46:10,480
So there's two fundamental types of data that we care about when working with Azure Monitor, and that is logs and metrics.

5823
07:46:10,480 --> 07:46:13,920
And so Azure has two services to deal with that.

5824
07:46:13,920 --> 07:46:15,920
One is called Azure Monitor Logs.

5825
07:46:16,160 --> 07:46:21,040
And so this service collects and organizes log performance data for monitored resources.

5826
07:46:21,040 --> 07:46:25,600
Data logs are consolidated from different sources into workspaces, which we'll talk about.

5827
07:46:25,920 --> 07:46:29,120
Platform logs from Azure services is something it'll collect.

5828
07:46:29,280 --> 07:46:32,560
It'll collect also log performance data from VM agents.

5829
07:46:32,960 --> 07:46:42,000
The usage and performance data from applications also can be consolidated, and these workspaces can be analyzed together using a query language, which we definitely cover in this course.

5830
07:46:42,400 --> 07:46:52,640
And you work with these log queries and the results interactively using a sub-service called Log Analytics, which is something we'll definitely be covering.

5831
07:46:53,360 --> 07:46:55,160
Then there's Azure Monitor Metrics.

5832
07:46:55,160 --> 07:46:56,400
So this is for the metric side.

5833
07:46:56,400 --> 07:47:01,120
So collect numeric data from monitor resources into time series database.

5834
07:47:01,520 --> 07:47:07,200
Metrics are numerical values collected at regular intervals and describe some aspects of a system at a particular time.

5835
07:47:07,680 --> 07:47:15,600
Lightweight and capable of supporting near real-time scenarios, useful for alerting and fast detection of issues.

5836
07:47:15,880 --> 07:47:19,200
And you can analyze them interactively using Metrics Explorer.

5837
07:47:19,520 --> 07:47:20,640
And we cover that as well.

5838
07:47:20,640 --> 07:47:26,960
So really, these two services are like the data stores or the databases for the respected types of data.

5839
07:47:27,360 --> 07:47:34,320
And then each of them have the sub-services, which is for exploring and some other additional services, but let's get into that more detail now.

5840
07:47:38,880 --> 07:47:46,080
So, when you use Log Analytics, you're going to probably want a workspace, and this is a unique environment for Azure Monitor Log Data.

5841
07:47:46,320 --> 07:47:53,680
Each workspace has its own data repository and configuration and data sources and solutions that are configured to store their data in a particular workspace.

5842
07:47:53,920 --> 07:48:05,800
So, it's really interesting because if you go over to Azure Monitor, you can use Log Analytics without creating a workspace, but I believe that if you want to isolate a lot of your data and...

5843
07:48:06,400 --> 07:48:12,280
install maybe collect data outside of Azure services for other things, you're going to need a workspace.

5844
07:48:12,280 --> 07:48:14,360
And it's going to also have a lot more robust options.

5845
07:48:14,360 --> 07:48:19,040
So that's something you're going to end up doing is creating workspaces, and it's a good habit to do.

5846
07:48:19,840 --> 07:48:21,360
But there's not a lot to talk about there.

5847
07:48:21,600 --> 07:48:25,920
But let's move on to actual the query language, which is really the meat of log analytics.

5848
07:48:30,120 --> 07:48:32,080
I want to quickly touch on log analytics.

5849
07:48:32,240 --> 07:48:37,200
And so this is a tool used to edit and run queries within Azure Monitor logs.

5850
07:48:37,440 --> 07:48:45,840
And so the idea is it kind of looks like something you would use to connect to a database because it really is structured like a database with tables and columns and things like that.

5851
07:48:46,160 --> 07:48:50,000
And it has its own query language called KQL.

5852
07:48:50,240 --> 07:48:55,160
And the idea is that you input your queries and it's going to output results for you.

5853
07:48:55,160 --> 07:48:57,760
And that's something we're going to look at in greater detail is that

5854
07:48:58,400 --> 07:49:01,040
KQL language so that we know how to use that panel.

5855
07:49:01,320 --> 07:49:02,640
Let's go talk about workspaces.

5856
07:49:06,800 --> 07:49:10,320
Let's take a closer look at Kusto and its query language.

5857
07:49:10,480 --> 07:49:25,680
So Azure Mono Logs is based off of the Azure Data Explorer, and along came with it is the Kusto Query Language, also known as KQL, and this is the way we're going to filter and sort and do things with our logs.

5858
07:49:26,000 --> 07:49:33,520
So Kusto is based on a relational database management system, and it supports entities such as database, tables, and columns.

5859
07:49:33,520 --> 07:49:35,120
It also has this thing called clusters.

5860
07:49:35,440 --> 07:49:42,880
And KQL actually has a lot of utility in Azure because it's not just in Monitor logs and Data Explorer.

5861
07:49:42,880 --> 07:49:51,680
You can use it in log analytics, log alert rules, workbooks, dashboards, logic apps, PowerShell, Azure Monitor log APIs.

5862
07:49:51,680 --> 07:49:54,480
So it's definitely something you're going to be using across the board in Azure.

5863
07:49:55,280 --> 07:49:57,840
And so they have some basic operators.

5864
07:49:58,560 --> 07:50:00,440
They have lots of operators that you can use.

5865
07:50:00,440 --> 07:50:05,800
So you can do calculated columns, searching and filtering on rows, group by aggregates, join functions.

5866
07:50:05,800 --> 07:50:09,600
And we're going to be looking at a lot of the operators in more detail after this slide here.

5867
07:50:10,160 --> 07:50:17,040
But anyway, the queries execute in the context of a Kusto database that is attached to a Kusto cluster.

5868
07:50:17,240 --> 07:50:20,880
And we will talk about clusters, database tables, and columns up next.

5869
07:50:25,920 --> 07:50:28,880
Let's take a look at what makes up something for Kusto.

5870
07:50:28,880 --> 07:50:32,680
And so we have a bunch of entities here, clusters, database, tables, columns, and functions.

5871
07:50:32,680 --> 07:50:37,600
And so I have this nice visual to help us kind of see how they all work together.

5872
07:50:37,600 --> 07:50:41,520
So at the top we have clusters, and these are entities that hold multiple databases.

5873
07:50:41,520 --> 07:50:45,520
You can also have multiple clusters, but it's not just not being shown there in that graphic.

5874
07:50:45,840 --> 07:50:47,640
Then you have the databases themselves.

5875
07:50:47,640 --> 07:50:50,480
These are named entities that hold tables and store functions.

5876
07:50:50,640 --> 07:51:01,120
You have tables, these are named entities that hold data, and a table has an ordered set of columns and zero or more rows of data, each row holding one data value for each of the columns of the table.

5877
07:51:01,520 --> 07:51:06,240
Then there are the columns themselves, and these are named identities that have a scalar data type.

5878
07:51:06,400 --> 07:51:12,960
Columns are referenced in the query relative to the tabular data stream, and that is the context of the specific operator referencing them.

5879
07:51:13,280 --> 07:51:18,400
Then we have stored functions, and these are named entities that allow reuse of Kusto queries or query parts.

5880
07:51:18,880 --> 07:51:24,320
And then you've got these external tables, and these are tables that live outside of your cluster.

5881
07:51:24,800 --> 07:51:32,480
I think that you're referencing them from storage accounts and they're in BLOB storage, so I think they could be like CSV files and stuff like that.

5882
07:51:32,880 --> 07:51:42,560
But these external tables are used for exporting data from Kusto to external storage, so storage accounts, as for querying external data without ingesting it actually into Kusto.

5883
07:51:42,720 --> 07:51:45,520
So hopefully that gives you an idea of the lay of the land there.

5884
07:51:49,760 --> 07:51:55,520
Let's take a look at the type of data types that we can use in Kusto, but let's just define what scalar and data types are.

5885
07:51:55,520 --> 07:52:01,440
So scalars are quantities that are fully described by a magnitude or numerical value alone.

5886
07:52:02,000 --> 07:52:04,160
So the idea is that it just means like a single value.

5887
07:52:04,160 --> 07:52:08,320
Then you have data types, and a data type defines how a piece of data is interpreted.

5888
07:52:08,560 --> 07:52:10,480
So an integer number could be a data type.

5889
07:52:10,480 --> 07:52:16,240
If you've ever used programming languages like data types and stuff like that, or an SQL database, you should be familiar with those.

5890
07:52:16,720 --> 07:52:26,080
So in Kusto, data types are used for various things, so they can be for columns or function parameters that expect specific data types that they want them to be.

5891
07:52:26,600 --> 07:52:31,040
And so let's just go through the quick list of data types, because there are quite a few here, and I've summarized them quickly.

5892
07:52:31,040 --> 07:52:34,080
So the first is Boolean, and this represents a true or false value.

5893
07:52:34,320 --> 07:52:37,120
Then you've got date times or date, and this represents a date.

5894
07:52:37,520 --> 07:52:40,720
These are stored in UTC time zones.

5895
07:52:40,920 --> 07:52:41,800
You've got decimals.

5896
07:52:41,800 --> 07:52:46,600
These are numbers that like are 12.88, or something with a decimal in them.

5897
07:52:46,960 --> 07:52:49,600
You have integers, which is like a whole number.

5898
07:52:50,160 --> 07:52:54,320
Then you have longs, which are also integers, but with a greater range.

5899
07:52:54,560 --> 07:52:59,920
You have your GUIDs or UUIDs, and these are unique values.

5900
07:52:59,920 --> 07:53:03,520
So it's like a random hash there that you have.

5901
07:53:03,880 --> 07:53:11,120
And the idea is just so that you have unique values, but they're not like one, two, three, 4, 5, so people can't guess the size of your tables.

5902
07:53:11,520 --> 07:53:12,400
Then you have reals.

5903
07:53:12,400 --> 07:53:15,040
These are double precision floating point numbers.

5904
07:53:15,040 --> 07:53:22,000
So these are really, really big numbers, something you'd probably use if you're doing things with finance or numbers.

5905
07:53:22,240 --> 07:53:23,360
Then you have strings.

5906
07:53:23,720 --> 07:53:27,760
And these are unicode strings, and they're limited by default to 1 MB.

5907
07:53:27,760 --> 07:53:30,400
And the way you do them is you have them wrapped in quotations.

5908
07:53:30,640 --> 07:53:31,680
We have that hello world.

5909
07:53:31,920 --> 07:53:32,960
You have time spans.

5910
07:53:32,960 --> 07:53:33,840
These are interesting.

5911
07:53:33,840 --> 07:53:35,600
These are little time intervals represented.

5912
07:53:35,600 --> 07:53:41,120
So like 2D would equal 2 days, 30M would equal 30 minutes, 1 tick would equal 100 nanoseconds.

5913
07:53:41,200 --> 07:53:42,640
And they have a variety of those.

5914
07:53:43,040 --> 07:53:46,560
Then you have dynamic, and this is a special type that can do a bunch of things.

5915
07:53:46,800 --> 07:53:49,080
So it can accept primitive scalar data types.

5916
07:53:49,080 --> 07:53:51,000
So the idea is it's kind of like a

5917
07:53:52,640 --> 07:54:05,840
a data type that can accept any value, or it can accept an array of any value, or it can accept a property bag, which, if you're from the JavaScript world, looks like a JSON object, so you have a key and value, and it can even be nested.

5918
07:54:06,080 --> 07:54:12,960
And then last, which is a data type, but you're not setting these as your columns, which is the null, and that's a special value that represents a missing value.

5919
07:54:12,960 --> 07:54:15,360
And any of these data types can be a null value.

5920
07:54:15,360 --> 07:54:22,520
So like you look at Boolean, it can be true, false, or null, and datetime can be a datetime or date or null, and that goes for all.

5921
07:54:22,600 --> 07:54:23,120
all of them.

5922
07:54:28,320 --> 07:54:30,360
Let's talk about Kusto control commands.

5923
07:54:30,360 --> 07:54:38,160
This is really part of the KQL language, but it's a way of kind of working with the databases and tables and stuff like that.

5924
07:54:38,400 --> 07:54:46,880
If you ever use Postgres, maybe you've done like forward slash du, or you have these commands that didn't really have to do with necessarily querying, but like managing the databases.

5925
07:54:47,280 --> 07:54:50,080
and tables and stuff, that's what control commands are.

5926
07:54:50,480 --> 07:54:51,760
So I'll give you an example.

5927
07:54:51,760 --> 07:54:54,720
So here we have a control command to create a Kusto table.

5928
07:54:54,720 --> 07:54:56,080
So they always start with a period.

5929
07:54:56,400 --> 07:54:59,600
So period create table logs and then it makes 2 columns and that.

5930
07:55:00,000 --> 07:55:05,440
When you're using the query like log analytics and stuff like that, you can just type period and then start typing it.

5931
07:55:06,400 --> 07:55:09,000
It'll show you all the list of control commands.

5932
07:55:09,000 --> 07:55:13,360
It was really hard to find the documentation a full list, otherwise I would have picked some out for you.

5933
07:55:14,000 --> 07:55:16,240
But generally you can just kind of explore that way.

5934
07:55:16,240 --> 07:55:22,320
Or the most common ones you're going to come across is all going to be in the documentation, even though there's a very long list of control commands.

5935
07:55:22,720 --> 07:55:25,120
A very common one you're going to be using a lot is show.

5936
07:55:25,360 --> 07:55:29,600
So for example, you can do.show tables and then count the number of tables there are.

5937
07:55:30,000 --> 07:55:35,840
And so I just want to show you that if you type.show, it'll show you what it can take as a second parameter.

5938
07:55:36,640 --> 07:55:37,920
And there's a huge list there.

5939
07:55:38,160 --> 07:55:41,600
So just an idea like how you can work with control commands.

5940
07:55:45,600 --> 07:56:00,480
Take a look here at Kusto functions, and these are reusable queries or query parts, and Kusto supports several kinds of functions, the first being stored functions, which are user-defined functions, and these are stored and managed as one kind of database schema entity.

5941
07:56:01,280 --> 07:56:06,960
Then, just to define user-defined functions one step further, they come in two categories.

5942
07:56:06,960 --> 07:56:09,880
We have scalar functions, so these have

5943
07:56:09,880 --> 07:56:14,040
have input scalar data types and output scalar data types, and then tabular functions.

5944
07:56:14,040 --> 07:56:18,720
So these take input tabular data and they output tabular data.

5945
07:56:18,880 --> 07:56:21,920
Tabular data is just when you're working with multiple rows in a table.

5946
07:56:22,720 --> 07:56:29,840
Then you have query-defined functions, which are also user-defined functions that are defined and used within the scope of a single query.

5947
07:56:30,160 --> 07:56:34,640
So very similar to stored functions, but it's all based on scope.

5948
07:56:34,800 --> 07:56:35,040
Okay?

5949
07:56:35,920 --> 07:56:43,520
Then the last on our list here is built-in functions, which are hard-coded, and these are defined by Kusto and cannot be modified users, and they just give you a lot of utility.

5950
07:56:43,760 --> 07:56:47,200
Let's take a look at some of these built-in functions, starting with special functions.

5951
07:56:47,200 --> 07:56:48,720
So select Kusto entities.

5952
07:56:49,120 --> 07:56:53,920
So you might want to say, I want to select a cluster, and then I want to select a database, and then that table.

5953
07:56:54,880 --> 07:56:59,520
Then you have aggregate functions, which perform calculations on a set of values and return a single value.

5954
07:56:59,520 --> 07:57:02,160
So maybe you want to do a count.

5955
07:57:02,160 --> 07:57:04,240
So you see where it says count and parentheses.

5956
07:57:04,720 --> 07:57:08,640
Then you have Windows functions, and these operate on multiple rows and records in a row.

5957
07:57:11,160 --> 07:57:13,320
And so one really popular one is row number.

5958
07:57:13,320 --> 07:57:14,880
And so this could count the number of rows.

5959
07:57:14,880 --> 07:57:17,920
Maybe you have to figure out the row numbers in relation to your query.

5960
07:57:18,440 --> 07:57:19,920
And so that's something you could do there.

5961
07:57:24,480 --> 07:57:26,560
Let's take a look at some scalar operators.

5962
07:57:26,560 --> 07:57:27,760
And there's quite a few here.

5963
07:57:27,760 --> 07:57:31,520
And these are for working with scalar data types to do comparisons.

5964
07:57:32,120 --> 07:57:35,440
And there's a bunch of different categories, so let's just quickly go through them here.

5965
07:57:35,680 --> 07:57:37,800
The first one is byte-wise operators.

5966
07:57:37,800 --> 07:57:41,200
That's where you're working with zeros and ones and flipping them around to do different things.

5967
07:57:41,440 --> 07:57:46,160
So you've got the binary end, the not, the or, the shift left, the shift right.

5968
07:57:46,800 --> 07:57:50,640
The XOR, and these make a lot of sense if you know how to work with binary math.

5969
07:57:50,640 --> 07:57:54,720
If you don't, don't worry about them, but I just want you to know if you do, they're there for you use.

5970
07:57:54,960 --> 07:57:56,640
Next are logical operators.

5971
07:57:56,880 --> 07:57:59,440
So this is what you're going to be more familiar with, like equality.

5972
07:57:59,440 --> 07:58:02,560
So equals, inequal, and or.

5973
07:58:02,880 --> 07:58:04,160
So those are pretty darn simple.

5974
07:58:04,320 --> 07:58:07,120
Then you have date, time, and time span arithmetic.

5975
07:58:07,520 --> 07:58:10,400
And so we have add or subtract date times.

5976
07:58:10,400 --> 07:58:11,400
You can do that.

5977
07:58:11,400 --> 07:58:14,840
You can add, subtract, divide, or multiple time spans.

5978
07:58:14,840 --> 07:58:17,040
So add one day plus two day makes 3 days.

5979
07:58:18,080 --> 07:58:20,000
Then you have numerical operators.

5980
07:58:20,160 --> 07:58:22,160
These work on ints, longs, and reels.

5981
07:58:22,960 --> 07:58:25,600
So you can add, subtract, multiply, and divide.

5982
07:58:25,840 --> 07:58:31,680
You can do module where it's determining whether it's a whole number or not, or divisible by a whole number.

5983
07:58:31,680 --> 07:58:34,160
So like let's say you have 17 and you put it through there.

5984
07:58:34,560 --> 07:58:38,560
You say module 17 by like modulus 2.

5985
07:58:39,280 --> 07:58:44,640
If it's not divisible by two, like perfectly resolves into zero, it will return either zero or one.

5986
07:58:45,040 --> 07:58:49,760
Then you have less, greater, equal, not equal, less or equal than.

5987
07:58:50,560 --> 07:58:51,280
greater or equal.

5988
07:58:51,280 --> 07:58:52,160
So you got the idea there.

5989
07:58:52,480 --> 07:58:54,520
Equals to one of the elements.

5990
07:58:54,520 --> 07:58:55,360
So that's in.

5991
07:58:55,360 --> 07:58:56,160
So you do the in.

5992
07:58:56,480 --> 07:58:59,040
It's very familiar if you're used to using SQL.

5993
07:58:59,040 --> 07:59:02,640
Then you have the opposite where you put an exclamation in front of it.

5994
07:59:02,640 --> 07:59:08,720
Actually, there's a lot of extra operators that just have the same thing with an explanation to mean the opposite, especially with string operators.

5995
07:59:09,280 --> 07:59:14,560
So here's a bunch of string operators and they almost all have exclamations, a variant with exclamation in front of them.

5996
07:59:14,880 --> 07:59:16,400
Then you have your between operators.

5997
07:59:16,400 --> 07:59:20,000
This matches the input that is inside an inclusive range.

5998
07:59:20,400 --> 07:59:24,040
So you can say between 1 and 10 or between these date times.

5999
07:59:24,040 --> 07:59:24,880
So there you go.

6000
07:59:29,280 --> 07:59:31,760
Let's take a look at Kusto tabular operators.

6001
07:59:31,760 --> 07:59:37,120
And I really want you to pay attention to this one because this is where all the power of KQL happens.

6002
07:59:37,520 --> 07:59:40,000
So these perform comparisons against a bunch of rows.

6003
07:59:40,000 --> 07:59:42,400
That's why it's called tabular operators.

6004
07:59:42,920 --> 07:59:51,320
And there's a lot of them, and we're going to look at the most common ones, because it would take me forever to go through all of them, and you're not going to remember them all, so let's just look at the ones we actually care about working with.

6005
07:59:51,600 --> 07:59:54,640
So, the first is count, this returns the count of rows in the table.

6006
07:59:54,880 --> 07:59:58,080
Then you have take, this returns up to a specified number of rows of data.

6007
07:59:58,320 --> 07:59:59,440
You have sort, this...

6008
08:00:00,040 --> 08:00:04,920
will take the rows of the input into the order by one or more columns.

6009
08:00:04,920 --> 08:00:08,320
So you see by damage property descending, so it's just sort.

6010
08:00:08,880 --> 08:00:16,800
Then you have project, returns a specific set of columns, and where filter a table to subset of rows that satisfy A predicate.

6011
08:00:16,800 --> 08:00:21,280
Before we move on to the next slide, I just want to point out, like if you've worked with SQL, these are very familiar, right?

6012
08:00:21,280 --> 08:00:25,720
Like take is like limit, sort is like order by, project is like select, okay?

6013
08:00:26,480 --> 08:00:32,720
Moving on to the next one here, we have top returns the first N records sorted by specified columns.

6014
08:00:32,920 --> 08:00:34,320
This is kind of like a shorthand.

6015
08:00:34,320 --> 08:00:39,200
I think it makes take and sort and just abbreviates it to one line.

6016
08:00:39,520 --> 08:00:42,800
You have extend creates a new column by computing a value.

6017
08:00:43,040 --> 08:00:47,360
So notice that it says duration equals end time minus start time, and then we're using duration somewhere else.

6018
08:00:47,680 --> 08:00:54,560
Then you have summarize, aggregate groups of rows, that's kind of like group by in regular SQL.

6019
08:00:54,880 --> 08:00:58,320
And then renders, so renders results as a graphical output.

6020
08:00:58,400 --> 08:01:00,080
And to me, that's a really cool one.

6021
08:01:05,200 --> 08:01:08,000
Moving on to metrics, we're going to be looking at Metrics Explorer.

6022
08:01:08,000 --> 08:01:16,080
So, Metrics Explorer is a subservice of Azure Monitor that allows you to plot charts, visualize correlating trends, and investigate spikes and dips in metric values.

6023
08:01:16,080 --> 08:01:23,600
So, the idea is you can create a really cool graph like that, and you can make a variety of different ones based on how you want to chart it out.

6024
08:01:23,960 --> 08:01:29,040
Let's talk about how we define one of these metric visualizations in Metric Explorer.

6025
08:01:29,280 --> 08:01:34,240
So you've got this cool bar, and the idea is you've got to fill it all the way to the end, and then that will visualize it for us.

6026
08:01:34,240 --> 08:01:35,520
The first is the scope.

6027
08:01:35,760 --> 08:01:40,000
So you're going to open this up, and it's going to allow you to select resources.

6028
08:01:40,000 --> 08:01:47,040
So it'll show you like subscription and stuff like that and resource groups, but it always makes you select a resource at the end.

6029
08:01:47,360 --> 08:01:51,920
And some services you can select multiple resources, and some you can only select a single instance.

6030
08:01:52,280 --> 08:01:59,880
So, with storage account there, it's only going to be a single one there, so I had one called Dastrum Institute I made, and then there you're going to choose a namespace.

6031
08:01:59,880 --> 08:02:03,440
So, this is a specific group of metric data within a resource.

6032
08:02:03,680 --> 08:02:07,920
So, notice, like it makes sense for a storage account that it would show account, BLOB, file, queue, table.

6033
08:02:08,080 --> 08:02:10,000
It's going to vary based on your service.

6034
08:02:10,400 --> 08:02:13,640
Then, you actually have the metric you care about, so we have availability at...

6035
08:02:14,640 --> 08:02:17,000
aggress, ingress, et cetera, and a bunch of other things.

6036
08:02:17,000 --> 08:02:18,520
You're going to choose one of those.

6037
08:02:18,520 --> 08:02:20,560
And then you're going to choose how you want to aggregate it.

6038
08:02:20,560 --> 08:02:22,640
So average, min, max, et cetera.

6039
08:02:23,040 --> 08:02:28,240
And again, this is going to be totally different based on what resources you choose, but that's generally how it works.

6040
08:02:32,560 --> 08:02:34,200
Let's take a look here at Azure Alerts.

6041
08:02:34,200 --> 08:02:39,880
And this helps us be notified when there are issues found within the infrastructure or application.

6042
08:02:39,880 --> 08:02:43,600
And this allows us to identify and address issues before the users of your system notice them.

6043
08:02:44,080 --> 08:02:45,440
And so they come in three flavors.

6044
08:02:45,440 --> 08:02:48,800
We've got metric alerts, log alerts, and activity log alerts.

6045
08:02:49,040 --> 08:02:52,240
And when an alert is triggered, you can be notified or have it take action.

6046
08:02:52,240 --> 08:02:55,120
So here is kind of the anatomy of an alert.

6047
08:02:55,120 --> 08:02:56,080
And we have the alert rule.

6048
08:02:56,080 --> 08:03:05,120
This defines who we should monitor the service and the definition of when it is triggered, which is going to be the next part here.

6049
08:03:05,440 --> 08:03:10,640
So a resource such as a virtual machine, designated as the target resource, will emit signal.

6050
08:03:10,640 --> 08:03:12,800
So it's going to be emitting a data payload.

6051
08:03:13,120 --> 08:03:14,360
And it could be of the following types.

6052
08:03:14,360 --> 08:03:17,600
It could be a metric, a log, activity log, application insights.

6053
08:03:17,600 --> 08:03:20,320
You can kind of see how that ties to the types of alerts.

6054
08:03:20,800 --> 08:03:23,360
Then you have the criteria or logical tests.

6055
08:03:23,360 --> 08:03:26,480
This gets evaluated and determines, are we in a triggered state?

6056
08:03:26,480 --> 08:03:29,240
It could be like percentage CPU greater than 70%.

6057
08:03:29,680 --> 08:03:32,080
Then you have your action group, which contains actions.

6058
08:03:32,960 --> 08:03:37,280
And those actions will be performed when it is triggered.

6059
08:03:37,600 --> 08:03:41,360
And actions could be things like run an automation runbook.

6060
08:03:41,680 --> 08:03:46,000
Use Azure Functions, ITSM, Logic App, Webhooks, or Secure Webhook.

6061
08:03:46,520 --> 08:03:51,200
On the other side there, we have this box over here, and this is all about the state of your alert.

6062
08:03:51,760 --> 08:03:54,480
And so we have monitor condition, alert state.

6063
08:03:54,480 --> 08:04:10,400
So monitor condition is set by the system, and alert state is set by the user, but the idea that is there is so you can define where it is, because you might want to have a history of saying, okay, I've resolved this issue, so I'm marking this as closed, and that'd be like an alert state there.

6064
08:04:10,480 --> 08:04:11,280
And so there you go.

6065
08:04:15,880 --> 08:04:20,080
This is probably not going to be on your exam, but it's super cool to show, and it's only one slide away.

6066
08:04:20,080 --> 08:04:22,080
So let's talk about it, which are Azure dashboards.

6067
08:04:22,080 --> 08:04:30,400
These are virtual workspaces to quickly launch tasks for day-to-day operations and monitor resources and build custom dashboards based on projects, tasks, or user roles.

6068
08:04:30,560 --> 08:04:34,000
So the idea is you can go in here and you have like this little tile.

6069
08:04:34,800 --> 08:04:53,360
Editor, and you can drag stuff over, so you can see I can put a video in and a link to the help support and put a clock and some metrics I care about and some markdown, so it's a really good way of building out these customized dashboards based on a user role to really help you focus on what you have to deal with within your infrastructure on Azure.

6070
08:04:57,960 --> 08:04:59,760
Let's take a look at Azure Workbooks.

6071
08:04:59,760 --> 08:05:02,640
Just because this is in the scope of Azure Monitor, so we should cover it.

6072
08:05:02,960 --> 08:05:08,880
So Workbooks provide a flexible canvas for data analysis and the creation of rich visual reports within the Azure portal.

6073
08:05:09,080 --> 08:05:13,680
They allow you to tap into multiple data sources from Azure and combine them into a unified interactive experience.

6074
08:05:14,480 --> 08:05:16,480
And so the key word here is story.

6075
08:05:16,800 --> 08:05:21,520
It tells a story about the performance and availability about your applications and services.

6076
08:05:22,240 --> 08:05:25,080
So this thing kind of looks like a dashboard, but it isn't.

6077
08:05:25,360 --> 08:05:27,920
And it's highly customizable, but it's not very clear in here.

6078
08:05:27,920 --> 08:05:32,120
But really what it is, it's like the form of a document.

6079
08:05:32,120 --> 08:05:46,080
And the idea is that imagine that you have a document and then you can embed analytics in it that are real-time analytics so that you can visualize and kind of investigate and discuss performance and availability and stuff like that.

6080
08:05:46,080 --> 08:05:52,720
You can kind of think of it like if you have ever worked with Jupyter Notebooks, but it's really for performance and monitoring.

6081
08:05:54,080 --> 08:05:55,520
It's kind of like that, okay?

6082
08:05:55,520 --> 08:05:58,160
And these things are highly customizable and really useful.

6083
08:05:58,480 --> 08:06:01,680
And if you ever use Datadog, Datadog has its own thing.

6084
08:06:01,680 --> 08:06:03,120
I think they call them notebooks as well.

6085
08:06:03,520 --> 08:06:05,000
They instead of workbooks, they're called notebooks.

6086
08:06:05,000 --> 08:06:10,640
It's the same thing, but it's a really great tool for really understanding your performance.

6087
08:06:14,680 --> 08:06:19,960
Let's take a look here at Application Insights, and this is an Application Performance Management Service.

6088
08:06:19,960 --> 08:06:23,040
So, it's an APM and it's a sub-service of Azure Monitor.

6089
08:06:23,320 --> 08:06:25,320
Let's talk about what APMs are.

6090
08:06:25,320 --> 08:06:29,920
So, these are monitoring and they do monitoring and management of performance and availability for software apps.

6091
08:06:30,240 --> 08:06:33,840
APM strives to detect, diagnose complex application performance problems.

6092
08:06:34,160 --> 08:06:37,080
to maintain an expected level of performance.

6093
08:06:37,080 --> 08:06:39,440
So why use Application Insights?

6094
08:06:39,440 --> 08:06:47,440
Well, it automatically detects performance anomalies and includes powerful analytics tools to help you diagnose issues and to understand what users do with your app.

6095
08:06:47,840 --> 08:06:51,760
Designed to help you continuously improve performance and usability.

6096
08:06:51,920 --> 08:06:57,760
Works for apps for.NET, Node.js, Java, Python, hosted on on-premise, hybrid, or any public cloud.

6097
08:06:58,000 --> 08:07:02,480
And I know that it works for other ones that are not part of the supported languages.

6098
08:07:02,480 --> 08:07:04,000
So there's one for Ruby, but that's

6099
08:07:04,120 --> 08:07:11,360
This is like Azure's only providing official support for a bunch of languages, but you might still have libraries out there for them.

6100
08:07:11,680 --> 08:07:20,880
And it integrates with your DevOps processes and can monitor, analyze telemetry from mobile apps by integrating with Visual Studio App Center.

6101
08:07:20,880 --> 08:07:24,080
And if you're running an app, you definitely want to have an APM installed.

6102
08:07:24,320 --> 08:07:32,240
If you ever use Datadog or Skylight or New Relic, that's what APMs are or what those providers offer.

6103
08:07:32,640 --> 08:07:34,040
But let's take a closer look here.

6104
08:07:34,640 --> 08:07:37,920
And this is kind of an example of an application.

6105
08:07:37,920 --> 08:07:45,360
And what you're going to see is that we have a front end, a back end, and workers just to kind of represent how you can instrument your applications.

6106
08:07:45,360 --> 08:07:51,600
And when we say instrument, it just means install like this piece of code that runs on it to send data back to Application Insights.

6107
08:07:52,400 --> 08:07:56,640
And the idea is that when you instrument it, you're just installing the instrument package SDK.

6108
08:07:56,880 --> 08:07:59,520
Or in some cases, you can just turn it on where it's supported.

6109
08:07:59,520 --> 08:08:01,920
So you don't necessarily have to install it in an app.

6110
08:08:01,920 --> 08:08:03,040
You might just press a button.

6111
08:08:03,520 --> 08:08:07,200
and it will install it within Azure services.

6112
08:08:07,760 --> 08:08:10,640
And there's many ways that you can view your telemetry data.

6113
08:08:10,640 --> 08:08:19,600
So the idea is that the agents send that information to Application Insights, and then you're going to be able to leverage that in alerts, Power BI, Visual Studio, REST API, continuous exports.

6114
08:08:19,880 --> 08:08:23,360
A lot of services can ingest Application Insights.

6115
08:08:24,000 --> 08:08:28,960
Apps can be instrumented from anywhere, so if you're running on AWS, you can install it on your servers there.

6116
08:08:29,360 --> 08:08:36,560
When you set up application sites monitoring for your web apps, you create an application site resource in Microsoft Azure, so it's a physical resource.

6117
08:08:36,960 --> 08:08:41,920
And you open this resource in the Azure portal in order to see and analyze telemetry collected from your app.

6118
08:08:42,200 --> 08:08:46,320
And the resource is identified by the instrumentation key, also known as the IKEY.

6119
08:08:46,800 --> 08:08:49,920
And I just got a big old list here just to tell you all the things you can do with it.

6120
08:08:50,080 --> 08:08:52,400
So, what does Application Insight monitor?

6121
08:08:52,400 --> 08:09:07,520
Well, request rates, response time, failure rates, dependency rates, response times, failure rates, exceptions, page views, load performance, AJAX calls, user and sessions count, performance counters, host diagnostics, diagnostic trace logs, custom events metrics.

6122
08:09:08,800 --> 08:09:09,440
So there you go.

6123
08:09:09,440 --> 08:09:10,400
That's a big old list.

6124
08:09:10,800 --> 08:09:13,280
And on the right-hand side is where can I see my telemetry?

6125
08:09:13,280 --> 08:09:15,600
And we saw a little list, but let's go through the big list.

6126
08:09:15,880 --> 08:09:33,760
And that's smart detection and manual alerts, application map, profiler, usage analysis, diagnostic search for instance data, metrics explorer for aggregated data, dashboards, live metric streams, analytics, Visual Studio, Snapshot Debugger, Power BI, REST API, continuous export, and there you go.

6127
08:09:33,760 --> 08:09:36,480
So you can see that it can collect

6128
08:09:36,880 --> 08:09:39,440
and you can use it in a lot of places.

6129
08:09:39,440 --> 08:09:43,200
Definitely, install if you're using or you're running a web application.

6130
08:09:48,280 --> 08:09:51,760
Hey, this is Andrew Brown from Exam Pro, and we're looking at Azure Monitor Cheat Sheet.

6131
08:09:51,760 --> 08:09:54,640
This one's a three-parter, so let's jump into it.

6132
08:09:54,960 --> 08:10:01,440
Azure Monitor's a comprehensive solution for collecting, analyzing, and acting as telemetry for your cloud on-premise environments.

6133
08:10:01,680 --> 08:10:04,480
And even though I don't have it in the slide here, it is an umbrella service.

6134
08:10:04,480 --> 08:10:08,720
I mean, there's a lot of things underneath this, and that's why we have 3 pages of information.

6135
08:10:08,800 --> 08:10:12,400
It can create visual dashboards, smart alerts, automated actions, log monitoring.

6136
08:10:12,880 --> 08:10:16,560
To obtain observability, you need to know metrics, logs, and traces.

6137
08:10:16,720 --> 08:10:20,880
You can use them all together using them in isolate, but that does not give you observability.

6138
08:10:21,120 --> 08:10:23,600
Metrics is a number that is measured over a period of time.

6139
08:10:23,600 --> 08:10:27,120
Logs is a text file that contains event data, which was happening.

6140
08:10:27,120 --> 08:10:34,000
And traces is a history of requests that travels through multiple apps and services, so we can pinpoint performance or failures.

6141
08:10:34,760 --> 08:10:42,720
Azure Monitor collects 2 fundamental types of data, some sources, logs and metrics, which kind of matches up with our theoretical information here, right?

6142
08:10:43,040 --> 08:10:47,600
So Azure Monitor logs collects and organizes log and performance data for monitoring resources.

6143
08:10:47,600 --> 08:10:55,920
Data logs are consolidated from different sources into workspaces, platform logs and Azure services, logs and performance data and virtual machine agents.

6144
08:10:56,160 --> 08:10:59,680
Usage and performance data for applications can be consolidated in a workspace.

6145
08:10:59,680 --> 08:11:01,200
You can be analyzed.

6146
08:11:01,720 --> 08:11:07,920
They can be analyzed together using a sophisticated query language, which we'll talk about here in a moment, or review, I suppose.

6147
08:11:09,120 --> 08:11:14,320
Work with log queries and their results interactively using log analytics.

6148
08:11:14,640 --> 08:11:18,080
Azure Monitor Metrics collects, and that's the second part here, right?

6149
08:11:18,080 --> 08:11:19,280
So the two fundamentals.

6150
08:11:19,520 --> 08:11:26,320
Azure Monitor Metrics collects numeric data from monitored resources in a time series database.

6151
08:11:26,560 --> 08:11:31,640
Measures are numerical values collected at regular intervals and describe some aspects of a system.

6152
08:11:31,760 --> 08:11:39,120
Them at a particular time, lightweight and capable of supporting near real-time scenarios, useful for learning and fast detection of issues.

6153
08:11:39,360 --> 08:11:43,120
You can analyze them interactively via the Metrics Explorer.

6154
08:11:43,120 --> 08:11:51,320
On to page two, Log Analytics is a tool in the Azure portal used to edit and run log queries with data in the Azure Monitor logs.

6155
08:11:51,320 --> 08:11:54,960
Log Analytics is used a language called KQL.

6156
08:11:55,440 --> 08:11:56,240
Log Analytics.

6157
08:11:56,640 --> 08:11:58,000
I think that's Kusto, right?

6158
08:11:58,000 --> 08:12:01,920
So Log Analytics workspace is a unique environment for the monitor logs data.

6159
08:12:01,920 --> 08:12:05,360
Each workspace has its own data repository and configuration.

6160
08:12:05,680 --> 08:12:08,720
Data sources and solutions are configured to store in their workplace.

6161
08:12:08,960 --> 08:12:11,840
And I really wish I put the word data lake in here.

6162
08:12:11,960 --> 08:12:18,160
It's not important for the associate, but for other exams, it helps you understand if you think of it as a data lake.

6163
08:12:18,480 --> 08:12:24,560
Azure Monitor Logs is based on the Azure Data Explorer, and log queries are written using the Kusto query language.

6164
08:12:25,160 --> 08:12:31,040
KQL can be used in a log analytics, log alert rules, workbooks, Azure dashboards, and all over the place.

6165
08:12:31,280 --> 08:12:35,760
Kusto is based on a relational database management system, so you'll see database tables and columns.

6166
08:12:35,760 --> 08:12:40,880
Some query operations include calculated columns, searching and filtering on rows, grouped by aggregates, storing functions.

6167
08:12:40,880 --> 08:12:43,040
If you're used to using SQL, you know what I'm talking about.

6168
08:12:43,560 --> 08:12:48,240
Kusto queries execute in the context of some Kusto database that is attached to a Kusto cluster.

6169
08:12:48,400 --> 08:12:50,720
Kusto is generally composed of the following entities.

6170
08:12:50,720 --> 08:12:52,560
Clusters, database tables, columns, functions.

6171
08:12:52,560 --> 08:12:53,680
Let's talk about them quickly here.

6172
08:12:54,160 --> 08:12:56,480
Clusters are entities that hold databases.

6173
08:12:56,480 --> 08:13:00,000
Databases are named entities that hold tables and stored functions.

6174
08:13:00,240 --> 08:13:05,360
Stored functions are named entities that allow reuse Kusto queries or query parts.

6175
08:13:05,360 --> 08:13:07,440
Tables are named entities that hold data.

6176
08:13:07,440 --> 08:13:10,160
Columns are named entities that hold scalar data types.

6177
08:13:10,600 --> 08:13:15,520
And then you have external tables, which are identities that reference data stored outside the Kusto database.

6178
08:13:15,600 --> 08:13:17,160
These both count as tables.

6179
08:13:17,160 --> 08:13:18,640
That's why it's not in the list up here.

6180
08:13:19,520 --> 08:13:21,840
But generally, these are pretty self-explanatory.

6181
08:13:22,520 --> 08:13:30,720
Metric Explorers is a sub-service of Azure Monitor that allows you to plot charts, visualize correlating trends, and investigate spikes and dips in the metrics values.

6182
08:13:30,720 --> 08:13:35,680
To visualize a metric, you need to define the scope, the namespace, the metric, and the aggregation.

6183
08:13:35,920 --> 08:13:37,360
We're on to the last page here.

6184
08:13:37,920 --> 08:13:42,000
Alerts notify you when issues are found within your infrastructure or application.

6185
08:13:42,000 --> 08:13:46,400
They allow you to identify address issues before the users or system notice them.

6186
08:13:46,640 --> 08:13:50,480
Azure has three kinds of alerts, metrics, logs, and activity log alerts.

6187
08:13:51,520 --> 08:13:53,960
Sorry, there is a diagram.

6188
08:13:53,960 --> 08:14:01,040
If you remember our follow along, I actually break down all the structure of an alert.

6189
08:14:01,040 --> 08:14:02,000
You should go review that.

6190
08:14:02,000 --> 08:14:04,480
I didn't put in the cheat sheet because it just would have been too much here.

6191
08:14:05,200 --> 08:14:10,560
Azure dashboards are a virtual workspace to quickly launch tasks for day-to-day operations and monitor resources.

6192
08:14:10,560 --> 08:14:15,440
Azure workbooks provide a flexible canvas for data analysis and the creation of rich

6193
08:14:16,200 --> 08:14:26,320
Visual reports within the Azure portal it tells, and justice to highlight what Azure workbooks are for, it tells a story about the performance availability about your applications and services.

6194
08:14:26,760 --> 08:14:33,760
Then we have Application Insights, and this is an application performance management, an APM service, and it is a sub-service of Azure Monitor.

6195
08:14:33,760 --> 08:14:35,840
That's why all these things are under Azure Monitor.

6196
08:14:36,160 --> 08:14:43,280
Automatically detects performance anomalies, includes powerful analytics tools to help you diagnose issues to understand what users do with your app.

6197
08:14:43,520 --> 08:14:45,920
Designed to help you continuously improve performance and usability.

6198
08:14:45,920 --> 08:14:52,000
Works for apps on the.NET, Node.js, Java, Python, hosted on-premise, hybrid, and public cloud.

6199
08:14:52,000 --> 08:14:53,200
Works everywhere, basically.

6200
08:14:53,440 --> 08:14:56,400
Integrates with your DevOps processes, can monitor and analyze.

6201
08:14:57,520 --> 08:15:00,240
from mobile apps by integrating the Visual Studio App Center.

6202
08:15:00,480 --> 08:15:04,000
To use Application Insights, you need to instrument your application.

6203
08:15:04,160 --> 08:15:11,760
To instrument, you need to install the instrument package SDK or enable Application Insights using Application Insights agents when supported.

6204
08:15:12,160 --> 08:15:13,840
Apps can be instrumented from anywhere.

6205
08:15:14,080 --> 08:15:20,400
When you set up your Application Insights monitoring for your web app, you create an Application Insight resource in Azure Monitor.

6206
08:15:21,200 --> 08:15:23,760
You open the resource in the Azure portal to

6207
08:15:24,560 --> 08:15:34,560
Order in order to see and analyze telemetry collected from your app, and last the resource is identified by the instrumentation key, the I key, so there you go.

6208
08:15:38,920 --> 08:15:41,200
Let's take a look here at Azure Backup Service.

6209
08:15:41,200 --> 08:15:44,640
And this is a backup layer that spans multiple Azure services.

6210
08:15:44,640 --> 08:15:49,200
So you're not going to be able to type up in the search bar in services for Azure Backup Service.

6211
08:15:49,200 --> 08:15:50,240
Nothing's going to show up.

6212
08:15:50,440 --> 08:15:53,120
Where it is going to show up is under individual services.

6213
08:15:53,120 --> 08:15:55,040
And it probably will have like a backup tab.

6214
08:15:55,320 --> 08:15:58,880
And from there, you can enable backup and set a bunch of options.

6215
08:15:59,120 --> 08:16:02,480
So what can you do with Azure Backup Service?

6216
08:16:02,640 --> 08:16:05,920
You can back up on-prem, your Azure VMs, your Azure files.

6217
08:16:06,560 --> 08:16:13,840
SQL servers that are running on Azure VMs, SAP HANA databases running on Azure VMs, Azure databases for Postgres server.

6218
08:16:14,400 --> 08:16:19,440
And so why would you want to use Azure Backup as opposed to rolling your own or using a third-party provider?

6219
08:16:19,760 --> 08:16:22,800
Well, it's very easy to offload your on-premise backup systems.

6220
08:16:23,280 --> 08:16:25,360
You can easily back up any kind of VM.

6221
08:16:25,520 --> 08:16:26,880
It scales really well.

6222
08:16:27,280 --> 08:16:31,040
You get unlimited data transfer, so there's no limit and no charge.

6223
08:16:31,040 --> 08:16:33,840
And to me, that's an amazing benefit there.

6224
08:16:34,480 --> 08:16:38,320
It will keep your data secure, so it has built-in security at rest and in transit.

6225
08:16:38,560 --> 08:16:40,640
It has a centralized monitoring management tool.

6226
08:16:40,880 --> 08:16:45,680
It has app-consistent backups, meaning that you can restore an app back to an exact state.

6227
08:16:45,920 --> 08:16:50,160
It has automatic storage management, and it has a lot of storage options.

6228
08:16:50,160 --> 08:16:51,520
So there you go.

6229
08:16:51,520 --> 08:16:54,080
And again, you know, you just can't search for it.

6230
08:16:54,080 --> 08:16:56,640
It's directly integrated with a lot of services.

6231
08:17:00,920 --> 08:17:03,200
Let's take a look at Azure Recovery Service Vault.

6232
08:17:03,200 --> 08:17:12,160
So Azure Recovery Services is kind of a layer of backup stuff, kind of like Azure Backup Service, but it has a concept of vaults.

6233
08:17:12,160 --> 08:17:17,800
And vaults is a storage entity in Azure that houses data and recovery points created over time.

6234
08:17:17,800 --> 08:17:24,080
And so the idea is you're going to be copying your data or configuration information for your VMs, workload servers, or workstations.

6235
08:17:24,800 --> 08:17:44,640
And this is going to allow you to back up a variety of different Azure services, such as VMs for both Linux and Windows, Azure SQL databases, and it supports integrations with a lot of different kinds of services, like System Center, Data Protection Manager, Windows Server, Azure Backup, and a whole list of others.

6236
08:17:45,200 --> 08:17:52,240
In terms of feature set, it has enhanced capabilities to help secure backup data, central monitoring for your hybrid IT environments.

6237
08:17:52,240 --> 08:17:57,760
It's going to have role-based access controls, so you can give it fine-tuned controls of what people can access in the vaults.

6238
08:17:58,040 --> 08:18:01,600
It'll have soft delete, so just make sure you don't end up deleting things by accident.

6239
08:18:01,600 --> 08:18:05,680
It's going to have cross-region restore, and so that's generally what vaults are.

6240
08:18:10,520 --> 08:18:15,120
Now let's take a look here at the MARS agent, which stands for Microsoft Azure Recovery Services.

6241
08:18:16,240 --> 08:18:23,200
Azure is weird like this, where sometimes they'll add the word Microsoft in front of it, or they won't, and this will change the initialism, but it really is the...

6242
08:18:23,400 --> 08:18:26,160
the same service, so just don't be thrown off by that one word.

6243
08:18:26,400 --> 08:18:35,200
But this agent, which can be installed on your virtual machines or your on-premise machines, help you backup files, folders, and system state only for Windows servers.

6244
08:18:35,200 --> 08:18:47,680
So just to give you a little visual there, imagine you have your own on-premise machine, and it has the Mars agent installed on that machine, and then you have your own VM running your own VNet, and it has the Mars agent installed.

6245
08:18:47,840 --> 08:18:52,880
It's going to back that stuff up to the Azure Service Recovery Vault.

6246
08:18:53,760 --> 08:19:03,440
And so another thing you need to know is that the Mars agent is also known as the Azure Backup Agent, which is really confusing because you'll see both in the documentation, you'll think they're two separate things, but the same thing.

6247
08:19:03,760 --> 08:19:12,080
This also makes me think that Azure Backup and Azure Recovery Services are the same thing, but I don't have any definitive proof, so that's just what it is.

6248
08:19:12,320 --> 08:19:18,160
But it doesn't seem to really matter, but it just shows you how things can get confusing in Azure.

6249
08:19:18,960 --> 08:19:29,120
The Mars agent does not support Linux operating systems, so you did see previously that Azure Resource Recovery Service is able to back up Linux virtual machines.

6250
08:19:29,200 --> 08:19:34,800
How it does that, I don't know, but it's clearly capable of storing those in the vault.

6251
08:19:35,280 --> 08:19:37,520
But really, we just need to focus on the Windows side here.

6252
08:19:38,240 --> 08:19:44,320
To install the agent, what you're going to need to do is create yourself a vault, because it has to back up to a vault.

6253
08:19:44,480 --> 08:19:47,600
You need to create a backup policy, which we'll look in the next slide.

6254
08:19:48,320 --> 08:19:52,480
You'll probably have to configure a secure route in case you're connecting to your on-premise.

6255
08:19:52,480 --> 08:19:53,440
You'd use ExpressRoute.

6256
08:19:53,760 --> 08:20:00,800
Maybe you want to make sure that the backup stays within the Azure network, so you might need to create a private endpoint.

6257
08:20:01,440 --> 08:20:05,840
These are totally optional or required, depending on your use case.

6258
08:20:06,160 --> 08:20:07,840
You'll have to download the MARS agent.

6259
08:20:07,840 --> 08:20:10,720
You'll have to install and register the agent to your Windows machine.

6260
08:20:10,880 --> 08:20:11,520
So there you go.

6261
08:20:16,280 --> 08:20:19,200
Let's take a look at how we would make an Azure backup policy.

6262
08:20:19,200 --> 08:20:24,040
So what you're going to do is you're going to go into your vault and you're going to click on backup policy.

6263
08:20:24,040 --> 08:20:32,160
And then the first thing you'll do when creating your policy is choose whether you want to choose a Postgres database or an Azure VM.

6264
08:20:32,160 --> 08:20:36,640
I don't know why there's no other options but the Postgres server, but those are the two options we have.

6265
08:20:37,280 --> 08:20:41,600
And then you're going to have this nice big form, which I've expanded out to show you all the options.

6266
08:20:41,960 --> 08:20:44,240
And so you're going to choose the frequency of your backup.

6267
08:20:44,400 --> 08:20:47,280
You're going to choose how many snapshots you want to retain.

6268
08:20:47,520 --> 08:20:49,760
And then you have these retention ranges.

6269
08:20:50,000 --> 08:20:56,320
So the idea is that there's like daily, it says weekly, monthly, and yearly backup points.

6270
08:20:56,720 --> 08:20:59,440
So you're defining those points there.

6271
08:21:00,200 --> 08:21:01,760
And that's all there really is to it.

6272
08:21:02,000 --> 08:21:02,480
So there you go.

6273
08:21:06,960 --> 08:21:09,040
Let's talk about Azure Site Recovery.

6274
08:21:09,040 --> 08:21:10,560
And this is a hybrid.

6275
08:21:11,120 --> 08:21:15,680
which means on-premise to cloud, backup solution for site-to-site recovery.

6276
08:21:15,680 --> 08:21:23,280
So ASR is one of the tools useful for your business continuity and disaster recovery strategy.

6277
08:21:23,280 --> 08:21:24,640
So BCDR.

6278
08:21:25,160 --> 08:21:32,080
And I just threw that line in there because of that initialism, and you might see that language used in the future, whether it's...

6279
08:21:32,400 --> 08:21:35,840
in an exam or on the job, so I figured why not put that in there.

6280
08:21:36,200 --> 08:21:39,400
And so site recovery replicates workloads from a primary site.

6281
08:21:39,400 --> 08:21:43,200
Generally, this would be your on-premise, but it doesn't have to be, to a secondary site.

6282
08:21:43,200 --> 08:21:52,400
In case the primary site suffers a failure, site recovery will failover to the secondary site to ensure the continuation of services.

6283
08:21:52,640 --> 08:21:56,320
So it can replicate between Azure VMs.

6284
08:21:56,320 --> 08:21:59,360
So if you want to do cross-region replication, that's what you could do.

6285
08:22:00,000 --> 08:22:03,840
It can replicate Windows, Linux, or any OS.

6286
08:22:04,560 --> 08:22:06,720
It can go from on-premise to Azure.

6287
08:22:06,720 --> 08:22:08,640
That's usually the case that people are using it for.

6288
08:22:08,960 --> 08:22:12,640
It can actually replicate it between different cloud service providers.

6289
08:22:12,640 --> 08:22:17,200
Not sure how it does that, but they say that it can do it, so that's why I'm telling you that here.

6290
08:22:17,840 --> 08:22:22,000
And it can work with VMware, Hyper-V, and physical machines.

6291
08:22:22,840 --> 08:22:25,200
And then I just want to leave you with a couple of terms.

6292
08:22:25,480 --> 08:22:35,280
Because I didn't really do like a concept on backup strategies and disaster recovery in this section, but I just wanted to introduce you to two terms you really do need to know.

6293
08:22:35,560 --> 08:22:38,000
And that is recovery point objectives, RTOs.

6294
08:22:38,160 --> 08:22:44,480
This means how quickly you can recover from a backup after experiencing a disaster and recovery time objectives.

6295
08:22:44,480 --> 08:22:47,600
So RPOs, how often you back up.

6296
08:22:47,600 --> 08:22:49,280
So how much data loss can you tolerate?

6297
08:22:49,280 --> 08:22:54,720
And those two terms are just really like when you're talking about creating a strategy for backup, those are the two

6298
08:22:55,600 --> 08:22:57,760
things that you usually need to define, okay?

6299
08:23:02,640 --> 08:23:07,920
Hey, this is Andrew Brown from ExamPro, and in this follow-along, we're going to be looking at backup solutions for Azure.

6300
08:23:08,160 --> 08:23:16,240
So let's make our way all the way to the top here and launch ourselves a virtual machine that we are going to be using as a means to backup.

6301
08:23:16,240 --> 08:23:21,360
So what I'll do is create a new group here, and we will call it Picard.

6302
08:23:22,360 --> 08:23:24,720
And we'll call this Virtual Machine Picard.

6303
08:23:25,040 --> 08:23:28,880
And scrolling on down here, yeah, I want to stick with the Windows Server 2019 Gen.

6304
08:23:28,880 --> 08:23:29,200
2.

6305
08:23:29,440 --> 08:23:33,200
So go over here, select it as Generation 2 there.

6306
08:23:33,520 --> 08:23:41,600
And for the machine, you want to make sure it's a B2S because you need at least two VPCUs and 4 gigabytes of RAM to launch a Windows server there.

6307
08:23:41,720 --> 08:23:43,400
For the user, it's going to be Azure user.

6308
08:23:43,400 --> 08:23:46,240
For the password, capital T, Testing123456.

6309
08:23:46,480 --> 08:23:48,800
Capital T, Testing123456.

6310
08:23:49,280 --> 08:23:50,400
We'll have RDP.

6311
08:23:50,800 --> 08:23:52,160
I'm not sure if we'll end up using it.

6312
08:23:52,480 --> 08:23:54,400
But if we do, we have that open.

6313
08:23:54,680 --> 08:23:56,640
We'll go ahead and go to the review page.

6314
08:23:57,040 --> 08:23:59,200
Wait for it to allow us to hit Create.

6315
08:23:59,200 --> 08:24:00,000
Give it a moment.

6316
08:24:02,960 --> 08:24:04,080
Great, we'll hit Create.

6317
08:24:05,600 --> 08:24:08,720
And then we'll give it a moment to see that it is deploying.

6318
08:24:08,720 --> 08:24:10,720
And if it's deploying, I'll see you back here in a moment.

6319
08:24:11,320 --> 08:24:14,240
Great, so it looks like our virtual machine is ready to go here.

6320
08:24:14,240 --> 08:24:17,280
So what we'll do is go all the way to the top here and type in backups.

6321
08:24:17,440 --> 08:24:20,560
We go to Vaults directly, but let's take a look here at the backup center.

6322
08:24:21,160 --> 08:24:23,680
where we can kind of have a bit of an overview of stuff.

6323
08:24:23,680 --> 08:24:26,400
So the idea is we have vaults where we're going to store our backups.

6324
08:24:26,560 --> 08:24:28,720
We can create backup jobs, backup policies.

6325
08:24:28,720 --> 08:24:31,520
So let's get to it and 1st create ourselves a vault.

6326
08:24:31,920 --> 08:24:33,960
So we'll go ahead here and create ourselves a new vault.

6327
08:24:33,960 --> 08:24:34,840
And we have two options.

6328
08:24:34,840 --> 08:24:37,680
We have recovery services vault or a backup vault.

6329
08:24:37,680 --> 08:24:38,080
So

6330
08:24:38,800 --> 08:24:48,400
The difference here is that one is just for backing up things like databases, disks, and et cetera, where recovery services is more like a site-wide recovery.

6331
08:24:48,400 --> 08:24:51,200
So you're going to notice it includes virtual machines and all these other stuff.

6332
08:24:51,760 --> 08:24:58,160
Generally, you'll probably want to go with recovery services vault because it is just basically a new version of the backup vault.

6333
08:24:58,160 --> 08:24:59,440
So let's go ahead and do that.

6334
08:25:01,120 --> 08:25:05,920
And we'll place this in our Picard resource group there.

6335
08:25:06,160 --> 08:25:08,160
And we'll just say Picard backup.

6336
08:25:09,040 --> 08:25:10,960
or vault, there we go.

6337
08:25:11,440 --> 08:25:14,880
And we'll go ahead and hit review and create, and we'll go and hit create there.

6338
08:25:17,360 --> 08:25:18,960
And we'll just give it a moment there to deploy.

6339
08:25:18,960 --> 08:25:26,560
All right, so our recovery services vault is ready, and we'll go ahead and click backup, and down below it'll ask us what kind we are running.

6340
08:25:26,560 --> 08:25:28,160
So we have Azure Stack and on-premise.

6341
08:25:28,320 --> 08:25:31,600
It's just Azure, and we have a virtual machine, so we'll go ahead and hit backup.

6342
08:25:31,960 --> 08:25:32,480
a backup.

6343
08:25:32,760 --> 08:25:34,920
And notice that we'll have to set up a backup policy.

6344
08:25:34,920 --> 08:25:36,200
And here we have a default one.

6345
08:25:36,200 --> 08:25:39,760
But let's actually go make a new one so we can kind of learn some of the settings that we can set.

6346
08:25:40,000 --> 08:25:42,880
So we can say the frequency, the time, et cetera.

6347
08:25:43,040 --> 08:25:45,120
Probably want to set this to my time zone.

6348
08:25:45,120 --> 08:25:50,080
So I'm in Toronto, if I can find it here, which I believe is negative 5.

6349
08:25:50,800 --> 08:25:55,360
I was trying to type to see if I could do that, but I wasn't getting there too well.

6350
08:25:56,480 --> 08:25:58,000
We'll just say Central Canada there.

6351
08:25:58,000 --> 08:25:58,560
That's okay.

6352
08:25:58,560 --> 08:26:00,480
It's off by an hour, but that's close enough.

6353
08:26:02,200 --> 08:26:07,520
And you can have weekly, monthly, and yearly backups, but we're going to stick with the daily backup for 30 days.

6354
08:26:09,040 --> 08:26:10,480
And this is okay.

6355
08:26:10,480 --> 08:26:11,440
We don't have to enter that in.

6356
08:26:11,440 --> 08:26:12,400
We'll hit All right.

6357
08:26:12,480 --> 08:26:12,960
Okay.

6358
08:26:13,600 --> 08:26:15,520
And now we can add our virtual machine.

6359
08:26:15,520 --> 08:26:19,040
So we'll go here and select Picard, hit OK, enable backups.

6360
08:26:20,240 --> 08:26:22,800
Please select at least one that has backups enabled.

6361
08:26:22,800 --> 08:26:28,640
So what we'll do is open up our Azure tab here, make our way over to our virtual machine, just make sure that that stuff is enabled.

6362
08:26:31,320 --> 08:26:32,240
So we'll go over here.

6363
08:26:34,160 --> 08:26:35,840
And we'll go to backups.

6364
08:26:39,680 --> 08:26:42,320
And here, we can actually even set it from here.

6365
08:26:42,320 --> 08:26:45,440
So I guess we'll select our existing vault here.

6366
08:26:46,480 --> 08:26:47,760
We'll say enable backups.

6367
08:26:51,040 --> 08:26:52,800
Let's set it up with a default one, right.

6368
08:26:52,960 --> 08:26:55,120
So I'm a bit surprised we couldn't do it that way.

6369
08:26:55,120 --> 08:26:58,000
But we'll make our way back here.

6370
08:26:59,320 --> 08:27:00,160
As long as it works.

6371
08:27:00,920 --> 08:27:01,800
That's the thing with Azure.

6372
08:27:01,800 --> 08:27:05,520
It's just you'll do something and then you'll find that you have to do it slightly different.

6373
08:27:06,240 --> 08:27:08,000
But we'll just wait until that's done there.

6374
08:27:08,800 --> 08:27:12,720
So after waiting a very short while, it looks like our backups are turned on.

6375
08:27:12,720 --> 08:27:16,840
So if we were to go to our overview and go to backups, you can see we have one backup item.

6376
08:27:16,840 --> 08:27:20,640
If we go over to our backup items, we'll see under virtual machines we have Picard.

6377
08:27:21,600 --> 08:27:23,360
We did set the default policy.

6378
08:27:23,360 --> 08:27:27,520
So I guess if we wanted to switch that out, we probably could if we just go back.

6379
08:27:28,160 --> 08:27:32,320
And let's just go create a policy of our own just so that we are familiar with that there.

6380
08:27:33,320 --> 08:27:35,040
And we'll say an Azure virtual machine one.

6381
08:27:35,040 --> 08:27:37,120
So my special policy.

6382
08:27:39,200 --> 08:27:39,600
Okay.

6383
08:27:40,720 --> 08:27:44,280
And this is for 180 days.

6384
08:27:44,280 --> 08:27:45,520
We can go ahead and hit create.

6385
08:27:47,640 --> 08:27:50,120
And once that policy is deployed, we'll be able to associate.

6386
08:27:50,120 --> 08:27:53,120
I can't remember if this will be super fast, but we'll give it a moment here.

6387
08:27:53,360 --> 08:27:54,720
Yep, it is super fast.

6388
08:27:55,240 --> 08:27:59,600
And then once we have that policy, we can go into it and then start assigning things to it.

6389
08:28:00,320 --> 08:28:04,240
Actually, I think when I made the lecture content, I don't even remember there being a backup center.

6390
08:28:04,240 --> 08:28:06,320
So to me, this is all a little bit new.

6391
08:28:06,320 --> 08:28:12,000
So maybe I'll go back in up to the slides because I usually say there is no centralized service, but they have one now.

6392
08:28:12,000 --> 08:28:14,480
So that's pretty darn good.

6393
08:28:16,400 --> 08:28:20,160
So for associated items, we don't fetching data for services completed.

6394
08:28:20,160 --> 08:28:24,160
So I'm just trying to figure out how we can change that policy there.

6395
08:28:24,840 --> 08:28:26,720
go to backups and we can just change it over here.

6396
08:28:31,760 --> 08:28:36,400
I'm not sure how to switch out the policy, but I know at least if we want to do backup now, we just press that there.

6397
08:28:39,040 --> 08:28:41,400
It's really not that important to know how to swap out a policy.

6398
08:28:41,400 --> 08:28:45,600
It's just more so the fact that you know what a backup policy is and you can apply it to machines and things like that.

6399
08:28:47,600 --> 08:28:48,480
Yeah, so there we go.

6400
08:28:48,480 --> 08:28:50,480
We just had our own backup there.

6401
08:28:52,880 --> 08:28:53,360
And you

6402
08:28:54,040 --> 08:28:57,120
Yeah, there's not much else here to look at, but there you go.

6403
08:28:57,120 --> 08:28:58,160
So that's backup policies.

6404
08:28:58,160 --> 08:29:00,480
So I guess what we'll do is go ahead and tear all this down.

6405
08:29:06,200 --> 08:29:08,040
And so that was our book card there.

6406
08:29:08,040 --> 08:29:10,600
We'll go ahead and delete this resource group.

6407
08:29:13,080 --> 08:29:13,720
And there you go.

6408
08:29:20,120 --> 08:29:24,880
Hey, this is Angie Brown from ExamPro, and we're looking at Azure Backup Cheat Sheet, so let's jump into it.

6409
08:29:25,120 --> 08:29:35,280
Azure Backup Service is a backup layer that spans multiple Azure services, such as on-premise Azure VMs, Files, SQL Server, SAP HANA, Azure Database for Postgres.

6410
08:29:35,440 --> 08:29:39,200
Azure Backup is directly integrated with these services, so you're not going to find...

6411
08:29:39,640 --> 08:29:41,800
You're not going to find it by searching based on the service name.

6412
08:29:41,800 --> 08:29:43,280
You're just going to have to know that it's there.

6413
08:29:43,600 --> 08:29:57,960
Offload onto on-premise backups, backup your VM, scales easily, get unlimited data transfer, keep your data secure, centralized monitoring and management, app consistent backups, automatic storage management, multiple storage options.

6414
08:29:57,960 --> 08:29:58,960
It does everything.

6415
08:29:59,120 --> 08:29:59,960
Azure Recovery.

6416
08:30:00,040 --> 08:30:06,640
Service ARS Vault is a storage entity in Azure that houses data and recovery points created over time.

6417
08:30:06,920 --> 08:30:09,760
It has enhanced capabilities to help secure backup data.

6418
08:30:10,560 --> 08:30:13,440
It has central monitoring for your hybrid IT environment.

6419
08:30:13,440 --> 08:30:14,720
It can use RBAC.

6420
08:30:14,720 --> 08:30:16,920
It has soft delete.

6421
08:30:16,960 --> 08:30:18,560
It has cross-region restore.

6422
08:30:18,560 --> 08:30:19,840
It's a really great service.

6423
08:30:20,400 --> 08:30:24,080
Then we have Azure Recovery Service, also known as MARS.

6424
08:30:25,040 --> 08:30:27,760
It's an agent, so that means it gets installed on a machine.

6425
08:30:27,760 --> 08:30:29,600
It's responsible for doing the backups.

6426
08:30:29,760 --> 08:30:34,320
It can back up files, folders, system states on your on-premise machines or Azure VMs.

6427
08:30:34,560 --> 08:30:38,000
Backups are stored in the recovery service fault in Azure.

6428
08:30:38,240 --> 08:30:43,200
MARS is also known as the Azure Backup Agent, and that gets really confusing if you don't know the two.

6429
08:30:44,200 --> 08:30:51,600
And the MARS agent does not support Linux operating systems, but no surprise, because most things in Azure does not support Linux.

6430
08:30:52,320 --> 08:31:00,000
Azure Site Recovery, ASR, is a hybrid on-premise to cloud backup solution for site-to-site recovery, and that is everything you need to know for Azure Backup.

6431
08:31:04,080 --> 08:31:17,040
Hey, this is Angie Brown from Exam Pro, and we're looking at Azure Container Instances, also known as ACI, and this allows you to package, deploy, and manage cloud applications using containers, or the way I like to think of it, as fully managed Docker as a service.

6432
08:31:17,600 --> 08:31:24,120
Azure Container Instances allow you to launch containers without the need to worry about configuring or managing the underlying virtual machines.

6433
08:31:24,120 --> 08:31:29,520
And you're going to be able to design isolate containers for simple applications, task automations, and build jobs.

6434
08:31:29,720 --> 08:31:33,480
Let's talk about some of the reasons why you'd want to use containers over VMs.

6435
08:31:33,480 --> 08:31:37,520
So containers can be provisioned within seconds, where VMs will take several minutes.

6436
08:31:37,760 --> 08:31:41,840
Containers are billed per second, where VMs are billed per hour, so you'll save a lot more money.

6437
08:31:42,080 --> 08:31:45,680
Containers have granular and custom sizing of VPC

6438
08:31:46,080 --> 08:31:50,160
VPCUs, memory, and GPUs, where VM sizes are predetermined.

6439
08:31:50,720 --> 08:31:53,200
So those are the benefits between containers and VMs.

6440
08:31:53,680 --> 08:31:56,960
ACIs can be utilized for both Windows and Linux containers.

6441
08:31:57,120 --> 08:32:00,440
You can persist storage with Azure files using ACI containers.

6442
08:32:00,440 --> 08:32:06,640
And honestly, if you have containers or functions, you have to have an external storage mounted to persist.

6443
08:32:07,280 --> 08:32:08,240
It's just the way you do it.

6444
08:32:08,640 --> 08:32:16,480
ACIs are accessed via fully qualified domain names, which is one of the things I really appreciate about Azure services, because most of the services are like that.

6445
08:32:17,040 --> 08:32:19,360
Azure provides quick start images to help you start.

6446
08:32:19,760 --> 08:32:27,120
Launching example apps, but you can also source containers from Azure Container Registry, Docker Hub, and Privately Hosted Container Registries.

6447
08:32:27,120 --> 08:32:29,520
It looks like that the choice option there.

6448
08:32:29,880 --> 08:32:34,160
Let's just talk about container groups, because this is pretty much the only major component you have to worry about.

6449
08:32:34,400 --> 08:32:39,520
These are a collection of containers that get scheduled on the same host, and the containers...

6450
08:32:40,040 --> 08:32:45,680
The containers in a container group share lifecycle resources, local network storage volumes.

6451
08:32:45,840 --> 08:32:48,720
So the idea is that you have these tightly coupled containers.

6452
08:32:48,880 --> 08:32:51,840
So all of them act as a service within that container group.

6453
08:32:52,320 --> 08:32:57,440
So here you can see an example of a couple containers that are mounting Azure files on different directories there.

6454
08:32:57,680 --> 08:33:01,520
And underneath all of that is running on an Azure virtual machine.

6455
08:33:02,360 --> 08:33:04,960
Container groups are similar to Kubernetes pods.

6456
08:33:05,440 --> 08:33:08,320
Yeah, and it says similar to, but not really the same thing.

6457
08:33:08,560 --> 08:33:14,960
Multi-container groups can currently support only Linux containers, which is kind of a bummer, but that's just what it is.

6458
08:33:15,200 --> 08:33:18,000
And there are two ways to deploy a multi-container group.

6459
08:33:18,000 --> 08:33:27,920
You can use ARM templates when you need to deploy additional Azure service resources, or just a YAML file when you want to deploy, when your deployment only includes container instances.

6460
08:33:32,640 --> 08:33:41,040
Let's take a look at container restart policies, and what these do is allow you to change how the policies restart, and there's three different ways.

6461
08:33:41,280 --> 08:33:44,160
We have always, never, and on failure.

6462
08:33:44,160 --> 08:33:52,000
So the first one here, always, means always restart the container, and the idea is to keep your container running as long as possible.

6463
08:33:52,480 --> 08:33:57,360
The reason why you'd want that is if you're running a web server, some other providers would call that a service.

6464
08:33:57,680 --> 08:34:00,160
Then we have never, so run only one time.

6465
08:34:00,160 --> 08:34:02,520
This is great for background jobs, and so other providers

6466
08:34:02,720 --> 08:34:03,920
we just call this a task.

6467
08:34:04,400 --> 08:34:09,600
Then you have onFailure, so containers that encounter an error, that's when it should restart.

6468
08:34:10,440 --> 08:34:16,000
And so it's as simple as just choosing that option when you are creating that container.

6469
08:34:20,880 --> 08:34:27,440
Let's take a look at container environment variables, also known as nVars, that allow you to pass configuration details to your containers.

6470
08:34:27,640 --> 08:34:30,640
And you can do this through the portal, the CLI, PowerShell, which

6471
08:34:30,960 --> 08:34:32,240
That's always the case with Azure.

6472
08:34:32,600 --> 08:34:36,320
And so it's as simple as just putting in your key and your value.

6473
08:34:36,880 --> 08:34:40,760
And one other thing I want to point out is that you can also pass in secured environment variables.

6474
08:34:40,760 --> 08:34:43,000
So the idea is that sometimes you don't want them plain text.

6475
08:34:43,000 --> 08:34:48,000
So if you have like, see how that stripe secret key, you don't want anyone ever seeing that in production.

6476
08:34:48,160 --> 08:35:00,720
So the idea is that through, and I don't think you can do this through the portal, but you can do this through the CLI or PowerShell is provide the secure environment variables over the regular one, which isn't environment variables, and that way you can pass it securely.

6477
08:35:00,920 --> 08:35:03,440
it's never exposed to human eyes.

6478
08:35:07,600 --> 08:35:09,600
Let's talk about persisting storage.

6479
08:35:09,600 --> 08:35:13,280
And we talked about that a little while there when we were looking at Azure Files.

6480
08:35:13,520 --> 08:35:15,640
But containers are stateless by default.

6481
08:35:15,640 --> 08:35:19,680
So when a container crashes or stops, all state is lost.

6482
08:35:19,920 --> 08:35:23,000
To persist a state, you need to mount an external volume.

6483
08:35:23,000 --> 08:35:29,600
And there's quite a few different things we can mount Azure Files, secret volumes, empty directory, cloud Git repo.

6484
08:35:29,920 --> 08:35:30,840
So you got a few options

6485
08:35:30,920 --> 08:35:35,120
There, and to mount a file volume, you need to do this via PowerShell or CLI.

6486
08:35:35,120 --> 08:35:36,760
You're going to give the following details.

6487
08:35:36,760 --> 08:35:40,640
So, when you launch the container, there's going to be nothing in the portal, so you've got to do it this way.

6488
08:35:40,640 --> 08:35:41,040
All right.

6489
08:35:46,280 --> 08:35:50,640
Let's talk about some of the CLI options that we can use to troubleshoot our containers.

6490
08:35:50,800 --> 08:35:57,040
A lot of this stuff is probably accessible via the portal, but it's great to know how to do this via the CLI.

6491
08:35:57,280 --> 08:35:59,400
So the first thing is getting the logs.

6492
08:35:59,400 --> 08:36:03,200
So you can use az container logs, and that's going to bring you the logs back.

6493
08:36:03,440 --> 08:36:05,480
Then you can use az container attach.

6494
08:36:05,480 --> 08:36:11,600
And this is going to give you diagnostic information about when the container is starting up, probably with Cloudinit information.

6495
08:36:12,000 --> 08:36:15,360
Then you have az container exec, and this allows you to execute

6496
08:36:15,680 --> 08:36:21,360
remote commands, but what you can do is use bin sh, which actually will allow you to have an interactive container.

6497
08:36:21,360 --> 08:36:26,000
So it's like having the terminal right to the container, which is very, very, very useful.

6498
08:36:26,760 --> 08:36:31,040
And the last is just going grabbing metrics from Azure Monitor.

6499
08:36:31,200 --> 08:36:32,960
So azmonitor metrics list.

6500
08:36:33,680 --> 08:36:38,400
You could use the portal for that, but I just wanted to show you all those things because they might show up on the exam.

6501
08:36:43,120 --> 08:36:47,520
Hey, this is Andy Brown from Exam Pro, and we're going to take a look at Azure Container Instances.

6502
08:36:47,520 --> 08:36:48,560
So here it is.

6503
08:36:48,800 --> 08:36:51,200
So all we got to do is go to Container Instances.

6504
08:36:51,200 --> 08:36:51,600
We'll hit Add.

6505
08:36:51,600 --> 08:36:57,200
And the nice thing is that Azure provides us with a Hello World one, so it's very easy for us to get started.

6506
08:36:57,840 --> 08:37:02,800
It's a Linux machine, and it looks like it's pretty inexpensive there, so we'll stick with that.

6507
08:37:03,120 --> 08:37:04,720
I'm going to create a new group here.

6508
08:37:04,920 --> 08:37:10,080
We're going to call it Banana, and we'll name the container instance Banana.

6509
08:37:10,880 --> 08:37:13,880
And East US 2 seems fine to me.

6510
08:37:13,880 --> 08:37:15,480
You'll notice we're on a quick start image.

6511
08:37:15,480 --> 08:37:22,960
If we wanted, we could use something from the Docker Hub and provide our own link, but we'll just stick with the quick start image for today.

6512
08:37:23,360 --> 08:37:28,000
We're going to go ahead and hit next to networking just to see what we have as options.

6513
08:37:28,000 --> 08:37:29,760
You can make it public or private.

6514
08:37:30,240 --> 08:37:31,600
We'll go to advanced.

6515
08:37:31,680 --> 08:37:32,480
Hold on here.

6516
08:37:32,880 --> 08:37:34,720
Yep, those are just the ports you can expose.

6517
08:37:34,960 --> 08:37:39,440
We'll go to advance, and for the restart policy, we can set on failure always or never.

6518
08:37:39,760 --> 08:37:47,760
We can pass in environment variables, and I've covered this a lot more in detail in the lecture content, so we don't need to really dive deep into this.

6519
08:37:48,600 --> 08:37:50,640
And we'll go ahead and create this instance.

6520
08:37:52,520 --> 08:37:55,640
And so we'll have to wait a little while here, and I'll see you back in a moment.

6521
08:37:56,320 --> 08:37:59,440
Okay, and so after a short wait, our container instance is ready.

6522
08:37:59,440 --> 08:38:03,080
We'll go to that resource there and take a look around.

6523
08:38:03,080 --> 08:38:06,960
So on the left-hand side, we can go to our containers, and there we can see it running.

6524
08:38:07,200 --> 08:38:09,840
We can see the events down below of what's going on.

6525
08:38:09,840 --> 08:38:15,680
So you can see that it's pulled the image, it successfully pulled it, and then it started the container.

6526
08:38:16,560 --> 08:38:24,400
Some properties, nothing interesting there, the logs, if we wanted to see stuff, and if we wanted to connect to the instance, we could also go here and hit connect, which is kind of nice.

6527
08:38:25,040 --> 08:38:32,800
I don't have any purpose to do that right now, and it's also not going to work the way we're doing it, but I just wanted to show you had those opportunities.

6528
08:38:33,360 --> 08:38:39,840
You can do identity, so that means manage it with role-based access controls, but what I want to see is actually this.

6529
08:38:40,160 --> 08:38:41,040
Hello world working.

6530
08:38:41,040 --> 08:38:43,680
I'm assuming there must be a hello page.

6531
08:38:43,680 --> 08:38:50,240
I've never looked at it before, so we're going to go here, grab the public IP address, and paste it on in the top, and there we go.

6532
08:38:50,240 --> 08:38:56,320
So we have deployed an instance onto Azure Container Instances, or a container, I should say.

6533
08:38:56,720 --> 08:39:02,400
So nothing super exciting to talk about here, but we do need to know the basics there.

6534
08:39:03,360 --> 08:39:08,880
If we wanted to deploy other containers, it's just the one there, so that's all you really need to do.

6535
08:39:09,760 --> 08:39:10,160
But yeah.

6536
08:39:10,960 --> 08:39:13,320
So yeah, hopefully that gives you an idea there.

6537
08:39:13,320 --> 08:39:15,360
I'll just go back to the list here so we can see it.

6538
08:39:15,640 --> 08:39:22,120
And we'll go ahead and just delete that, probably do it for the resources on the left hand side, like I always like to do.

6539
08:39:22,120 --> 08:39:24,800
And we will go into banana here.

6540
08:39:26,240 --> 08:39:28,000
And we will delete banana.

6541
08:39:29,000 --> 08:39:29,680
And there you go.

6542
08:39:36,480 --> 08:39:42,400
Hey, this is Andrew Brown from Exam Pro, and we're looking at Azure Container Images Cheat Sheet, and this is a two-pager, so let's jump into it.

6543
08:39:42,400 --> 08:39:48,720
So ACI allows you to launch containers without the need to worry about configuring or managing the underlying virtual machine.

6544
08:39:48,960 --> 08:39:53,440
ACI is designed for isolate containers for simple applications, task automation, build jobs.

6545
08:39:53,640 --> 08:39:57,360
Containers can be provisioned within seconds where the VMs can take several minutes.

6546
08:39:57,520 --> 08:40:03,760
Containers are billed per second where VMs are billed per hour, so you get greater savings when you're using containers.

6547
08:40:03,920 --> 08:40:06,360
Containers have granular and custom sizing VPC

6548
08:40:06,600 --> 08:40:07,360
and GPU.

6549
08:40:07,520 --> 08:40:11,200
When VM sizes are predetermined, ACI can deploy both on Windows and Linux.

6550
08:40:11,360 --> 08:40:13,680
You can persist storage with Azure files.

6551
08:40:14,000 --> 08:40:17,280
ACIs are accessed via fully qualified domains.

6552
08:40:17,600 --> 08:40:18,880
So it's just like a domain name.

6553
08:40:19,840 --> 08:40:21,120
Then we have container groups.

6554
08:40:21,120 --> 08:40:24,240
These are a collection of containers that get scheduled on the same host machine.

6555
08:40:24,880 --> 08:40:26,800
The container is a container group share.

6556
08:40:27,040 --> 08:40:29,640
So you've got lifecycle resources, local network storage volumes.

6557
08:40:29,640 --> 08:40:32,240
Container groups are similar to Kubernetes pods.

6558
08:40:32,680 --> 08:40:35,920
Multi-container groups currently support only Linux containers.

6559
08:40:35,920 --> 08:40:39,600
This is one of the cases where it's not Windows, it's Linux, okay?

6560
08:40:39,920 --> 08:40:42,640
There are two ways to deploy multi-container groups.

6561
08:40:42,640 --> 08:40:45,680
You have that via an ARM template and YAML file.

6562
08:40:45,680 --> 08:40:47,680
I imagine you can do them via blueprints as well.

6563
08:40:48,160 --> 08:40:53,000
A container restart policy specifies what a container should do when their process has been completed.

6564
08:40:53,000 --> 08:40:58,160
ACI has three restart policies, always, never, and on failure, okay?

6565
08:40:59,320 --> 08:41:00,640
We'll go on to the second one here.

6566
08:41:00,640 --> 08:41:02,440
So Azure containers are stateless by default.

6567
08:41:02,440 --> 08:41:05,920
When a container crashes or stops, all state is lost.

6568
08:41:06,080 --> 08:41:08,560
To persist state, you need to mount an external volume.

6569
08:41:08,720 --> 08:41:14,560
You can mount the following external volumes, so either Azure File, Secret Volume, Empty Directory, or Cloud Git Repo.

6570
08:41:14,960 --> 08:41:19,160
For container troubleshooting, these are just Azure CLI commands you should really, really know.

6571
08:41:19,160 --> 08:41:20,480
So I'm just going to list them out here.

6572
08:41:20,720 --> 08:41:27,880
You've got az container logs, az container attached, az container exact, which is for execute, and az monitor metrics list.

6573
08:41:27,880 --> 08:41:28,560
So there you go.

6574
08:41:28,560 --> 08:41:29,240
That is the ACI.

6575
08:41:29,360 --> 08:41:46,480
AI Images Cheat Sheet: Hey, this is Andrew Brown from Exam Pro, and we're looking at Azure Container Registry, also known as ACR, which create and maintain Azure Container Registries to store and manage your private Docker container images and related artifacts.

6576
08:41:47,360 --> 08:41:53,680
So Azure Container Registry is a managed private Docker registry service based on the open source Docker Registry 2.0.

6577
08:41:54,000 --> 08:42:00,240
And the idea here is that you can use container registries with your existing container development deployment pipelines.

6578
08:42:00,480 --> 08:42:05,600
And it also has this thing called Registry Task to build container images in Azure.

6579
08:42:06,000 --> 08:42:17,200
And the idea here is that you can pull images from your container registry to various deployment targets like Kubernetes, DCOS, which I forget what it stands for, but it's basically an

6580
08:42:17,320 --> 08:42:30,720
operating system for containers, Docker Swarm, and there's also many Azure services that directly support ACR, so AKS, Azure App Service, Azure Batch, Azure Service Fabric, and a lot more.

6581
08:42:30,800 --> 08:42:35,280
So it's just a matter of saying, hey, use this from ACR, and it works right away.

6582
08:42:36,240 --> 08:42:45,360
Developers can also push to Container Registry as part of a container development workflow with delivery tools such as Azure Pipelines and Jenkins, and it's so easy to push.

6583
08:42:45,840 --> 08:43:04,080
To Container Registry, there are many ways to work with ACR via the CLI, the Azure PowerShell, Azure Portal, Azure SDK, and there's also this really good extension called Docker Extension for Visual Studio Code, something you absolutely want to install, and maybe I'll make a full slide on it because I like it so much.

6584
08:43:08,920 --> 08:43:14,800
Let's take a look here at ACR Tasks, which allow you to automate OS and framework patching for your Docker containers.

6585
08:43:15,120 --> 08:43:17,120
And we have a few different options here.

6586
08:43:17,120 --> 08:43:18,560
So the first is Quick Tasks.

6587
08:43:18,560 --> 08:43:26,960
These allow you to push a single container image to a container registry on demand, and you don't need to be running a local Docker Engine installation to do it.

6588
08:43:26,960 --> 08:43:28,560
So that's a really good benefit.

6589
08:43:29,360 --> 08:43:32,520
You can also trigger some automated build actions.

6590
08:43:32,520 --> 08:43:39,920
So maybe you push some source code updates, you update the container base image, you want to do it on a timer that's on a schedule.

6591
08:43:40,160 --> 08:43:46,240
You can also have multi-step tasks, so you have to go through the various steps to complete that task.

6592
08:43:46,880 --> 08:43:50,760
For each ACR task, it has an associated source code context.

6593
08:43:50,760 --> 08:43:54,880
This is the location of the set source files used to build a container image or other artifact.

6594
08:43:55,200 --> 08:44:00,960
Tasks can take advantage of run variables, so reuse task definitions and standardized tags for images and artifacts.

6595
08:44:01,120 --> 08:44:01,840
So there you go.

6596
08:44:06,680 --> 08:44:11,920
Hey, this is Andrew Brown from Exam Pro, and we're taking a look here at Azure Container Registry Cheat Sheet.

6597
08:44:11,920 --> 08:44:17,360
So ACR is a managed private Docker Registry service based on the open source Docker Registry 2.0.

6598
08:44:18,120 --> 08:44:24,880
It uses Azure Container Registries with your existing container development, or sorry, yeah, development and deployment pipelines.

6599
08:44:25,120 --> 08:44:29,680
Use Azure or use ACR tasks to build containers images in Azure.

6600
08:44:29,840 --> 08:44:33,120
Pull images from an Azure Container Registry to various targets.

6601
08:44:34,080 --> 08:44:41,680
And targets could be Kubernetes, DCOS, which is, I can't remember the name of the full name of that operating system, Docker Swarm.

6602
08:44:42,240 --> 08:44:47,040
For ACR tasks, this allows you to automate OS and framework patching for your Docker containers.

6603
08:44:47,040 --> 08:44:54,720
You can trigger them, you can trigger automated builds by source code, updates, updates to container-based images, triggers on a schedule.

6604
08:44:54,880 --> 08:44:56,720
You can create multi-step tasks.

6605
08:44:56,960 --> 08:45:00,320
Each ACR task has an associated code context.

6606
08:45:00,640 --> 08:45:04,800
and tasks can take advantage of run variables.

6607
08:45:05,040 --> 08:45:06,000
That's the end of it.

6608
08:45:06,000 --> 08:45:06,640
There you go.

6609
08:45:06,640 --> 08:45:08,240
See you in the next section.

6610
08:45:12,720 --> 08:45:14,320
Hey, this is Andrew Brown from Exampro.

6611
08:45:14,320 --> 08:45:22,080
We're looking at Azure Kubernetes as a Service, also known as AKS, and this is a fully managed Kubernetes as a Service, as the name implies.

6612
08:45:22,640 --> 08:45:29,080
So Azure Kubernetes Service makes it simple to deploy a managed Kubernetes cluster in Azure, and it will manage for you the Kubernetes

6613
08:45:29,840 --> 08:45:34,640
master, the health monitoring, the maintenance, and you'll only have to maintain the agent nodes.

6614
08:45:34,640 --> 08:45:39,120
Now, AKS service is free, so you're not being charged for a control plane.

6615
08:45:39,120 --> 08:45:40,400
That's a big deal.

6616
08:45:40,560 --> 08:45:45,840
Other providers charge you like $100, $150 on a month-to-month basis just to have that control plane.

6617
08:45:45,840 --> 08:45:47,120
And here in Azure, it's free.

6618
08:45:47,120 --> 08:45:51,120
You're only paying for those agent nodes within the cluster, not the masters.

6619
08:45:52,200 --> 08:46:05,920
When you deploy an AKS cluster, Kubernetes master and all the nodes are deployed and configured for you, but you have the option to configure some additional features during your deployment process, like advanced networking, Azure AD integration, so you get...

6620
08:46:06,880 --> 08:46:12,720
role-based access controls with Kubernetes, monitoring, Windows Server containers are also supported with AKS.

6621
08:46:12,920 --> 08:46:16,880
And one thing I want to point out is like, why would you use AKS over ACI?

6622
08:46:17,120 --> 08:46:20,000
And that's when you need full container orchestration.

6623
08:46:20,160 --> 08:46:26,640
So you need service discovery across multiple containers, automatic scaling, and coordinated application upgrades.

6624
08:46:26,640 --> 08:46:29,760
If you're doing something simpler, just use ACI.

6625
08:46:29,760 --> 08:46:30,880
But if you need these...

6626
08:46:31,440 --> 08:46:34,800
these features, then this is where you're going to be using Kubernetes.

6627
08:46:39,280 --> 08:46:42,160
This is a feature that I really liked, so that's why I'm including it.

6628
08:46:42,160 --> 08:46:43,760
It's called Bridge to Kubernetes.

6629
08:46:43,760 --> 08:46:53,440
So this thing is an extension of Visual Studio or Visual Studio Code that allows developers to write, test, and debug microservice code on their development workstations.

6630
08:46:53,680 --> 08:46:56,800
So the idea is in Visual Studio Code, you're going to go ahead and install

6631
08:46:57,520 --> 08:46:58,400
that extension.

6632
08:46:58,640 --> 08:47:04,560
And what this is going to do is it's going to include a locally running service to your AKS cluster.

6633
08:47:04,560 --> 08:47:09,200
So sidestepping, creating a Docker Kubernetes configuration.

6634
08:47:09,600 --> 08:47:22,320
So just to give you a clear example, for the lifetime of the connection, a proxy is added to your cluster in place of your Kubernetes deployment that redirects requests to the service to your development computer.

6635
08:47:22,480 --> 08:47:27,400
When you disconnect, the application deployment will revert to using the original version of the deployment.

6636
08:47:27,480 --> 08:47:28,960
deployment running on the cluster.

6637
08:47:28,960 --> 08:47:31,280
Just to make this a little bit more clear, I'm going to get my pen out.

6638
08:47:31,440 --> 08:47:34,800
So imagine you had something running here, right?

6639
08:47:34,800 --> 08:47:35,680
We'll call it X.

6640
08:47:35,920 --> 08:47:40,720
And you're like, I want to test out or make changes to that.

6641
08:47:40,960 --> 08:47:48,240
And so I'm like, pull it to my local development, run it here, but it's still within the actual Kubernetes cluster, right?

6642
08:47:48,560 --> 08:47:51,360
So the idea is you've pulled this locally.

6643
08:47:52,200 --> 08:47:58,080
You can fiddle with it and then push it back, while always in the same cluster.

6644
08:47:58,160 --> 08:48:04,160
To me, that is super powerful, and so I thought that was worth the time to tell you about this feature.

6645
08:48:08,560 --> 08:48:16,160
Hey, this is Andrew Brown from Exam Pro, and we're going to learn how to launch a Kubernetes cluster here on Azure via Azure Kubernetes Service.

6646
08:48:16,880 --> 08:48:21,200
And so, before we go ahead to the Kubernetes Service, we have to make sure that we have...

6647
08:48:22,000 --> 08:48:37,520
The service registered for use, and the way we do that is via our subscriptions, so in the top type subscriptions, and we will go there, and I only have one subscription here, and then down below we have our resource providers, and if we start to type in Kubernetes...

6648
08:48:37,960 --> 08:48:39,680
We can see whether it's registered or not.

6649
08:48:39,680 --> 08:48:42,080
So without these registered, Kubernetes will just not work.

6650
08:48:42,640 --> 08:48:51,520
It's as simple as going here and clicking here with the register, but I figured it would be a good habit for us to start using the Cloud Shell more and getting used to PowerShell.

6651
08:48:51,520 --> 08:48:54,160
So I'm going to register these via Cloud Shell here.

6652
08:48:54,400 --> 08:48:56,080
So I'll go ahead and click that button there.

6653
08:48:56,080 --> 08:48:57,360
It's going to start a new session.

6654
08:48:57,360 --> 08:48:59,360
If it's the first time you've ever launched.

6655
08:49:00,240 --> 08:49:05,520
The cloud shell, it's going to ask you whether you want to use Bash or PowerShell.

6656
08:49:05,520 --> 08:49:07,200
We want to stick with PowerShell today.

6657
08:49:07,840 --> 08:49:14,200
And the first thing I want you to do is use the actual CLI that Azure has.

6658
08:49:14,200 --> 08:49:14,880
It's called AZ.

6659
08:49:14,880 --> 08:49:18,480
So if I type in AZ, it will print out some default information for me here.

6660
08:49:18,800 --> 08:49:21,920
But I want to just confirm that I'm in the account that I think that I'm in.

6661
08:49:21,920 --> 08:49:23,680
So we'll type in AZ account.

6662
08:49:24,040 --> 08:49:26,640
show, and by default that will return JSON.

6663
08:49:26,720 --> 08:49:29,520
To make this a bit more readable, I'm going to type in output table.

6664
08:49:30,040 --> 08:49:32,800
And so here we can see that this is my home tenant ID.

6665
08:49:33,040 --> 08:49:36,320
This is the tenant ID that I'm currently in, and this is the subscription I'm using.

6666
08:49:36,480 --> 08:49:45,200
The reason I'm showing you this is that it's very easy to get turned around when you're using the Cloud Shell because sometimes the portal does not reflect the changes you've made.

6667
08:49:45,360 --> 08:49:51,200
There might be a delay, and so this gives you an absolute confirmation that you are in the right place and you're not second-guessing yourself.

6668
08:49:51,840 --> 08:49:58,000
So now that we can see where we are, what we should do is run some PowerShell scripts here.

6669
08:49:58,000 --> 08:50:08,400
So if you pull up the Azure documentation, you go under PowerShell references and resources, you can get all the PowerShell commands, the AZ PowerShell commands that we can use.

6670
08:50:08,400 --> 08:50:11,600
And what we're looking at right now is the AZ resource provider.

6671
08:50:11,840 --> 08:50:15,840
Azure is very conventional with this naming, so it makes it really easy to find stuff.

6672
08:50:16,000 --> 08:50:18,480
If I was to type in AZ resource here,

6673
08:50:19,840 --> 08:50:20,400
provider.

6674
08:50:20,400 --> 08:50:23,080
You can see these are the three commands that we have available to us.

6675
08:50:23,080 --> 08:50:24,480
So let's give them all a go.

6676
08:50:24,720 --> 08:50:30,640
The first one I want to run is going to be called get Azure resource provider.

6677
08:50:30,640 --> 08:50:35,440
So we'll type in get AZ resource provider.

6678
08:50:35,440 --> 08:50:39,920
And I believe if I just leave that by default, it will return all of them for me.

6679
08:50:41,680 --> 08:50:42,240
Yeah, it does.

6680
08:50:42,240 --> 08:50:43,520
So that's all of them here.

6681
08:50:43,920 --> 08:50:45,440
And so we

6682
08:50:46,440 --> 08:50:49,240
What I want to do is I want to look at very particular ones.

6683
08:50:49,240 --> 08:50:54,960
And I think we can do that by using the provider namespace and the providing the actual name, which is over here.

6684
08:50:55,120 --> 08:50:56,080
So let's give that a go.

6685
08:50:56,080 --> 08:51:02,640
So I'm going to hit up on my keyboard and I'm going to type in hyphen or just hyphen provider namespace.

6686
08:51:03,680 --> 08:51:10,960
And I'm going to type in Microsoft.kubernetes.

6687
08:51:11,560 --> 08:51:13,280
And that should get me some information.

6688
08:51:15,000 --> 08:51:17,920
And so notice that it's returning more than one item here.

6689
08:51:17,920 --> 08:51:19,840
Anything that matches, it's going to return.

6690
08:51:20,960 --> 08:51:22,880
So we are getting multiples there.

6691
08:51:23,280 --> 08:51:25,040
So you can see that they are unregistered.

6692
08:51:26,480 --> 08:51:26,920
All right.

6693
08:51:26,920 --> 08:51:30,160
And so what we want to do is we want to register this for you.

6694
08:51:30,160 --> 08:51:36,400
So what I'm going to do is hit up and hitting Control A will bring me to the front or to the left here.

6695
08:51:36,400 --> 08:51:40,400
So Control A and Control E are very common commands when you're in terminal.

6696
08:51:40,400 --> 08:51:41,640
Those are two you should remember.

6697
08:51:41,640 --> 08:51:43,280
And I'm going to type in register.

6698
08:51:46,760 --> 08:51:50,560
And so that is going to go ahead and register that there.

6699
08:51:50,960 --> 08:51:53,040
And then we want it for configuration.

6700
08:51:55,680 --> 08:51:57,440
All right, and so that one is registered here.

6701
08:51:57,840 --> 08:52:00,960
So now if I go ahead and give this a refresh, these should be registered.

6702
08:52:01,160 --> 08:52:02,080
And this is what I mean.

6703
08:52:02,080 --> 08:52:04,480
I don't always trust the Azure portal.

6704
08:52:05,600 --> 08:52:08,240
It's a very flexible system, but it doesn't always tell you the truth.

6705
08:52:08,560 --> 08:52:11,200
If you're very paranoid here, you can just hit register here as well.

6706
08:52:12,120 --> 08:52:16,480
All right, but I'm pretty confident that we did trigger that registering action there.

6707
08:52:17,080 --> 08:52:20,800
And so that's just the portion of CloudShell that I hope you learned a bit there.

6708
08:52:22,880 --> 08:52:29,080
So it does take a bit of time for these to register, so we will wait a little bit here, and then we will proceed.

6709
08:52:29,080 --> 08:52:33,360
So just wait and just keep on checking until those are registered, okay?

6710
08:52:34,320 --> 08:52:35,440
And we'll proceed to the next part.

6711
08:52:39,280 --> 08:52:41,360
Yeah, and the mine are registered, so we're good to go.

6712
08:52:43,040 --> 08:52:47,040
All right, so let's go ahead and proceed to create our actual Kubernetes cluster.

6713
08:52:47,040 --> 08:52:54,160
So go all the way up here, click on Microsoft Azure, and we will type in Kubernetes in the top here, make our way over to the service.

6714
08:52:54,440 --> 08:52:57,680
We're going to go ahead and hit add, the Kubernetes cluster.

6715
08:52:58,400 --> 08:53:06,160
And so what I'm going to do is make a new resource group where I'm going to call this Borg, because anytime I think of containers, I always think of the Borg here.

6716
08:53:06,320 --> 08:53:08,960
Maybe we have to hit the create new button there.

6717
08:53:09,840 --> 08:53:11,600
And then I'll just give it the same name.

6718
08:53:11,600 --> 08:53:12,800
So we'll just call that Borg.

6719
08:53:13,200 --> 08:53:15,040
The region, US East, is fine for me.

6720
08:53:15,840 --> 08:53:18,400
We're going to keep it to the default T here.

6721
08:53:18,720 --> 08:53:24,040
And for production, it's recommended to have 3 nodes for development, which is what we're doing.

6722
08:53:24,040 --> 08:53:25,120
One node is good enough.

6723
08:53:25,360 --> 08:53:29,520
And one thing I definitely want you to do is change the node size, because this affects cost.

6724
08:53:30,320 --> 08:53:38,560
So if we open this up, it's not obvious where the cost is, but if you stretch these on over, we will eventually see the cost here.

6725
08:53:39,400 --> 08:53:40,000
There it is.

6726
08:53:40,280 --> 08:53:44,800
And notice by default, the DS2 version 2 is $136.

6727
08:53:45,520 --> 08:53:47,200
I want this to be as cheap as possible.

6728
08:53:47,200 --> 08:53:52,320
Just if I forget to turn off this cluster later on, I don't want to be paying a lot of money.

6729
08:53:52,320 --> 08:53:53,600
So that's what we're going to do here.

6730
08:53:54,120 --> 08:53:55,280
I'll go ahead and select that.

6731
08:53:55,280 --> 08:53:56,320
And now we're in good shape.

6732
08:53:57,200 --> 08:54:00,640
In our node pools, we'll leave this as the standard.

6733
08:54:01,120 --> 08:54:04,000
We do not need enable, we don't need virtual nodes.

6734
08:54:04,000 --> 08:54:05,760
We can leave this alone.

6735
08:54:05,840 --> 08:54:07,120
We can't do anything with it.

6736
08:54:07,680 --> 08:54:14,240
Here we can determine whether we want the authentication method to be the service principal, so that's the service itself, or system assigned managed identity.

6737
08:54:14,240 --> 08:54:15,360
I prefer the latter.

6738
08:54:15,520 --> 08:54:20,640
If you want to learn about these things, it's not so important, but you can click and read these links here.

6739
08:54:21,280 --> 08:54:22,960
We're going to stick with role-based access.

6740
08:54:22,960 --> 08:54:26,400
We'll stick with AKS Managed Azure Active Directory.

6741
08:54:27,120 --> 08:54:29,040
Encryption by default sounds good to me.

6742
08:54:29,760 --> 08:54:31,120
and we'll go to networking.

6743
08:54:31,600 --> 08:54:33,920
We'll leave the default settings as is.

6744
08:54:34,160 --> 08:54:39,120
You might have a conflict here, so you might have to change it because this is a fully qualified domain.

6745
08:54:39,120 --> 08:54:41,040
Think of like having a custom domain name.

6746
08:54:41,200 --> 08:54:43,360
So if it's taken, you might have to change it there.

6747
08:54:43,840 --> 08:54:46,320
All these other settings are totally fine.

6748
08:54:46,640 --> 08:54:48,720
We'll go into integrations here.

6749
08:54:51,040 --> 08:54:57,520
We don't have anything to register, or there's no containers registered for this example here, so we're not really worried about that.

6750
08:54:58,080 --> 08:55:02,320
We don't want to really worry about Azure Monitor at this point in time, so I'm just going to disable that.

6751
08:55:02,560 --> 08:55:03,920
We'll go ahead and go to next.

6752
08:55:04,320 --> 08:55:05,440
And we can put some tags.

6753
08:55:05,440 --> 08:55:06,400
I'm fine for that.

6754
08:55:07,200 --> 08:55:11,440
And we will wait for review and create to validate the process here.

6755
08:55:13,120 --> 08:55:14,960
Sometimes it's fast, sometimes it's slow.

6756
08:55:15,240 --> 08:55:16,560
What you have to be is patient.

6757
08:55:18,200 --> 08:55:19,680
And so we have a validation issue.

6758
08:55:19,680 --> 08:55:21,680
It could be with our DNS here.

6759
08:55:24,720 --> 08:55:29,520
The MV must have two cores or 4 gigabytes of memory.

6760
08:55:29,520 --> 08:55:32,720
So I guess I can't launch our cheaper option there.

6761
08:55:33,360 --> 08:55:34,720
So we'll go back there.

6762
08:55:35,680 --> 08:55:37,680
And I guess we need 2 cores.

6763
08:55:38,560 --> 08:55:41,520
So I guess we pretty much have to use what is here.

6764
08:55:41,520 --> 08:55:42,240
I mean this.

6765
08:55:44,400 --> 08:55:46,400
It said four cores, right?

6766
08:55:48,280 --> 08:55:49,080
What did it say?

6767
08:55:49,080 --> 08:55:50,720
Let's go back to that and try that again.

6768
08:55:51,600 --> 08:55:52,400
I've already forgotten.

6769
08:55:56,800 --> 08:55:59,120
We need 2 cores and 4 gigabytes of memory.

6770
08:55:59,280 --> 08:55:59,680
Okay.

6771
08:56:03,280 --> 08:56:07,440
So we want 2 cores.

6772
08:56:09,280 --> 08:56:10,560
So we'll just go up one more.

6773
08:56:10,560 --> 08:56:12,240
We'll go check the price on that.

6774
08:56:18,400 --> 08:56:20,800
$89, a bit better than before.

6775
08:56:20,800 --> 08:56:21,120
Okay.

6776
08:56:23,040 --> 08:56:25,520
And let's see if it takes this one here.

6777
08:56:28,360 --> 08:56:28,680
Great.

6778
08:56:28,680 --> 08:56:30,320
And so we'll go ahead and create that cluster.

6779
08:56:34,920 --> 08:56:38,000
And so this shouldn't take too long, but I will see you in a bit.

6780
08:56:41,320 --> 08:56:43,920
All right, so our cluster has finally created there.

6781
08:56:43,920 --> 08:56:47,360
And so what I want you to do is go ahead and go to your resource there.

6782
08:56:49,120 --> 08:56:52,240
And on the left-hand side, we want to make sure that our nodes are running.

6783
08:56:52,240 --> 08:56:54,480
Notice down below it says one node pool.

6784
08:56:55,440 --> 08:57:00,560
And so if we go also down here to node pools, we should be able to see that it is in a succeeded state.

6785
08:57:00,560 --> 08:57:01,920
That is what we're looking for.

6786
08:57:01,920 --> 08:57:03,280
And we have our single

6787
08:57:03,720 --> 08:57:18,320
Node there, most of the things with Azure, or sorry, with Kubernetes is done through the terminal, so there's not much we can actually do from here, so we will absolutely 100% have to open up Cloud Shell.

6788
08:57:18,640 --> 08:57:23,680
Now, if you want to do this in Bash or PowerShell, it's up to you, because we're just going to be using the...

6789
08:57:24,160 --> 08:57:26,400
Azure CLI, and it works in both.

6790
08:57:26,720 --> 08:57:33,600
The syntax is slightly different for system variables and things like that, but the CLI itself, the commands are identical.

6791
08:57:34,320 --> 08:57:41,520
So, to work with the Kubernetes, what we're going to need is to be using the azaks command.

6792
08:57:42,080 --> 08:57:49,360
So again, you can pull up the docs and go to the Azure CLI reference AKS, and we get a lot of detailed information.

6793
08:57:49,360 --> 08:57:51,320
So we were just looking at the node pool.

6794
08:57:51,320 --> 08:57:54,800
If we wanted to look at that ourselves, we could list it here and show it.

6795
08:57:55,120 --> 08:57:56,320
Let's go give that a try.

6796
08:57:57,120 --> 08:58:02,720
So I'm going to type in AZ AKS node pool list.

6797
08:58:05,920 --> 08:58:08,440
And I might have typed this wrong here.

6798
08:58:08,440 --> 08:58:09,520
Let's just hit up there.

6799
08:58:14,480 --> 08:58:17,760
And I'm going to get as much room as I need here because we don't need to see anything else.

6800
08:58:19,440 --> 08:58:20,640
The following are required.

6801
08:58:20,640 --> 08:58:21,040
Oh, right.

6802
08:58:21,040 --> 08:58:23,200
So you have to provide it some information.

6803
08:58:23,200 --> 08:58:27,440
So here, we named it, I named it the Borg.

6804
08:58:27,440 --> 08:58:28,520
Yours might be slightly different.

6805
08:58:28,520 --> 08:58:29,760
So I'll just call it Borg.

6806
08:58:30,560 --> 08:58:32,160
And the cluster name, I think, is the same.

6807
08:58:32,160 --> 08:58:33,680
So we'll call it Borg as well.

6808
08:58:37,040 --> 08:58:39,760
And while it's thinking there, I'm just going to double check the names.

6809
08:58:40,880 --> 08:58:42,640
I'm almost certain that those are correct.

6810
08:58:43,360 --> 08:58:44,960
But, oh yeah, there it goes.

6811
08:58:44,960 --> 08:58:46,000
It just takes some time.

6812
08:58:47,680 --> 08:58:49,520
All right, so we're getting some information.

6813
08:58:49,520 --> 08:58:55,240
And if you find it a bit easier to read, we can go to output table, which is something I do a lot.

6814
08:58:55,240 --> 08:58:56,560
There's probably some way to default it.

6815
08:58:56,560 --> 08:58:57,360
I can't remember how.

6816
08:58:57,920 --> 08:58:58,840
So yeah, so there we go.

6817
08:58:58,840 --> 08:59:00,120
And that was the same thing we looked.

6818
08:59:00,120 --> 08:59:01,760
There's one in the succeeded count.

6819
08:59:02,960 --> 08:59:06,680
So the next thing we should do is get the nodes.

6820
08:59:06,680 --> 08:59:07,960
So I think that's probably...

6821
08:59:07,960 --> 08:59:08,520
Actually, you know what?

6822
08:59:08,520 --> 08:59:10,800
I think we have to do credentials.

6823
08:59:11,680 --> 08:59:16,960
So if we go over to this here, I remember there's a command called get credentials.

6824
08:59:19,760 --> 08:59:25,600
Get the access credentials for managed Kubernetes clusters because we need to actually set that up first.

6825
08:59:26,800 --> 08:59:30,960
So it looks like we just need our name and our resource group to run that.

6826
08:59:30,960 --> 08:59:32,240
So that's what we're going to do.

6827
08:59:33,440 --> 08:59:36,480
And if you want to save yourself time, you can also just copy paste here.

6828
08:59:39,840 --> 08:59:43,680
Unless it doesn't like the copy paste, I'm just going to type it by hand.

6829
08:59:50,320 --> 08:59:52,640
And then the name was Borg.

6830
08:59:54,720 --> 08:59:58,760
And the resource group is also Borg.

6831
09:00:01,240 --> 09:00:01,400
Okay.

6832
09:00:03,240 --> 09:00:07,280
And so now it has context for that, so we can proceed to the next step here.

6833
09:00:08,280 --> 09:00:11,040
What we're going to do is just verify our connection is actually working.

6834
09:00:11,040 --> 09:00:14,000
And so now we're going to use kube CTL.

6835
09:00:15,200 --> 09:00:22,800
So that's kube CTL is the Kubernetes controller, and that's why we had to authenticate so that we could use it with that.

6836
09:00:23,440 --> 09:00:24,400
So just hit enter here.

6837
09:00:28,160 --> 09:00:30,960
And if this executes fine, then that means our credentials are great.

6838
09:00:30,960 --> 09:00:31,360
So great.

6839
09:00:31,360 --> 09:00:34,960
So we're able to talk to our Kubernetes cluster.

6840
09:00:36,160 --> 09:00:39,200
The next thing we want to do is set up a deployment.

6841
09:00:40,080 --> 09:00:44,080
So what we can do is deploy like a pre-made image.

6842
09:00:44,560 --> 09:00:48,480
So I'm just going to go here and type in kubectl create deployment.

6843
09:00:49,840 --> 09:00:53,200
I'm just trying to think what I'd want to deploy.

6844
09:00:53,320 --> 09:00:55,920
I wonder if we could deploy Apache or something.

6845
09:00:57,240 --> 09:00:58,080
Let me take a look.

6846
09:00:58,480 --> 09:01:03,120
So where these clusters would be probably would be on Docker Hub or like these images.

6847
09:01:03,760 --> 09:01:12,240
So I could go here and if I had Apache here, so it'd be like HTTPD or something like that.

6848
09:01:13,840 --> 09:01:15,680
Or we could do NGINX, I suppose.

6849
09:01:18,640 --> 09:01:20,080
Yeah, let's do NGINX.

6850
09:01:20,080 --> 09:01:21,200
I think that'll be easier to do.

6851
09:01:21,600 --> 09:01:26,560
So what we'll do is just go and type in create a kubectl create deployment.

6852
09:01:27,200 --> 09:01:31,280
nginx, and then we'll do image nginx.

6853
09:01:36,080 --> 09:01:38,480
Okay, and so it's created that deployment there.

6854
09:01:40,800 --> 09:01:42,880
And so the next thing we'll need to do is get our pods.

6855
09:01:42,880 --> 09:01:45,600
So we'll type in cube CTL get pods.

6856
09:01:47,720 --> 09:01:52,400
And here we can see that we have a single pod running, and there is our nginx.

6857
09:01:53,400 --> 09:01:56,000
And so now what we want to do is go ahead and do a deploy.

6858
09:02:01,360 --> 09:02:03,120
Okay, and our deployment's all good.

6859
09:02:04,720 --> 09:02:08,080
And I'm just trying to remember what we would do next.

6860
09:02:08,640 --> 09:02:14,480
Yeah, if we want to actually access this, we'd have to probably expose our thing here.

6861
09:02:14,560 --> 09:02:27,280
So we'll type in kubectl expose deployment nginx port 80, because we're not going to use, we're not going to be using

6862
09:02:29,920 --> 09:02:32,800
SSL here, and we'll just type in load balancer for the type.

6863
09:02:36,480 --> 09:02:41,280
All right, and so now that that's all set up, we can go ahead and do a get service on that.

6864
09:02:46,830 --> 09:02:48,590
And I've got to spell it right for it to work.

6865
09:02:51,710 --> 09:02:53,230
Great, and so our service is running.

6866
09:02:53,230 --> 09:02:57,070
So notice that it's also a load balancer type, and we get an external IP.

6867
09:02:58,190 --> 09:03:02,590
So now that we have that, I guess what we can do is go ahead and try to connect to it.

6868
09:03:03,280 --> 09:03:05,280
So I believe that this is the public IP.

6869
09:03:05,280 --> 09:03:10,760
So if I copy this here and make a new tab and paste that in there, there's our NGINX.

6870
09:03:11,920 --> 09:03:13,520
We could try this with Apache as well.

6871
09:03:13,520 --> 09:03:16,560
I don't know if we'll be successful, but we'll give it a go.

6872
09:03:16,800 --> 09:03:20,400
It doesn't hurt to do this more than once to get into the habit of it.

6873
09:03:22,880 --> 09:03:28,000
So what we'll do is we will go ahead and create an image again.

6874
09:03:28,000 --> 09:03:31,760
So if we just go back up to create, this time I'm going to use HTTP.

6875
09:03:33,400 --> 09:03:34,480
I think that's what it was.

6876
09:03:40,790 --> 09:03:40,950
Yeah.

6877
09:03:44,630 --> 09:03:46,070
So we'll do httpd.

6878
09:03:48,870 --> 09:03:53,590
And we have that there.

6879
09:03:53,590 --> 09:03:57,030
So we'll go ahead and create that deployment.

6880
09:03:58,630 --> 09:04:01,670
And we probably should check the pods so we can see what we got.

6881
09:04:02,640 --> 09:04:04,480
So now we have HTTPD pod.

6882
09:04:04,840 --> 09:04:06,160
Notice it has one of 1 running.

6883
09:04:06,160 --> 09:04:08,600
This one has zero of 1 running, and it's still creating the pod.

6884
09:04:08,600 --> 09:04:10,080
So we're going to go hit up.

6885
09:04:10,080 --> 09:04:12,720
Now the pod is now in a running state, so we're in good shape.

6886
09:04:13,440 --> 09:04:17,760
Let's go ahead and get deployments so we can see what we have here.

6887
09:04:19,680 --> 09:04:19,920
Great.

6888
09:04:19,920 --> 09:04:22,640
So we can see we have each one of 1 deployed.

6889
09:04:23,840 --> 09:04:27,800
And so now let's go ahead and expose the...

6890
09:04:31,960 --> 09:04:32,560
service there.

6891
09:04:33,200 --> 09:04:34,960
I think we can use load balancer again here.

6892
09:04:34,960 --> 09:04:36,000
That should probably work.

6893
09:04:38,560 --> 09:04:42,720
And now that we've done that, we'll go ahead and check on the services here.

6894
09:04:44,200 --> 09:04:46,880
And so this has its own IP address here.

6895
09:04:47,560 --> 09:04:51,120
If I'm right, I should be able to see the default Apache page.

6896
09:04:54,080 --> 09:04:55,600
Did I grab the right IP address here?

6897
09:04:57,520 --> 09:04:58,320
Oh, it's still pending.

6898
09:04:58,320 --> 09:04:58,720
Sorry.

6899
09:04:59,600 --> 09:05:00,880
I just grabbed the one that I saw.

6900
09:05:00,880 --> 09:05:01,760
So here it is.

6901
09:05:05,280 --> 09:05:05,760
There we go.

6902
09:05:05,760 --> 09:05:07,040
So it's as simple as that.

6903
09:05:07,360 --> 09:05:09,200
I thought we would see the default Apache page.

6904
09:05:09,200 --> 09:05:11,680
I'm not sure why we see it works, but that is totally fine.

6905
09:05:11,880 --> 09:05:18,720
It's probably just what is the default built into this module here, but it's not what I'm used to seeing.

6906
09:05:19,760 --> 09:05:25,440
So now that we're in that good shape, we'll just think, let's think about what we'll do next here, okay?

6907
09:05:26,400 --> 09:05:33,280
All right, so I think one more thing that we should probably try before cleaning everything up here is actually how do we scale out our pods and our nodes?

6908
09:05:34,080 --> 09:05:38,320
Because right now we're just running a single instance of each of these things, which are our nodes.

6909
09:05:38,880 --> 09:05:42,320
So before we can add more nodes, we need to add more pods.

6910
09:05:42,320 --> 09:05:44,000
And so that's what we're going to do first.

6911
09:05:45,480 --> 09:05:51,960
So what we'll want to do is I'm going to type in kube CTL scale, and we're going to add replicas.

6912
09:05:51,960 --> 09:05:54,240
And this is how many more pods we're going to have.

6913
09:05:54,480 --> 09:05:57,400
So we're going to go from one pods to, let's say, three pods.

6914
09:05:57,400 --> 09:05:59,280
And then we need to say what it's for.

6915
09:05:59,280 --> 09:06:03,760
So it's deployment, and we could do the Apache one, or I guess it's HTTPD.

6916
09:06:04,800 --> 09:06:08,160
And so what that will do is increase us to three pods.

6917
09:06:08,480 --> 09:06:13,920
If I go and check kube CTL get pods, it should show me how many pods I have.

6918
09:06:14,800 --> 09:06:18,240
And it looks like we now have three, so we're in good shape here.

6919
09:06:20,800 --> 09:06:24,640
Probably the next thing we want to do is add the nodes.

6920
09:06:24,640 --> 09:06:27,160
So that's what we'll do next.

6921
09:06:27,160 --> 09:06:31,040
If you want to remind like delay, it's because I'm trying to figure out the commands as we do it here.

6922
09:06:31,600 --> 09:06:34,480
So it's going to be AZAKS scale.

6923
09:06:34,840 --> 09:06:37,280
We're going to have to provide our resource group here.

6924
09:06:37,360 --> 09:06:38,520
We called it the Borg.

6925
09:06:38,520 --> 09:06:40,640
I don't know if we need the single quotations.

6926
09:06:40,640 --> 09:06:41,760
I just always do that.

6927
09:06:41,840 --> 09:06:42,640
It's out of habit.

6928
09:06:43,040 --> 09:06:44,480
The name is Borg again.

6929
09:06:45,520 --> 09:06:47,280
And we're going to increase that node count.

6930
09:06:47,280 --> 09:06:48,720
And let's do it to the max to three.

6931
09:06:52,480 --> 09:06:55,680
And we'll just wait for this command to execute.

6932
09:06:56,000 --> 09:06:56,960
It is running.

6933
09:06:59,600 --> 09:07:05,840
All right, so after waiting about, I don't know, five or six minutes, and it really depends on how many you're scaling up to.

6934
09:07:06,600 --> 09:07:09,240
It took a bit of time there, but it looks like it created them for me.

6935
09:07:09,240 --> 09:07:10,960
I got a bunch of JSON back.

6936
09:07:11,240 --> 09:07:13,920
That kind of tells me that, but to be very certain,

6937
09:07:14,320 --> 09:07:20,160
We should type in the kubectl get pods or actually get nodes, I suppose.

6938
09:07:23,480 --> 09:07:24,800
And we should see more nodes here.

6939
09:07:27,200 --> 09:07:27,760
Good.

6940
09:07:28,080 --> 09:07:35,760
And if we go to pods, we are in good shape here.

6941
09:07:35,760 --> 09:07:38,960
So you can see that we have a lot more going on.

6942
09:07:40,320 --> 09:07:40,720
All right.

6943
09:07:42,320 --> 09:07:46,560
So just to, one other thing that we can do is just check the distribution across it.

6944
09:07:46,560 --> 09:07:50,800
So we were using the get pods command, but we can also do get pod hyphen o.

6945
09:07:51,680 --> 09:07:58,640
You do not have to remember this, but I just want to show you so that you understand that nodes are distributed and how they are distributed.

6946
09:07:58,640 --> 09:08:02,400
So we'll type in pod colon metadata.name.

6947
09:08:04,400 --> 09:08:05,760
See if it does that there.

6948
09:08:06,960 --> 09:08:07,920
I'm not typing right.

6949
09:08:07,920 --> 09:08:10,000
I'm going to try this one more time.

6950
09:08:10,960 --> 09:08:14,240
So we have equals, I typed in customer, it's just custom.

6951
09:08:17,520 --> 09:08:21,360
Custom columns, node, spec, node, name, pod.

6952
09:08:21,360 --> 09:08:22,080
Let's try that.

6953
09:08:23,520 --> 09:08:24,720
And so there you go.

6954
09:08:24,720 --> 09:08:26,720
So there we can see how they are distributed.

6955
09:08:28,040 --> 09:08:28,800
We're in good shape here.

6956
09:08:28,800 --> 09:08:30,960
So I think all that's left now is to clean up.

6957
09:08:31,600 --> 09:08:35,440
Before we do that, maybe we could peek around the service to see if there's anything interesting there.

6958
09:08:37,560 --> 09:08:40,480
Because I don't think we saw anything of interest, really.

6959
09:08:40,480 --> 09:08:43,040
I'm going to open up a new tab to make it a little bit easier.

6960
09:08:45,040 --> 09:08:46,240
Go over to Kubernetes service.

6961
09:08:46,240 --> 09:08:49,280
Actually, it's right there on our homepage here.

6962
09:08:51,360 --> 09:08:52,960
We'll just look at the nodes.

6963
09:08:56,640 --> 09:08:59,360
There might not be really anything of interest here, but I'm just taking a look.

6964
09:09:04,240 --> 09:09:06,560
here we can see our deployments over here.

6965
09:09:06,560 --> 09:09:07,760
we can see our pods.

6966
09:09:07,760 --> 09:09:10,240
So it's just another way of looking at it.

6967
09:09:10,240 --> 09:09:11,360
It's the same information.

6968
09:09:12,240 --> 09:09:13,440
You might find this a bit easier.

6969
09:09:13,440 --> 09:09:16,320
We can even drill down into them, take a little bit look here.

6970
09:09:18,000 --> 09:09:19,360
Not a whole lot of information.

6971
09:09:21,520 --> 09:09:27,680
But yeah, if you prefer using the console, there's some better ways of visualizing that than having run commands.

6972
09:09:28,000 --> 09:09:32,960
But the thing is, in order to launch nodes and things like that, I'm pretty sure, actually, hey, can you do it through here?

6973
09:09:34,400 --> 09:09:40,720
You know, I'm so used to not being able to do it is because on AWS, they don't give you the option to have any ways of doing it.

6974
09:09:41,280 --> 09:09:44,400
So I just assumed that maybe that's the only way you can do it.

6975
09:09:44,400 --> 09:09:48,320
But it looks like you can actually provide YAML or JSON configuration.

6976
09:09:48,320 --> 09:09:49,120
So that's kind of cool.

6977
09:09:51,680 --> 09:09:54,320
Yeah, so I guess you can, you can provide a YAML file through here.

6978
09:09:58,120 --> 09:09:59,120
That's kind of interesting.

6979
09:10:00,720 --> 09:10:02,080
But anyway, that's not a big deal.

6980
09:10:02,400 --> 09:10:03,480
We're not going to do that today.

6981
09:10:03,480 --> 09:10:04,480
It's not necessary.

6982
09:10:04,720 --> 09:10:06,400
Let's just go ahead and clean up our stuff.

6983
09:10:06,400 --> 09:10:09,520
We'll make our way back over to the command line here.

6984
09:10:10,320 --> 09:10:11,440
And we'll do some cleanup.

6985
09:10:13,840 --> 09:10:16,080
Well, I mean, if we can do it there, maybe we can just delete them in here.

6986
09:10:16,560 --> 09:10:17,520
Yeah, it looks like we can.

6987
09:10:17,520 --> 09:10:19,520
So we could go ahead and go hit delete there.

6988
09:10:20,000 --> 09:10:22,240
But I think what we should just do is use kubectl.

6989
09:10:24,080 --> 09:10:28,000
And I'm going to say deployment, and we will go ahead and delete nginx.

6990
09:10:28,760 --> 09:10:30,800
And I'm going to go ahead and delete httpd.

6991
09:10:31,280 --> 09:10:38,960
And then we will go and type in kubectl, get pods, get nodes.

6992
09:10:40,640 --> 09:10:40,880
Okay.

6993
09:10:42,160 --> 09:10:44,400
Notice that they say they're all terminating here.

6994
09:10:45,280 --> 09:10:47,920
And while that's going, we can go check and see what's going on here.

6995
09:10:48,560 --> 09:10:48,720
Yep.

6996
09:10:48,760 --> 09:10:49,920
And so they've already vanished.

6997
09:10:50,960 --> 09:10:52,000
Deployments are gone.

6998
09:10:54,640 --> 09:10:56,720
These pods are still running.

6999
09:11:02,720 --> 09:11:04,960
I think, I'm just trying to think.

7000
09:11:08,000 --> 09:11:12,080
I don't know if we have to delete these pods because if we delete the resource, it should take them all with it.

7001
09:11:12,800 --> 09:11:14,000
We'll just do this get pods.

7002
09:11:14,080 --> 09:11:14,920
These are all gone now.

7003
09:11:14,920 --> 09:11:16,960
We'll go back here.

7004
09:11:18,240 --> 09:11:19,360
They still say they're running.

7005
09:11:19,600 --> 09:11:21,600
Oh, you know what, I bet you there was other ones here.

7006
09:11:21,760 --> 09:11:23,840
So I was just mistaking them for the other one.

7007
09:11:23,840 --> 09:11:24,800
So I believe that they're gone.

7008
09:11:25,200 --> 09:11:27,680
So I think we're all good to tear down this cluster.

7009
09:11:27,920 --> 09:11:32,800
So what we'll do is go back to Borg here, we're going to hit delete, we're going to hit delete there.

7010
09:11:36,760 --> 09:11:38,000
And we'll just wait for that to delete.

7011
09:11:38,720 --> 09:11:39,520
shouldn't take too long.

7012
09:11:41,880 --> 09:11:44,080
If we're not confident there, we'll click on Kubernetes here.

7013
09:11:45,680 --> 09:11:47,040
And just keep on refreshing.

7014
09:11:47,600 --> 09:11:51,520
Again, the Azure portal likes to lie to us a lot, so you got to wait.

7015
09:11:52,080 --> 09:11:53,520
So yeah, we'll just wait till that's done, okay?

7016
09:11:56,240 --> 09:12:00,240
All right, so after waiting about, I don't know, 4 or 5 minutes, it finally deleted that cluster.

7017
09:12:01,200 --> 09:12:05,520
So what we'll do is just go here, just double check the Kubernetes service to make sure that it is gone.

7018
09:12:06,720 --> 09:12:07,440
And it is there.

7019
09:12:07,440 --> 09:12:10,480
If there's anything lingering around there, you can go to your all resources here.

7020
09:12:11,600 --> 09:12:12,640
And you can just check for it.

7021
09:12:12,640 --> 09:12:13,640
So we'll go for Borg.

7022
09:12:15,200 --> 09:12:16,080
and nothing shows up.

7023
09:12:16,080 --> 09:12:17,360
So we're all in good shape there.

7024
09:12:17,360 --> 09:12:17,840
So there you go.

7025
09:12:19,080 --> 09:12:22,880
And yeah, I noticed that it's still showing it here, but that's the thing with the Azure portal.

7026
09:12:23,360 --> 09:12:26,360
It's just, you know, it's just what it is.

7027
09:12:26,360 --> 09:12:28,160
You know, it doesn't always tell you the truth.

7028
09:12:32,800 --> 09:12:36,960
Hey, this is Andrew Brown from Exam Pro, and we are looking at Azure Kubernetes Service Cheat Sheet.

7029
09:12:36,960 --> 09:12:41,440
This is a really short one I probably should have made it longer, but this is what I got for you today.

7030
09:12:41,440 --> 09:12:45,840
So, AKS makes it simple to deploy a managed Kubernetes cluster in Azure.

7031
09:12:46,080 --> 09:12:47,760
Azure will manage for you.

7032
09:12:48,080 --> 09:12:51,360
the Kubernetes masters, health monitoring, maintenance.

7033
09:12:51,520 --> 09:12:54,720
You only have to maintain the agent nodes.

7034
09:12:54,800 --> 09:12:56,000
AKS service is free.

7035
09:12:56,000 --> 09:12:59,280
You only pay for the agent nodes within the cluster, not the masters.

7036
09:12:59,600 --> 09:13:03,040
You should use AKS for scenarios where you need full container orchestration.

7037
09:13:03,280 --> 09:13:10,480
So if you need service discovery across multiple containers, automatic scaling, coordinated application upgrades, that's what you're going to be using it for.

7038
09:13:10,640 --> 09:13:15,440
And one thing I want to mention is Bridge to Kubernetes is an extension of Visual Studio, Visual Studio Code.

7039
09:13:15,440 --> 09:13:17,880
It makes it super easy to debug Kubernetes.

7040
09:13:18,720 --> 09:13:24,720
But I feel like I should have put a bit of security stuff in here, but I'll probably update this in the future, just so but there you go.

7041
09:13:28,960 --> 09:13:37,400
To understand Azure DNS, let's first define what is a domain name, and that is a service that is responsible for translating and resolving a service name to its IP address.

7042
09:13:37,400 --> 09:13:44,240
And so Azure DNS is a hosting service for DNS domains that provides name resolution by Microsoft Azure infrastructure.

7043
09:13:45,120 --> 09:13:54,400
So imagine you have a domain, you want it to be managed by Azure DNS, and then you can make records like www to point to a specific Azure resource.

7044
09:13:54,640 --> 09:13:55,840
That's the idea behind there.

7045
09:13:56,240 --> 09:13:59,360
There's two types of DNSs you can make.

7046
09:13:59,360 --> 09:14:01,600
You've got a public DNS, an internet-facing one.

7047
09:14:01,600 --> 09:14:03,280
This is the one you're likely going to be using.

7048
09:14:03,600 --> 09:14:13,040
So this allows you to manage your domain for internet-accessible domains, point your domains to your website, or creating records that you own the domain or that you are pointing

7049
09:14:13,680 --> 09:14:16,640
emails to your e-mail server, so things like that.

7050
09:14:16,640 --> 09:14:19,520
Then you have your private DNS, which is internal facing.

7051
09:14:19,680 --> 09:14:23,360
This allows you to use your own custom domain instead of the Azure provider domains.

7052
09:14:23,600 --> 09:14:28,200
So Azure has its own provider domains, which are fully qualified domains for a lot of services.

7053
09:14:28,200 --> 09:14:30,480
A great example of this is Azure Storage Accounts.

7054
09:14:30,920 --> 09:14:33,920
And so that link there is its fully qualified domain.

7055
09:14:34,160 --> 09:14:39,040
One thing I want to point out is that you cannot use Azure DNS to purchase domains.

7056
09:14:39,280 --> 09:14:51,680
If you want to purchase a domain, you can actually do that through app services, or you use like a third-party provider such as Namecheap or GoDaddy, and then have Azure manage that DNS stuff.

7057
09:14:56,040 --> 09:14:59,760
Let's get into the details of zones, records, and record sets.

7058
09:15:00,000 --> 09:15:02,080
So the first thing is what is a DNS zone?

7059
09:15:02,080 --> 09:15:06,640
A DNS zone is a container for all your DNS records for a specific domain.

7060
09:15:06,960 --> 09:15:08,800
And so the next thing is what is a record?

7061
09:15:08,800 --> 09:15:13,200
And a DNS record is a rule that says where to send your domain name.

7062
09:15:13,360 --> 09:15:15,760
A record can be composed of a name, a type, and a value.

7063
09:15:15,760 --> 09:15:18,240
So the name would tell the record how to listen.

7064
09:15:18,240 --> 09:15:23,360
So maybe you want to do something with your www..subdomain.

7065
09:15:23,520 --> 09:15:24,200
Then you have the type.

7066
09:15:24,200 --> 09:15:25,280
That's how you're going to handle it.

7067
09:15:25,280 --> 09:15:25,960
So if you had

7068
09:15:26,320 --> 09:15:28,640
a type of A, which stands for address.

7069
09:15:28,640 --> 09:15:30,840
Maybe you're going to send it to an IP address.

7070
09:15:30,840 --> 09:15:38,560
And then the values, so you're going to actually provide the IP address so it knows how to take that subdomain and send it to that specific server.

7071
09:15:39,120 --> 09:15:40,480
Then there are record sets.

7072
09:15:40,760 --> 09:15:43,760
And record sets are pretty much just a grouping of records.

7073
09:15:44,920 --> 09:15:46,400
And they're just called record sets.

7074
09:15:46,720 --> 09:15:50,120
But when you're using Azure DNS, you're never creating a record per se.

7075
09:15:50,120 --> 09:15:54,400
You're creating a record set, which can contain a single record or multiple records.

7076
09:15:54,960 --> 09:15:59,280
So just be aware when you're using record sets, just think of record sets and records as the same thing.

7077
09:15:59,600 --> 09:16:01,520
Here's an example of a record set.

7078
09:16:01,520 --> 09:16:07,680
So this one is one that gets created for you by default when you set up a new zone.

7079
09:16:08,040 --> 09:16:12,560
And so what we have there are multiple records in the values there.

7080
09:16:13,600 --> 09:16:15,840
And these are for name servers.

7081
09:16:15,840 --> 09:16:20,640
So the idea with name servers is that this actually says where the domain is being managed.

7082
09:16:20,880 --> 09:16:23,440
And so for whatever reason, if one of the

7083
09:16:24,120 --> 09:16:30,480
servers became unavailable, then people would know to go to the second, third, or fourth name server.

7084
09:16:30,560 --> 09:16:31,280
So there you go.

7085
09:16:35,920 --> 09:16:39,680
Let's take a look at record sets because this is where all the magic happens for Azure DNS.

7086
09:16:39,680 --> 09:16:42,560
And I just want to remind you again that you don't create individual records.

7087
09:16:42,560 --> 09:16:46,400
You create record sets which can just contain a single record or multiple records.

7088
09:16:46,560 --> 09:16:49,520
And the first thing you're going to need to do is name your record.

7089
09:16:49,760 --> 09:16:51,440
It's not like naming other services.

7090
09:16:52,080 --> 09:16:53,360
because it's all about your domain.

7091
09:16:53,360 --> 09:16:58,720
So the first thing is that you can provide a name to the record, such as www.

7092
09:16:58,880 --> 09:17:00,440
And to you, that would look like a subdomain.

7093
09:17:00,440 --> 09:17:01,520
That's how I would describe it.

7094
09:17:01,920 --> 09:17:06,080
But that would also be known as a fully qualified domain, because you're completing the domain.

7095
09:17:06,680 --> 09:17:08,000
So I just want you to remember that.

7096
09:17:08,000 --> 09:17:13,840
Now you can also provide no name, and when it's left empty, that's now considered either apex or naked domain.

7097
09:17:14,480 --> 09:17:16,000
You can also provide a wildcard.

7098
09:17:16,240 --> 09:17:19,000
This acts as a catch-all, meaning that anything that gets

7099
09:17:19,560 --> 09:17:21,920
passed along, it's going to get captured here.

7100
09:17:22,080 --> 09:17:24,240
So the priority really does matter here as well.

7101
09:17:24,240 --> 09:17:27,760
But you can also not only just do an asterisk, you can do an asterisk.trek.

7102
09:17:27,760 --> 09:17:30,880
So if you just want a subset of things being matched, you can do that.

7103
09:17:31,120 --> 09:17:38,240
Not all DNS providers or services that manage DNS for you support that, but Azure does.

7104
09:17:38,720 --> 09:17:40,160
Then there's this at sign symbol.

7105
09:17:40,400 --> 09:17:42,640
This represents a shorthand for saying origin.

7106
09:17:42,640 --> 09:17:47,760
It's basically you saying I'm pointing to the naked domain or the zone that is hosting the domain.

7107
09:17:48,600 --> 09:17:52,240
And so you'll see that in some of the default records if you're just wondering what that is.

7108
09:17:53,520 --> 09:17:56,240
Another thing you can set on your record set is the time to live.

7109
09:17:57,120 --> 09:18:08,000
This is going to tell you, or this is going to tell other servers requesting your domain how long it should cache the record so it doesn't need to frequently ask what to do or asking for the same information over and over again.

7110
09:18:08,240 --> 09:18:11,200
And so you can either set a long TTL or a short TTL.

7111
09:18:11,200 --> 09:18:12,160
The longer it is,

7112
09:18:12,800 --> 09:18:14,640
Generally, the more it's going to reduce costs.

7113
09:18:14,640 --> 09:18:17,120
I don't know what cost it's going to reduce, but I know that it would.

7114
09:18:17,360 --> 09:18:20,160
I guess I'm just not working at scale, so I'm not too sure about that.

7115
09:18:20,400 --> 09:18:27,520
But the idea is that if it's longer, then there's going to be a lot less requests hitting the DNS.

7116
09:18:28,000 --> 09:18:34,880
Now you can set a short one, and you might want to do this if your records are changing frequently or you need failover.

7117
09:18:34,880 --> 09:18:51,840
So if you're using a record for failover, what you want is you want your TTL to be very low, because if it's set to like an hour or a day, that means that it has to wait till your servers or that the server that has the cache expires so that the failover can occur.

7118
09:18:52,160 --> 09:18:53,520
So be really careful with that.

7119
09:18:54,880 --> 09:18:57,680
Let's talk about the details of the actual record types.

7120
09:18:58,000 --> 09:19:03,120
This is the meat of your actual record because it's really going to tell it how it's going to work.

7121
09:19:03,360 --> 09:19:05,040
And we have a lot of ones here.

7122
09:19:05,040 --> 09:19:06,320
We're going to actually cover them all.

7123
09:19:06,880 --> 09:19:09,040
Starting at the top here with A, which stands for address.

7124
09:19:09,040 --> 09:19:11,840
This allows you to point your domain to an IPv4 address.

7125
09:19:12,240 --> 09:19:13,640
Then you have 4 A's.

7126
09:19:13,640 --> 09:19:16,880
This lets you point your domain to an IPv6 address.

7127
09:19:17,120 --> 09:19:18,240
Then you have CAA.

7128
09:19:18,240 --> 09:19:20,080
This is for certificate authorities.

7129
09:19:20,080 --> 09:19:24,000
These are records authorized who can issue certificates for their domain.

7130
09:19:24,560 --> 09:19:26,640
I assume it has to do with something with SSL certificates.

7131
09:19:26,640 --> 09:19:27,280
I'm not sure.

7132
09:19:27,920 --> 09:19:29,120
Then you have CNAMES.

7133
09:19:29,120 --> 09:19:30,960
These are canonical name records.

7134
09:19:30,960 --> 09:19:35,680
These create an alias from one domain to another, so you can set the record value to a domain.

7135
09:19:35,680 --> 09:19:41,920
So imagine you wanted www..exampro.co to go to freecodecamp.org.

7136
09:19:41,920 --> 09:19:45,920
Then the value would be freecodecamp.org with the actual...

7137
09:19:47,880 --> 09:19:48,720
www.

7138
09:19:48,720 --> 09:19:50,080
and CNAME there.

7139
09:19:50,400 --> 09:19:51,800
Then you have MX records.

7140
09:19:51,800 --> 09:19:54,160
These are mail exchange records.

7141
09:19:54,320 --> 09:20:05,120
So if your domain, if you have like a custom e-mail that has your domain, so like androidexampro.co, the idea is that you need MX records in order for that to work.

7142
09:20:05,440 --> 09:20:08,160
Then you have NS, which stands for name server records.

7143
09:20:08,160 --> 09:20:14,400
This identifies multiple DNS servers for the domain, and there are multiples in case the primary DNS server fails.

7144
09:20:14,640 --> 09:20:16,960
Then you have PTR, which stands for pointer.

7145
09:20:17,480 --> 09:20:22,080
And these are used to point to domain or host name, but it's used for reverse DNS lookup.

7146
09:20:22,080 --> 09:20:27,680
So it's just like an A record, but the difference is that it's for reverse DNS lookup.

7147
09:20:28,080 --> 09:20:29,600
Then you have SRVs.

7148
09:20:29,840 --> 09:20:36,320
This is a service record, and it's used to identify computers that host specific services, like locating domain controllers for Active Directory.

7149
09:20:36,320 --> 09:20:41,520
So we see a little bit more of this utility when we're working with Azure or Microsoft workloads.

7150
09:20:41,880 --> 09:20:49,000
And then you got TXT, and this is a record that is just text and consider multiple purposes such as documentation or as a means of verification.

7151
09:20:49,000 --> 09:20:51,280
I'll give you an example for verification.

7152
09:20:51,600 --> 09:20:53,520
Imagine you want to use Gmail.

7153
09:20:54,080 --> 09:20:56,160
And so, Gmail says, How do we know you own the domain?

7154
09:20:56,160 --> 09:21:03,920
So, go create a TXT record, and then we'll go check and see if you put in the value we gave you, and that's how we're going to verify that you own that domain.

7155
09:21:04,280 --> 09:21:08,800
There's one more here I don't believe it's something you can set, but it's something that you should always have, which is a startup authority.

7156
09:21:09,040 --> 09:21:13,120
This record contains administrative details about the domain.

7157
09:21:14,000 --> 09:21:14,320
All right.

7158
09:21:15,040 --> 09:21:23,720
One more thing, last thing about record sets is that you can set your own special record type, or sorry, you can set Azure's own special record type called alias.

7159
09:21:23,720 --> 09:21:27,680
And this works with either A, the four A's, or the CNAME record.

7160
09:21:28,000 --> 09:21:32,520
And the idea here is that I'm going to set that and then I'm going to actually choose an Azure resource.

7161
09:21:32,520 --> 09:21:37,360
So instead of saying go to this IP address or go to this host name, I'm saying go to this very specific service.

7162
09:21:37,360 --> 09:21:38,560
Why would you want to do that?

7163
09:21:39,360 --> 09:21:43,360
And the reason you want to do that is imagine that you, let's say you weren't doing that.

7164
09:21:43,360 --> 09:21:44,400
Let's say you just had

7165
09:21:45,840 --> 09:22:01,960
Like a load balancer, and you're directly pointing to its hostname, and for whatever reason, you deployed a new version of that service or something like that, and now its hostname has changed, and what could happen is that you could be left with a...

7166
09:22:02,480 --> 09:22:05,200
a domain or a domain record that is dangling.

7167
09:22:05,360 --> 09:22:06,520
It's pointing to nowhere.

7168
09:22:06,520 --> 09:22:08,480
And so what you'd have to do is manually update it.

7169
09:22:08,720 --> 09:22:11,760
But if you use this alias feature, you wouldn't have to do that.

7170
09:22:11,760 --> 09:22:13,320
It would just always point to the right place.

7171
09:22:13,320 --> 09:22:20,880
So whatever is being utilized underneath, whether it's an IP address or a host name, the point is that Azure always knows how to find it.

7172
09:22:21,320 --> 09:22:25,120
And so that is the power of alias.

7173
09:22:25,120 --> 09:22:28,800
And if you can use alias, you should always, always 100% use it.

7174
09:22:29,280 --> 09:22:29,920
So there you go.

7175
09:22:34,400 --> 09:22:39,680
Hey, this is Andrew Brown from ExamPro, and we are going to learn about DNS Zones, or specifically Azure DNS.

7176
09:22:40,080 --> 09:22:42,560
Do not worry, you do not have to purchase a domain for this.

7177
09:22:42,600 --> 09:22:45,760
We're just going to go through the motions of it so that you have an idea here.

7178
09:22:46,320 --> 09:22:50,880
Maybe we'll try to launch a virtual machine and see if we can attach an alias, which is a custom.

7179
09:22:51,720 --> 09:22:58,560
Record set or type, so I'm going to go ahead and launch a new virtual machine, as always, as we've been doing a lot here.

7180
09:22:58,720 --> 09:23:02,800
We'll make a new character or a new resource group called WRF.

7181
09:23:02,960 --> 09:23:07,760
We'll name this virtual machine WRF, and we'll switch this over to a Linux machine.

7182
09:23:08,000 --> 09:23:13,040
I'm guessing Ubuntu 18 LTS, and we will choose...

7183
09:23:14,440 --> 09:23:16,800
B1LS because that is the most cost effective.

7184
09:23:16,800 --> 09:23:17,920
Watch for that price.

7185
09:23:17,920 --> 09:23:20,080
It should say like $5 a month.

7186
09:23:20,080 --> 09:23:21,360
That is cost effective.

7187
09:23:21,600 --> 09:23:24,640
Going to password, capital T, testing 123456.

7188
09:23:24,880 --> 09:23:27,120
Capital T, testing 123456.

7189
09:23:27,440 --> 09:23:29,760
That was supposed to go into there.

7190
09:23:29,960 --> 09:23:31,480
Our user should be Azure user, okay?

7191
09:23:31,480 --> 09:23:34,080
I'll slow down.

7192
09:23:34,960 --> 09:23:38,640
So we don't really need any ports open.

7193
09:23:38,640 --> 09:23:41,280
I guess we can open port 80 for fun.

7194
09:23:42,280 --> 09:23:46,720
And we can make our way over to the advanced here, and we'll make a shebang.

7195
09:23:46,760 --> 09:23:51,840
I think it's, oh, it's hash that, and then it's user forward slash sh.

7196
09:23:52,320 --> 09:23:58,960
And then we want to do sudo apt install apache2 hyphen y.

7197
09:24:00,320 --> 09:24:01,040
That should be right.

7198
09:24:01,760 --> 09:24:03,280
If it doesn't work, that's totally fine.

7199
09:24:03,840 --> 09:24:05,840
It's not really critical to what we're doing here.

7200
09:24:09,240 --> 09:24:12,560
And so we'll go ahead and create ourselves a virtual machine.

7201
09:24:12,680 --> 09:24:16,800
Again, I don't know if the alias will work without us actually hooking up the domain, but we'll give it a go anyway.

7202
09:24:17,120 --> 09:24:22,640
Now at the top, back to our other tab here, I want you to type in DNS, because we're going to create ourselves a DNS zone.

7203
09:24:22,920 --> 09:24:25,120
And so we'll go ahead in there and hit add.

7204
09:24:25,120 --> 09:24:27,200
Notice that we are making a public DNS record.

7205
09:24:27,440 --> 09:24:30,800
We're going to place that into our WRF resource group.

7206
09:24:33,080 --> 09:24:35,920
And we're going to name this, we'll just call it wharf.com.

7207
09:24:36,000 --> 09:24:39,600
We obviously don't own that domain, but we'll go ahead and create that anyway.

7208
09:24:42,080 --> 09:24:46,480
Once that is created, we'll just, it shouldn't take too long here, so we'll just wait a moment.

7209
09:24:48,000 --> 09:24:48,720
There we go.

7210
09:24:49,280 --> 09:24:53,600
And if we go over to here, what you'll notice is that we have some name servers.

7211
09:24:53,600 --> 09:24:54,880
So you would have to.

7212
09:24:56,360 --> 09:24:58,000
update this with your...

7213
09:24:58,000 --> 09:24:59,960
So the thing is that these are the name servers, right?

7214
09:24:59,960 --> 09:25:02,320
And so let's say you purchased the domain on GoDaddy.

7215
09:25:02,720 --> 09:25:07,200
You would then update your name servers on GoDaddy and provide these ones.

7216
09:25:07,200 --> 09:25:10,240
And then the domain would be managed here by Azure.

7217
09:25:10,480 --> 09:25:12,120
Down below are our records.

7218
09:25:12,120 --> 09:25:13,920
So we can go ahead and create a record set.

7219
09:25:13,920 --> 09:25:16,880
A record set is a collection of records, but it always has at least one.

7220
09:25:17,280 --> 09:25:18,960
And so here we could point things to different things.

7221
09:25:18,960 --> 09:25:22,320
So here we have an A record, which would go to IPv4.

7222
09:25:22,480 --> 09:25:25,360
But if we had a C name, we could say point

7223
09:25:27,920 --> 09:25:30,240
Google.warf.com to google.com.

7224
09:25:30,240 --> 09:25:32,720
That's how we would alias that.

7225
09:25:34,160 --> 09:25:35,520
Or CNAME that, I should say.

7226
09:25:36,080 --> 09:25:49,160
Now, if we wanted to point to our this here, we could go ahead and create ourselves a record set and set this as site as an A record.

7227
09:25:49,160 --> 09:25:52,400
And then we would just put the IP address in, the public IP address.

7228
09:25:52,920 --> 09:25:59,760
The only thing is that if you were to do this, and let's say this IP address changed, then you would have a dangling IP, right?

7229
09:25:59,760 --> 09:26:03,040
That means this would no longer be referencing the same one.

7230
09:26:03,440 --> 09:26:10,920
So what you could do is either give this virtual machine a static IP, or what you can do is use an alias.

7231
09:26:10,920 --> 09:26:20,240
So if we go here and I just say, we'll just say site 2, and we go choose a record alias.

7232
09:26:20,920 --> 09:26:27,200
then what we can do is drop down here and possibly choose, the other it is, this IP address, the WARF IP, which is attached to the machine.

7233
09:26:27,200 --> 09:26:30,880
And so no matter if it changes, it will always point to that, okay?

7234
09:26:30,880 --> 09:26:48,800
I don't think this would be on the exam, but if you're curious about child zones, because this is actually something I use, but imagine you have a service, and actually I do this with our platform, or the ExamPro platform, or the teacher seat platform, but imagine you wanted to have like subdomains, so you wanted to have

7235
09:26:51,120 --> 09:26:53,920
mytenant1.app.wharf.com.

7236
09:26:53,920 --> 09:26:55,920
That's what a child domain would do, okay?

7237
09:26:59,680 --> 09:27:00,480
So we go here.

7238
09:27:01,640 --> 09:27:02,720
And it shouldn't take too long.

7239
09:27:02,720 --> 09:27:03,760
Zones are pretty fast.

7240
09:27:10,550 --> 09:27:11,110
There we go.

7241
09:27:11,510 --> 09:27:13,350
And if we flip back here, it looks the same.

7242
09:27:14,150 --> 09:27:15,830
But now this is app.wharf.com.

7243
09:27:15,830 --> 09:27:17,150
Could you make a child of this?

7244
09:27:17,150 --> 09:27:17,590
I don't know.

7245
09:27:17,710 --> 09:27:19,270
I've never tried making a child of a child.

7246
09:27:20,710 --> 09:27:22,150
If you could, I guess that's great.

7247
09:27:23,520 --> 09:27:24,720
I wouldn't see the need there.

7248
09:27:24,720 --> 09:27:34,800
But if you had different tenants, like let's say you were making a multi-tenant app like a Squarespace, and you wanted to have them all on that, like on like that, you could do that and have all their sites.

7249
09:27:35,200 --> 09:27:36,280
So that's pretty much it.

7250
09:27:36,280 --> 09:27:38,800
It's not a terribly complex service.

7251
09:27:39,040 --> 09:27:47,360
So what we'll do is make our way over to our resource groups, and we'll look for Wharf here, and we'll go ahead and delete this resource group.

7252
09:27:49,280 --> 09:27:51,120
And that's all we need to know for DNS.

7253
09:27:56,560 --> 09:28:00,960
Hey, this is Andrew Brown from Exam Pro, and we are looking at the Azure DNS Cheat Sheet.

7254
09:28:00,960 --> 09:28:03,280
This one's a page in a bit, so let's jump into it.

7255
09:28:03,600 --> 09:28:10,720
So Domain Name Systems, we're just defining the concept, is a service that is responsible for translating or resolving a service name to its IP address.

7256
09:28:10,960 --> 09:28:20,560
So Azure DNS, which I think is Domain Name Service, is a hosting service for DNS domains that provides name resolution by using Microsoft Azure infrastructure.

7257
09:28:20,720 --> 09:28:21,560
One thing that's super

7258
09:28:21,680 --> 09:28:27,680
important, maybe not for the exam, but just for practical knowledge, you cannot use Azure DNS to buy a domain name.

7259
09:28:28,320 --> 09:28:29,160
It has two things.

7260
09:28:29,160 --> 09:28:47,120
We have public DNS, so that's internet facing, allows you to manage domains for internet accessible domains, pointing your domain to a website, setting your records to preview on the domain, records to connect your domain to the e-mail server, and then you've got private DNS, so that's internal facing, allows you to use your own custom domains instead of the Azure provided domains.

7261
09:28:47,560 --> 09:28:54,480
So for the DNS zone, it is a container for all your DNS records for a specified domain name.

7262
09:28:54,800 --> 09:28:58,160
DNS record is a rule that says where to send your domain name.

7263
09:28:58,240 --> 09:29:00,640
A record is composed of name, type, and values.

7264
09:29:00,960 --> 09:29:09,080
And for the types, we have A, which is an address, 4 A's, which is for IPv6, CAA, which is certificate authority, CNAME,

7265
09:29:09,680 --> 09:29:14,040
MX, NS, PTR, SRV, TXT, SOA.

7266
09:29:14,560 --> 09:29:21,640
If there's ones you want to remember, it's going to be CNAME, A, and probably this next one here, which is the alias.

7267
09:29:21,640 --> 09:29:28,080
So Azure has its own special record type called alias that works with A, the four A's, and CNAME.

7268
09:29:28,160 --> 09:29:37,840
And the purpose of Azure Alias is to ensure that when you point to an Azure resource, because instead of choosing IP or whatever, you choose the resource you want to point to, it will always make sure it points to it.

7269
09:29:37,840 --> 09:29:39,480
So it helps us avoid dangling

7270
09:29:39,560 --> 09:29:40,320
domains.

7271
09:29:40,720 --> 09:29:41,680
We have record sets.

7272
09:29:41,680 --> 09:29:42,800
This is a group of records.

7273
09:29:42,880 --> 09:29:46,240
Azure always creates a record set, even with a single record.

7274
09:29:46,560 --> 09:29:55,160
And then the last thing here is time to live, which says how long a value should be cached for, so that if it's something that's very common, it's going to save some requests.

7275
09:29:55,160 --> 09:29:55,920
So there you go.

7276
09:30:00,400 --> 09:30:02,400
Let's talk about networking for Azure.

7277
09:30:02,400 --> 09:30:05,840
And so everything kind of revolves around the virtual network, also known as the VNet.

7278
09:30:05,840 --> 09:30:10,880
And this is a logically isolated section of your Azure network where you launch your Azure resources.

7279
09:30:10,880 --> 09:30:19,760
And here's a very simple diagram of using VNet, but there's a lot of networking components that you're going to be utilizing.

7280
09:30:19,760 --> 09:30:23,280
And we're not going to go through the exhaustive list here, but let's just go through some of them.

7281
09:30:23,840 --> 09:30:27,840
Just to give you an idea of all the things you can do within Azure networking.

7282
09:30:27,840 --> 09:30:29,120
So you have Azure DNS.

7283
09:30:29,360 --> 09:30:31,760
This manages your DNS domain.

7284
09:30:32,000 --> 09:30:33,280
Then you have the VNet itself.

7285
09:30:33,280 --> 09:30:37,200
And so underneath that, it'll have like address spaces, route tables, subnets.

7286
09:30:37,360 --> 09:30:38,760
Then you have network security groups.

7287
09:30:38,760 --> 09:30:41,600
This acts as a virtual firewall at the subnet or NIC level.

7288
09:30:41,680 --> 09:30:42,560
You have ExpressRoute.

7289
09:30:42,560 --> 09:30:47,760
This helps you create a very fast connection between your on-prem to your VNet.

7290
09:30:48,040 --> 09:30:48,880
Then you have virtual WAN.

7291
09:30:48,880 --> 09:30:52,960
This is a centralized network to route different network connections.

7292
09:30:53,440 --> 09:30:54,960
Then you have Virtual Network Gateway.

7293
09:30:55,680 --> 09:30:59,200
This is a site-to-site VPN connection between VNets and local networks.

7294
09:30:59,280 --> 09:31:07,120
Then you have your NICs, your network interfaces, and these are virtual network devices to allow VMs to communicate using IP protocols.

7295
09:31:07,280 --> 09:31:11,040
And then you have all your load balancers and other things like that.

7296
09:31:11,200 --> 09:31:17,520
So again, not an exhaustive list, but just shows you that there's a lot you can do with the networking on Azure.

7297
09:31:21,840 --> 09:31:27,760
One interesting concept is VNet peering, and this is where you can connect multiple VNets so they act as one network.

7298
09:31:28,000 --> 09:31:30,200
And there are two types of peering.

7299
09:31:30,200 --> 09:31:32,440
We have regional peering.

7300
09:31:32,440 --> 09:31:35,440
This is when you peer 2 VNets from the same region.

7301
09:31:35,600 --> 09:31:37,400
And then you have global VNet peering.

7302
09:31:37,400 --> 09:31:40,960
This is when you peer 2 VNets from two different regions.

7303
09:31:45,200 --> 09:31:51,880
Let's take a look at network interfaces, which are software or hardware interfaces between two pieces of equipment or protocol layers in a computer network.

7304
09:31:51,880 --> 09:31:59,480
And so network interface controllers, also known as NICs, that is the actual piece of hardware that connects a computer to a computer network.

7305
09:31:59,480 --> 09:32:08,400
And they go by a bunch of different names, such as network interface card, network adapter, LAN adapter, physical network interface, or even Ethernet interface controller card.

7306
09:32:08,640 --> 09:32:12,560
So if it was back in the 1990s, you definitely would have had one of these in the back of a computer.

7307
09:32:12,760 --> 09:32:15,080
And if you're a gamer today, then you have one.

7308
09:32:15,200 --> 09:32:18,080
because you want that wired connection, so you have a super fast connection.

7309
09:32:18,720 --> 09:32:24,240
And so these cards, or NICs, communicate using the Internet Protocol, also known IP.

7310
09:32:24,400 --> 09:32:32,240
That's going to allow them to communicate on layer 2, the data link layer, and the physical layer of the OSI model.

7311
09:32:32,800 --> 09:32:40,400
And so the way these work in Azure is they're called the Azure Network Interfaces, and they have the same initialism, NIC.

7312
09:32:41,040 --> 09:32:46,400
And so the idea is that you're going to attach a network interface to an Azure VM instance.

7313
09:32:46,400 --> 09:32:52,000
And without one of these, your Azure VM just can't communicate because it's just, imagine not having that card in your computer.

7314
09:32:52,000 --> 09:32:54,160
It would have no way of communicating.

7315
09:32:54,920 --> 09:32:57,760
And the difference here is that they're just virtual network interfaces, right?

7316
09:32:58,400 --> 09:33:04,880
So I'm sure at the data center, Azure has a bunch of these actual cards, but they are abstracted away.

7317
09:33:04,880 --> 09:33:06,720
So you know, you just treat them as virtual.

7318
09:33:07,440 --> 09:33:13,880
And an Azure VM, it has to have at least one NIC, but it can also have multiple NICs if you want.

7319
09:33:13,880 --> 09:33:19,200
And so here's just a nice little graphical representation of a VM that has a NIC attached to it.

7320
09:33:19,200 --> 09:33:19,840
So there you go.

7321
09:33:24,360 --> 09:33:26,520
Let's take a look here at network routes and route tables.

7322
09:33:26,520 --> 09:33:31,680
And so a route table is a table of data stored in a router or network host that lists routes to next destinations.

7323
09:33:32,000 --> 09:33:34,880
And the way I like to think of it is routes are the roads to the virtual network.

7324
09:33:34,880 --> 09:33:37,520
Without them, your data is just not going to go anywhere.

7325
09:33:38,160 --> 09:33:42,080
One thing that confused me is because I'm used to using AWS.

7326
09:33:42,800 --> 09:33:47,800
And when I used Azure, I launched a virtual machine and it was reaching the internet, but I couldn't find a route table for it.

7327
09:33:47,800 --> 09:33:48,480
So I was confused.

7328
09:33:48,480 --> 09:33:50,640
How does it know how to reach the internet?

7329
09:33:50,640 --> 09:33:51,600
You need a route table.

7330
09:33:51,840 --> 09:33:57,360
And the reason why it was doing that is because Azure has some system default routes.

7331
09:33:57,840 --> 09:34:17,120
And they already had a route to the internet for me that was already associated with my subnet, and so the thing is that there is actually a service called Route Tables, and you can type it up in the top of your Azure portal there, but I couldn't find like this route table that was managed by Azure, and the reason why is that they just hide it from you.

7332
09:34:18,000 --> 09:34:20,160
And so they have these default routes for you.

7333
09:34:20,160 --> 09:34:28,160
So they have one to your virtual network, one to the internet, and then there's just some RFC ones here for very specific use.

7334
09:34:28,880 --> 09:34:30,720
And these are not all the default routes.

7335
09:34:30,720 --> 09:34:31,760
There's a few other ones.

7336
09:34:31,760 --> 09:34:40,960
They don't really matter for us to know, but if you turn on some specific networking services, there's a few other ones that would be applied.

7337
09:34:41,680 --> 09:34:44,080
So let's talk about applying our own routes.

7338
09:34:44,680 --> 09:34:47,440
And so the idea here is those are called user-defined routes.

7339
09:34:47,680 --> 09:34:52,080
So you could just create a route table and then assign it to an actual subnet.

7340
09:34:52,400 --> 09:35:00,800
And so one thing you need to know is that a route table can be assigned to multiple subnets, but a subnet can also have just one user-defined route table.

7341
09:35:01,040 --> 09:35:06,640
And so the idea here is that if you want to override existing routes, you just create a route.

7342
09:35:07,760 --> 09:35:10,240
and it would just override the default one.

7343
09:35:10,400 --> 09:35:10,800
All right?

7344
09:35:10,840 --> 09:35:18,960
And so a good example of this would be, let's say you wanted to make sure that no internet could reach your subnet, like you're making a private subnet.

7345
09:35:19,120 --> 09:35:23,600
So what you'd have to do is you'd have to override that route to the internet and set the hop to none.

7346
09:35:23,600 --> 09:35:29,440
So over here on the right-hand side, I'm just going to call my route no internet, give it the same address prefix, and then say none.

7347
09:35:29,440 --> 09:35:31,280
And so that will override the original one.

7348
09:35:32,000 --> 09:35:33,360
I'm talking about hops for a moment.

7349
09:35:34,400 --> 09:35:35,760
There's a few different options here.

7350
09:35:35,840 --> 09:35:37,520
And again, a hop just says where to go.

7351
09:35:38,320 --> 09:35:42,960
So you have a few there, virtual network gateway, virtual network internet, virtual appliance, or none.

7352
09:35:43,160 --> 09:35:45,160
And those are pretty straightforward.

7353
09:35:45,160 --> 09:35:47,920
The only one that needs a little bit of clarity is virtual appliance.

7354
09:35:48,160 --> 09:35:51,920
So virtual appliance is just a virtual machine that runs a network application.

7355
09:35:52,080 --> 09:35:55,040
So an example of a network application could just be a firewall.

7356
09:35:55,320 --> 09:35:59,920
And in this hop type, you're going to have to provide that private IP address to that virtual machine.

7357
09:36:00,000 --> 09:36:00,640
So there you go.

7358
09:36:05,360 --> 09:36:07,280
Let's take a look here at address spaces.

7359
09:36:07,280 --> 09:36:14,080
And so an address space is a range of available IP addresses that you're allocating for use within your virtual network.

7360
09:36:14,080 --> 09:36:18,560
And so the amount of IP addresses available is determined based on the CIDR range notation.

7361
09:36:18,560 --> 09:36:22,080
So that's where you see an IP address followed by a forward slash enter number.

7362
09:36:22,560 --> 09:36:24,760
And that forward slash number thing is called a CIDR block.

7363
09:36:24,760 --> 09:36:27,600
And this is going to allocate the amount of addresses.

7364
09:36:27,600 --> 09:36:32,160
So a forward slash 24 is 256 and a forward slash 27 is 32.

7365
09:36:32,160 --> 09:36:33,400
This all has to do with binary map.

7366
09:36:34,520 --> 09:36:43,760
And so, if you only had a address space of 4/32, that would actually equal a single IP address.

7367
09:36:44,080 --> 09:36:48,880
I know that doesn't make a lot of sense, but we'd have to show you a little bit more to make sense of it, but we'll get into that later.

7368
09:36:49,280 --> 09:36:53,840
So here is an example of a couple address spaces, and this is actually in the same virtual network.

7369
09:36:54,040 --> 09:37:03,680
And to me, that's amazing because I'm used to using AWS, and over there, when you define a VPC, which is the equivalent of a VNet in Azure, you actually only get one address space.

7370
09:37:03,680 --> 09:37:10,160
But in Azure, you can define as many as you want, at least I think it's as many as you want, in a VNet.

7371
09:37:10,160 --> 09:37:12,880
So you can see there we have a 10.0.0.0.0.

7372
09:37:13,520 --> 09:37:17,520
In a 1921680, totally different address spaces.

7373
09:37:18,480 --> 09:37:20,960
The only one thing is that they obviously can't overlap.

7374
09:37:21,680 --> 09:37:28,800
And the other thing is that even though it says there's 256 address count there, that's not the actual available IP addresses because...

7375
09:37:29,520 --> 09:37:32,880
There's going to be always be some reserved IP addresses, and there's exactly 5.

7376
09:37:32,880 --> 09:37:35,360
So the first one is the network address.

7377
09:37:35,360 --> 09:37:38,960
The next one is reserved for the Azure, for Azure for default gateway.

7378
09:37:39,200 --> 09:37:43,160
Then you have a two and three, and this is for Azure DNS IPs and VNet space.

7379
09:37:43,160 --> 09:37:47,680
And then the last one in the range is going to be for network broadcast address.

7380
09:37:48,160 --> 09:37:50,240
So it's not always going to be 255.

7381
09:37:50,240 --> 09:37:51,680
It's whatever the address range is.

7382
09:37:51,680 --> 09:37:54,960
So if it ends at 128, then the last, then it's 128.

7383
09:37:55,680 --> 09:37:56,240
So there you go.

7384
09:38:00,800 --> 09:38:01,960
Let's take a look at subnets.

7385
09:38:01,960 --> 09:38:04,840
And A subnet is a logical division of an address space.

7386
09:38:04,840 --> 09:38:08,160
So we just looked at address spaces, so we're cutting it up one step further.

7387
09:38:08,400 --> 09:38:15,040
And subnets help you define different kinds of workloads and allows you to apply virtual isolation within your network.

7388
09:38:15,200 --> 09:38:23,200
So when you launch an Azure resource, you choose the subnet you want to launch within, and an IP from that subnet is assigned to your resource.

7389
09:38:23,520 --> 09:38:25,360
So the thing is that

7390
09:38:26,040 --> 09:38:39,120
When you create route tables, that's how you are associating the subnet, so it can access the internet or access anything, and then there's public and private subnets, but this thing is interesting because, again, if you're using AWS...

7391
09:38:39,760 --> 09:38:45,920
Those are very clearly defined things, but in Azure, they don't have this concept of public and private.

7392
09:38:45,920 --> 09:38:47,520
You have to define it yourself.

7393
09:38:47,520 --> 09:38:52,240
So really a public or private subnet is just a subnet that doesn't have access to the internet.

7394
09:38:52,520 --> 09:39:02,880
And so we saw that when we had the route table and we overrode the access to the internet to none, that essentially made it a private subnet.

7395
09:39:03,760 --> 09:39:07,040
Another thing you can do with subnets is you can associate a network security group.

7396
09:39:07,040 --> 09:39:10,960
And this is going to help protect your traffic entering and leaving the subnet.

7397
09:39:11,120 --> 09:39:14,240
So you're making rules based on the IP address, port, and protocol.

7398
09:39:14,840 --> 09:39:17,360
And then there's a special thing called a gateway subnet.

7399
09:39:17,360 --> 09:39:19,160
So it's a specialized.

7400
09:39:19,520 --> 09:39:25,360
Type of subnet, and it's just for Azure Virtual Network Gateways, and so it's interesting.

7401
09:39:25,360 --> 09:39:29,600
You'll go in and there'll be a separate section just for it, and so you'll create it.

7402
09:39:29,680 --> 09:39:31,200
It's just for that service.

7403
09:39:36,080 --> 09:39:43,800
So Azure Private Links allows you to establish secure connections between Azure resources, so traffic remains within your Azure network.

7404
09:39:43,800 --> 09:39:45,520
And so I got this big old graphic here.

7405
09:39:46,080 --> 09:39:47,840
And so let's just define a few things.

7406
09:39:47,840 --> 09:39:49,120
I'm going to pull out my pen here.

7407
09:39:49,400 --> 09:39:57,680
And so imagine you have workloads on your on-prem, or you have your own virtual network on Azure, and so you have some VMs doing some stuff.

7408
09:39:57,920 --> 09:40:01,840
And the idea is that you want to connect them to some other services over here.

7409
09:40:02,640 --> 09:40:03,760
But the thing is that

7410
09:40:04,160 --> 09:40:07,440
If you wanted to connect them, they might try to transverse the internet.

7411
09:40:07,440 --> 09:40:11,120
So if you're on-prem, it's going out here, it's going over here.

7412
09:40:11,360 --> 09:40:16,560
And so the issue with this is that it's not necessarily secure.

7413
09:40:17,160 --> 09:40:28,640
Another issue could be, you know, it's just faster if it was to stay within the actual network, because if you're already connected, you know, your stuff over here, then why wouldn't it just go through?

7414
09:40:29,040 --> 09:40:39,040
The actual network, another thing is like data transfer cost, so it's always going out the internet and coming back in, and that's not a great scenario, so I'm just going to erase all that stuff there.

7415
09:40:40,080 --> 09:40:46,000
The idea with PrivateLink is that it's just keeping everything within the Azure network, and so that's what it's doing.

7416
09:40:46,000 --> 09:40:48,640
So, if you want to...

7417
09:40:50,720 --> 09:41:05,040
connect your workloads in your VNet or your on-prem that connects to a specific VNet, the idea is that you can launch a PrivateLink endpoint, which is a network interface, and this is what's establishing that connection, and you're going to have to give that private endpoint a private IP address from your VNet.

7418
09:41:05,640 --> 09:41:08,640
And so then the idea is that on the right-hand side, that's what you want to connect to.

7419
09:41:08,640 --> 09:41:13,600
There's a lot of Azure services by default works with PrivateLink, so there's no additional configuration.

7420
09:41:13,600 --> 09:41:16,800
You'll just be able to say use PrivateLink, and they will.

7421
09:41:17,440 --> 09:41:19,440
Same thing with some third-party providers.

7422
09:41:19,680 --> 09:41:20,720
in the marketplace.

7423
09:41:20,880 --> 09:41:22,480
They might be powered by PrivateLink.

7424
09:41:22,920 --> 09:41:27,760
And then there's a third case where let's say you have like a private subnet and you have some VMs there.

7425
09:41:28,400 --> 09:41:36,880
So what you could do is if you have a load balancer and you need to have an internal load balancer there, you can launch the PrivateLink service.

7426
09:41:36,880 --> 09:41:45,280
And this is going to basically make your workload in that VNet become compatible or powered by PrivateLink.

7427
09:41:45,280 --> 09:41:46,000
So there you go.

7428
09:41:51,200 --> 09:41:58,120
So Azure Express Routes creates private connections between Azure data centers and infrastructure on your premises or in co-location environments.

7429
09:41:58,120 --> 09:42:06,320
And so connections don't go over the public internet and as a result offer more reliability, faster speeds, consistent latencies, and higher security.

7430
09:42:06,480 --> 09:42:09,760
So here's a big old graphic here kind of representing what's going on here.

7431
09:42:10,080 --> 09:42:15,200
And the idea is that you're going to have connectivity from different things like from any to any.

7432
09:42:15,200 --> 09:42:19,120
So that's IPVPN network, a point-to-point Ethernet network,

7433
09:42:19,600 --> 09:42:20,600
virtual cross connection.

7434
09:42:20,600 --> 09:42:25,280
And this is all going to be going through a connectivity provider at a co-location facility.

7435
09:42:25,280 --> 09:42:28,320
So this example would be an edge partner.

7436
09:42:28,960 --> 09:42:30,680
And so you would be the customer network.

7437
09:42:30,680 --> 09:42:36,960
That'd be your on-premise or whatever you want to connect so that you can make it all the way to your Azure services.

7438
09:42:37,280 --> 09:42:41,120
And the way you would establish connection is you create these express route circuits.

7439
09:42:41,640 --> 09:42:47,280
It's pretty common to have more than one because you want to have high availability just in case the other one goes out.

7440
09:42:47,840 --> 09:42:51,680
The idea is that you can route this traffic to a couple different places.

7441
09:42:51,680 --> 09:43:00,000
So the first one would be things like peering to Office 365, Dynamics 365, or even your Azure public services.

7442
09:43:00,000 --> 09:43:09,040
So when we say public services, imagine you just launch a virtual machine that is in a public subnet that has an IP that's reachable from the internet.

7443
09:43:09,520 --> 09:43:11,200
That could just be to that.

7444
09:43:11,520 --> 09:43:16,320
Or maybe you're using like Cosmos DB or like you have fully qualified domains for other services.

7445
09:43:16,960 --> 09:43:18,240
So it's just a way that you can get there.

7446
09:43:18,240 --> 09:43:24,400
And then let's talk about the other side, which is doing private peering for VNet.

7447
09:43:24,400 --> 09:43:28,160
So the idea is that you have a private VNet, so the subnets are private.

7448
09:43:28,520 --> 09:43:32,160
And so the only way is going to be access it, you want a direct way to access it that way.

7449
09:43:32,160 --> 09:43:34,320
So that's the two ways there.

7450
09:43:34,880 --> 09:43:37,680
And just to note, there is ExpressRoute Direct.

7451
09:43:38,000 --> 09:43:46,760
And so this is like ExpressRoute with an additional benefit that has greater bandwidth connections from 50 megabytes per second up to 10

7452
09:43:46,840 --> 09:44:02,000
Ten gigabytes per second, and this is really ideal if you have hybrid solutions where you're moving massive amounts of data or where latency matters because you want to feel like these cloud services are right there with your on-premise environment, and you're going to need a lot of speed for that.

7453
09:44:07,040 --> 09:44:18,160
Azure Firewall is a managed cloud-based network security service that protects Azure VNet's resources, and it's a fully stateful firewall as a service, so you're going to get built-in high availability and unrestricted cloud scalability.

7454
09:44:18,720 --> 09:44:24,000
And what you can do is essentially create, enforce, and log application network connectivity policies.

7455
09:44:24,640 --> 09:44:41,320
Across subscription and virtual networks, so Azure Firewall uses a static public IP address for your VNet resources, allowing outside firewalls to identify originating from your virtual network, and the service is fully integrated with Azure Monitor for logging and analytics.

7456
09:44:41,320 --> 09:44:43,440
So, here is a representation.

7457
09:44:43,960 --> 09:44:45,080
of Azure Firewall.

7458
09:44:45,080 --> 09:44:56,320
And so the idea is that you're going to launch an Azure Firewall into its own VNet, and then other VNets and your on-premise or other things are going to pass through that central VNet onto wherever they want to go.

7459
09:44:56,640 --> 09:45:02,760
And the idea is that we're going to be able to do things like utilize Microsoft Threat Intelligence.

7460
09:45:02,760 --> 09:45:06,400
This is going to block known malicious IPs and FQDNS.

7461
09:45:06,560 --> 09:45:08,880
That stands for Fully Qualified Domain Names.

7462
09:45:09,280 --> 09:45:13,440
And by default, the traffic is set to deny, but you can set

7463
09:45:14,480 --> 09:45:20,800
connectivity policies to filter out traffic in a variety of ways to make sure that you are protected there.

7464
09:45:20,800 --> 09:45:22,400
So yeah, that's all there is to it.

7465
09:45:26,720 --> 09:45:33,760
Taking a quick look here at Azure Network Watcher, which provides tools to monitor, diagnose, and view network metrics.

7466
09:45:34,000 --> 09:45:37,840
It also enables or disables logs for resources in your Azure virtual network.

7467
09:45:38,080 --> 09:45:42,560
And there's a few things you can access from this service, like IP flow verify checks.

7468
09:45:42,960 --> 09:45:51,760
packet capture, troubleshooting VPNs and NSGs, NSG flow logs, diagnostic logs, traffic analytics, network performance monitor, and a bunch of other stuff.

7469
09:45:52,080 --> 09:46:11,040
And so Network Watcher can monitor and repair Azure resources you provision, such as virtual machines, virtual networks, application gateways, load balancers, but it's not really designed to monitor fully managed services because Azure already takes care of that stuff for you, so like monitoring or web analytics kind of stuff.

7470
09:46:12,840 --> 09:46:15,360
And another thing is that it's disabled by default.

7471
09:46:15,520 --> 09:46:18,880
I think that it's disabled except for a few key regions.

7472
09:46:18,880 --> 09:46:23,320
I don't remember because whoever set up our Azure account might have turned on a couple things.

7473
09:46:23,320 --> 09:46:24,800
So now I believe that.

7474
09:46:25,280 --> 09:46:27,280
Some of the default ones might be turned on for you.

7475
09:46:27,440 --> 09:46:36,240
But the point is that if you want to utilize this in different regions, you're likely going to have to enable it because it's disabled by default at a per region level.

7476
09:46:36,720 --> 09:46:39,760
One other thing I just want to show you is the topology feature in it.

7477
09:46:40,080 --> 09:46:44,000
So if you look there, we have a topology and we have this nice graphic.

7478
09:46:44,000 --> 09:46:47,280
And what it does is it visualizes the topology of our V-Nets.

7479
09:46:47,800 --> 09:46:51,920
And so you can download that as an SVG, so you can use it in presentations and documentation.

7480
09:46:52,160 --> 09:46:57,600
And you can click through on any of those elements so that you can do a bit more of an investigation or stuff like that.

7481
09:46:59,280 --> 09:46:59,840
It's cool.

7482
09:47:00,320 --> 09:47:05,040
I don't have much utility for it myself, but I just thought it was cool that Azure had that.

7483
09:47:09,600 --> 09:47:19,040
So Network Performance Monitor is a cloud-based hybrid networking monitoring solution that helps you monitor network performance between various points in your network infrastructure.

7484
09:47:19,320 --> 09:47:28,240
And it also helps you to monitor network connectivity to services and application endpoints and monitor the performance of Azure Express routes.

7485
09:47:29,000 --> 09:47:31,440
And so the idea here is that you're going to be using this.

7486
09:47:32,000 --> 09:47:36,240
If you want to use Network Performance Monitor, you're going to have to create yourselves an NPM resource.

7487
09:47:36,480 --> 09:47:41,280
And the way you do that is you're going to actually have to create a log analytics workspace.

7488
09:47:41,760 --> 09:47:47,120
And so this solution can generate alerts and notify you when a threshold is breached for a network link.

7489
09:47:47,120 --> 09:47:54,480
It also ensures timely detection of network performance issues and localizes the source of the problem to a particular network segment or device.

7490
09:47:55,280 --> 09:48:05,280
The Network Performance Monitor detects issues such as traffic blackholing, routing errors, and unconventional network issues.

7491
09:48:05,440 --> 09:48:10,880
And this service is found within the Network Watcher, so it used to be somewhere else.

7492
09:48:10,880 --> 09:48:15,040
And now when you want to access it, you just go to Network Watcher and it's all consolidated under there.

7493
09:48:15,040 --> 09:48:15,520
So there you go.

7494
09:48:20,000 --> 09:48:26,320
Hey, this is Andrew Brown from Exam Pro, and we are going to be looking at Azure Firewall, which is great for protecting your virtual networks.

7495
09:48:26,480 --> 09:48:33,920
So what we'll do is launch an instance, and then we will use Firewall to protect it, and then we'll connect through the Firewall to our server there.

7496
09:48:34,080 --> 09:48:36,600
So what I want you to do is make your way over to virtual machines.

7497
09:48:36,600 --> 09:48:39,680
This will also set up the virtual network that we will need.

7498
09:48:40,040 --> 09:48:42,240
So I'm going to go here and add a new machine.

7499
09:48:42,960 --> 09:48:44,320
I'm going to make a new resource group.

7500
09:48:44,560 --> 09:48:46,960
This one I'm going to call Cardassia.

7501
09:48:49,040 --> 09:48:52,080
And what I will do here is name this Cardassia Prime.

7502
09:48:54,880 --> 09:48:56,920
And this is in Canada East.

7503
09:48:56,920 --> 09:48:57,880
I think that's totally fine.

7504
09:48:57,880 --> 09:48:59,200
If we're going to do that, let's do that.

7505
09:48:59,200 --> 09:49:02,880
We'll probably want to use a Windows Server 2019 to get there.

7506
09:49:02,880 --> 09:49:04,720
Go to Windows Server, choose Gen.

7507
09:49:04,720 --> 09:49:05,120
2.

7508
09:49:05,840 --> 09:49:09,520
For this, we'll have to choose something like a D2v3.

7509
09:49:09,520 --> 09:49:12,520
That's what I find the most cost effective because you have to have at least

7510
09:49:13,120 --> 09:49:16,920
two CPU vCPUs and four gigabytes to run that.

7511
09:49:16,920 --> 09:49:19,000
So that's probably the most cost effective I can find.

7512
09:49:19,000 --> 09:49:24,160
We're going to type in Azure user here, testing 123456 with a capital T.

7513
09:49:25,200 --> 09:49:25,360
Okay.

7514
09:49:27,120 --> 09:49:30,840
Scroll on down here and everything else should be fine.

7515
09:49:30,840 --> 09:49:32,800
So we'll go ahead and hit review and create.

7516
09:49:37,440 --> 09:49:38,720
And then we'll go ahead and create.

7517
09:49:43,200 --> 09:49:44,880
Now we're going to want that firewall.

7518
09:49:44,880 --> 09:49:48,560
So what we're going to do is make our way back to our resource group.

7519
09:49:49,360 --> 09:49:56,880
So if we click here and we go into overview, it should show us that virtual network.

7520
09:50:00,800 --> 09:50:01,920
I guess it's still creating it.

7521
09:50:01,920 --> 09:50:04,160
So we're just going to have to wait here a little bit for that.

7522
09:50:05,040 --> 09:50:07,920
Usually, it's pretty darn fast, so I'm surprised the VNet is not there.

7523
09:50:07,920 --> 09:50:11,200
If it's not there, we'll take a look over here into virtual networks.

7524
09:50:14,560 --> 09:50:20,560
There we go, and so we could go and go to firewall and create it that way, but I find it a lot easier.

7525
09:50:20,800 --> 09:50:22,480
I'm just going to show you if I go over here.

7526
09:50:25,600 --> 09:50:33,520
You can create it here, but I find that it's a lot easier to create it from the blade because then it'll put it in the same resource group and fill in some of the things for us under the virtual network.

7527
09:50:33,760 --> 09:50:40,080
So on the left-hand side, we'll go to firewall, click here, and it's going to pre-populate some stuff for us, as you can see.

7528
09:50:41,520 --> 09:50:47,200
And so what we'll do is name this, you know, Space Defense.

7529
09:50:49,040 --> 09:50:50,480
And we'll stick with standard.

7530
09:50:50,480 --> 09:50:51,680
You also got premium.

7531
09:50:51,680 --> 09:50:53,200
There is a difference in price there.

7532
09:50:53,200 --> 09:50:54,000
I'm not really sure.

7533
09:50:54,240 --> 09:50:55,000
There's a

7534
09:50:55,680 --> 09:50:59,680
firewall policies and classic rules, I'm going to stick with classic rules for the time being.

7535
09:51:00,080 --> 09:51:10,320
I'm not sure if they'll really show you on the exam, whether it's going to be policy and rules, but you just generally have to know how to set up a firewall here, we need the virtual network name, I really thought this would have filled it in.

7536
09:51:11,200 --> 09:51:14,560
And so what I'll have to do is just make open a new tab here.

7537
09:51:16,800 --> 09:51:18,240
And it's called Cardassia v net.

7538
09:51:22,240 --> 09:51:25,840
This is already a resource with the same name and type with the current resource group.

7539
09:51:27,840 --> 09:51:28,960
Oh, sorry, use an existing one.

7540
09:51:28,960 --> 09:51:29,680
That's my problem.

7541
09:51:29,680 --> 09:51:30,800
I thought I had to fill it in.

7542
09:51:31,120 --> 09:51:33,120
I'm being silly here, so we'll just hit next there.

7543
09:51:34,160 --> 09:51:36,640
Must have a subnet named Azure Firewall Subnet.

7544
09:51:36,640 --> 09:51:37,680
That's totally fine.

7545
09:51:37,680 --> 09:51:42,880
So what we'll do is just right click up here and make our way back to our VNet.

7546
09:51:44,480 --> 09:51:46,000
And we will go to subnets.

7547
09:51:46,720 --> 09:51:48,560
And we have subnet gateway subnet.

7548
09:51:48,560 --> 09:51:50,080
We just want a regular one here.

7549
09:51:50,640 --> 09:51:53,360
And what we'll do is grab this name here.

7550
09:51:53,360 --> 09:51:54,560
Whoops, won't let us do that.

7551
09:51:55,360 --> 09:52:00,720
Azure Firewall Subnet.

7552
09:52:02,720 --> 09:52:04,720
And hopefully it'll tell us more what we need to do there.

7553
09:52:04,720 --> 09:52:09,040
So we need to fill in more stuff here.

7554
09:52:09,360 --> 09:52:14,000
This is 10.0020 forward slash 24 as our default.

7555
09:52:14,000 --> 09:52:19,040
So I'm just going to try 10.0.03.0 forward slash 24.

7556
09:52:21,600 --> 09:52:23,600
is not contained in this virtual network space.

7557
09:52:24,560 --> 09:52:27,400
I hate, I hate networking.

7558
09:52:27,400 --> 09:52:28,880
I've done tons of stuff on this stuff.

7559
09:52:29,440 --> 09:52:31,120
Maybe I have to set up the address space first.

7560
09:52:31,120 --> 09:52:32,080
So we'll go over here.

7561
09:52:32,560 --> 09:52:33,520
Yeah, we don't have one yet.

7562
09:52:33,520 --> 09:52:37,280
So we'll go 10.0.3.0 forward slash 24.

7563
09:52:38,480 --> 09:52:39,680
And we'll say, okay.

7564
09:52:40,640 --> 09:52:42,800
And then we'll make our way over back to that subnet.

7565
09:52:42,800 --> 09:52:44,160
I think that's what it wanted first.

7566
09:52:46,320 --> 09:52:48,160
At this point, I don't remember anything.

7567
09:52:48,480 --> 09:52:49,600
It's all muscle memory, right?

7568
09:52:49,600 --> 09:52:50,800
So I just know what to type.

7569
09:52:51,760 --> 09:52:54,080
Azure firewall subnet.

7570
09:52:55,120 --> 09:53:00,120
And we want the range three.

7571
09:53:00,120 --> 09:53:02,800
Yeah, we just defined it, so it auto-filled it in for that.

7572
09:53:02,800 --> 09:53:03,440
is good.

7573
09:53:04,320 --> 09:53:07,920
I don't know if we need to set really any of these other things, like network security group and stuff like that.

7574
09:53:07,920 --> 09:53:09,360
So I'm going to go ahead and save that.

7575
09:53:13,840 --> 09:53:16,080
And I'm going to make my way back on over here.

7576
09:53:18,480 --> 09:53:20,080
And we will choose the Cardassia.

7577
09:53:20,320 --> 09:53:21,520
Oh, we can't use that IP address.

7578
09:53:22,800 --> 09:53:24,000
I guess we will add a new one.

7579
09:53:24,000 --> 09:53:24,640
Hold on here.

7580
09:53:26,960 --> 09:53:29,360
We'll just back out here because it's quite messed up.

7581
09:53:30,480 --> 09:53:32,640
And we will go ahead and try this again.

7582
09:53:33,440 --> 09:53:40,640
So Cardassia, space defense, second to standard, we'll go with rules.

7583
09:53:41,040 --> 09:53:42,800
We'll use an existing virtual network.

7584
09:53:42,800 --> 09:53:44,000
So we'll drop this down.

7585
09:53:45,360 --> 09:53:49,840
And it doesn't want to show me anything today.

7586
09:53:49,920 --> 09:53:51,000
Oh, it's in the wrong region.

7587
09:53:51,000 --> 09:53:52,720
I don't know why it's doing that.

7588
09:53:52,960 --> 09:53:55,440
So I think it's in Canada East.

7589
09:53:56,520 --> 09:53:57,520
And we'll go back here.

7590
09:53:57,520 --> 09:53:58,320
Cardassia.

7591
09:53:59,040 --> 09:54:00,640
We're going to need a new IP address.

7592
09:54:02,080 --> 09:54:03,440
Firewall IP.

7593
09:54:07,680 --> 09:54:08,720
Go ahead and hit OK.

7594
09:54:10,000 --> 09:54:11,040
Force tunneling.

7595
09:54:11,040 --> 09:54:13,920
Force tunneling to create an additional subnet for firewall managed traffic.

7596
09:54:13,920 --> 09:54:15,480
The subnet will have direct access to the Internet.

7597
09:54:15,480 --> 09:54:17,200
I don't know if we really want that right now.

7598
09:54:18,280 --> 09:54:19,600
We'll go ahead and hit create.

7599
09:54:22,640 --> 09:54:24,400
And we'll just wait here and I'll see you back in a bit.

7600
09:54:24,880 --> 09:54:31,440
So our firewall is deployed, but we're going to actually have to set up a route so that our subnet actually goes through the firewall.

7601
09:54:31,600 --> 09:54:34,560
So what I want you to do is right click on your resource group there.

7602
09:54:35,360 --> 09:54:39,120
And from here we are looking for our

7603
09:54:39,200 --> 09:54:40,080
virtual network.

7604
09:54:40,080 --> 09:54:42,960
We'll open that up into a tab so that we have that as a reference.

7605
09:54:43,240 --> 09:54:49,040
What we're also going to do is open up another one because we need to go into our subnet and into our default one.

7606
09:54:49,040 --> 09:54:50,800
We need to override the route table.

7607
09:54:50,800 --> 09:54:57,680
Now, if you remember from my lecture content, route tables do have default routing, but we are going to explicitly overwrite this with our own logic.

7608
09:54:57,920 --> 09:55:04,960
So what I want you to do is type in route tables at the top here, and we'll add a new route table.

7609
09:55:05,600 --> 09:55:08,240
We, for me, this is going to be in Cardassia.

7610
09:55:08,240 --> 09:55:10,800
So we are in Canada, this one.

7611
09:55:13,520 --> 09:55:17,440
And for the name, we're going to just say firewall route.

7612
09:55:21,200 --> 09:55:25,120
And propagate gateway routes.

7613
09:55:28,400 --> 09:55:29,760
I think that's okay.

7614
09:55:30,400 --> 09:55:31,320
Yeah, we'll leave that on there.

7615
09:55:31,320 --> 09:55:31,760
That's fine.

7616
09:55:34,080 --> 09:55:34,400
Great.

7617
09:55:34,960 --> 09:55:36,560
And so we'll go ahead and create that row table.

7618
09:55:52,960 --> 09:55:56,760
Once that is finished deploying there, we'll go ahead and hit go to your resource.

7619
09:55:56,760 --> 09:56:01,640
And on the left hand side, I want you to make your way over to the routes, oh, sorry, over to the subnets.

7620
09:56:01,640 --> 09:56:04,880
And we're going to go ahead and associate our V net here.

7621
09:56:05,240 --> 09:56:07,120
And we will choose our default.

7622
09:56:08,160 --> 09:56:09,600
And I believe we have to do both.

7623
09:56:09,680 --> 09:56:11,480
So I'll just give that a moment to create.

7624
09:56:11,480 --> 09:56:16,400
And I'm going to go ahead and associate my other one, which is this one here.

7625
09:56:22,240 --> 09:56:23,600
sorry, we don't need to do that just yet.

7626
09:56:24,080 --> 09:56:25,760
But we do need to associate the default there.

7627
09:56:26,000 --> 09:56:28,640
So what I want you to do is make your way back to your subnets here.

7628
09:56:28,960 --> 09:56:30,320
And I'm going to click into this.

7629
09:56:31,360 --> 09:56:33,360
And now we have this firewall route table.

7630
09:56:33,360 --> 09:56:36,080
We didn't select it prior, but we'll go ahead and save that.

7631
09:56:40,920 --> 09:56:44,800
And so now that subnet is saved, we can go ahead and add some routes.

7632
09:56:44,800 --> 09:56:47,080
I'm going to make my way back to my firewall route here.

7633
09:56:47,080 --> 09:56:47,920
I'm going to make a route.

7634
09:56:47,920 --> 09:56:49,040
I'm going to add a route.

7635
09:56:49,600 --> 09:56:52,320
And in here, this is going to be firewall.

7636
09:56:52,320 --> 09:56:53,800
I don't know why I named this firewall route.

7637
09:56:53,800 --> 09:56:59,040
This should be route table, but this will be firewall route route.

7638
09:57:01,040 --> 09:57:04,280
And I'm going to drop this down to virtual appliance.

7639
09:57:04,280 --> 09:57:10,480
This is going to be 0.0.0.0/0 because we want to go to the Internet.

7640
09:57:11,440 --> 09:57:15,440
And under our virtual appliance, we would need to choose the next hop.

7641
09:57:18,480 --> 09:57:22,280
So the next hop address, I think, is the IP address.

7642
09:57:22,280 --> 09:57:27,600
So I think we'd have to go over to the firewall and find it there.

7643
09:57:27,600 --> 09:57:30,240
So this is the firewall.

7644
09:57:31,880 --> 09:57:33,240
It should have a private IP address.

7645
09:57:33,240 --> 09:57:33,760
There it is.

7646
09:57:34,080 --> 09:57:35,200
So I'll copy that there.

7647
09:57:35,520 --> 09:57:37,200
We'll go ahead and paste that on in.

7648
09:57:38,320 --> 09:57:39,200
We'll hit OK.

7649
09:57:45,370 --> 09:57:47,610
And I'll just click off and click back here.

7650
09:57:48,890 --> 09:57:50,570
I'm just going to wait for that rope to show up.

7651
09:57:51,090 --> 09:57:51,690
Let's see here.

7652
09:57:57,680 --> 09:58:03,360
There we go, there it is, and so now all our stuff is hooked up, and so we are ready to set up some rules.

7653
09:58:03,720 --> 09:58:05,200
All right, so let's set up some classic rules.

7654
09:58:05,200 --> 09:58:12,080
I wasn't really sure what to set up here, so I pulled out the trusty docs and I got some good examples for us to go through here.

7655
09:58:12,400 --> 09:58:16,480
So, for an application rule, this would be like if you want to say allow this.

7656
09:58:16,840 --> 09:58:17,920
address through like Google.

7657
09:58:18,080 --> 09:58:21,280
Network would be something like DNS servers.

7658
09:58:21,520 --> 09:58:23,840
And then an app rule is going to allow us to do the RDP.

7659
09:58:23,840 --> 09:58:26,240
So let's go here and set up an application rule first.

7660
09:58:26,560 --> 09:58:28,560
We'll call this the Google Collection rule.

7661
09:58:28,800 --> 09:58:30,280
I'm going to say 200 here.

7662
09:58:30,280 --> 09:58:31,760
We're going to go down to targets.

7663
09:58:31,760 --> 09:58:33,360
I'm going to put allow Google.

7664
09:58:34,640 --> 09:58:36,000
We're going to set the source type.

7665
09:58:36,360 --> 09:58:39,120
And the source is going to be whatever the VNet is for the default here.

7666
09:58:39,120 --> 09:58:42,160
That's 10.0.2 or 10.0.24.

7667
09:58:43,280 --> 09:58:44,480
So 10.0.0

7668
09:58:45,640 --> 09:58:48,240
20 or 4.0 forward slash 24.

7669
09:58:48,320 --> 09:58:52,960
We'll do HTTP, HTTPS, www.google.com.

7670
09:58:54,480 --> 09:58:55,280
So that's that one.

7671
09:58:56,080 --> 09:58:57,240
We'll go to our network rule.

7672
09:58:57,240 --> 09:58:58,320
We'll set this one up next.

7673
09:58:59,200 --> 09:59:00,960
This is for CenturyLink.

7674
09:59:04,280 --> 09:59:06,080
And they have some DNS servers there.

7675
09:59:06,080 --> 09:59:08,160
So that's what we were setting this up for.

7676
09:59:08,160 --> 09:59:12,240
We'll say 200 under the IP addresses, we're going to say allow DNS.

7677
09:59:12,960 --> 09:59:14,880
And the protocol is going to be UDP.

7678
09:59:14,960 --> 09:59:20,000
We'll have the source IP again, 10.0.2.0/24.

7679
09:59:20,320 --> 09:59:23,520
The destination IP, we have them over here.

7680
09:59:23,520 --> 09:59:25,360
I'm just going to copy them on over.

7681
09:59:26,000 --> 09:59:28,800
And then the port is port 53.

7682
09:59:29,080 --> 09:59:30,400
We'll go ahead and hit add.

7683
09:59:31,520 --> 09:59:32,560
Last one here.

7684
09:59:32,560 --> 09:59:34,000
Oh, it didn't like this one.

7685
09:59:34,880 --> 09:59:36,880
Another operation on this is dependent.

7686
09:59:38,680 --> 09:59:39,880
Which one did it fail on?

7687
09:59:39,880 --> 09:59:40,560
I'm not sure.

7688
09:59:43,360 --> 09:59:48,400
It might have not liked the fact that I was doing one or two at the same time, we'll give that a better look here.

7689
09:59:55,720 --> 09:59:56,880
It's not saying why.

7690
10:00:00,720 --> 10:00:04,080
this rule created, we can give this one another go.

7691
10:00:06,160 --> 10:00:07,560
Make sure it's not doing anything else.

7692
10:00:07,560 --> 10:00:07,800
Okay.

7693
10:00:07,800 --> 10:00:11,040
And we'll try this one more time.

7694
10:00:11,040 --> 10:00:15,680
So let's say collection rule, CenturyLink.

7695
10:00:18,360 --> 10:00:26,400
Under here, we'll go here and again, allow DNS 10.0 dot 2.0 forward slash 24.

7696
10:00:27,200 --> 10:00:33,680
we will say, oh, we didn't select it, it's going to be UDP here, the destination IPs, we'll just copy them from here.

7697
10:00:35,280 --> 10:00:40,480
So that is 2092440320922404.

7698
10:00:40,800 --> 10:00:42,720
And we'll put in 53 here.

7699
10:00:44,400 --> 10:00:46,720
And I'm just going to double check to see if I was missing anything.

7700
10:00:46,720 --> 10:00:47,680
I don't think so.

7701
10:00:47,680 --> 10:00:49,200
That's pretty much everything there.

7702
10:00:49,200 --> 10:00:51,280
So we should be able to create that we'll hit Add again.

7703
10:00:52,320 --> 10:00:54,320
Oh, yeah, we'll set 200 up here.

7704
10:00:58,000 --> 10:01:00,200
And we'll see if we have a better chance this time around.

7705
10:01:00,400 --> 10:01:02,080
Again, probably should wait between them.

7706
10:01:02,080 --> 10:01:03,240
But there's just so much to do.

7707
10:01:03,240 --> 10:01:04,320
I like to just get to it.

7708
10:01:04,320 --> 10:01:07,120
I think that's probably what the problem was.

7709
10:01:08,480 --> 10:01:09,600
We'll go over to our NAT rule.

7710
10:01:09,600 --> 10:01:10,640
And we'll take a look here.

7711
10:01:12,320 --> 10:01:17,360
And for this, we will just call this RDP.

7712
10:01:19,840 --> 10:01:21,280
NAT collection rule.

7713
10:01:22,520 --> 10:01:25,520
We'll set the priority as always to 200.

7714
10:01:26,480 --> 10:01:29,760
For the name, we'll just say allow RDP here.

7715
10:01:32,160 --> 10:01:34,640
The protocol is going to be TCP.

7716
10:01:34,960 --> 10:01:38,320
And for this, we'll do 10.0.

7717
10:01:38,560 --> 10:01:45,120
forward slash 2.0 forward slash 24.

7718
10:01:45,600 --> 10:01:50,080
For the destination address, that's going to be the public IP address for the firewall.

7719
10:01:50,320 --> 10:01:51,360
So

7720
10:01:52,680 --> 10:01:56,880
We'll have to go over here and then make our way back to our firewall.

7721
10:01:56,960 --> 10:01:58,080
So we'll just type in here.

7722
10:02:04,340 --> 10:02:05,380
And we'll click into here.

7723
10:02:06,340 --> 10:02:08,420
We'll go grab our public IP address.

7724
10:02:09,540 --> 10:02:10,580
Click into here to get it.

7725
10:02:11,620 --> 10:02:12,420
There it is.

7726
10:02:13,940 --> 10:02:19,820
And we will paste that in as the destination for the port is 3389.

7727
10:02:19,820 --> 10:02:20,740
That's for RDP.

7728
10:02:22,980 --> 10:02:24,820
For the translated address,

7729
10:02:26,400 --> 10:02:29,120
We need the private IP address for...

7730
10:02:30,720 --> 10:02:31,520
I'm not sure.

7731
10:02:31,520 --> 10:02:32,400
Let me see here.

7732
10:02:32,400 --> 10:02:38,480
Oh, that's going to be our virtual machine.

7733
10:02:38,480 --> 10:02:39,600
That's probably what it is, right?

7734
10:02:40,000 --> 10:02:41,440
So I just thought about that.

7735
10:02:41,440 --> 10:02:44,080
It makes sense because, you know, what else would it be?

7736
10:02:44,480 --> 10:02:46,160
So we'll go over to our virtual networks.

7737
10:02:46,160 --> 10:02:48,000
Actually, we'll just go over to our virtual machines.

7738
10:02:50,960 --> 10:02:52,560
And we will click into here.

7739
10:02:53,280 --> 10:02:56,640
And I would imagine that we'd need the public IP address, right?

7740
10:02:56,640 --> 10:02:57,680
No, probably the private.

7741
10:02:57,680 --> 10:02:58,160
Sorry.

7742
10:02:59,000 --> 10:03:00,400
I keep on changing my mind here.

7743
10:03:00,400 --> 10:03:01,360
It is...

7744
10:03:01,920 --> 10:03:02,640
Where is it?

7745
10:03:03,120 --> 10:03:03,480
There it is.

7746
10:03:03,480 --> 10:03:05,280
Because it'd be under private network.

7747
10:03:05,280 --> 10:03:06,560
You wouldn't be connecting to it publicly.

7748
10:03:06,560 --> 10:03:07,600
That wouldn't make any sense.

7749
10:03:08,080 --> 10:03:11,120
And probably the port would be the same.

7750
10:03:11,120 --> 10:03:11,920
Yeah, it's the same.

7751
10:03:12,880 --> 10:03:13,440
There we go.

7752
10:03:15,040 --> 10:03:16,480
And if that looks all good, we'll hit...

7753
10:03:17,840 --> 10:03:18,560
What does it want?

7754
10:03:21,040 --> 10:03:22,320
It's not going to let us take it.

7755
10:03:25,200 --> 10:03:27,840
No, maybe it's because we were creating something at the same time.

7756
10:03:27,840 --> 10:03:29,200
Let's go see if our NAT rules is there.

7757
10:03:29,200 --> 10:03:29,760
Okay, great.

7758
10:03:29,760 --> 10:03:30,800
So we'll give it a refresh.

7759
10:03:31,760 --> 10:03:32,320
I don't trust it.

7760
10:03:32,320 --> 10:03:33,800
I'm going to give it a hard refresh.

7761
10:03:33,800 --> 10:03:36,320
And we'll try this one more time.

7762
10:03:36,400 --> 10:03:37,840
So we'll go back to our NAT rule.

7763
10:03:39,040 --> 10:03:39,840
RDP.

7764
10:03:42,560 --> 10:03:43,120
NAT.

7765
10:03:46,400 --> 10:03:47,280
200.

7766
10:03:49,600 --> 10:03:50,720
Allow RDP.

7767
10:03:50,720 --> 10:03:53,440
I always thought RDP was UDP, but I guess not.

7768
10:03:53,760 --> 10:03:58,880
10.0.0 forward slash or 2.0 forward slash 24.

7769
10:03:59,280 --> 10:04:02,960
Destination IP is the public IP address of the firewall.

7770
10:04:05,200 --> 10:04:09,120
So we'll go back to our firewall.

7771
10:04:14,240 --> 10:04:15,440
We'll click into here.

7772
10:04:16,720 --> 10:04:17,520
We will click

7773
10:04:18,520 --> 10:04:21,920
into here, and there it is.

7774
10:04:25,120 --> 10:04:26,160
And what is it?

7775
10:04:26,160 --> 10:04:27,680
3389?

7776
10:04:29,840 --> 10:04:38,880
3389, and we need the private IP for our actual virtual machine, which was 10.0.24.

7777
10:04:41,760 --> 10:04:42,320
There we go.

7778
10:04:42,400 --> 10:04:44,320
And it still won't let us hit add.

7779
10:04:44,320 --> 10:04:44,880
Why not?

7780
10:04:47,760 --> 10:04:49,840
Oh, it doesn't like the translated address.

7781
10:04:52,400 --> 10:04:55,600
One, two, three, four, one, two, three, four.

7782
10:04:55,600 --> 10:04:57,440
I mean, that should be it.

7783
10:05:04,320 --> 10:05:06,000
Okay, we'll double check here.

7784
10:05:08,280 --> 10:05:09,760
I'm just not very confident about this.

7785
10:05:09,760 --> 10:05:11,040
I'm just going to hit refresh here.

7786
10:05:13,360 --> 10:05:14,400
We'll go into this.

7787
10:05:17,760 --> 10:05:19,640
That's the address, so it should just take it.

7788
10:05:19,640 --> 10:05:21,120
I don't know why it's giving it a hard time.

7789
10:05:23,200 --> 10:05:24,320
Is there a space in front of it?

7790
10:05:25,040 --> 10:05:25,760
Oh, there we go.

7791
10:05:25,760 --> 10:05:26,560
That's our problem.

7792
10:05:27,600 --> 10:05:28,960
You think they just truncated for you there.

7793
10:05:28,960 --> 10:05:30,000
So now we can go hit add.

7794
10:05:31,040 --> 10:05:34,880
And so we'll just wait for that rule to finish and then we can go ahead and test a bunch of stuff.

7795
10:05:36,400 --> 10:05:37,680
Okay, so our last rule is there.

7796
10:05:37,680 --> 10:05:38,720
We have all three.

7797
10:05:38,720 --> 10:05:40,000
Now let's go give it a go.

7798
10:05:40,240 --> 10:05:43,800
So what I'm going to do is I'm going to make my way over to our virtual machine.

7799
10:05:43,800 --> 10:05:46,080
I'm just going to close some of these tabs so we can clean up here.

7800
10:05:47,520 --> 10:05:50,000
And so I'm going to go back to our virtual machines here.

7801
10:05:50,000 --> 10:05:51,280
I'm going to click into here.

7802
10:05:51,520 --> 10:05:56,480
And what we're going to do is change our DNS servers for the network device.

7803
10:05:56,800 --> 10:06:01,840
So what I need is to go to probably networking, and there it is, the network interface.

7804
10:06:02,400 --> 10:06:06,000
And then we can go to DNS servers, and we can change this to custom.

7805
10:06:06,000 --> 10:06:09,120
So that's what we were doing earlier when we were doing that CenturyLink stuff.

7806
10:06:09,120 --> 10:06:12,800
So I'm going to just go grab those addresses there.

7807
10:06:12,800 --> 10:06:14,000
So we have

7808
10:06:14,960 --> 10:06:21,440
It was 209-24403, and then 209-24404.

7809
10:06:24,800 --> 10:06:26,320
And we'll go ahead and save that.

7810
10:06:33,940 --> 10:06:36,100
Great, and hopefully that propagates very quickly.

7811
10:06:36,220 --> 10:06:39,380
I'm never really good with DNS servers, so I could not tell you if that's the case.

7812
10:06:40,140 --> 10:06:45,620
But the next thing we'll need to do is actually remote into that desktop there.

7813
10:06:45,620 --> 10:06:47,860
So I'm going to just open up Remote Desktop Connection.

7814
10:06:48,960 --> 10:06:52,360
And what we can do is provide the IP address of what we want to connect to.

7815
10:06:52,360 --> 10:06:54,000
And so we want to connect through the firewall.

7816
10:06:54,000 --> 10:06:54,880
So that's what we're going to do.

7817
10:06:54,880 --> 10:06:56,160
I'm just going to move that off screen.

7818
10:06:56,480 --> 10:06:59,200
I'm going to go grab our firewall IP address.

7819
10:07:06,460 --> 10:07:09,740
And we want to go to firewall here.

7820
10:07:10,780 --> 10:07:12,460
We're going to grab that address there.

7821
10:07:13,180 --> 10:07:14,380
I'm going to paste it on in.

7822
10:07:16,660 --> 10:07:19,500
And I don't know, I mean, we do have a username.

7823
10:07:19,500 --> 10:07:20,580
It's Azure user.

7824
10:07:20,580 --> 10:07:22,860
I don't know if that's what we need to type in here, but we'll see.

7825
10:07:23,840 --> 10:07:26,480
I rarely ever open a remote desktop connection like this.

7826
10:07:26,480 --> 10:07:28,080
Usually I just press a button and it works.

7827
10:07:29,600 --> 10:07:31,440
And we'll see if it lets us connect here.

7828
10:07:39,180 --> 10:07:40,940
Oh, and I guess those DNS settings were still going.

7829
10:07:41,660 --> 10:07:43,740
Remote access to the server is not enabled.

7830
10:07:43,740 --> 10:07:45,020
The remote computer is turned off.

7831
10:07:45,020 --> 10:07:47,100
The remote computer is not available on the network.

7832
10:07:48,580 --> 10:07:50,140
I'm not sure about that.

7833
10:07:51,340 --> 10:07:54,940
But let's just double check our server here, making sure that it's nice and warm and woken up.

7834
10:07:56,460 --> 10:07:58,220
So what I'm going to do is just go

7835
10:07:58,960 --> 10:08:03,200
to my virtual machine here.

7836
10:08:07,600 --> 10:08:12,240
I don't think it has a public IP address, so I shouldn't be able to use it this way, but we'll give it a go anyway for fun.

7837
10:08:14,560 --> 10:08:16,800
I'm expecting it not to work in this regard here.

7838
10:08:23,960 --> 10:08:26,800
and noticing that it can't seem to establish a connection.

7839
10:08:26,800 --> 10:08:28,800
So that's probably, yeah, there we go.

7840
10:08:28,960 --> 10:08:30,120
So that means that's good.

7841
10:08:30,120 --> 10:08:32,560
That means that it has to go through the firewall.

7842
10:08:32,560 --> 10:08:34,480
So we have to just kind of figure that out.

7843
10:08:35,520 --> 10:08:37,360
Why it's not working through the firewall, I don't know.

7844
10:08:37,360 --> 10:08:38,880
So I'll have to do a bit of debugging here.

7845
10:08:39,400 --> 10:08:39,960
All right, I'm back.

7846
10:08:39,960 --> 10:08:40,800
And so I figured it out.

7847
10:08:40,800 --> 10:08:44,800
I just reviewed the rules that I set up and just made sure they made sense.

7848
10:08:44,800 --> 10:08:49,440
And I realized that this here I set as the source to the default subnet.

7849
10:08:49,440 --> 10:08:53,440
That doesn't make any sense because you want the source to be something like anywhere on the internet.

7850
10:08:53,440 --> 10:08:56,880
So all I did is I just put, I just updated this to be an asterisk.

7851
10:08:56,960 --> 10:08:58,600
You could also put your own IP.

7852
10:08:58,600 --> 10:09:00,000
That would probably be more secure.

7853
10:09:00,320 --> 10:09:01,400
I just didn't want to do that.

7854
10:09:01,400 --> 10:09:02,080
I just made it that.

7855
10:09:02,080 --> 10:09:02,960
So just do that.

7856
10:09:02,960 --> 10:09:04,000
Save that.

7857
10:09:05,040 --> 10:09:13,440
With the new asterisk in the source, and so, coming back to our remote desktop connection again, this is the IP's address for the firewall.

7858
10:09:13,840 --> 10:09:20,280
If we want to go find that again, what we're going to do is go up to here, and oh, we already have it here.

7859
10:09:20,280 --> 10:09:25,360
So, if we go to firewalls, click into there, click on the IP address.

7860
10:09:25,600 --> 10:09:28,320
It's that 4086204105.

7861
10:09:28,320 --> 10:09:32,720
So bringing this on over 4086204105.

7862
10:09:33,040 --> 10:09:34,400
And I have the Azure username.

7863
10:09:34,400 --> 10:09:36,600
If you don't see it, hit the show options there.

7864
10:09:36,600 --> 10:09:38,720
If it's on Mac, I do not know what the experience is like.

7865
10:09:39,120 --> 10:09:42,800
We're going to type in testing 123456 capital on the T.

7866
10:09:42,960 --> 10:09:44,080
We'll hit OK.

7867
10:09:44,080 --> 10:09:44,840
We'll say yes.

7868
10:09:44,840 --> 10:09:46,560
And now we should be able to connect to it.

7869
10:09:48,320 --> 10:09:53,200
If we go down to the internet here, the idea was that we wanted to test the google.com.

7870
10:09:53,200 --> 10:09:54,240
So we go Google

7871
10:09:56,000 --> 10:09:56,680
This is blocked.

7872
10:09:56,680 --> 10:09:58,560
What if I give it the www dot.

7873
10:10:00,160 --> 10:10:02,640
So the rule, the firewall is working.

7874
10:10:02,640 --> 10:10:04,320
This is the application rules here.

7875
10:10:04,640 --> 10:10:06,440
I'm not sure I'm gonna be able to easily fix this here.

7876
10:10:06,440 --> 10:10:10,240
But we can give it a go for two seconds to see if we can make any kind of difference.

7877
10:10:12,640 --> 10:10:14,240
We'll go here and edit the rule.

7878
10:10:14,320 --> 10:10:15,840
But I'm pretty sure this is right.

7879
10:10:15,840 --> 10:10:20,960
So we have allow IP address 10 04024.

7880
10:10:20,960 --> 10:10:21,760
Is it a four?

7881
10:10:22,800 --> 10:10:24,400
Why was I read no two before?

7882
10:10:25,520 --> 10:10:26,240
10 02.

7883
10:10:26,240 --> 10:10:27,440
Oh, it's two.

7884
10:10:27,440 --> 10:10:29,040
Okay, maybe that's me again.

7885
10:10:29,040 --> 10:10:32,080
Okay, so we'll go here, we'll just change this to two.

7886
10:10:33,000 --> 10:10:34,880
It's not going to work if you don't set the rules, right.

7887
10:10:35,760 --> 10:10:37,040
We'll go ahead and save that.

7888
10:10:38,720 --> 10:10:39,600
Did I set that one wrong?

7889
10:10:39,600 --> 10:10:40,680
It's wrong as well.

7890
10:10:40,680 --> 10:10:41,760
Let's go take a look here.

7891
10:10:44,080 --> 10:10:44,720
That's two.

7892
10:10:44,800 --> 10:10:46,560
Okay, minor mistakes.

7893
10:10:46,560 --> 10:10:48,320
It's great to learn some debugging here.

7894
10:10:48,720 --> 10:10:50,960
And so we'll give that a little bit of time here.

7895
10:10:51,440 --> 10:10:52,480
And then we'll see if it works.

7896
10:10:54,880 --> 10:10:58,120
Alright, so our firewall there for our application rule has updated.

7897
10:10:58,120 --> 10:11:00,480
We go back here and just give it a double check here.

7898
10:11:01,280 --> 10:11:04,560
I think I have it 10.0.2 now, so that's all correct.

7899
10:11:04,560 --> 10:11:07,040
Let's go see if we can now connect.

7900
10:11:07,040 --> 10:11:09,120
I still have RDP open here.

7901
10:11:09,920 --> 10:11:11,520
I don't know if I have to close and reopen.

7902
10:11:11,520 --> 10:11:13,360
I don't think I would have to, right?

7903
10:11:14,400 --> 10:11:16,160
We'll give it a go here and hit enter.

7904
10:11:17,600 --> 10:11:18,960
Look, and so that's difference.

7905
10:11:18,960 --> 10:11:19,600
That's good.

7906
10:11:19,920 --> 10:11:22,880
Content from the website listed as being blocked by Internet Explorer Enhanced.

7907
10:11:22,880 --> 10:11:23,520
So this

7908
10:11:24,480 --> 10:11:30,240
If I will add it there, I will say add and go back here.

7909
10:11:32,880 --> 10:11:35,120
Oh, boy, gee static.

7910
10:11:35,120 --> 10:11:35,520
Sure.

7911
10:11:36,480 --> 10:11:37,600
So Google works.

7912
10:11:37,600 --> 10:11:38,120
That's perfect.

7913
10:11:38,120 --> 10:11:44,520
And if we go to Microsoft, that's not going to work.

7914
10:11:44,520 --> 10:11:45,120
And that's perfect.

7915
10:11:45,120 --> 10:11:46,040
So that's what we wanted.

7916
10:11:46,040 --> 10:11:49,120
That was everything we wanted to accomplish with this firewall here.

7917
10:11:50,240 --> 10:11:53,280
We didn't look at firewall policies.

7918
10:11:53,520 --> 10:11:54,800
We could try taking a look here.

7919
10:11:54,800 --> 10:11:58,160
I'm not sure what we could see here, but it looks like we can migrate it over.

7920
10:11:58,560 --> 10:12:00,240
So let's just see what happens if we do that.

7921
10:12:02,200 --> 10:12:03,760
Let's say create this policy here.

7922
10:12:08,480 --> 10:12:10,640
And I'm not sure how fast this will be, but I'll see it back here.

7923
10:12:10,640 --> 10:12:12,640
We'll take a look at what the firewall policy looks like.

7924
10:12:44,120 --> 10:12:48,800
Okay, so it looks like our policy is all set or migrated there for our rules.

7925
10:12:48,800 --> 10:12:50,680
Let's go take a look and see what that looks like.

7926
10:12:51,560 --> 10:12:53,960
So it looks like pretty similar.

7927
10:12:53,960 --> 10:12:59,960
So we have our application rules, our network rules, our NAT rules, rule collections, policies.

7928
10:12:59,960 --> 10:13:02,840
It looks a little bit more broad.

7929
10:13:02,840 --> 10:13:06,840
I imagine the other thing is that we might be able to associate these two other things.

7930
10:13:06,840 --> 10:13:07,720
Is that the case?

7931
10:13:08,360 --> 10:13:10,280
If we go over to firewall policies here.

7932
10:13:12,000 --> 10:13:12,720
Yeah, there it is.

7933
10:13:12,720 --> 10:13:17,400
So that seems like it'd probably be a better thing to use than classic rules.

7934
10:13:17,400 --> 10:13:18,480
I'd probably go with that.

7935
10:13:18,880 --> 10:13:20,880
It looks like you can just easily add stuff there.

7936
10:13:20,880 --> 10:13:21,760
So it's not a big deal.

7937
10:13:21,760 --> 10:13:22,800
You get a bunch of extra stuff.

7938
10:13:22,800 --> 10:13:24,880
So yeah, that's firewalls there.

7939
10:13:24,880 --> 10:13:27,600
So we'll just go ahead and tear on down all this stuff here.

7940
10:13:27,880 --> 10:13:30,080
I'll make my way over to Cardassia here.

7941
10:13:30,360 --> 10:13:32,400
We'll go ahead and delete that resource group.

7942
10:13:33,120 --> 10:13:34,080
And we will delete.

7943
10:13:34,960 --> 10:13:37,360
And that should get everything.

7944
10:13:37,360 --> 10:13:37,920
That's good.

7945
10:13:37,920 --> 10:13:38,560
So there you go.

7946
10:13:43,440 --> 10:13:48,320
Hey, this is Andrew Brown from Exam Pro, and we are going to be looking at virtual network peering.

7947
10:13:48,880 --> 10:13:51,240
And so there are two types of network peering.

7948
10:13:51,240 --> 10:13:53,560
We have local and global.

7949
10:13:53,560 --> 10:14:00,560
Local is where you are peering 2 virtual networks that reside in the same region, and then the other is when there are two different regions.

7950
10:14:00,560 --> 10:14:05,760
There's a lot of benefits to virtual network peering, such as low latency, high bandwidth connections.

7951
10:14:06,320 --> 10:14:07,200
So, you know,

7952
10:14:07,600 --> 10:14:12,640
There's a lot of good use cases for that, and it's something we should definitely know, especially if you're studying for the administrator.

7953
10:14:13,440 --> 10:14:15,640
So let's go ahead and do that to make our lives easier.

7954
10:14:15,640 --> 10:14:16,960
We're going to be launching Windows Server.

7955
10:14:16,960 --> 10:14:20,160
I know they're expensive, but don't worry, we won't have them for long.

7956
10:14:20,520 --> 10:14:21,840
But we're going to have to launch three.

7957
10:14:21,840 --> 10:14:27,760
We're going to need two in a single region with different virtual networks and one that is in a different region with a different virtual network.

7958
10:14:28,080 --> 10:14:31,360
And then we're going to use PowerShell to just test the connection between them.

7959
10:14:31,360 --> 10:14:33,600
So let's make our way over to virtual networks.

7960
10:14:33,600 --> 10:14:38,320
I'm going to go ahead in here, add a virtual machine, and I'm going to create a new resource group.

7961
10:14:38,360 --> 10:14:45,040
And I'm just going to call this peering test or peering challenge.

7962
10:14:45,440 --> 10:14:45,840
Sure.

7963
10:14:46,840 --> 10:14:47,680
And we'll go there.

7964
10:14:47,680 --> 10:14:50,240
And then down below, I'm going to signify what this is.

7965
10:14:50,240 --> 10:14:51,760
So this is going to be East A.

7966
10:14:52,160 --> 10:14:54,880
And so over here, I'm just going to go to US East.

7967
10:14:55,280 --> 10:14:56,880
And I'm going to change the image.

7968
10:14:56,880 --> 10:14:58,960
We're going to choose a Windows Server.

7969
10:14:59,120 --> 10:15:02,160
I'm going to go to Data Center 2019 Gen.

7970
10:15:02,160 --> 10:15:02,800
2.

7971
10:15:03,680 --> 10:15:08,720
And what we'll do here is just scroll on down and we'll have to up the size here.

7972
10:15:08,960 --> 10:15:11,360
Again, with a Windows Server, you need two and four.

7973
10:15:11,360 --> 10:15:13,360
So VPCU, a RAM 4.

7974
10:15:13,600 --> 10:15:17,280
So the smallest I'm going to be able to do is this one or...

7975
10:15:17,920 --> 10:15:22,800
I mean, I never do B2s, but I think what we can do is this D2 version 3.

7976
10:15:22,800 --> 10:15:24,080
You'll see me choose that a lot.

7977
10:15:24,680 --> 10:15:26,880
And so now what we'll do is just make it very easy.

7978
10:15:26,880 --> 10:15:34,320
We'll just set the password to Azure user and we'll make it testing123456 with capital on the T.

7979
10:15:34,720 --> 10:15:35,200
Okay.

7980
10:15:36,400 --> 10:15:40,320
And then we'll go ahead and we will just hit review and create.

7981
10:15:41,040 --> 10:15:41,760
actually, sorry.

7982
10:15:41,840 --> 10:15:46,240
We actually have to be really careful here because we want to make sure that everything is named properly.

7983
10:15:46,240 --> 10:15:48,880
We've got to make sure all the virtual subnets are different.

7984
10:15:49,120 --> 10:15:50,280
So this is Peering Challenge.

7985
10:15:50,280 --> 10:15:51,920
So we should make our way over to here.

7986
10:15:52,160 --> 10:15:56,400
And what we'll do is just change this to East A.

7987
10:15:56,800 --> 10:15:57,120
Okay?

7988
10:15:58,480 --> 10:16:00,320
So I was a little bit ahead of myself there.

7989
10:16:00,320 --> 10:16:01,720
We'll make sure all the names have changed.

7990
10:16:02,000 --> 10:16:03,280
And now that looks good to me.

7991
10:16:03,280 --> 10:16:04,880
So we'll go ahead and go here.

7992
10:16:05,280 --> 10:16:06,160
And we'll double check.

7993
10:16:06,160 --> 10:16:08,080
Our resource group is called Peering Challenge.

7994
10:16:08,640 --> 10:16:12,080
This is an East A, East US.

7995
10:16:12,720 --> 10:16:14,080
This is East A, VNet.

7996
10:16:14,080 --> 10:16:16,960
So that makes sure that is unique and we're all good to go.

7997
10:16:16,960 --> 10:16:18,280
So we'll go ahead and launch that one.

7998
10:16:18,280 --> 10:16:20,560
And we'll give that a moment.

7999
10:16:23,280 --> 10:16:27,840
And now that it's in progress, we'll make our way back to virtual machine and we'll launch East B.

8000
10:16:28,320 --> 10:16:29,600
It's the exact same setup.

8001
10:16:29,600 --> 10:16:30,960
So we're going to go down here.

8002
10:16:31,120 --> 10:16:32,720
We're going to choose peering challenge.

8003
10:16:33,200 --> 10:16:34,760
We're going to call this East B.

8004
10:16:34,760 --> 10:16:37,680
We're going to make sure that it's in US East 1, which it is.

8005
10:16:37,920 --> 10:16:39,520
We're going to make sure it's a Windows Server, Gen.

8006
10:16:39,520 --> 10:16:40,000
2.

8007
10:16:40,000 --> 10:16:41,680
We're going to choose the same size there.

8008
10:16:42,080 --> 10:16:48,800
We're going to set the username to be Azure User, and then capital T, Testing, 123456.

8009
10:16:50,720 --> 10:16:56,800
And then we'll scroll on down, make our way to disks, to networking, and then here we'll just make sure that the name has been changed.

8010
10:16:56,800 --> 10:17:01,120
So we'll change this to East East B VNet.

8011
10:17:04,560 --> 10:17:06,040
All right, and then we're good here.

8012
10:17:06,040 --> 10:17:08,960
So we'll go ahead and hit review and create.

8013
10:17:15,880 --> 10:17:18,040
And once that is created, we'll go ahead create there.

8014
10:17:23,120 --> 10:17:24,160
And now it's in progress.

8015
10:17:24,160 --> 10:17:25,880
So we'll go and deploy the last one.

8016
10:17:25,880 --> 10:17:28,600
And this one is going to be in a different region.

8017
10:17:28,600 --> 10:17:31,440
So we'll go virtual machine, we still want the same resource group.

8018
10:17:31,440 --> 10:17:33,480
So you make sure you choose peering challenge.

8019
10:17:33,760 --> 10:17:36,880
And this one is going to be West A.

8020
10:17:37,200 --> 10:17:39,440
And so we'll just look for West.

8021
10:17:41,440 --> 10:17:42,480
And there it is.

8022
10:17:43,280 --> 10:17:44,320
And we'll make sure it's Gen.

8023
10:17:44,320 --> 10:17:44,880
2.

8024
10:17:44,880 --> 10:17:45,760
That's all great.

8025
10:17:45,920 --> 10:17:47,200
Azure user.

8026
10:17:47,600 --> 10:17:51,040
And we'll do capital T, testing 1, 2, 3, 4, 5, 6.

8027
10:17:53,600 --> 10:17:54,880
And we will, whoops.

8028
10:17:58,000 --> 10:17:58,800
Must be the top one.

8029
10:17:58,800 --> 10:17:59,840
That's a mistake here.

8030
10:18:00,800 --> 10:18:01,520
There we go.

8031
10:18:01,840 --> 10:18:05,520
We'll go to next, and then we'll make sure that this one is named different.

8032
10:18:05,520 --> 10:18:12,400
So this will be, we said this will be West A.

8033
10:18:14,280 --> 10:18:14,600
Great.

8034
10:18:14,600 --> 10:18:15,920
And so we'll go ahead and launch that.

8035
10:18:15,920 --> 10:18:17,440
We're going to create that instance there.

8036
10:18:18,800 --> 10:18:19,920
This looks all good to me.

8037
10:18:22,080 --> 10:18:22,720
Click create.

8038
10:18:31,120 --> 10:18:32,080
And that one's in progress.

8039
10:18:32,080 --> 10:18:39,040
Now, while these are going, we can set up our peering because that will take a bit of time for these to launch here.

8040
10:18:39,840 --> 10:18:46,640
So what I want you to do is make your way over to virtual networks.

8041
10:18:48,000 --> 10:18:51,440
And we are going to go into USA and we're going to bridge A to B.

8042
10:18:51,440 --> 10:18:54,120
So on the left-hand side, we're going to go to peerings.

8043
10:18:54,120 --> 10:18:55,280
We're going to hit add.

8044
10:18:55,920 --> 10:18:59,200
And I'm just going to call this East A to B.

8045
10:19:00,880 --> 10:19:07,840
And we're going to allow we're going to block the traffic because we want this to be kind of a private connection, we don't want traffic from outside of that connection.

8046
10:19:08,760 --> 10:19:16,160
And then here, we'll just name it again, a East A to B, we're going to choose where we want to peer to that's going to be the B.

8047
10:19:16,960 --> 10:19:19,520
And I'm going to deny on the on the other side as well.

8048
10:19:19,760 --> 10:19:21,120
And we'll go ahead and hit Add.

8049
10:19:26,630 --> 10:19:28,790
And that doesn't take too long to create, let's give it a moment.

8050
10:19:31,320 --> 10:19:35,360
And now that we have that, what we can do is now peer east to west.

8051
10:19:35,360 --> 10:19:37,440
So I'm going to say east to west.

8052
10:19:38,320 --> 10:19:43,680
We're going to say block for the traffic, east to west.

8053
10:19:44,960 --> 10:19:47,360
And we will choose west here.

8054
10:19:48,560 --> 10:19:50,000
We will block the traffic here.

8055
10:19:51,040 --> 10:19:55,840
I'm going to go ahead and blow oops, sorry, won't allow the first one, we want to block the second part.

8056
10:20:04,080 --> 10:20:05,120
I'll just give it a moment there.

8057
10:20:17,520 --> 10:20:17,840
Great.

8058
10:20:17,880 --> 10:20:20,720
And so I think we can just check those connections really quickly here.

8059
10:20:21,760 --> 10:20:24,640
Just double checking, making sure all of my information is correct.

8060
10:20:24,640 --> 10:20:25,760
Looks good to me.

8061
10:20:27,280 --> 10:20:29,040
Yeah, that looks all correct to me.

8062
10:20:29,520 --> 10:20:33,280
So now we'll make our way back over to our virtual machines because we're going to have to wait here.

8063
10:20:33,520 --> 10:20:41,040
And once they're all running, then we're going to go ahead and RDP into some of them here and then just use PowerShell to give it a check.

8064
10:20:41,440 --> 10:20:41,680
Great.

8065
10:20:41,680 --> 10:20:44,960
So after waiting a little bit of a while there, all of our Windows machines are ready.

8066
10:20:44,960 --> 10:20:48,240
So let's go ahead and connect to them.

8067
10:20:48,480 --> 10:20:54,160
But before we do, let's just make note of what the IP addresses of the other machines are so we know what we need to connect to.

8068
10:20:54,160 --> 10:20:59,760
So we're going to RDP into East A to see if we can test the connection to B&A.

8069
10:21:00,080 --> 10:21:02,440
So what I want to do is just see what this one is.

8070
10:21:02,440 --> 10:21:05,760
So for B, the IP address for this is

8071
10:21:07,480 --> 10:21:09,040
We got to go to the networking tab.

8072
10:21:09,040 --> 10:21:11,760
And so we have 10104.

8073
10:21:12,800 --> 10:21:19,720
And then for West A, and we go over here, this is going to be 10014.

8074
10:21:19,720 --> 10:21:21,920
So it's just one is here and then one is there.

8075
10:21:22,800 --> 10:21:23,760
Pretty easy stuff.

8076
10:21:24,560 --> 10:21:28,320
And so the command we're going to be using is called test net connection.

8077
10:21:28,640 --> 10:21:32,160
So if we just pull up that in PowerShell here.

8078
10:21:33,440 --> 10:21:38,560
Just to show you what this is, this is a cmdlet that is part of Windows, not actually part of Azure.

8079
10:21:38,800 --> 10:21:40,600
And it's a way for testing a connection.

8080
10:21:40,600 --> 10:21:42,480
And so that's what we're going to be using today.

8081
10:21:42,480 --> 10:21:45,600
So for the computer name, we're going to provide that IP address.

8082
10:21:45,600 --> 10:21:46,960
We'll have to specify the port.

8083
10:21:47,840 --> 10:21:51,360
And we'll just ask for the level of detailed information that we want.

8084
10:21:51,360 --> 10:21:51,760
Okay?

8085
10:21:52,240 --> 10:21:54,480
So let's make our way back here.

8086
10:21:54,480 --> 10:21:57,280
And what we're going to do is click on East Day.

8087
10:21:58,080 --> 10:22:00,400
We're going to go ahead and connect in RDP.

8088
10:22:00,880 --> 10:22:02,320
And so we'll download this file.

8089
10:22:02,400 --> 10:22:04,960
I'm on a Windows machine, so I can RDP right away.

8090
10:22:04,960 --> 10:22:08,160
If you're on a Mac, you've got to download the RDP remote client.

8091
10:22:08,160 --> 10:22:12,320
It's free in the Mac store, but you need it in order to remotely connect.

8092
10:22:12,560 --> 10:22:18,240
Or if that's too hard, you can use the Bastion, which is a lot of work and kind of a pain, but it's up to you what you want to do.

8093
10:22:18,560 --> 10:22:21,840
And so here we go as we connect to this instance.

8094
10:22:22,800 --> 10:22:26,320
And so, you might have to wait a little bit for this to load.

8095
10:22:26,320 --> 10:22:29,440
I had loaded it a bit earlier just testing this to make sure everything works.

8096
10:22:29,680 --> 10:22:33,040
But let's go ahead and open up the start menu down below.

8097
10:22:33,200 --> 10:22:35,040
And we're going to type in PowerShell.

8098
10:22:36,320 --> 10:22:38,480
Now, I'm going to tell you right now, this is really small.

8099
10:22:38,480 --> 10:22:41,920
I don't really have any easy way to bump up this font, so I'm very sorry about that.

8100
10:22:42,200 --> 10:22:48,080
But what we'll do is we'll type in test net connection, and then we'll put in computer name.

8101
10:22:48,400 --> 10:22:49,960
And then we want the IP address.

8102
10:22:49,960 --> 10:22:50,560
So we said

8103
10:22:51,040 --> 10:22:53,440
A to B was 10.1.0.

8104
10:22:54,720 --> 10:22:55,680
I believe 4.

8105
10:22:56,720 --> 10:23:03,040
And so that's going to be on port 3389.

8106
10:23:03,280 --> 10:23:06,160
And we want that information level to be detailed.

8107
10:23:08,360 --> 10:23:08,560
OK.

8108
10:23:11,200 --> 10:23:13,760
And so if I typed all of that correctly, this should work.

8109
10:23:15,880 --> 10:23:17,120
So we're going to wait for response.

8110
10:23:17,360 --> 10:23:18,960
And there it says that it's successful.

8111
10:23:18,960 --> 10:23:23,360
So we have successfully created up here between East A&B.

8112
10:23:23,680 --> 10:23:26,320
Now we want to go check to see if we can do cross region.

8113
10:23:26,320 --> 10:23:28,800
So the only difference here is this one is now here.

8114
10:23:29,760 --> 10:23:31,360
And we're looking for the same response.

8115
10:23:35,840 --> 10:23:36,480
So there you go.

8116
10:23:36,480 --> 10:23:41,920
So we successfully established peering, and we've also showed that we know how to test for it.

8117
10:23:42,160 --> 10:23:43,520
So that's great news.

8118
10:23:43,520 --> 10:23:45,040
We'll hit close on there.

8119
10:23:45,360 --> 10:23:47,960
And what we'll do is make our way over to that resource group.

8120
10:23:47,960 --> 10:23:50,240
I'm going to go over here to all resources.

8121
10:23:50,600 --> 10:23:52,240
Actually, sometimes it's easier to go to resource groups.

8122
10:23:52,240 --> 10:23:53,440
I don't know why I don't ever click that.

8123
10:23:53,760 --> 10:23:55,720
And we will find the one we have.

8124
10:23:55,720 --> 10:23:57,120
It's just called peering challenge.

8125
10:23:57,360 --> 10:23:58,720
And we'll go ahead and delete that.

8126
10:23:58,800 --> 10:24:00,560
So let's go there and delete this.

8127
10:24:01,480 --> 10:24:01,760
Okay.

8128
10:24:02,800 --> 10:24:04,720
And we should be all good.

8129
10:24:04,720 --> 10:24:05,440
So there you go.

8130
10:24:05,440 --> 10:24:06,160
That's peering.

8131
10:24:11,520 --> 10:24:22,960
Hey, this is Andrew Brown from ExamPro, and we are going to be looking at application gateways, which is for application load balancing, scale sets for being able to automatically add or remove instances when needed.

8132
10:24:23,480 --> 10:24:28,560
And we're also going to be learning how to debug or troubleshoot network issues.

8133
10:24:29,200 --> 10:24:31,040
using Network Watcher.

8134
10:24:31,040 --> 10:24:38,120
So what we're going to do is launch a new virtual machine and we're going to install Apache 2 so that we actually have a web server to work with.

8135
10:24:39,280 --> 10:24:40,800
So go to your virtual machines.

8136
10:24:41,040 --> 10:24:42,120
We're going to make a new one here.

8137
10:24:42,120 --> 10:24:43,520
I'm going to call this one Ryza.

8138
10:24:44,000 --> 10:24:46,640
And we'll just name the virtual machine Risa as well.

8139
10:24:46,760 --> 10:24:49,440
Whatever region it wants to be in, just make note of it.

8140
10:24:49,680 --> 10:24:52,840
And then we will want to use Ubuntu server LTS.

8141
10:24:52,840 --> 10:24:54,240
So just scroll on down below.

8142
10:24:54,480 --> 10:24:57,680
Make sure you're choosing LTS, generation 2.

8143
10:24:58,000 --> 10:25:00,160
And then we want to make sure we have the cheapest cost here.

8144
10:25:00,160 --> 10:25:02,480
So make sure you have standard B1LS.

8145
10:25:02,960 --> 10:25:06,320
And then if we scroll on down, I'm going to set the password.

8146
10:25:06,320 --> 10:25:07,920
I'm going to say Azure User.

8147
10:25:07,920 --> 10:25:12,320
And I'm going to make the password testing123456, capital on the T.

8148
10:25:13,280 --> 10:25:16,880
Scrolling on down, we're going to open up port 80 here.

8149
10:25:17,400 --> 10:25:19,680
It's going to be very frustrating if we don't do this here.

8150
10:25:19,680 --> 10:25:25,440
Sometimes I have issues with NSGs, so it's just easier if you set it there, okay?

8151
10:25:26,080 --> 10:25:28,480
And so it's going to make that standard so we save a bit of money.

8152
10:25:28,640 --> 10:25:29,600
That looks all good to me.

8153
10:25:29,600 --> 10:25:31,040
We'll hit review and create.

8154
10:25:35,480 --> 10:25:39,600
What we'll do here now is just hit create, and so we'll just wait for that server to be ready.

8155
10:25:39,600 --> 10:25:44,400
And once it's ready, we'll go in, SSH in, install Apache 2, and make sure that test page is in good shape.

8156
10:25:45,200 --> 10:25:47,120
All right, so our virtual machine is ready.

8157
10:25:47,120 --> 10:25:49,160
So let's go ahead and go to those resources.

8158
10:25:49,160 --> 10:25:51,320
We're going to grab that public IP address.

8159
10:25:51,320 --> 10:25:57,440
And what we're going to do is launch our Cloud Shell at the top there, and we're going to SSH into this machine.

8160
10:25:57,440 --> 10:26:04,880
So I'm going to type in SSH, and it was Azure user at sign, and then we'll paste in that public IP address, hit enter.

8161
10:26:04,880 --> 10:26:05,360
We'll have to

8162
10:26:05,480 --> 10:26:06,160
write yes.

8163
10:26:06,520 --> 10:26:10,160
And then testing 123456 capital on the T.

8164
10:26:11,520 --> 10:26:18,560
And then once we're in there, we can do a sudo apt install Apache two, and that will install Apache two.

8165
10:26:18,560 --> 10:26:19,840
This doesn't take too long.

8166
10:26:19,840 --> 10:26:23,520
But once it's installed, we will have the default Apache page.

8167
10:26:23,960 --> 10:26:26,080
And if we can view that, then we'll be in good shape.

8168
10:26:42,800 --> 10:26:44,320
Great, so that's now installed.

8169
10:26:44,320 --> 10:26:48,480
One way we can verify it's installed is we can do curl and type in local host.

8170
10:26:48,480 --> 10:26:52,480
This will return, it's like hitting the homepage.

8171
10:26:52,720 --> 10:26:58,160
The idea is if it returns HTML, which is the default page, we know that it will work at least with inside the virtual machine.

8172
10:26:58,480 --> 10:27:04,320
If we copy the public IP address and paste that into our browser, we should see this page, which we do.

8173
10:27:04,840 --> 10:27:11,360
And also, if you didn't see that there, if you wanted some debugging, what you can do on the left-hand side, if you scroll all the way down,

8174
10:27:12,080 --> 10:27:16,720
There's a thing called, where are you, connection troubleshoot.

8175
10:27:17,680 --> 10:27:23,280
And so here, if you wanted to test your IP address, you say, my IP address, it's the same as if I did it over here.

8176
10:27:23,680 --> 10:27:29,680
And if I went and switched this over to http://, and we hit test connection, we can see whether the connection works.

8177
10:27:33,120 --> 10:27:35,200
So just give it a moment there to verify.

8178
10:27:38,880 --> 10:27:48,480
Also, while we're waiting there, if we wanted to see if that server was running, we could use ps aux pipe and then write probably httpd or not http.

8179
10:27:48,480 --> 10:27:51,680
We could do, oh, sorry, grep httpd.

8180
10:27:52,560 --> 10:27:53,240
Or maybe it's Apache.

8181
10:27:53,440 --> 10:27:54,880
I'm not sure which one it is.

8182
10:27:55,520 --> 10:27:55,920
There it is.

8183
10:27:55,920 --> 10:27:58,240
So that's how we know that it is running on the server.

8184
10:27:59,360 --> 10:28:01,000
This connection shouldn't take this long.

8185
10:28:01,000 --> 10:28:02,400
It's just, I don't know why it's so slow here.

8186
10:28:04,480 --> 10:28:05,040
There we go.

8187
10:28:05,040 --> 10:28:05,520
So

8188
10:28:07,280 --> 10:28:09,440
I mean, here it's saying the Network Watcher is deployed.

8189
10:28:09,440 --> 10:28:11,200
So that's something we were also waiting as well.

8190
10:28:11,840 --> 10:28:16,800
Whenever you create a virtual machine, it's automatically going to provision Network Watcher for you for use.

8191
10:28:17,440 --> 10:28:19,360
So that doesn't generally take too long for you.

8192
10:28:19,600 --> 10:28:22,160
I'm not sure if it just triggered as soon as I pressed that button there.

8193
10:28:22,720 --> 10:28:24,240
Maybe it was just as soon as I did that.

8194
10:28:24,480 --> 10:28:26,000
But yeah, now see the connection is there.

8195
10:28:26,000 --> 10:28:27,680
So I guess Network Watcher wasn't ready.

8196
10:28:28,000 --> 10:28:31,760
And that's another thing that we're going to learn how to use is Network Watcher.

8197
10:28:32,560 --> 10:28:33,680
So what I want you to do

8198
10:28:34,080 --> 10:28:38,080
is go to the top here or right-click, and we'll make our way over to Network Watcher.

8199
10:28:39,880 --> 10:28:41,600
And this tool has a lot of stuff in it.

8200
10:28:41,600 --> 10:28:45,080
It's here to help us set up a bunch of stuff.

8201
10:28:45,080 --> 10:28:50,720
And you can see here we have a bunch of Network Watchers here for each, it looks like for each region.

8202
10:28:50,720 --> 10:28:54,400
So I think that was the first time I actually ever used it in that region, and that's why it was provisioning.

8203
10:28:55,080 --> 10:28:57,280
And so if we go down below, we have a bunch of different tools.

8204
10:28:57,280 --> 10:29:01,680
We have IP, Flow, Verify, NSG Diagnostic.

8205
10:29:02,480 --> 10:29:08,080
we have other things like NSG flow logs, traffic analytics, there's a lot of fun, cool stuff in here.

8206
10:29:08,320 --> 10:29:09,680
And you can get topology.

8207
10:29:10,720 --> 10:29:14,480
So if we drop down here, and I think this is no different than the resource groups that we see.

8208
10:29:14,800 --> 10:29:16,640
Yeah, it's the same stuff as always.

8209
10:29:17,280 --> 10:29:19,440
So let's give it a go and try out some of these tools.

8210
10:29:24,480 --> 10:29:27,280
Okay, so notice here that it already pre-filled stuff in for me.

8211
10:29:27,280 --> 10:29:31,200
So what it's doing is choosing the resource group, the virtual machine, and then the network interface.

8212
10:29:31,480 --> 10:29:32,960
And we have this TCP UDP.

8213
10:29:32,960 --> 10:29:36,880
It's pretty much the same of what we just did over with the test connection.

8214
10:29:37,200 --> 10:29:40,800
The local IP address, that is the one of the actual virtual machine.

8215
10:29:40,800 --> 10:29:48,720
If we go back to our virtual machine and go all the way at top to overview, it should show us the private IP address.

8216
10:29:48,720 --> 10:29:49,360
That's the public.

8217
10:29:49,360 --> 10:29:50,800
Now I have to go to network there.

8218
10:29:52,120 --> 10:29:54,640
And there it is, 10.0.0.4.

8219
10:29:54,640 --> 10:29:57,440
So if we wanted to say, can I test for my IP address?

8220
10:29:57,440 --> 10:29:59,960
I'm going to go into Google here and type in what.

8221
10:30:00,040 --> 10:30:01,120
That's my IP.

8222
10:30:03,120 --> 10:30:04,720
And we'll go back over here.

8223
10:30:06,400 --> 10:30:09,920
And what I will do is paste it into here.

8224
10:30:09,920 --> 10:30:12,040
It's on port 80 that we're trying to connect to.

8225
10:30:12,040 --> 10:30:14,400
And we'll go ahead and hit check.

8226
10:30:24,440 --> 10:30:30,360
And I kind of swore, yep, nothing over there.

8227
10:30:30,360 --> 10:30:30,600
we go.

8228
10:30:30,600 --> 10:30:31,320
So that one works.

8229
10:30:31,320 --> 10:30:32,360
So we'll look at the next one.

8230
10:30:36,960 --> 10:30:39,600
All right, so now let's take a look at NSG diagnostic tool.

8231
10:30:39,600 --> 10:30:43,280
Very similar, but revolves around your network security groups.

8232
10:30:43,600 --> 10:30:47,480
So it's going to give you detailed information, whereas the other one's just about packets going back and forth.

8233
10:30:47,480 --> 10:30:50,240
So again, we're going to go over here to RISA.

8234
10:30:50,320 --> 10:30:52,240
I'm going to select the virtual machine.

8235
10:30:52,640 --> 10:30:54,880
I'm going to select RISA again.

8236
10:30:55,040 --> 10:30:56,280
It's going to be for TCP.

8237
10:30:56,280 --> 10:30:57,680
We're checking an inbound port.

8238
10:30:57,680 --> 10:31:00,800
Now notice here it says IPv4 or a CIDR block.

8239
10:31:01,120 --> 10:31:02,280
So this is the source traffic.

8240
10:31:02,280 --> 10:31:03,520
Where's the traffic coming from?

8241
10:31:03,520 --> 10:31:05,000
Well, it's my IP address.

8242
10:31:05,000 --> 10:31:06,840
So I'm going to go grab that again, paste that in.

8243
10:31:06,920 --> 10:31:07,200
there.

8244
10:31:07,520 --> 10:31:09,160
The destination was already pre-filled.

8245
10:31:09,160 --> 10:31:12,560
That is the public IP address of our machine.

8246
10:31:13,520 --> 10:31:15,920
And this is port 80 because we're running HTTP.

8247
10:31:16,200 --> 10:31:17,840
I'm going to go ahead and hit check.

8248
10:31:18,440 --> 10:31:19,520
And we'll see what we get here.

8249
10:31:28,890 --> 10:31:29,530
Great, cool.

8250
10:31:29,530 --> 10:31:30,570
So we can see that works.

8251
10:31:30,570 --> 10:31:32,970
And it even returns the security group where it is allowed.

8252
10:31:33,130 --> 10:31:38,570
Maybe what would be fun is to go in and actually mess with the security group and purposely make it so that it doesn't work.

8253
10:31:39,200 --> 10:31:45,520
So, by the way, I clicked into there and I can see more detailed information about the NSG diagnostic.

8254
10:31:45,520 --> 10:31:47,120
So you can see we have that there.

8255
10:31:48,640 --> 10:31:49,600
Yeah, security rules.

8256
10:31:49,600 --> 10:31:50,600
We're not worried about that.

8257
10:31:50,600 --> 10:31:53,920
That's just if we want to add ones there.

8258
10:31:54,720 --> 10:31:56,560
But yeah, that gives you a better idea of what's going on.

8259
10:31:56,560 --> 10:32:02,800
I'm going to make my way over to my NSGs because I want to show you what it looks like if you don't actually have access, right?

8260
10:32:03,120 --> 10:32:06,160
So we'll go into here and here is this rule.

8261
10:32:07,000 --> 10:32:19,280
And what I'm going to do is I'm going to change it, so I'm going to say it has to be 8080, which is not what we're going to connect to, and we'll go ahead and save that.

8262
10:32:20,640 --> 10:32:22,560
So now it should probably not work.

8263
10:32:30,040 --> 10:32:38,200
Okay, and if we go back to our diagnostic tools, and you know what, I'll just make a new tab here, and we'll make that our second tab.

8264
10:32:39,080 --> 10:32:41,680
We'll make our way back to the, oops, not network security groups.

8265
10:32:41,680 --> 10:32:43,760
We want to go to network watcher here.

8266
10:32:44,080 --> 10:32:46,000
And let's go back to IPv flow.

8267
10:32:46,720 --> 10:32:48,640
And we will give it another go.

8268
10:32:48,640 --> 10:32:50,480
So we need our remote IP address.

8269
10:32:50,480 --> 10:32:52,080
I'll go grab mine over here.

8270
10:32:53,200 --> 10:32:54,080
Paste that in there.

8271
10:32:54,160 --> 10:32:56,480
Oops, port 80, port 80.

8272
10:32:57,920 --> 10:32:58,640
We'll hit next.

8273
10:33:02,200 --> 10:33:04,560
And we'll see what happens here.

8274
10:33:09,120 --> 10:33:10,200
Great, access denied.

8275
10:33:10,200 --> 10:33:11,280
That's what we're expecting.

8276
10:33:11,440 --> 10:33:17,760
We'll make our way over to the NSG diagnostic, and we will again select RISA.

8277
10:33:18,160 --> 10:33:23,680
We'll choose virtual machine RISA, RISA, TCP, inbound port.

8278
10:33:23,680 --> 10:33:29,920
We will go grab our IP address because we are the source, and then we will say port 80.

8279
10:33:42,600 --> 10:33:43,120
And there we go.

8280
10:33:43,120 --> 10:33:45,840
It says traffic will not be allowed, which is what we want.

8281
10:33:45,840 --> 10:33:46,200
Denied.

8282
10:33:46,200 --> 10:33:51,200
We can click into there, get the full report, see what is going on, what is matching, what is not being applied.

8283
10:33:51,600 --> 10:33:52,600
We'll make our way back here.

8284
10:33:52,600 --> 10:33:54,240
Let's do connection troubleshoot.

8285
10:33:55,040 --> 10:33:56,640
This one's just a simpler version of it.

8286
10:33:57,120 --> 10:34:00,320
Preferred IPV version, IPV4, TCP.

8287
10:34:01,200 --> 10:34:03,120
Destination port will be port 80.

8288
10:34:06,480 --> 10:34:09,680
I find it a little bit easier to do it for the virtual machine, so let's do it from there.

8289
10:34:09,760 --> 10:34:11,200
So we'll go back down below.

8290
10:34:11,760 --> 10:34:18,880
and we'll check test connection or connection troubleshoot here because we might get something slightly different.

8291
10:34:19,120 --> 10:34:24,320
I just want to give you a lot of different options to debug so that you get better information.

8292
10:34:24,320 --> 10:34:27,560
So here we have port 80, TCP, my IP address.

8293
10:34:27,560 --> 10:34:29,600
It auto-fills it in for you, which is really nice.

8294
10:34:29,880 --> 10:34:31,280
And we'll see what it reports here.

8295
10:34:38,680 --> 10:34:38,840
Great.

8296
10:34:38,840 --> 10:34:43,880
And so here it says network connectivity blocked by security group, default rule denied, all inbound.

8297
10:34:44,080 --> 10:34:46,480
As you can see, that is not super detailed.

8298
10:34:46,960 --> 10:34:52,640
And so if you really want to have a better understanding, you're going to want to go use the NSG diagnostic tool.

8299
10:34:53,320 --> 10:34:58,560
And so what we'll do is go back and fix our port since we had mucked it up.

8300
10:35:00,240 --> 10:35:02,240
We'll put that back onto asterisk here.

8301
10:35:03,200 --> 10:35:04,560
And we will say save.

8302
10:35:16,880 --> 10:35:21,280
Once that is saved, we'll go back and we'll just test our connection again here in our virtual machine.

8303
10:35:31,910 --> 10:35:33,230
And we'll hit test connection again.

8304
10:35:39,160 --> 10:35:40,600
So that's making sure that works.

8305
10:35:44,280 --> 10:35:46,920
It's still complaining here, even though we've reverted it back.

8306
10:35:48,680 --> 10:35:50,360
Yep, that's all correct.

8307
10:35:52,760 --> 10:35:54,920
I'm gonna just click off and click on again here.

8308
10:35:57,200 --> 10:35:57,600
80.

8309
10:36:00,400 --> 10:36:01,680
Yep, that's what it was before.

8310
10:36:02,440 --> 10:36:05,120
If we're having issues there, what we can do is go back to NSG.

8311
10:36:09,360 --> 10:36:12,400
We'll select Ryza, we'll select virtual machine.

8312
10:36:13,280 --> 10:36:17,520
We'll check Ryza again, I'm going to put my IP address in again here.

8313
10:36:20,320 --> 10:36:21,120
We'll say port 80.

8314
10:36:22,640 --> 10:36:24,960
And we'll check that and we'll get a more detailed report here.

8315
10:36:34,680 --> 10:36:35,840
It's saying it's denying the traffic.

8316
10:36:35,840 --> 10:36:37,920
We're going to click in here and see as to why.

8317
10:36:37,920 --> 10:36:49,760
So it's saying it's not matching on this one, which is confusing because if you notice here, the protocol is TCP, the source is any, the source port is any, the destination is any, and the port is nothing.

8318
10:36:50,080 --> 10:36:55,720
So I don't know if we're just going to have a lot of trouble here and we'll just have to recreate our instance, but I'll just go do some investigation.

8319
10:36:55,720 --> 10:36:56,640
I'll be back here in a moment.

8320
10:36:58,040 --> 10:37:00,480
All right, so I'm back here and I honestly did nothing.

8321
10:37:00,480 --> 10:37:03,760
All I did was hit test connection again and it works all of a sudden.

8322
10:37:03,760 --> 10:37:07,320
So I think sometimes Azure is not consistent.

8323
10:37:07,800 --> 10:37:14,360
And what I mean by that is that when we talk about consistency, it takes time for things to propagate and changes to take effect.

8324
10:37:14,360 --> 10:37:15,840
So we're all in good shape.

8325
10:37:15,840 --> 10:37:19,040
So what we can do is close our virtual machine over here.

8326
10:37:19,680 --> 10:37:28,160
We'll close out the NSG over there, and we'll just focus on Network Watcher and look at some of the other advanced tools that we can utilize here.

8327
10:37:35,200 --> 10:37:39,040
So let's take a look at some other tools in the Network Watcher, such as Packet Capture.

8328
10:37:39,040 --> 10:37:41,680
So this can help us capture packets, as the name says.

8329
10:37:42,000 --> 10:37:45,920
So we go here to Risa, and we'll just say Risa Packet.

8330
10:37:47,520 --> 10:37:50,800
And we would have to choose a storage account if there isn't one.

8331
10:37:50,800 --> 10:37:52,960
I think it's just going to go ahead and create us one.

8332
10:37:52,960 --> 10:37:54,720
I don't remember creating that one myself.

8333
10:37:55,280 --> 10:37:57,760
Maximum packets is 0 to the default.

8334
10:37:57,760 --> 10:37:58,920
I'm happy with all the default.

8335
10:37:58,920 --> 10:38:00,320
We do have some additional options.

8336
10:38:00,320 --> 10:38:04,120
We actually only want TCP because that's all we're going to be using anyway.

8337
10:38:04,120 --> 10:38:06,080
And we'll go ahead and hit save.

8338
10:38:07,040 --> 10:38:11,360
And so now once that is created, we should be able to capture some packets.

8339
10:38:12,000 --> 10:38:12,480
All right.

8340
10:38:12,640 --> 10:38:16,120
So if I give this a nice refresh here, we'll

8341
10:38:16,120 --> 10:38:17,360
We'll just wait for that to create.

8342
10:38:17,440 --> 10:38:18,240
Oh, there we go.

8343
10:38:20,080 --> 10:38:21,600
So now it's just loading.

8344
10:38:21,600 --> 10:38:23,600
So we'll just wait for that to finish loading.

8345
10:38:23,600 --> 10:38:24,480
I'll see you back here in a bit.

8346
10:38:24,960 --> 10:38:27,280
Alright, so now our Ryza packet is running.

8347
10:38:27,280 --> 10:38:28,400
You don't want to wait too long.

8348
10:38:28,400 --> 10:38:34,560
Because when you create these packets here, you actually set a timeout, which is in seconds, that's 18 minutes.

8349
10:38:34,560 --> 10:38:37,120
And that's when it's going to capture data, right?

8350
10:38:37,520 --> 10:38:42,320
So the thing is, what we want to do is open up our website, if you're not sure how to get there.

8351
10:38:42,880 --> 10:38:44,720
We'll just do it the manual way here.

8352
10:38:44,720 --> 10:38:46,400
We'll go back to our virtual machine.

8353
10:38:48,640 --> 10:38:52,320
And we will go into Ryza here and grab that public IP address.

8354
10:38:54,800 --> 10:38:59,840
And so if we just hit enter, that should be sending packets to and from our virtual machine.

8355
10:38:59,920 --> 10:39:00,960
And that's what we want to do.

8356
10:39:00,960 --> 10:39:03,040
We just want to collect some information here.

8357
10:39:03,640 --> 10:39:08,560
And once we are happy with that, the thing is that this packet file is going to get stored.

8358
10:39:10,160 --> 10:39:11,920
in our storage account.

8359
10:39:12,080 --> 10:39:15,920
So if you scroll on down here, it should tell us where it is.

8360
10:39:17,400 --> 10:39:18,160
And it's not there.

8361
10:39:18,160 --> 10:39:19,360
So I'm just gonna give it a refresh.

8362
10:39:19,360 --> 10:39:21,680
We go back to status.

8363
10:39:21,680 --> 10:39:23,040
And so this is where it's going to go.

8364
10:39:23,040 --> 10:39:26,720
It's going to go into packet capture into our storage account.

8365
10:39:27,040 --> 10:39:30,800
So what I'm going to do is I'm just going to prematurely stop this if it'll let me.

8366
10:39:31,360 --> 10:39:31,920
There we go.

8367
10:39:32,680 --> 10:39:34,320
Because we don't want to wait 18 minutes.

8368
10:39:35,320 --> 10:39:41,360
And once it's stopped the capture, then it should create that cap file, and we should be able to go explore it.

8369
10:39:43,040 --> 10:39:45,440
And so the package is now stopped.

8370
10:39:46,320 --> 10:39:52,720
So I believe if we go ahead and click this here, we can now go ahead and download this file.

8371
10:39:58,380 --> 10:40:00,940
And what I'm going to do is open this up in VS code.

8372
10:40:01,940 --> 10:40:03,020
Just give me a moment here.

8373
10:40:08,640 --> 10:40:10,240
And I'm just going to go open this file up.

8374
10:40:13,600 --> 10:40:14,800
Oh, it's binary files.

8375
10:40:15,040 --> 10:40:16,880
We can't just open it in VS Code.

8376
10:40:17,160 --> 10:40:19,120
But the point is that we have that packet data.

8377
10:40:19,120 --> 10:40:21,680
So I guess the next question is, how are we going to open it up and look at it?

8378
10:40:22,240 --> 10:40:26,240
All right, so we downloaded that file there, but I couldn't open it in VS Code because it's a CAP file.

8379
10:40:26,240 --> 10:40:29,680
And in order to load a CAP file, we need something like Wireshark.

8380
10:40:29,680 --> 10:40:31,360
So Wireshark is an open source.

8381
10:40:32,160 --> 10:40:34,880
software to inspect packets.

8382
10:40:35,200 --> 10:40:39,520
And so here I've opened up that COP file, and you can see we have the source and destination.

8383
10:40:40,240 --> 10:40:48,480
So, you know, I'm not saying I know much what to do with this file, but I'm just showing you that we can view the packets that were sent to and from.

8384
10:40:48,480 --> 10:40:50,640
I wonder if we can see what my IP address was.

8385
10:40:50,640 --> 10:40:54,640
So what's my IP?

8386
10:40:55,600 --> 10:40:58,560
So 104, et cetera, et cetera.

8387
10:40:59,880 --> 10:41:01,760
I don't see that.

8388
10:41:04,560 --> 10:41:05,840
Do we see it anywhere in here?

8389
10:41:07,840 --> 10:41:16,240
No, but we see things like 10040.0.4, which is the private IP of our actual virtual machine.

8390
10:41:16,240 --> 10:41:18,360
And then we have 522359.

8391
10:41:18,360 --> 10:41:19,840
I wonder if that's the public IP.

8392
10:41:20,880 --> 10:41:22,160
No, it's 2081.

8393
10:41:23,040 --> 10:41:29,160
Again, not saying I'm a genius with this stuff, but I'm just showing you how you can kind of utilize it and work your way through that.

8394
10:41:29,160 --> 10:41:29,440
Okay.

8395
10:41:29,920 --> 10:41:31,320
But yeah, that is packets.

8396
10:41:31,320 --> 10:41:35,520
So what we'll do is go back to network watcher.

8397
10:41:35,840 --> 10:41:39,440
And since we are done with that, we can go ahead and delete that.

8398
10:41:43,840 --> 10:41:48,000
And I'll just close a few of these and we can look at some other network watcher features.

8399
10:41:54,440 --> 10:41:57,760
I figured another thing we should go check out is NSG flow logs.

8400
10:41:57,760 --> 10:42:02,320
So down below, we have NSG flow logs, and it's not enabled by default.

8401
10:42:02,320 --> 10:42:04,960
So what we'll do is create a new NSG flow log here.

8402
10:42:05,360 --> 10:42:09,520
And we will go here, we will have to choose a storage account.

8403
10:42:10,480 --> 10:42:11,920
This account must not be empty.

8404
10:42:11,920 --> 10:42:13,440
So we'll have to create a new one here.

8405
10:42:13,680 --> 10:42:14,800
This will just be Ryza.

8406
10:42:16,640 --> 10:42:19,120
Ryza storage account.

8407
10:42:22,640 --> 10:42:23,920
Only lowercase, that's why.

8408
10:42:27,520 --> 10:42:30,960
Let's see if it'll take that it probably has no issues there.

8409
10:42:30,960 --> 10:42:32,560
Maybe I just doesn't want the hyphens.

8410
10:42:34,240 --> 10:42:35,040
There we go.

8411
10:42:35,400 --> 10:42:36,560
It's already taken.

8412
10:42:37,920 --> 10:42:38,960
I don't know how it is.

8413
10:42:38,960 --> 10:42:41,520
But we'll just go 123456.

8414
10:42:42,240 --> 10:42:43,200
That one's not taken.

8415
10:42:43,200 --> 10:42:43,600
Great.

8416
10:42:43,920 --> 10:42:46,560
And we will put this in the same Ariza security group.

8417
10:42:46,560 --> 10:42:50,240
The LRS is fine because we do not need anything super fancy here.

8418
10:42:53,320 --> 10:42:54,960
Okay, and so that just created there.

8419
10:42:55,400 --> 10:42:59,120
And so now down below, retention is only available with V2 storage accounts.

8420
10:42:59,120 --> 10:43:00,080
That's totally fine.

8421
10:43:00,080 --> 10:43:01,760
I didn't notice what we chose.

8422
10:43:02,320 --> 10:43:03,840
I'm pretty sure it was a V2.

8423
10:43:04,320 --> 10:43:06,560
I don't know if it gave us an option.

8424
10:43:07,520 --> 10:43:09,840
Flow logs versions, we have versions one and two.

8425
10:43:10,320 --> 10:43:14,160
Version one logs ingress and ingress IP traffic flows for both allowed and denied.

8426
10:43:14,520 --> 10:43:16,640
V2 provides additional throughput information

8427
10:43:17,080 --> 10:43:17,920
bytes and packets.

8428
10:43:18,080 --> 10:43:19,520
Version two sounds good to me.

8429
10:43:19,760 --> 10:43:28,640
Traffic analytics provides rich analytics and visual visualization derived from NSG flow logs, and other Azure resource data drill down to go through that.

8430
10:43:28,800 --> 10:43:29,920
That sounds kind of cool.

8431
10:43:30,560 --> 10:43:39,600
I think what we'll do is go checkbox that on, we're going to set it for every hour, I'm not sure what traffic analytics costs, I'm just going to go check Azure very quickly here.

8432
10:43:43,720 --> 10:43:46,640
And if I scroll on down traffic analytics,

8433
10:43:48,560 --> 10:43:52,480
It's based on gigabytes consumed here, so we'll be okay.

8434
10:43:55,360 --> 10:43:57,280
And so I'll enable that there.

8435
10:43:58,000 --> 10:44:00,320
One every hour seems fine to me.

8436
10:44:00,320 --> 10:44:02,880
I'm going to do every 10 minutes because we don't have a lot going on here.

8437
10:44:03,120 --> 10:44:05,200
We already created a workspace earlier.

8438
10:44:05,480 --> 10:44:07,360
If you have not, you can go ahead and make one.

8439
10:44:07,520 --> 10:44:10,480
But this one is called Risa log workspace.

8440
10:44:10,640 --> 10:44:12,480
We'll go ahead and create this one here.

8441
10:44:13,400 --> 10:44:14,400
And go ahead and create that.

8442
10:44:19,760 --> 10:44:22,720
And we will wait for this to deploy.

8443
10:44:22,720 --> 10:44:23,600
That was fast.

8444
10:44:24,000 --> 10:44:25,760
Didn't even have to cut the video.

8445
10:44:26,400 --> 10:44:29,280
So we will go to the flow log and browse it.

8446
10:44:31,600 --> 10:44:33,120
And we'll give this a nice refresh here.

8447
10:44:34,240 --> 10:44:37,280
If we didn't get it that way, what we can do is click on Go to resource.

8448
10:44:37,440 --> 10:44:39,280
So it's not showing up in the list just yet.

8449
10:44:39,600 --> 10:44:44,320
Flow logs allow you to view information ingress and ingress from your network security groups.

8450
10:44:46,000 --> 10:44:52,800
We already filled all this in, so that back screen did not work very well when I hit that go to resource.

8451
10:44:53,200 --> 10:44:54,160
So we'll go back to here.

8452
10:44:54,160 --> 10:44:55,080
Now it shows up.

8453
10:44:55,080 --> 10:44:56,160
We'll click into here.

8454
10:44:56,960 --> 10:45:00,120
It's showing us the same thing again.

8455
10:45:00,160 --> 10:45:02,000
Not sure why.

8456
10:45:06,800 --> 10:45:08,880
Storage account is connected there.

8457
10:45:10,400 --> 10:45:11,280
Click into it.

8458
10:45:11,960 --> 10:45:13,200
It's trying to edit it.

8459
10:45:14,640 --> 10:45:17,360
Maybe we'll just checkbox it on here and go NSG view.

8460
10:45:19,680 --> 10:45:20,080
Nope.

8461
10:45:21,080 --> 10:45:22,040
Give me two seconds.

8462
10:45:22,040 --> 10:45:23,040
I'll be right back.

8463
10:45:23,040 --> 10:45:23,440
Okay.

8464
10:45:25,120 --> 10:45:31,360
So for some reason I was thinking there was some way to view that flow data right within here, but it's not.

8465
10:45:31,360 --> 10:45:32,760
They just put it in storage accounts.

8466
10:45:32,760 --> 10:45:39,120
So if we want to access that data, we're going to go to storage accounts and you can just open it in your explorer here.

8467
10:45:41,400 --> 10:45:45,360
And then from there, what I did, and this is actually a lot harder than you think.

8468
10:45:45,360 --> 10:45:49,600
I'm going to go all the way back to the beginning here, just to give you an experience of what it's like.

8469
10:45:49,600 --> 10:45:51,360
But you would go into your BLOB containers.

8470
10:45:51,920 --> 10:45:52,840
That's the one we stored it in.

8471
10:45:52,840 --> 10:45:56,560
And then you just click, click, click, click, click, click, click.

8472
10:45:57,520 --> 10:46:01,440
And you click forever until you can reach a JSON file.

8473
10:46:02,160 --> 10:46:03,680
If it ever, ever gets there.

8474
10:46:07,040 --> 10:46:08,160
I know it's really deep.

8475
10:46:14,480 --> 10:46:15,120
And there it is.

8476
10:46:15,360 --> 10:46:26,240
And so if we were just to take that file and whoops, if we were just to open download that file, it will not let me drag out tabs today.

8477
10:46:26,240 --> 10:46:27,760
I'll just close these other ones here.

8478
10:46:30,120 --> 10:46:34,800
Anyway, if we were to download that file, you can just hit the download on there and you open it up.

8479
10:46:35,440 --> 10:46:39,440
It is a bit of a weird format, so I had just formatted it using pretty JSON.

8480
10:46:39,440 --> 10:46:40,440
This is what it looks like.

8481
10:46:40,440 --> 10:46:51,440
And so we have this Duples data, which you're not going to be able to do much with, but it just shows you how it's, you see like inbound and outbound, allow and denying, things like that.

8482
10:46:51,680 --> 10:47:00,040
You really would want to ingest this data into like something like Grafana or Elastic, like Elasticsearch or something.

8483
10:47:00,120 --> 10:47:04,320
or like the elastic stack or gray logs, or even into traffic analytics.

8484
10:47:04,320 --> 10:47:14,720
I'd love to show you traffic analytics today, and we did enable it, but for whatever reason, traffic analytics is just giving me a lot of trouble, and it's not really a high priority right now, so we're not going to worry about it.

8485
10:47:15,280 --> 10:47:19,600
But yeah, that is your NSG flow logs, and we'll just move on to something else here.

8486
10:47:24,480 --> 10:47:33,880
So I think I've decided after we did all that networking stuff, I think we should just start fresh so that we can now set up an application load balancer and a scale set.

8487
10:47:33,880 --> 10:47:37,840
So what I'm going to do is go ahead and delete this resource group called Risa.

8488
10:47:38,160 --> 10:47:43,440
We'll spin that on down and we'll just consider the next section just application gateway and scale sets.

8489
10:47:43,520 --> 10:47:43,840
Okay?

8490
10:47:44,480 --> 10:47:45,280
So see you then.

8491
10:47:50,920 --> 10:47:54,880
Hey, this is Andrew Brown from Exam Pro, and we are looking at Azure Networking Cheat Sheet.

8492
10:47:54,880 --> 10:47:56,880
This one's A two-pager, so let's jump into it.

8493
10:47:56,880 --> 10:48:02,240
So, VNets is a logically isolated section of the Azure network where you launch your Azure resources.

8494
10:48:02,400 --> 10:48:05,920
VNet peering is when you connect multiple VNets, so they act as a network.

8495
10:48:06,160 --> 10:48:09,040
You have regional VNet peering, and then you have global VNet peering.

8496
10:48:09,040 --> 10:48:12,560
Regional means between 2 VNets in the same region, global.

8497
10:48:13,200 --> 10:48:15,040
to VNets in different regions.

8498
10:48:15,320 --> 10:48:16,840
Let's just define network interface.

8499
10:48:16,840 --> 10:48:21,520
So a NIC is a software or hardware interface between two pieces of equipment or protocol layers in a network.

8500
10:48:21,760 --> 10:48:27,280
In our case, it's going to be a software NIC for Azure, but NICs communicate in the IP protocol.

8501
10:48:27,440 --> 10:48:29,920
And so for Azure, it's called the Azure NIC.

8502
10:48:30,240 --> 10:48:33,600
And Azure network interfaces are attached to Azure VMs.

8503
10:48:33,600 --> 10:48:37,760
Without a NIC, an Azure VM instance would have no way to communicate on the network.

8504
10:48:38,120 --> 10:48:42,560
An Azure VM instance has to have at least one NIC and can have multiple NICs if you wanted to have it.

8505
10:48:43,080 --> 10:48:50,400
Route tables is a table for data stored in a router or network host that lists routes to the next destination.

8506
10:48:50,640 --> 10:48:56,400
By default, Azure creates a route table with default routes, also known as system routes, and associate them to your subnets.

8507
10:48:56,400 --> 10:49:01,520
You can override system routes assigned to your subnets by creating a new route table and associate it with a subnet.

8508
10:49:01,920 --> 10:49:03,680
Then there's the concept of an address space.

8509
10:49:03,680 --> 10:49:10,560
It is a range of available IP addresses that you are allocating for your use within your VNet.

8510
10:49:10,720 --> 10:49:12,960
The amount of IP addresses available is determined based on the

8511
10:49:13,080 --> 10:49:14,240
Cider range notation.

8512
10:49:14,400 --> 10:49:16,960
For subnets, it is a logical division of an address space.

8513
10:49:17,200 --> 10:49:20,280
A subnet needs a route table so it can have access.

8514
10:49:20,520 --> 10:49:24,320
A public-private subnet describes whether a subnet is reachable from the internet or not.

8515
10:49:24,560 --> 10:49:35,120
Azure has no concept of private or public subnets, and so it's like there's no formal setting of it, so you have to like you have to configure your own subnets to ensure they do not reach the internet.

8516
10:49:35,440 --> 10:49:40,000
So it's not like you say private, you know, you just name it private, but that doesn't necessarily mean it's private.

8517
10:49:40,320 --> 10:49:42,960
You can associate an NSG to protect traffic entering in

8518
10:49:43,200 --> 10:49:43,920
your subnet.

8519
10:49:44,160 --> 10:49:48,760
Azure has a special type of gateway subnet that is used for Azure Virtual Network Gateway.

8520
10:49:48,760 --> 10:49:50,640
So if you want one, it's going to tell you you have to make one.

8521
10:49:51,040 --> 10:50:00,000
On to the second page, Azure Private Links allows you to establish secure connections between Azure resources, so traffic remains within the Azure network.

8522
10:50:00,160 --> 10:50:05,440
So Private Link Endpoint is a network interface that connects you privately and securely to a service.

8523
10:50:06,840 --> 10:50:08,720
service powered Azure private link.

8524
10:50:09,040 --> 10:50:11,280
It uses a private IP address from your VNet.

8525
10:50:11,520 --> 10:50:15,280
Private link service allows you to connect your own workload to the private link.

8526
10:50:15,440 --> 10:50:20,400
You need an Azure standard internal load balancer and associate it with the link service.

8527
10:50:20,640 --> 10:50:26,320
Many Azure services by default work with private links such as Azure Storage, Cosmos DB, and SQL servers.

8528
10:50:27,600 --> 10:50:30,160
Third-party providers should say providers.

8529
10:50:31,280 --> 10:50:31,520
Whoops.

8530
10:50:32,320 --> 10:50:33,600
Third-party providers

8531
10:50:34,560 --> 10:50:36,720
can be powered by PoweredLync, okay?

8532
10:50:36,720 --> 10:50:38,960
Or maybe it actually is.

8533
10:50:38,960 --> 10:50:40,080
Third-party provides.

8534
10:50:40,400 --> 10:50:41,520
No, it should be providers.

8535
10:50:41,520 --> 10:50:42,240
Sorry about that.

8536
10:50:42,560 --> 10:50:48,480
Azure Firewall is a managed cloud-based network security service that protects your Azure VNet's resources.

8537
10:50:48,640 --> 10:50:52,960
It is a fully stateful firewall as a service, so FWAAS.

8538
10:50:53,200 --> 10:50:55,680
They want to make everything an AAS.

8539
10:50:56,560 --> 10:50:58,160
Built-in high availability.

8540
10:50:58,960 --> 10:51:01,440
and unrestricted cloud scalability.

8541
10:51:01,440 --> 10:51:07,600
You can centrally create, enforce, and log applications and network connectivity policies across subscription and virtual networks.

8542
10:51:07,680 --> 10:51:15,040
Use a static IP address from your VNet resources, allowing outside firewalls to identify traffic originating from your VNet.

8543
10:51:15,440 --> 10:51:18,960
Fully integrate with Azure Monitor for logging analytics.

8544
10:51:18,960 --> 10:51:24,640
You can launch an Azure VNet in its own VNet, and other VNets pass through the central VNet.

8545
10:51:24,640 --> 10:51:25,520
That's what you would do.

8546
10:51:25,520 --> 10:51:26,320
You would launch it

8547
10:51:27,240 --> 10:51:28,040
its own VNET.

8548
10:51:28,320 --> 10:51:34,880
You get Microsoft Threat Intelligence out of that, blocks known malicious IP and fully qualified domain names.

8549
10:51:35,680 --> 10:51:43,200
Azure ExpressRoute creates private connections between Azure data centers and infrastructure on your on-premise or in a co-location environment.

8550
10:51:43,360 --> 10:51:53,360
Connectivity can be from an any-to-any IP, a network, a point-to-point Ethernet network, or a virtual cross-connection through a connectivity provider at a co-location facility.

8551
10:51:53,640 --> 10:51:57,160
ExpressRoute Direct allows for greater bandwidth connections from 50

8552
10:51:58,000 --> 10:52:02,400
Megabytes per second up to 10 gigabytes per second, and there you go.

8553
10:52:02,400 --> 10:52:04,560
That is the Azure Networking Cheat Sheet.

8554
10:52:09,200 --> 10:52:11,040
Hey, this is Andrew Brown from Exam Pro.

8555
10:52:11,040 --> 10:52:13,600
We are looking at Azure Network Watcher Cheat Sheet.

8556
10:52:13,600 --> 10:52:15,680
This is the short one, so let's get it done.

8557
10:52:16,320 --> 10:52:25,760
Azure Network Watcher provides tools to monitor, diagnose, and view network metrics and enables or disables logs for resources in an Azure VNet.

8558
10:52:26,000 --> 10:52:34,800
It can do IP flow, verify checks, packet capture, troubleshoot VPNs, NSGs, NSG flow logs, diagnostic logs, traffic analytics, and NMP.

8559
10:52:35,040 --> 10:52:42,320
The watcher can monitor and repair Azure resources you provision, virtual machines, the virtual networks, application gateways, and load balancers.

8560
10:52:43,000 --> 10:52:51,520
Network Watcher cannot be used to monitor platforms as a service or monitoring web analytics, which to me is a huge disappoint, but that's just how it is.

8561
10:52:51,760 --> 10:52:56,640
Network Watcher is disabled by default in most regions, so you need to enable it at a per-region basis.

8562
10:52:56,640 --> 10:53:00,400
Network Watcher can visualize the topology of your VNets.

8563
10:53:01,200 --> 10:53:10,640
Network Performance Monitor, MPM, is a cloud-based hybrid networking monitoring solution that enables you to monitor network performance between various points in your network infrastructure.

8564
10:53:10,960 --> 10:53:16,160
You have traffic blackholing, routing errors, unconventional network issues, and generate alerts.

8565
10:53:16,640 --> 10:53:20,240
It will generate alerts and notify you when a threshold is breached for a network link.

8566
10:53:20,400 --> 10:53:21,920
There's a lot in the service.

8567
10:53:21,920 --> 10:53:27,600
It's hard to say if you need to know all of it for the exam, so I tried to boil it down for you, but there you go.

8568
10:53:32,960 --> 10:53:38,400
So network security groups filter network traffic to and from the Azure resource in a VNet.

8569
10:53:38,920 --> 10:53:42,400
And so an NSG is composed of many security rules.

8570
10:53:42,720 --> 10:53:46,160
And so here's an example of setting an inbound security rule.

8571
10:53:46,440 --> 10:53:49,400
And each security rule has the following properties.

8572
10:53:49,400 --> 10:53:52,480
So you can give it a unique name, which is all the way at the bottom there.

8573
10:53:53,120 --> 10:53:55,040
You can set the source or destination.

8574
10:53:55,040 --> 10:54:00,080
So you're going to set an IP address, CIDR block, service tag, application group, things like that.

8575
10:54:00,960 --> 10:54:02,720
Then you set the port range.

8576
10:54:02,960 --> 10:54:04,800
So it could just be port 80.

8577
10:54:04,800 --> 10:54:07,000
It could be all ports where it shows an asterisk.

8578
10:54:07,000 --> 10:54:08,240
It could be a range of ports.

8579
10:54:08,640 --> 10:54:09,760
You can set the protocol.

8580
10:54:09,760 --> 10:54:12,240
So you've got TCP, UDP, ICMP.

8581
10:54:12,800 --> 10:54:15,280
You set the action, whether it's allowed or denied.

8582
10:54:15,280 --> 10:54:19,680
And then you set the priority, which is a number between 100 and 4096.

8583
10:54:20,120 --> 10:54:22,400
And we have two types of security rules.

8584
10:54:22,400 --> 10:54:28,960
We've got inbound rules, which applies to traffic entering the NSG, and outbound rules that apply to traffic leaving the NSG.

8585
10:54:33,760 --> 10:54:37,040
Let's take a look at some of the default security rules that NSG sets for you.

8586
10:54:37,040 --> 10:54:40,360
So when you create an NSG, you're going to have some created for you by default.

8587
10:54:40,360 --> 10:54:43,120
And that's going to be for outbound rules and inbound rules.

8588
10:54:43,120 --> 10:54:46,440
So for inbound rules, you're going to be able to

8589
10:54:47,480 --> 10:54:52,400
accept any virtual networks through the NSG.

8590
10:54:53,360 --> 10:54:58,400
It's going to allow Azure Load Balancer to make its way in, and it's going to deny everything else.

8591
10:54:58,720 --> 10:54:59,200
All right?

8592
10:54:59,920 --> 10:55:04,320
Then for your outbound rules, it's allowed to go to any other virtual network.

8593
10:55:04,560 --> 10:55:08,000
It's allowed to make its way out to the internet, and then everything else is denied.

8594
10:55:08,000 --> 10:55:08,640
So there you go.

8595
10:55:13,560 --> 10:55:15,720
Let's take a look here at the logic for security rules.

8596
10:55:15,720 --> 10:55:18,280
And there's a lot of logic here, so we'll work our way through it.

8597
10:55:18,280 --> 10:55:20,720
And unfortunately, there's no fun way to visualize this.

8598
10:55:20,880 --> 10:55:22,320
So we just got to work through the text.

8599
10:55:22,640 --> 10:55:26,400
So you may not create two security rules with the same priority and direction.

8600
10:55:26,400 --> 10:55:32,400
You can have 5,000 NSGs per subscription and 1,000 NSGs rules per NSG.

8601
10:55:32,480 --> 10:55:38,240
For priority, rules are processed in priority order with lowest number processed before the higher number.

8602
10:55:38,560 --> 10:55:39,680
And network security groups

8603
10:55:40,000 --> 10:55:48,480
Rules are validated by priority using a 5-tuple information to allow or deny traffic based on source, source ports, destination, destination ports, and protocol.

8604
10:55:48,960 --> 10:55:50,640
Honestly, I don't know what they mean by that.

8605
10:55:51,600 --> 10:55:53,360
And I couldn't make any sense.

8606
10:55:53,360 --> 10:55:55,760
It's in the documentation, so I'm just showing it to you here.

8607
10:55:56,320 --> 10:55:57,360
Then there's flow records.

8608
10:55:57,360 --> 10:56:06,560
They don't exactly explain what they are, but I assume the idea is that when a request flows to the NSG, they're attaching additional information to it.

8609
10:56:07,120 --> 10:56:10,160
So the flow record allows a network security group to be stateful.

8610
10:56:10,160 --> 10:56:13,680
A flow record is created for existing connections.

8611
10:56:14,080 --> 10:56:18,160
Communication is allowed or denied based on the connection state of the flow record.

8612
10:56:18,840 --> 10:56:20,720
And so let's talk about statefulness.

8613
10:56:20,960 --> 10:56:26,800
So if you specify an outbound security port, you don't need to set the inbound port since it will be set for you.

8614
10:56:26,960 --> 10:56:32,800
You'll need to specify an inbound security rule if the communication is initially externally.

8615
10:56:33,400 --> 10:56:34,480
initiated externally.

8616
10:56:34,640 --> 10:56:43,120
And the opposite is also true if inbound traffic is allowed over a port, it's not necessary to specify an outbound security rule to respond to traffic over the port.

8617
10:56:43,680 --> 10:56:47,920
And the reason I know this, when another port is set with another one, that's when it's stateful.

8618
10:56:47,920 --> 10:56:50,400
If it didn't do that, then it would be considered stateless.

8619
10:56:50,760 --> 10:56:51,600
But it's stateful.

8620
10:56:52,600 --> 10:56:53,640
Let's talk about interruptions.

8621
10:56:53,640 --> 10:56:59,840
So existing connections may not be interrupted when you remove a security rule that enabled the flow.

8622
10:57:00,160 --> 10:57:06,240
And traffic flows are interrupted when connections are stopped and no traffic is flowing in either direction for at least a few minutes.

8623
10:57:06,400 --> 10:57:07,600
So there's the rules.

8624
10:57:07,840 --> 10:57:09,440
There's a lot of stuff there.

8625
10:57:09,760 --> 10:57:14,640
Honestly, I won't even remember 90% of this stuff, but I just wanted to go through it with you.

8626
10:57:14,800 --> 10:57:15,440
So there you go.

8627
10:57:20,840 --> 10:57:30,160
So the thing is that when you have network security groups, you can apply them at the subnet and or the NIC, and that's going to change how the rules work.

8628
10:57:30,240 --> 10:57:32,640
So let's look at these combination of scenarios.

8629
10:57:33,040 --> 10:57:39,960
So here we have the internet, and let's set ourselves up with a virtual machine that has a NIC, but it has no network security group.

8630
10:57:39,960 --> 10:57:41,600
So what's going to happen in this case?

8631
10:57:41,920 --> 10:57:47,120
Well, when there is no NSG assigned to the subnet or NIC, then all traffic is allowed.

8632
10:57:48,080 --> 10:57:49,040
Not something I recommend.

8633
10:57:49,040 --> 10:57:52,560
I think you should always have an NSG there, but that's what's going to happen.

8634
10:57:53,360 --> 10:58:00,400
Our next scenario here is that we have a virtual machine, and then we have a NIC, and the network security group is attached to that NIC.

8635
10:58:00,880 --> 10:58:07,440
So when an NSG is assigned to the NIC and no NSG at the subnet, the rules are predictable based on the allow or deny rule.

8636
10:58:07,440 --> 10:58:10,560
So whatever you send your NSG is what you expect it to be.

8637
10:58:11,280 --> 10:58:15,200
Then we have a scenario here where we have two virtual machines with their own NICs.

8638
10:58:16,080 --> 10:58:23,560
And one has a security group, and the other two, they have to pass through the security group that's applied to the subnet level.

8639
10:58:23,560 --> 10:58:25,200
So let's look at the one on the left first.

8640
10:58:25,760 --> 10:58:31,360
So the NSG applied to a subnet applies to the rules and all the resources in that subnet.

8641
10:58:31,920 --> 10:58:38,720
And so basically on the left-hand side, it's going to just act like the other one there, where all the rules you have there are normal.

8642
10:58:38,960 --> 10:58:41,600
But the last one is the interesting use case.

8643
10:58:42,080 --> 10:58:50,800
because if the first, so the first thing is the first NSG rules are evaluated at the subnet, and then the rules in the NIC are evaluated.

8644
10:58:50,800 --> 10:58:55,440
So the thing is, that if you want port 80 to be open, you actually have to open on both.

8645
10:58:55,840 --> 10:58:58,480
Otherwise, it's going to get stuck on the first one.

8646
10:58:58,480 --> 10:59:06,560
So if your subnet has port 80 closed, and then your NIC has port 80 open, it just can't reach it.

8647
10:59:06,560 --> 10:59:07,920
So they both have to be open.

8648
10:59:08,080 --> 10:59:08,800
So there you go.

8649
10:59:13,440 --> 10:59:17,760
Hey, this is Andrew Brown from ExamPro, and we're looking at the Azure Network Security Group Cheat Sheet.

8650
10:59:17,760 --> 10:59:22,160
So NSGs filter network traffic to and from Azure Resources VNet.

8651
10:59:22,440 --> 10:59:25,680
NSG is composed of many security rules.

8652
10:59:25,840 --> 10:59:30,000
You have a name, a source and destination, a port range, and a protocol, and an action and priority.

8653
10:59:30,000 --> 10:59:30,480
Okay.

8654
10:59:31,200 --> 10:59:37,760
You have inbound rules which apply to traffic entering the NSG, and then you have outbound rules applying to traffic leaving the NSG.

8655
10:59:38,000 --> 10:59:41,440
By default, Azure will set a bunch of inbound and outbound rules for you.

8656
10:59:41,600 --> 10:59:46,800
You may not create two security rules within the same priority and direction.

8657
10:59:47,040 --> 10:59:54,320
You can have 5,000 NSGs per subscription and 1,000 NSGs per rules per NSG.

8658
10:59:54,480 --> 10:59:55,120
That's a lot.

8659
10:59:55,280 --> 10:59:56,880
You have to be a pretty big company to run out of those.

8660
10:59:57,120 --> 10:59:59,920
Rules are processed in priority order with lower numbers

8661
11:00:00,040 --> 11:00:01,520
process before higher numbers.

8662
11:00:01,520 --> 11:00:05,280
The flow record allows a network security group to be stateful.

8663
11:00:05,600 --> 11:00:11,280
If you specify an outbound security port, you don't need to set the inbound port since it will be set for you.

8664
11:00:11,520 --> 11:00:12,400
The opposite is true.

8665
11:00:12,400 --> 11:00:19,400
If inbound traffic is allowed over a port, it's not necessary to specify an outbound security rule to respond to the traffic over the port.

8666
11:00:19,400 --> 11:00:22,720
What I could not fit in this cheat sheet was the scenario where you have multiple

8667
11:00:23,320 --> 11:00:26,800
NSGs based on whether they're on the NIC or the virtual machine or etc.

8668
11:00:26,960 --> 11:00:29,360
There is graphics for that in the slides.

8669
11:00:29,360 --> 11:00:32,000
Make sure you review those before you sit your exam, okay?

8670
11:00:36,640 --> 11:00:47,840
So, Azure Virtual WAN is a consolidated networking service that brings many networking security and routing functionalities into a single operational interface, and it has functionalities that include branch connectivity.

8671
11:00:48,400 --> 11:01:04,000
Site-to-site VPN connectivity, remote user VPN to point-to-site connectivity for private connectivity, then you have intra-cloud connectivity, you have VPN Express route, internet connectivity, or routing, Azure firewall encryption for private.

8672
11:01:04,960 --> 11:01:05,760
connectivity.

8673
11:01:06,080 --> 11:01:15,040
And I know that sounds really confusing, but don't worry because I put extra care into this section here so that we really understand what the virtual WAN is.

8674
11:01:15,680 --> 11:01:22,000
But the most simple way to think of it is that virtual WAN itself is software-defined WAN, so SD-WAN.

8675
11:01:22,880 --> 11:01:29,360
And Azure Virtual WAN is a much better way to route to your branches, data centers, VNets, and cloud services.

8676
11:01:30,080 --> 11:01:36,080
So now that we got that text out of the way, let's actually jump in and try to understand what this actually does.

8677
11:01:40,880 --> 11:01:43,280
So let's try to understand the concept of pops.

8678
11:01:43,280 --> 11:01:45,920
And the way we're going to do that is set up a scenario here.

8679
11:01:45,920 --> 11:01:51,600
So imagine that we have our office here, and we want to connect to another data center in another branch.

8680
11:01:51,880 --> 11:01:55,920
And we've decided that the way we're going to talk to those other

8681
11:01:57,440 --> 11:02:00,640
branches and data centers is through the internet.

8682
11:02:00,960 --> 11:02:09,920
And so the idea is that you have this big cloud, which is the internet, but really what it is, it's made-up of a bunch of different networks, which are your internet service providers.

8683
11:02:09,920 --> 11:02:14,480
So you know when you want internet from your home, you get with whoever it is.

8684
11:02:14,480 --> 11:02:21,120
So like in my area, it's Bell or Rogers, but for you, it could be Vodafone, AT&T, Geo, NTT.

8685
11:02:21,840 --> 11:02:25,600
And so the idea is that first you have to get onto the network.

8686
11:02:25,600 --> 11:02:28,560
And so the way you do that is with a point of presence.

8687
11:02:28,880 --> 11:02:31,760
This is an entry at the edge of a network.

8688
11:02:32,120 --> 11:02:34,800
And so that would be like an internet service provider's data center.

8689
11:02:34,800 --> 11:02:39,120
So at our office, we're going to connect to the point of presence.

8690
11:02:39,440 --> 11:02:47,440
But now if we wanted to get to the other branch, then the idea is we have to go and go through another network.

8691
11:02:47,440 --> 11:02:48,280
So how are we going to do that?

8692
11:02:48,280 --> 11:02:51,520
Well, the idea is that there will be another point of presence

8693
11:02:51,920 --> 11:02:55,840
at two locations that are nearby, and it's going to hop the network.

8694
11:02:55,840 --> 11:02:57,960
So if you ever heard the term hop, that's what it means.

8695
11:02:57,960 --> 11:03:00,240
It's going between one POP to another.

8696
11:03:01,720 --> 11:03:09,760
And so then from Vodafone, we can make our way to NTT, and then we've made it, we can exit there out to the other branch.

8697
11:03:10,080 --> 11:03:12,480
And so with the other data center, it's going to do the same procedure.

8698
11:03:13,200 --> 11:03:14,480
We're going to connect to a POP.

8699
11:03:15,120 --> 11:03:18,480
Then we need to go from geo to AT&T, so we're going to do a hop.

8700
11:03:19,040 --> 11:03:25,600
And then we want to get to another pop and do a hop, and then we've made it to our office there.

8701
11:03:26,240 --> 11:03:34,920
And so the thing with this is that it's not really great for enterprises to traverse the internet, just because of performance of speed.

8702
11:03:34,920 --> 11:03:38,960
You don't have much control over the route that's being taken.

8703
11:03:39,560 --> 11:03:45,120
And so, you know, there has to be a better way, and that's what we're going to be talking about next, which is MPLS.

8704
11:03:49,680 --> 11:03:53,680
Let's talk about MPLS, which should be an improvement over just going over the internet.

8705
11:03:53,680 --> 11:04:05,760
So, imagine that we have a bunch of friends or other companies, and if we pay them, they're going to allow us to use their network, and that's going to allow us to establish a private connection.

8706
11:04:06,040 --> 11:04:09,280
And not only that, they're going to deploy these special network devices.

8707
11:04:10,080 --> 11:04:16,800
that can read these special labels that we're going to be putting on our packets to help them determine the most efficient route through the private network.

8708
11:04:17,040 --> 11:04:18,480
We're going to call this MPLS.

8709
11:04:18,720 --> 11:04:20,880
So here is our setup.

8710
11:04:20,880 --> 11:04:22,800
We have our office, the other branch and data center.

8711
11:04:23,120 --> 11:04:26,000
And instead of using the internet, we're going to establish that private network.

8712
11:04:26,400 --> 11:04:35,600
Our friends are going to set up these special devices, which are going to be called LSRs, so label switch routers.

8713
11:04:36,160 --> 11:04:41,960
And as packets enter the MPLS, see those little green boxes?

8714
11:04:41,960 --> 11:04:43,440
It's going to apply that label.

8715
11:04:43,480 --> 11:04:49,680
And now we know the most efficient route, because that label basically says this is the end destination, and they go, okay, great.

8716
11:04:49,680 --> 11:04:50,800
So you should take this route.

8717
11:04:51,320 --> 11:04:54,560
And so that is in that case, and same over here.

8718
11:04:54,960 --> 11:04:57,280
So now let's get into the technicals of MPLS.

8719
11:04:57,280 --> 11:05:10,400
So MPLS stands for Multi-Protocol Label Switching, and it's a method of packet forwarding where instead of using IP addresses and layer 3 information to make forwarding decisions, an MPLS label is used to determine the shortest route to the end destination.

8720
11:05:11,160 --> 11:05:16,080
And an MPLS is a private connection linking data centers and branch offices.

8721
11:05:16,480 --> 11:05:20,000
So it's a private connection as in it's going across a network.

8722
11:05:20,000 --> 11:05:23,280
It's not the data centers and branches offices themselves, just clarifying that.

8723
11:05:23,840 --> 11:05:26,960
MPLS is outsourced and managed by service providers.

8724
11:05:26,960 --> 11:05:34,640
It's possible that you're setting up your own, but likely you're going to be paying somebody else to use their network who guarantees network performance, quality, and availability.

8725
11:05:34,960 --> 11:05:40,960
MPLS uses a special network hardware that combines both a router and a switch, and that's why it's called a label switch router.

8726
11:05:42,240 --> 11:05:42,960
There's also

8727
11:05:43,800 --> 11:05:48,440
LER, which is what applies to label, but I'm not too worried about telling you about that.

8728
11:05:48,440 --> 11:05:49,280
It's not a big deal.

8729
11:05:49,600 --> 11:05:56,720
MPLS is efficient because the path of a label across the network will be predetermined, and that's called the label switch path.

8730
11:05:57,520 --> 11:06:01,920
And an MPL label, the data itself is inserted between layer 2, layer 3.

8731
11:06:02,160 --> 11:06:06,240
That's why you hear people call this an OSI layer 2.5 kind of thing.

8732
11:06:06,960 --> 11:06:12,160
And it's going to put it in your packet, and they call that little thing, they insert between layer 2, 3, a shim.

8733
11:06:13,040 --> 11:06:14,880
So why use MPLS?

8734
11:06:14,880 --> 11:06:18,800
Well, it makes it really easy to establish private connections for your VPNs.

8735
11:06:19,120 --> 11:06:23,520
You can do traffic engineering, so you can control how the packets traverse the network.

8736
11:06:23,840 --> 11:06:24,920
You get quality assurance.

8737
11:06:24,920 --> 11:06:28,640
That means you get a guarantee of performance and availability for your packets.

8738
11:06:30,160 --> 11:06:31,360
But what are the downsides?

8739
11:06:31,360 --> 11:06:35,440
Because if this is so great, why would we need to use something else?

8740
11:06:36,400 --> 11:06:42,720
Well, it gets really expensive because you are setting up all the special devices and stuff, and the larger network, the harder it gets.

8741
11:06:43,520 --> 11:06:46,320
It's not, it's private, but it's technically not secure.

8742
11:06:46,320 --> 11:06:50,320
So the thing is that this whole MPLS, it's just a routing mechanism.

8743
11:06:50,600 --> 11:06:52,000
There's no inherent encryption.

8744
11:06:52,800 --> 11:06:54,640
So that is another concern.

8745
11:06:54,920 --> 11:07:02,640
And also with the rise of cloud services, you still have to traverse the internet in many cases, which you're going to find out with SD-WAN next.

8746
11:07:02,960 --> 11:07:04,080
So let's get into that.

8747
11:07:08,560 --> 11:07:11,600
So let's set up a scenario as to why we'd want to use SD-WAN.

8748
11:07:11,600 --> 11:07:18,160
So here we have a diagram and we have our office and we want to connect it to our VNet that's in our Azure account.

8749
11:07:18,480 --> 11:07:20,560
So how would you connect those two?

8750
11:07:20,560 --> 11:07:25,680
Well, first you'd need to partner with a data center that's going to establish a express route.

8751
11:07:26,080 --> 11:07:30,720
And then in order for you to reach that data center, you're going to be traveling through your MPLS network.

8752
11:07:31,000 --> 11:07:36,960
And so now you have a straight path to your assets there in your VNet.

8753
11:07:38,000 --> 11:07:43,360
So that is pretty simple, but now imagine that your company also uses Office 365.

8754
11:07:43,360 --> 11:07:45,280
So how would you get there?

8755
11:07:45,520 --> 11:07:47,520
Well, you might think that you would take the same route.

8756
11:07:47,520 --> 11:07:57,600
So you go over the MPLS network, go through the partner data center, and then once you're in the Microsoft network, make your way to Office 365, and it's going to go out the same way, and that will work.

8757
11:07:58,400 --> 11:08:03,520
But it's not always the most efficient path, and in most cases, it actually isn't.

8758
11:08:03,760 --> 11:08:07,280
And for Office 365, you always want to take the route to the internet.

8759
11:08:07,280 --> 11:08:12,960
And the reason why is that Azure or Microsoft has these POPs all over the place.

8760
11:08:13,280 --> 11:08:14,800
So we saw POPs earlier.

8761
11:08:15,080 --> 11:08:15,640
earlier there.

8762
11:08:15,800 --> 11:08:26,040
But the thing is that if a POP is nearby, as soon as you enter the Microsoft network, you're moving like super, super, super fast, like incredibly fast, and you have a guarantee.

8763
11:08:26,520 --> 11:08:38,440
And so the thing is that you could just be a few hops away from the Microsoft network, and this will be a lot faster than if you were to go through this route here.

8764
11:08:38,760 --> 11:08:44,360
And also, it'd be a lot more cost-effective because you wouldn't have to pay for this and this, right, and all this stuff here.

8765
11:08:45,400 --> 11:08:50,680
But the thing is that it doesn't solve all our problems, and we still have to do a bunch of hopping.

8766
11:08:51,480 --> 11:08:55,880
And this is over the internet, so however many you have to get there might not be efficient.

8767
11:08:56,280 --> 11:08:58,600
And so this is where SD-WAN comes into play.

8768
11:08:59,720 --> 11:09:02,280
So SD-WAN stands for Software-Defined WAN.

8769
11:09:03,000 --> 11:09:16,360
And an SD-WAN decouples CPU-intensive tasks from routers such as the management, operation, and control plane that can be, and now all this stuff is being pushed into a central location remotely and virtually at your headquarters.

8770
11:09:16,600 --> 11:09:24,440
Since most Internet service providers support SD-WAN architecture, you can directly control the flow of your traffic through the Internet.

8771
11:09:25,080 --> 11:09:30,040
So SD-WAN can replace an LPS, so you traverse

8772
11:09:30,680 --> 11:09:33,080
the internet instead of a private network.

8773
11:09:33,560 --> 11:09:40,040
SD-WAN is more cost-effective and requires less configuration than an MPLS initially and at scale.

8774
11:09:40,760 --> 11:09:46,840
SD-WAN is secure because it will be using HTTPS, which is supported by your ISP.

8775
11:09:48,120 --> 11:09:55,960
And the SD-WAN, you are predetermining the path through the internet so you can perform the least amount of hops to the closest Azure point of presence.

8776
11:09:56,040 --> 11:09:59,800
So it's like getting the best of MPLS, but you're getting it to use the internet.

8777
11:10:00,720 --> 11:10:06,280
And also, because Azure has those nearby POPs, it's just a winning combination.

8778
11:10:06,600 --> 11:10:10,440
So the idea with virtual WAN is that you're pretty much just establishing a connection.

8779
11:10:10,680 --> 11:10:26,760
So the idea is that you deploy a VNet with a service endpoint on the edge of a region, which is called a hub, and then you're configuring virtual devices in your virtual WANs so your on-premise can connect to your hub, so it's the fastest route to your Azure cloud resources.

8780
11:10:26,920 --> 11:10:30,040
And there's a bunch of stuff on top of that, but hopefully that really

8781
11:10:30,440 --> 11:10:33,080
helps you understand what's the purpose of SD-WAN.

8782
11:10:33,640 --> 11:10:39,400
But the idea is that we have these routers and we've abstracted the stuff away, so now we can make the fastest route through the internet.

8783
11:10:39,400 --> 11:10:40,120
So there you go.

8784
11:10:45,400 --> 11:10:50,120
Hey, this is Andrew Brown from Exam Pro, and we are looking at Azure Virtual WAN cheat sheets.

8785
11:10:50,120 --> 11:10:51,080
Let's jump into it.

8786
11:10:51,160 --> 11:10:57,800
Azure Virtual WAN is a consolidated networking service that brings many networking security routing functionalities in a single operational interface.

8787
11:10:58,280 --> 11:11:03,560
These functionalities include branch connectivity, site-to-site VPN connectivity, remote user VPN.

8788
11:11:04,120 --> 11:11:14,120
Then you have for ExpressRoute for private connectivity, intra-cloud connectivity, VPN ExpressRoute, inter-connectivity, routing, Azure firewall encryption for private connectivity.

8789
11:11:14,120 --> 11:11:15,400
So it does a lot of stuff.

8790
11:11:15,480 --> 11:11:19,320
Azure Virtual WAN itself is a software-defined WAN, SD-WAN.

8791
11:11:19,320 --> 11:11:26,440
Azure Virtual WAN is a much better way to route traffic for branches, data centers, VNets, and cloud services.

8792
11:11:26,920 --> 11:11:29,880
A point of presence is an edge entry of the network.

8793
11:11:30,520 --> 11:11:32,280
Hop is when you change networks.

8794
11:11:32,520 --> 11:11:43,000
Now when we're talking about multi-protocol label switching, MPLS, I put this in here to help jog your memory why SD-WAN is so much better than MPLS LAN.

8795
11:11:43,280 --> 11:11:51,800
A network packet forward where instead of using IP addresses and layer 3 information to make forward decisions, an MPLS label is used to determine the shortest route to the destination.

8796
11:11:52,080 --> 11:11:56,720
And then you have software WAN, which we just talked about kind of here, so I probably should have moved these down

8797
11:11:56,840 --> 11:11:57,720
below, but that's okay.

8798
11:11:58,360 --> 11:12:09,880
Decouple CPU-intensive tasks from routers such as management operations control plane that can now be controlled in a central location remotely and virtually at your headquarters.

8799
11:12:10,120 --> 11:12:14,840
Replaces MPLS so you traverse the internet instead of a private network.

8800
11:12:14,920 --> 11:12:20,120
More cost-effective and requires less configuration than an NLPS initially at scale.

8801
11:12:20,280 --> 11:12:24,120
Secure because you will use HTTPS, which is supported by your ISP.

8802
11:12:24,120 --> 11:12:25,000
So there you go.

8803
11:12:29,960 --> 11:12:46,280
So virtual private networks, also known as VPNs, what they do is they extend a private network across a public network and enables your users to send and receive data across shared or public networks as if their computing devices were directly connected to the private network.

8804
11:12:46,840 --> 11:12:52,000
All right, and so now we have to talk about what is a virtual network gateway.

8805
11:12:52,000 --> 11:12:55,400
And so a virtual network gateway is the software of VPN device

8806
11:12:56,200 --> 11:12:58,200
for your Azure virtual network.

8807
11:12:58,200 --> 11:13:02,120
So that's how these devices are going to connect to your network.

8808
11:13:02,280 --> 11:13:09,400
So when you deploy a virtual network gateway, it will deploy 2 or more specialized VMs in specific subnets.

8809
11:13:09,720 --> 11:13:12,840
You need to create a gateway subnet.

8810
11:13:13,000 --> 11:13:17,320
And these deployed VMs contain routing tables and run specific gateway services.

8811
11:13:17,560 --> 11:13:20,360
You can choose the type of gateway you want it to be.

8812
11:13:20,440 --> 11:13:24,760
And this is going to determine whether you'd use something like VPN gateway or ExpressRoute gateway.

8813
11:13:24,920 --> 11:13:25,520
So it's a simple

8814
11:13:25,640 --> 11:13:34,120
As an option like that, but to really understand these virtual network gateways, we should just look at some VPN gateway design, so you understand why you're creating these things.

8815
11:13:38,440 --> 11:13:46,520
So, to understand VPN gateway, we need to understand the utility of the service, and so we'll look at some different topologies, and the first one is site-to-site.

8816
11:13:46,680 --> 11:13:47,640
This is when you connect...

8817
11:13:47,880 --> 11:13:51,240
Azure to on-premise data center or vice versa.

8818
11:13:51,560 --> 11:14:01,080
And the idea is you create a VPN gateway that's going to establish connection to your on-premise environment, creating an IPsec tunnel, which is a secure connection, IP connection there.

8819
11:14:01,240 --> 11:14:03,640
But you might be asking, well, isn't that what ExpressRoute is for?

8820
11:14:03,640 --> 11:14:07,000
Well, ExpressRoute goes through a edge partner.

8821
11:14:07,720 --> 11:14:09,680
So there's a lot more work involved in that setup.

8822
11:14:09,680 --> 11:14:11,000
This one just goes over the internet.

8823
11:14:11,240 --> 11:14:12,520
So it's not going to be as fast.

8824
11:14:12,960 --> 11:14:20,040
And there's some other downsides, but the idea is it's the easiest way to get connected from your on-premise to Azure.

8825
11:14:20,040 --> 11:14:21,280
The next one is multi-site.

8826
11:14:21,280 --> 11:14:24,360
This is when you connect Azure to multiple on-premise data centers.

8827
11:14:25,080 --> 11:14:30,760
So it's just like the same model, except there's more than one tunnel here to more than one site.

8828
11:14:31,480 --> 11:14:32,600
Then you have point-to-site.

8829
11:14:32,920 --> 11:14:35,840
This is when you connect Azure to multiple individual computers.

8830
11:14:35,840 --> 11:14:40,840
So imagine you have a bunch of employees around the world, and they have laptops, and they just need to connect

8831
11:14:41,720 --> 11:14:46,680
securely to the private VNet or just the VNet in general.

8832
11:14:46,960 --> 11:14:49,880
And so that's where we're going to need a VPN gateway.

8833
11:14:50,080 --> 11:14:51,440
And the last one is VNet to VNet.

8834
11:14:51,440 --> 11:14:57,640
This is where you're going to connect two VNets in two different regions and subscriptions or have different deployment models.

8835
11:14:58,480 --> 11:15:03,640
And so that's, again, those are transversing the internet in all these cases here.

8836
11:15:03,640 --> 11:15:04,920
But yeah, that's pretty much it.

8837
11:15:05,280 --> 11:15:09,400
And I guess I think that if you were to set up ExpressRoute, I think you'd have to set up VPN gateways anyway.

8838
11:15:10,040 --> 11:15:11,000
But anyway, that's

8839
11:15:11,480 --> 11:15:12,280
what that is there.

8840
11:15:12,280 --> 11:15:13,640
So hopefully that now makes sense.

8841
11:15:18,120 --> 11:15:22,600
Hey, this is Andy Brown from Exam Pro, and we are looking at Azure Virtual Network Gateway cheat sheet.

8842
11:15:22,600 --> 11:15:24,600
So let's jump into it, and this one's a short one.

8843
11:15:24,920 --> 11:15:35,840
So a VPN extends a private network across a public network and enables users to send and receive data across shared or public networks as if their computing devices were directly connected to the private network.

8844
11:15:35,840 --> 11:15:37,320
That's the basis of this cheat sheet.

8845
11:15:37,640 --> 11:15:41,200
So a Virtual Network Gateway, a VNG, is the software

8846
11:15:41,720 --> 11:15:44,400
VPN device for your VNET.

8847
11:15:44,680 --> 11:15:50,200
When you deploy a VNG, it will deploy two or more specialized VMs in specific subnets.

8848
11:15:50,200 --> 11:15:53,720
You need to create what is called a gateway subnet.

8849
11:15:54,040 --> 11:15:59,240
These deployed VMs contain routing tables and run specific gateway services.

8850
11:15:59,480 --> 11:16:04,360
You will choose gateway types and that will determine if it's a VPN or ExpressRoute gateway.

8851
11:16:05,040 --> 11:16:09,480
When you create a VPN gateway, you are generally designing for one or more topologies.

8852
11:16:09,720 --> 11:16:10,520
Let's run through it.

8853
11:16:10,680 --> 11:16:13,160
I feel like that O is not supposed to be there.

8854
11:16:13,160 --> 11:16:14,040
I cannot tell.

8855
11:16:14,040 --> 11:16:16,840
This is like topologies.

8856
11:16:17,160 --> 11:16:22,920
So you have site to site, you have multi-site, you have point to site, and then you have VNet to VNet.

8857
11:16:23,080 --> 11:16:24,120
So there you go.
